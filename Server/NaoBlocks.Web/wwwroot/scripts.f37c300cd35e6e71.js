(function(l,_){"function"==typeof define&&define.amd?define([],_):"object"==typeof exports?module.exports=_():l.Blockly=_()})(this,function(){const l={};var _=_||{};_.scope={},_.createTemplateTagFirstArg=function(t){return t.raw=t},_.createTemplateTagFirstArgWithRaw=function(t,e){return t.raw=e,t},_.arrayIteratorImpl=function(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}},_.arrayIterator=function(t){return{next:_.arrayIteratorImpl(t)}},_.makeIterator=function(t){var e=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):_.arrayIterator(t)},_.arrayFromIterator=function(t){for(var e,o=[];!(e=t.next()).done;)o.push(e.value);return o},_.arrayFromIterable=function(t){return t instanceof Array?t:_.arrayFromIterator(_.makeIterator(t))},_.owns=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},_.ASSUME_ES5=!1,_.ASSUME_NO_NATIVE_MAP=!1,_.ASSUME_NO_NATIVE_SET=!1,_.SIMPLE_FROUND_POLYFILL=!1,_.ISOLATE_POLYFILLS=!1,_.FORCE_POLYFILL_PROMISE=!1,_.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,_.defineProperty=_.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,o){return t==Array.prototype||t==Object.prototype||(t[e]=o.value),t},_.getGlobal=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var e=0;e<t.length;++e){var o=t[e];if(o&&o.Math==Math)return o}throw Error("Cannot find global object")},_.global=_.getGlobal(this),_.IS_SYMBOL_NATIVE="function"==typeof Symbol&&"symbol"==typeof Symbol("x"),_.TRUST_ES6_POLYFILLS=!_.ISOLATE_POLYFILLS||_.IS_SYMBOL_NATIVE,_.polyfills={},_.propertyToPolyfillSymbol={},_.POLYFILL_PREFIX="$jscp$",_.polyfill=function(t,e,o,r){e&&(_.ISOLATE_POLYFILLS?_.polyfillIsolated(t,e,o,r):_.polyfillUnisolated(t,e,o,r))},_.polyfillUnisolated=function(t,e,o,r){for(o=_.global,t=t.split("."),r=0;r<t.length-1;r++){var c=t[r];if(!(c in o))return;o=o[c]}(e=e(r=o[t=t[t.length-1]]))!=r&&null!=e&&_.defineProperty(o,t,{configurable:!0,writable:!0,value:e})},_.polyfillIsolated=function(t,e,o,r){var c=t.split(".");r=c[0],r=!(t=1===c.length)&&r in _.polyfills?_.polyfills:_.global;for(var h=0;h<c.length-1;h++){var k=c[h];if(!(k in r))return;r=r[k]}c=c[c.length-1],null!=(e=e(o=_.IS_SYMBOL_NATIVE&&"es6"===o?r[c]:null))&&(t?_.defineProperty(_.polyfills,c,{configurable:!0,writable:!0,value:e}):e!==o&&(void 0===_.propertyToPolyfillSymbol[c]&&(o=1e9*Math.random()>>>0,_.propertyToPolyfillSymbol[c]=_.IS_SYMBOL_NATIVE?_.global.Symbol(c):_.POLYFILL_PREFIX+o+"$"+c),_.defineProperty(r,_.propertyToPolyfillSymbol[c],{configurable:!0,writable:!0,value:e})))},_.assign=_.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(t,e){for(var o=1;o<arguments.length;o++){var r=arguments[o];if(r)for(var c in r)_.owns(r,c)&&(t[c]=r[c])}return t},_.polyfill("Object.assign",function(t){return t||_.assign},"es6","es3"),_.objectCreate=_.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(t){var e=function(){};return e.prototype=t,new e},_.getConstructImplementation=function(){if(_.TRUST_ES6_POLYFILLS&&typeof Reflect<"u"&&Reflect.construct){if(function t(){function o(){}return new o,Reflect.construct(o,[],function(){}),new o instanceof o}())return Reflect.construct;var e=Reflect.construct;return function(o,r,c){return o=e(o,r),c&&Reflect.setPrototypeOf(o,c.prototype),o}}return function(o,r,c){return void 0===c&&(c=o),c=_.objectCreate(c.prototype||Object.prototype),Function.prototype.apply.call(o,c,r)||c}},_.construct=_.getConstructImplementation(),_.underscoreProtoCanBeSet=function(){var e={};try{return e.__proto__={a:!0},e.a}catch{}return!1},_.setPrototypeOf=_.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:_.underscoreProtoCanBeSet()?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null,_.inherits=function(t,e){if(t.prototype=_.objectCreate(e.prototype),t.prototype.constructor=t,_.setPrototypeOf){var o=_.setPrototypeOf;o(t,e)}else for(o in e)if("prototype"!=o)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(e,o);r&&Object.defineProperty(t,o,r)}else t[o]=e[o];t.superClass_=e.prototype},_.polyfill("Reflect",function(t){return t||{}},"es6","es3"),_.polyfill("Reflect.construct",function(t){return _.construct},"es6","es3"),_.polyfill("Reflect.setPrototypeOf",function(t){if(t)return t;if(_.setPrototypeOf){var e=_.setPrototypeOf;return function(o,r){try{return e(o,r),!0}catch{return!1}}}return null},"es6","es5"),_.polyfill("globalThis",function(t){return t||_.global},"es_2020","es3"),_.checkStringArgs=function(t,e,o){if(null==t)throw new TypeError("The 'this' value for String.prototype."+o+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+o+" must not be a regular expression");return t+""},_.polyfill("String.prototype.startsWith",function(t){return t||function(e,o){var r=_.checkStringArgs(this,e,"startsWith"),c=r.length,h=(e+="").length;o=Math.max(0,Math.min(0|o,r.length));for(var k=0;k<h&&o<c;)if(r[o++]!=e[k++])return!1;return k>=h}},"es6","es3"),_.initSymbol=function(){},_.polyfill("Symbol",function(t){if(t)return t;var e=function(h,k){this.$jscomp$symbol$id_=h,_.defineProperty(this,"description",{configurable:!0,writable:!0,value:k})};e.prototype.toString=function(){return this.$jscomp$symbol$id_};var o="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0,c=function(h){if(this instanceof c)throw new TypeError("Symbol is not a constructor");return new e(o+(h||"")+"_"+r++,h)};return c},"es6","es3"),_.polyfill("Symbol.iterator",function(t){if(t)return t;t=Symbol("Symbol.iterator");for(var e="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),o=0;o<e.length;o++){var r=_.global[e[o]];"function"==typeof r&&"function"!=typeof r.prototype[t]&&_.defineProperty(r.prototype,t,{configurable:!0,writable:!0,value:function(){return _.iteratorPrototype(_.arrayIteratorImpl(this))}})}return t},"es6","es3"),_.iteratorPrototype=function(t){return(t={next:t})[Symbol.iterator]=function(){return this},t},_.iteratorFromArray=function(t,e){t instanceof String&&(t+="");var o=0,r=!1,c={next:function(){if(!r&&o<t.length){var h=o++;return{value:e(h,t[h]),done:!1}}return r=!0,{done:!0,value:void 0}}};return c[Symbol.iterator]=function(){return c},c},_.polyfill("Array.prototype.keys",function(t){return t||function(){return _.iteratorFromArray(this,function(e){return e})}},"es6","es3"),_.polyfill("Object.setPrototypeOf",function(t){return t||_.setPrototypeOf},"es6","es5"),_.polyfill("Array.prototype.values",function(t){return t||function(){return _.iteratorFromArray(this,function(e,o){return o})}},"es8","es3"),_.polyfill("Object.entries",function(t){return t||function(e){var r,o=[];for(r in e)_.owns(e,r)&&o.push([r,e[r]]);return o}},"es8","es3"),_.polyfill("Object.getOwnPropertySymbols",function(t){return t||function(){return[]}},"es6","es5"),_.polyfill("Reflect.ownKeys",function(t){return t||function(e){var o=[],r=Object.getOwnPropertyNames(e);e=Object.getOwnPropertySymbols(e);for(var c=0;c<r.length;c++)("jscomp_symbol_"==r[c].substring(0,14)?e:o).push(r[c]);return o.concat(e)}},"es6","es5"),_.polyfill("Object.getOwnPropertyDescriptors",function(t){return t||function(e){for(var o={},r=Reflect.ownKeys(e),c=0;c<r.length;c++)o[r[c]]=Object.getOwnPropertyDescriptor(e,r[c]);return o}},"es8","es5"),_.polyfill("Array.prototype.fill",function(t){return t||function(e,o,r){var c=this.length||0;for(0>o&&(o=Math.max(0,c+o)),(null==r||r>c)&&(r=c),0>(r=Number(r))&&(r=Math.max(0,c+r)),o=Number(o||0);o<r;o++)this[o]=e;return this}},"es6","es3"),_.typedArrayFill=function(t){return t||Array.prototype.fill},_.polyfill("Int8Array.prototype.fill",_.typedArrayFill,"es6","es5"),_.polyfill("Uint8Array.prototype.fill",_.typedArrayFill,"es6","es5"),_.polyfill("Uint8ClampedArray.prototype.fill",_.typedArrayFill,"es6","es5"),_.polyfill("Int16Array.prototype.fill",_.typedArrayFill,"es6","es5"),_.polyfill("Uint16Array.prototype.fill",_.typedArrayFill,"es6","es5"),_.polyfill("Int32Array.prototype.fill",_.typedArrayFill,"es6","es5"),_.polyfill("Uint32Array.prototype.fill",_.typedArrayFill,"es6","es5"),_.polyfill("Float32Array.prototype.fill",_.typedArrayFill,"es6","es5"),_.polyfill("Float64Array.prototype.fill",_.typedArrayFill,"es6","es5"),_.polyfill("Object.is",function(t){return t||function(e,o){return e===o?0!==e||1/e==1/o:e!=e&&o!=o}},"es6","es3"),_.polyfill("Array.prototype.includes",function(t){return t||function(e,o){var r=this;r instanceof String&&(r=String(r));var c=r.length;for(0>(o=o||0)&&(o=Math.max(o+c,0));o<c;o++){var h=r[o];if(h===e||Object.is(h,e))return!0}return!1}},"es7","es3"),_.polyfill("String.prototype.includes",function(t){return t||function(e,o){return-1!==_.checkStringArgs(this,e,"includes").indexOf(e,o||0)}},"es6","es3");var P=P||{};P.global=globalThis||root,P.define=function(t,e){return e},P.DEBUG=!1,P.DISALLOW_TEST_ONLY_CODE=!P.DEBUG,P.provide=function(t){},P.module=function(t){},P.module.get=function(t){},P.module.declareLegacyNamespace=function(){},P.setTestOnly=function(t){if(P.DISALLOW_TEST_ONLY_CODE)throw t=t||"",Error("Importing test-only code into non-debug environment"+(t?": "+t:"."))},P.require=function(t){},P.requireType=function(t){};var pn,u,$,cn,ht={warn:function(t,e,o,r){t=t+" was deprecated on "+e+" and will be deleted on "+o+".",r&&(t+="\nUse "+r+" instead."),console.warn(t)}},Vt={},je=!1;Vt.register=function(t){if(je)throw Error("CSS already injected");Array.isArray(t)?((0,ht.warn)("Registering CSS by passing an array of strings","September 2021","September 2022","css.register passing a multiline string"),Vt.content+="\n"+t.join("\n")):Vt.content+="\n"+t},Vt.inject=function(t,e){je||(je=!0,t&&(t=e.replace(/[\\/]$/,""),e=Vt.content.replace(/<<<PATH>>>/g,t),Vt.content="",(t=document.createElement("style")).id="blockly-common-style",e=document.createTextNode(e),t.appendChild(e),document.head.insertBefore(t,document.head.firstChild)))},Vt.content='\n  .blocklySvg {\n    background-color: #fff;\n    outline: none;\n    overflow: hidden;  /* IE overflows by default. */\n    position: absolute;\n    display: block;\n  }\n\n  .blocklyWidgetDiv {\n    display: none;\n    position: absolute;\n    z-index: 99999;  /* big value for bootstrap3 compatibility */\n  }\n\n  .injectionDiv {\n    height: 100%;\n    position: relative;\n    overflow: hidden;  /* So blocks in drag surface disappear at edges */\n    touch-action: none;\n  }\n\n  .blocklyNonSelectable {\n    user-select: none;\n    -ms-user-select: none;\n    -webkit-user-select: none;\n  }\n\n  .blocklyWsDragSurface {\n    display: none;\n    position: absolute;\n    top: 0;\n    left: 0;\n  }\n\n  /* Added as a separate rule with multiple classes to make it more specific\n     than a bootstrap rule that selects svg:root. See issue #1275 for context.\n  */\n  .blocklyWsDragSurface.blocklyOverflowVisible {\n    overflow: visible;\n  }\n\n  .blocklyBlockDragSurface {\n    display: none;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    overflow: visible !important;\n    z-index: 50;  /* Display below toolbox, but above everything else. */\n  }\n\n  .blocklyBlockCanvas.blocklyCanvasTransitioning,\n  .blocklyBubbleCanvas.blocklyCanvasTransitioning {\n    transition: transform .5s;\n  }\n\n  .blocklyTooltipDiv {\n    background-color: #ffffc7;\n    border: 1px solid #ddc;\n    box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);\n    color: #000;\n    display: none;\n    font: 9pt sans-serif;\n    opacity: .9;\n    padding: 2px;\n    position: absolute;\n    z-index: 100000;  /* big value for bootstrap3 compatibility */\n  }\n\n  .blocklyDropDownDiv {\n    position: absolute;\n    left: 0;\n    top: 0;\n    z-index: 1000;\n    display: none;\n    border: 1px solid;\n    border-color: #dadce0;\n    background-color: #fff;\n    border-radius: 2px;\n    padding: 4px;\n    box-shadow: 0 0 3px 1px rgba(0,0,0,.3);\n  }\n\n  .blocklyDropDownDiv.blocklyFocused {\n    box-shadow: 0 0 6px 1px rgba(0,0,0,.3);\n  }\n\n  .blocklyDropDownContent {\n    max-height: 300px;  // @todo: spec for maximum height.\n    overflow: auto;\n    overflow-x: hidden;\n    position: relative;\n  }\n\n  .blocklyDropDownArrow {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 16px;\n    height: 16px;\n    z-index: -1;\n    background-color: inherit;\n    border-color: inherit;\n  }\n\n  .blocklyDropDownButton {\n    display: inline-block;\n    float: left;\n    padding: 0;\n    margin: 4px;\n    border-radius: 4px;\n    outline: none;\n    border: 1px solid;\n    transition: box-shadow .1s;\n    cursor: pointer;\n  }\n\n  .blocklyArrowTop {\n    border-top: 1px solid;\n    border-left: 1px solid;\n    border-top-left-radius: 4px;\n    border-color: inherit;\n  }\n\n  .blocklyArrowBottom {\n    border-bottom: 1px solid;\n    border-right: 1px solid;\n    border-bottom-right-radius: 4px;\n    border-color: inherit;\n  }\n\n  .blocklyResizeSE {\n    cursor: se-resize;\n    fill: #aaa;\n  }\n\n  .blocklyResizeSW {\n    cursor: sw-resize;\n    fill: #aaa;\n  }\n\n  .blocklyResizeLine {\n    stroke: #515A5A;\n    stroke-width: 1;\n  }\n\n  .blocklyHighlightedConnectionPath {\n    fill: none;\n    stroke: #fc3;\n    stroke-width: 4px;\n  }\n\n  .blocklyPathLight {\n    fill: none;\n    stroke-linecap: round;\n    stroke-width: 1;\n  }\n\n  .blocklySelected>.blocklyPathLight {\n    display: none;\n  }\n\n  .blocklyDraggable {\n    /* backup for browsers (e.g. IE11) that don\'t support grab */\n    cursor: url("<<<PATH>>>/handopen.cur"), auto;\n    cursor: grab;\n    cursor: -webkit-grab;\n  }\n\n    /* backup for browsers (e.g. IE11) that don\'t support grabbing */\n  .blocklyDragging {\n    /* backup for browsers (e.g. IE11) that don\'t support grabbing */\n    cursor: url("<<<PATH>>>/handclosed.cur"), auto;\n    cursor: grabbing;\n    cursor: -webkit-grabbing;\n  }\n\n    /* Changes cursor on mouse down. Not effective in Firefox because of\n       https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */\n  .blocklyDraggable:active {\n    /* backup for browsers (e.g. IE11) that don\'t support grabbing */\n    cursor: url("<<<PATH>>>/handclosed.cur"), auto;\n    cursor: grabbing;\n    cursor: -webkit-grabbing;\n  }\n\n  /* Change the cursor on the whole drag surface in case the mouse gets\n     ahead of block during a drag. This way the cursor is still a closed hand.\n    */\n  .blocklyBlockDragSurface .blocklyDraggable {\n    /* backup for browsers (e.g. IE11) that don\'t support grabbing */\n    cursor: url("<<<PATH>>>/handclosed.cur"), auto;\n    cursor: grabbing;\n    cursor: -webkit-grabbing;\n  }\n\n  .blocklyDragging.blocklyDraggingDelete {\n    cursor: url("<<<PATH>>>/handdelete.cur"), auto;\n  }\n\n  .blocklyDragging>.blocklyPath,\n  .blocklyDragging>.blocklyPathLight {\n    fill-opacity: .8;\n    stroke-opacity: .8;\n  }\n\n  .blocklyDragging>.blocklyPathDark {\n    display: none;\n  }\n\n  .blocklyDisabled>.blocklyPath {\n    fill-opacity: .5;\n    stroke-opacity: .5;\n  }\n\n  .blocklyDisabled>.blocklyPathLight,\n  .blocklyDisabled>.blocklyPathDark {\n    display: none;\n  }\n\n  .blocklyInsertionMarker>.blocklyPath,\n  .blocklyInsertionMarker>.blocklyPathLight,\n  .blocklyInsertionMarker>.blocklyPathDark {\n    fill-opacity: .2;\n    stroke: none;\n  }\n\n  .blocklyMultilineText {\n    font-family: monospace;\n  }\n\n  .blocklyNonEditableText>text {\n    pointer-events: none;\n  }\n\n  .blocklyFlyout {\n    position: absolute;\n    z-index: 20;\n  }\n\n  .blocklyText text {\n    cursor: default;\n  }\n\n  /*\n    Don\'t allow users to select text.  It gets annoying when trying to\n    drag a block and selected text moves instead.\n  */\n  .blocklySvg text,\n  .blocklyBlockDragSurface text {\n    user-select: none;\n    -ms-user-select: none;\n    -webkit-user-select: none;\n    cursor: inherit;\n  }\n\n  .blocklyHidden {\n    display: none;\n  }\n\n  .blocklyFieldDropdown:not(.blocklyHidden) {\n    display: block;\n  }\n\n  .blocklyIconGroup {\n    cursor: default;\n  }\n\n  .blocklyIconGroup:not(:hover),\n  .blocklyIconGroupReadonly {\n    opacity: .6;\n  }\n\n  .blocklyIconShape {\n    fill: #00f;\n    stroke: #fff;\n    stroke-width: 1px;\n  }\n\n  .blocklyIconSymbol {\n    fill: #fff;\n  }\n\n  .blocklyMinimalBody {\n    margin: 0;\n    padding: 0;\n  }\n\n  .blocklyHtmlInput {\n    border: none;\n    border-radius: 4px;\n    height: 100%;\n    margin: 0;\n    outline: none;\n    padding: 0;\n    width: 100%;\n    text-align: center;\n    display: block;\n    box-sizing: border-box;\n  }\n\n  /* Edge and IE introduce a close icon when the input value is longer than a\n     certain length. This affects our sizing calculations of the text input.\n     Hiding the close icon to avoid that. */\n  .blocklyHtmlInput::-ms-clear {\n    display: none;\n  }\n\n  .blocklyMainBackground {\n    stroke-width: 1;\n    stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */\n  }\n\n  .blocklyMutatorBackground {\n    fill: #fff;\n    stroke: #ddd;\n    stroke-width: 1;\n  }\n\n  .blocklyFlyoutBackground {\n    fill: #ddd;\n    fill-opacity: .8;\n  }\n\n  .blocklyMainWorkspaceScrollbar {\n    z-index: 20;\n  }\n\n  .blocklyFlyoutScrollbar {\n    z-index: 30;\n  }\n\n  .blocklyScrollbarHorizontal,\n  .blocklyScrollbarVertical {\n    position: absolute;\n    outline: none;\n  }\n\n  .blocklyScrollbarBackground {\n    opacity: 0;\n  }\n\n  .blocklyScrollbarHandle {\n    fill: #ccc;\n  }\n\n  .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,\n  .blocklyScrollbarHandle:hover {\n    fill: #bbb;\n  }\n\n  /* Darken flyout scrollbars due to being on a grey background. */\n  /* By contrast, workspace scrollbars are on a white background. */\n  .blocklyFlyout .blocklyScrollbarHandle {\n    fill: #bbb;\n  }\n\n  .blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,\n  .blocklyFlyout .blocklyScrollbarHandle:hover {\n    fill: #aaa;\n  }\n\n  .blocklyInvalidInput {\n    background: #faa;\n  }\n\n  .blocklyVerticalMarker {\n    stroke-width: 3px;\n    fill: rgba(255,255,255,.5);\n    pointer-events: none;\n  }\n\n  .blocklyComputeCanvas {\n    position: absolute;\n    width: 0;\n    height: 0;\n  }\n\n  .blocklyNoPointerEvents {\n    pointer-events: none;\n  }\n\n  .blocklyContextMenu {\n    border-radius: 4px;\n    max-height: 100%;\n  }\n\n  .blocklyDropdownMenu {\n    border-radius: 2px;\n    padding: 0 !important;\n  }\n\n  .blocklyDropdownMenu .blocklyMenuItem {\n    /* 28px on the left for icon or checkbox. */\n    padding-left: 28px;\n  }\n\n  /* BiDi override for the resting state. */\n  .blocklyDropdownMenu .blocklyMenuItemRtl {\n    /* Flip left/right padding for BiDi. */\n    padding-left: 5px;\n    padding-right: 28px;\n  }\n\n  .blocklyWidgetDiv .blocklyMenu {\n    background: #fff;\n    border: 1px solid transparent;\n    box-shadow: 0 0 3px 1px rgba(0,0,0,.3);\n    font: normal 13px Arial, sans-serif;\n    margin: 0;\n    outline: none;\n    padding: 4px 0;\n    position: absolute;\n    overflow-y: auto;\n    overflow-x: hidden;\n    max-height: 100%;\n    z-index: 20000;  /* Arbitrary, but some apps depend on it... */\n  }\n\n  .blocklyWidgetDiv .blocklyMenu.blocklyFocused {\n    box-shadow: 0 0 6px 1px rgba(0,0,0,.3);\n  }\n\n  .blocklyDropDownDiv .blocklyMenu {\n    background: inherit;  /* Compatibility with gapi, reset from goog-menu */\n    border: inherit;  /* Compatibility with gapi, reset from goog-menu */\n    font: normal 13px "Helvetica Neue", Helvetica, sans-serif;\n    outline: none;\n    position: relative;  /* Compatibility with gapi, reset from goog-menu */\n    z-index: 20000;  /* Arbitrary, but some apps depend on it... */\n  }\n\n  /* State: resting. */\n  .blocklyMenuItem {\n    border: none;\n    color: #000;\n    cursor: pointer;\n    list-style: none;\n    margin: 0;\n    /* 7em on the right for shortcut. */\n    min-width: 7em;\n    padding: 6px 15px;\n    white-space: nowrap;\n  }\n\n  /* State: disabled. */\n  .blocklyMenuItemDisabled {\n    color: #ccc;\n    cursor: inherit;\n  }\n\n  /* State: hover. */\n  .blocklyMenuItemHighlight {\n    background-color: rgba(0,0,0,.1);\n  }\n\n  /* State: selected/checked. */\n  .blocklyMenuItemCheckbox {\n    height: 16px;\n    position: absolute;\n    width: 16px;\n  }\n\n  .blocklyMenuItemSelected .blocklyMenuItemCheckbox {\n    background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;\n    float: left;\n    margin-left: -24px;\n    position: static;  /* Scroll with the menu. */\n  }\n\n  .blocklyMenuItemRtl .blocklyMenuItemCheckbox {\n    float: right;\n    margin-right: -24px;\n  }\n',l.module$exports$Blockly$utils$string={startsWith:function(t,e){return 0===t.lastIndexOf(e,0)},shortestStringLength:function(t){return t.length?t.reduce(function(e,o){return e.length<o.length?e:o}).length:0},commonWordPrefix:function(t,e){if(!t.length)return 0;if(1===t.length)return t[0].length;var r,o=0;for(e=e||(0,l.module$exports$Blockly$utils$string.shortestStringLength)(t),r=0;r<e;r++){for(var c=t[0][r],h=1;h<t.length;h++)if(c!==t[h][r])return o;" "===c&&(o=r+1)}for(c=1;c<t.length;c++)if((h=t[c][r])&&" "!==h)return o;return e},commonWordSuffix:function(t,e){if(!t.length)return 0;if(1===t.length)return t[0].length;var r,o=0;for(e=e||(0,l.module$exports$Blockly$utils$string.shortestStringLength)(t),r=0;r<e;r++){for(var c=t[0].substr(-r-1,1),h=1;h<t.length;h++)if(c!==t[h].substr(-r-1,1))return o;" "===c&&(o=r+1)}for(c=1;c<t.length;c++)if((h=t[c].charAt(t[c].length-r-1))&&" "!==h)return o;return e},wrap:function(t,e){t=t.split("\n");for(var o=0;o<t.length;o++)t[o]=pn(t[o],e);return t.join("\n")}},pn=function(t,e){if(t.length<=e)return t;for(var o=t.trim().split(/\s+/),r=0;r<o.length;r++)o[r].length>e&&(e=o[r].length);var c=-1/0,h=1;do{r=c;var k=t;t=[],c=o.length/h;for(var C=1,G=0;G<o.length-1;G++)C<(G+1.5)/c?(C++,t[G]=!0):t[G]=!1;t=$(o,t,e),c=u(o,t,e),t=cn(o,t),h++}while(c>r);return k},u=function(t,e,o){for(var r=[0],c=[],h=0;h<t.length;h++)r[r.length-1]+=t[h].length,!0===e[h]?(r.push(0),c.push(t[h].charAt(t[h].length-1))):!1===e[h]&&r[r.length-1]++;for(t=Math.max.apply(Math,r),h=e=0;h<r.length;h++)e-=2*Math.pow(Math.abs(o-r[h]),1.5),e-=Math.pow(t-r[h],1.5),-1!==".?!".indexOf(c[h])?e+=o/3:-1!==",;)]}".indexOf(c[h])&&(e+=o/4);return 1<r.length&&r[r.length-1]<=r[r.length-2]&&(e+=.5),e},$=function(t,e,o){for(var c,r=u(t,e,o),h=0;h<e.length-1;h++)if(e[h]!==e[h+1]){var k=[].concat(e);k[h]=!k[h],k[h+1]=!k[h+1];var C=u(t,k,o);C>r&&(r=C,c=k)}return c?$(t,c,o):e},cn=function(t,e){for(var o=[],r=0;r<t.length;r++)o.push(t[r]),void 0!==e[r]&&o.push(e[r]?"\n":" ");return o.join("")},l.module$exports$Blockly$utils$string.isNumber=function(t){return/^\s*-?\d+(\.\d+)?\s*$/.test(t)},l.module$exports$Blockly$ConnectionType={ConnectionType:{INPUT_VALUE:1,OUTPUT_VALUE:2,NEXT_STATEMENT:3,PREVIOUS_STATEMENT:4}},l.module$exports$Blockly$internalConstants={LINE_MODE_MULTIPLIER:40,PAGE_MODE_MULTIPLIER:125,DRAG_RADIUS:5,FLYOUT_DRAG_RADIUS:10,SNAP_RADIUS:28},l.module$exports$Blockly$internalConstants.CONNECTING_SNAP_RADIUS=l.module$exports$Blockly$internalConstants.SNAP_RADIUS,l.module$exports$Blockly$internalConstants.CURRENT_CONNECTION_PREFERENCE=8,l.module$exports$Blockly$internalConstants.BUMP_DELAY=250,l.module$exports$Blockly$internalConstants.BUMP_RANDOMNESS=10,l.module$exports$Blockly$internalConstants.COLLAPSE_CHARS=30,l.module$exports$Blockly$internalConstants.LONGPRESS=750,l.module$exports$Blockly$internalConstants.SOUND_LIMIT=100,l.module$exports$Blockly$internalConstants.DRAG_STACK=!0,l.module$exports$Blockly$internalConstants.SPRITE={width:96,height:124,url:"sprites.png"},l.module$exports$Blockly$internalConstants.DRAG_NONE=0,l.module$exports$Blockly$internalConstants.DRAG_STICKY=1,l.module$exports$Blockly$internalConstants.DRAG_BEGIN=1,l.module$exports$Blockly$internalConstants.DRAG_FREE=2,l.module$exports$Blockly$internalConstants.OPPOSITE_TYPE=[],l.module$exports$Blockly$internalConstants.OPPOSITE_TYPE[l.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE]=l.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE,l.module$exports$Blockly$internalConstants.OPPOSITE_TYPE[l.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE]=l.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE,l.module$exports$Blockly$internalConstants.OPPOSITE_TYPE[l.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT]=l.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT,l.module$exports$Blockly$internalConstants.OPPOSITE_TYPE[l.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT]=l.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT,l.module$exports$Blockly$internalConstants.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",l.module$exports$Blockly$internalConstants.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",l.module$exports$Blockly$utils$global={},l.module$exports$Blockly$utils$global.globalThis=function(){return"object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:this}();var tt={};tt.TOUCH_ENABLED="ontouchstart"in l.module$exports$Blockly$utils$global.globalThis||!!(l.module$exports$Blockly$utils$global.globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!l.module$exports$Blockly$utils$global.globalThis.navigator||!l.module$exports$Blockly$utils$global.globalThis.navigator.maxTouchPoints&&!l.module$exports$Blockly$utils$global.globalThis.navigator.msMaxTouchPoints);var yo=null;tt.TOUCH_MAP={},l.module$exports$Blockly$utils$global.globalThis.PointerEvent?tt.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:tt.TOUCH_ENABLED&&(tt.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]});var Po=0;tt.longStart=function(t,e){(0,tt.longStop)(),t.changedTouches&&1!==t.changedTouches.length||(Po=setTimeout(function(){t.changedTouches&&(t.button=2,t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY),e&&e.handleRightClick(t)},l.module$exports$Blockly$internalConstants.LONGPRESS))},tt.longStop=function(){Po&&(clearTimeout(Po),Po=0)},tt.clearTouchIdentifier=function(){yo=null},tt.shouldHandleEvent=function(t){return!(0,tt.isMouseOrTouchEvent)(t)||(0,tt.checkTouchIdentifier)(t)},tt.getTouchIdentifierFromEvent=function(t){return void 0!==t.pointerId?t.pointerId:t.changedTouches&&t.changedTouches[0]&&null!=t.changedTouches[0].identifier?t.changedTouches[0].identifier:"mouse"},tt.checkTouchIdentifier=function(t){var e=(0,tt.getTouchIdentifierFromEvent)(t);return null!=yo?yo===e:("mousedown"===t.type||"touchstart"===t.type||"pointerdown"===t.type)&&(yo=e,!0)},tt.setClientFromTouch=function(t){if((0,l.module$exports$Blockly$utils$string.startsWith)(t.type,"touch")){var e=t.changedTouches[0];t.clientX=e.clientX,t.clientY=e.clientY}},tt.isMouseOrTouchEvent=function(t){return(0,l.module$exports$Blockly$utils$string.startsWith)(t.type,"touch")||(0,l.module$exports$Blockly$utils$string.startsWith)(t.type,"mouse")||(0,l.module$exports$Blockly$utils$string.startsWith)(t.type,"pointer")},tt.isTouchEvent=function(t){return(0,l.module$exports$Blockly$utils$string.startsWith)(t.type,"touch")||(0,l.module$exports$Blockly$utils$string.startsWith)(t.type,"pointer")},tt.splitEventByTouches=function(t){var e=[];if(t.changedTouches)for(var o=0;o<t.changedTouches.length;o++)e[o]={type:t.type,changedTouches:[t.changedTouches[o]],target:t.target,stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()}};else e.push(t);return e};var ot={};!function(t){function e(r){return-1!==o.indexOf(r.toUpperCase())}ot.raw=t;var o=ot.raw.toUpperCase();ot.IE=e("Trident")||e("MSIE"),ot.EDGE=e("Edge"),ot.JavaFx=e("JavaFX"),ot.CHROME=(e("Chrome")||e("CriOS"))&&!ot.EDGE,ot.WEBKIT=e("WebKit")&&!ot.EDGE,ot.GECKO=e("Gecko")&&!ot.WEBKIT&&!ot.IE&&!ot.EDGE,ot.ANDROID=e("Android"),t=l.module$exports$Blockly$utils$global.globalThis.navigator&&l.module$exports$Blockly$utils$global.globalThis.navigator.maxTouchPoints,ot.IPAD=e("iPad")||e("Macintosh")&&0<t,ot.IPOD=e("iPod"),ot.IPHONE=e("iPhone")&&!ot.IPAD&&!ot.IPOD,ot.MAC=e("Macintosh"),ot.TABLET=ot.IPAD||ot.ANDROID&&!e("Mobile")||e("Silk"),ot.MOBILE=!ot.TABLET&&(ot.IPOD||ot.IPHONE||ot.ANDROID||e("IEMobile"))}(l.module$exports$Blockly$utils$global.globalThis.navigator&&l.module$exports$Blockly$utils$global.globalThis.navigator.userAgent||"");var dn,g={conditionalBind:function(t,e,o,r,c,h){var k=!1,C=function(fe){var Lo=!c;fe=(0,tt.splitEventByTouches)(fe);for(var No=0;No<fe.length;No++){var Un=fe[No];(!Lo||(0,tt.shouldHandleEvent)(Un))&&((0,tt.setClientFromTouch)(Un),o?r.call(o,Un):r(Un),k=!0)}},G=[];if(l.module$exports$Blockly$utils$global.globalThis.PointerEvent&&e in tt.TOUCH_MAP)for(var j=0;j<tt.TOUCH_MAP[e].length;j++){var Et=tt.TOUCH_MAP[e][j];t.addEventListener(Et,C,!1),G.push([t,Et,C])}else if(t.addEventListener(e,C,!1),G.push([t,e,C]),e in tt.TOUCH_MAP)for(j=function(fe){C(fe),k&&!h&&fe.preventDefault()},Et=0;Et<tt.TOUCH_MAP[e].length;Et++){var le=tt.TOUCH_MAP[e][Et];t.addEventListener(le,j,!1),G.push([t,le,j])}return G},bind:function(t,e,o,r){var c=function(j){o?r.call(o,j):r(j)},h=[];if(l.module$exports$Blockly$utils$global.globalThis.PointerEvent&&e in tt.TOUCH_MAP)for(var k=0;k<tt.TOUCH_MAP[e].length;k++){var C=tt.TOUCH_MAP[e][k];t.addEventListener(C,c,!1),h.push([t,C,c])}else if(t.addEventListener(e,c,!1),h.push([t,e,c]),e in tt.TOUCH_MAP)for(k=function(j){if(j.changedTouches&&1===j.changedTouches.length){var Et=j.changedTouches[0];j.clientX=Et.clientX,j.clientY=Et.clientY}c(j),j.preventDefault()},C=0;C<tt.TOUCH_MAP[e].length;C++){var G=tt.TOUCH_MAP[e][C];t.addEventListener(G,k,!1),h.push([t,G,k])}return h},unbind:function(t){for(var e;t.length;)(e=t.pop())[0].removeEventListener(e[1],e=e[2],!1);return e},isTargetInput:function(t){return"textarea"===t.target.type||"text"===t.target.type||"number"===t.target.type||"email"===t.target.type||"password"===t.target.type||"search"===t.target.type||"tel"===t.target.type||"url"===t.target.type||t.target.isContentEditable||t.target.dataset&&"true"===t.target.dataset.isTextInput},isRightButton:function(t){return!(!t.ctrlKey||!ot.MAC)||2===t.button},mouseToSvg:function(t,e,o){var r=e.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,o||(o=e.getScreenCTM().inverse()),r.matrixTransform(o)},getScrollDeltaPixels:function(t){switch(t.deltaMode){default:return{x:t.deltaX,y:t.deltaY};case 1:return{x:t.deltaX*l.module$exports$Blockly$internalConstants.LINE_MODE_MULTIPLIER,y:t.deltaY*l.module$exports$Blockly$internalConstants.LINE_MODE_MULTIPLIER};case 2:return{x:t.deltaX*l.module$exports$Blockly$internalConstants.PAGE_MODE_MULTIPLIER,y:t.deltaY*l.module$exports$Blockly$internalConstants.PAGE_MODE_MULTIPLIER}}}};l.module$exports$Blockly$blocks={},l.module$exports$Blockly$blocks.Blocks=Object.create(null),l.module$exports$Blockly$common={},l.module$exports$Blockly$common.getMainWorkspace=function(){return dn},l.module$exports$Blockly$common.setMainWorkspace=function(t){dn=t};var xn,_n=null;l.module$exports$Blockly$common.getSelected=function(){return _n},l.module$exports$Blockly$common.setSelected=function(t){_n=t},l.module$exports$Blockly$common.getParentContainer=function(){return xn},l.module$exports$Blockly$common.setParentContainer=function(t){xn=t},l.module$exports$Blockly$common.svgResize=function(t){for(;t.options.parentWorkspace;)t=t.options.parentWorkspace;var e=t.getParentSvg(),o=t.getCachedParentSvgSize(),r=e.parentNode;if(r){var c=r.offsetWidth;r=r.offsetHeight,o.width!==c&&(e.setAttribute("width",c+"px"),t.setCachedParentSvgSize(c,null)),o.height!==r&&(e.setAttribute("height",r+"px"),t.setCachedParentSvgSize(null,r)),t.resize()}},l.module$exports$Blockly$common.draggingConnections=[],l.module$exports$Blockly$common.getBlockTypeCounts=function(t,e){var o=Object.create(null),r=t.getDescendants(!0);for(e&&(t=t.getNextBlock())&&(t=r.indexOf(t),r.splice(t,r.length-t)),t=0;e=r[t];t++)o[e.type]?o[e.type]++:o[e.type]=1;return o};var gn=function(t){return function(){this.jsonInit(t)}};l.module$exports$Blockly$common.defineBlocksWithJsonArray=function(t){for(var e=0;e<t.length;e++){var o=t[e];if(o){var r=o.type;r?(l.module$exports$Blockly$blocks.Blocks[r]&&console.warn("Block definition #"+e+' in JSON array overwrites prior definition of "'+r+'".'),l.module$exports$Blockly$blocks.Blocks[r]={init:gn(o)}):console.warn("Block definition #"+e+" in JSON array is missing a type attribute. Skipping.")}else console.warn("Block definition #"+e+" in JSON array is "+o+". Skipping.")}};var at={},Fo=!1;at.isVisible=function(){return Fo},Object.defineProperties(at,{visible:{get:function(){return(0,ht.warn)("Blockly.Tooltip.visible","September 2021","September 2022","Blockly.Tooltip.isVisible()"),(0,at.isVisible)()}}});var Tt=!1;at.LIMIT=50;var pe=0,mo=0,an=0,Bt=0,Me=null,Go=null;at.OFFSET_X=0,at.OFFSET_Y=10,at.RADIUS_OK=10,at.HOVER_MS=750,at.MARGINS=5;var w=null;at.getDiv=function(){return w},Object.defineProperties(at,{DIV:{get:function(){return(0,ht.warn)("Blockly.Tooltip.DIV","September 2021","September 2022","Blockly.Tooltip.getDiv()"),(0,at.getDiv)()}}}),at.getTooltipOfObject=function(t){if(t=Mt(t)){for(t=t.tooltip;"function"==typeof t;)t=t();if("string"!=typeof t)throw Error("Tooltip function must return a string.");return t}return""};var Mt=function(t){for(;t&&t.tooltip;){if("string"==typeof t.tooltip||"function"==typeof t.tooltip)return t;t=t.tooltip}return null};at.createDom=function(){w||((w=document.createElement("div")).className="blocklyTooltipDiv",((0,l.module$exports$Blockly$common.getParentContainer)()||document.body).appendChild(w))},at.bindMouseEvents=function(t){t.mouseOverWrapper_=(0,g.bind)(t,"mouseover",null,wn),t.mouseOutWrapper_=(0,g.bind)(t,"mouseout",null,O),t.addEventListener("mousemove",n,!1)},at.unbindMouseEvents=function(t){t&&((0,g.unbind)(t.mouseOverWrapper_),(0,g.unbind)(t.mouseOutWrapper_),t.removeEventListener("mousemove",n))};var wn=function(t){Tt||(t=Mt(t.currentTarget),Me!==t&&((0,at.hide)(),Go=null,Me=t),clearTimeout(pe))},O=function(t){Tt||(pe=setTimeout(function(){Go=Me=null,(0,at.hide)()},1),clearTimeout(mo))},n=function(t){if(Me&&Me.tooltip&&!Tt)if(Fo){var e=an-t.pageX;t=Bt-t.pageY,Math.sqrt(e*e+t*t)>at.RADIUS_OK&&(0,at.hide)()}else Go!==Me&&(clearTimeout(mo),an=t.pageX,Bt=t.pageY,mo=setTimeout(i,at.HOVER_MS))};at.dispose=function(){Go=Me=null,(0,at.hide)()},at.hide=function(){Fo&&(Fo=!1,w&&(w.style.display="none")),mo&&clearTimeout(mo)},at.block=function(){(0,at.hide)(),Tt=!0},at.unblock=function(){Tt=!1};var i=function(){if(!Tt&&(Go=Me,w)){w.textContent="";var t=(0,at.getTooltipOfObject)(Me);t=(t=(0,l.module$exports$Blockly$utils$string.wrap)(t,at.LIMIT)).split("\n");for(var e=0;e<t.length;e++){var o=document.createElement("div");o.appendChild(document.createTextNode(t[e])),w.appendChild(o)}t=Me.RTL,e=document.documentElement.clientWidth,o=document.documentElement.clientHeight,w.style.direction=t?"rtl":"ltr",w.style.display="block",Fo=!0;var r=an;r=t?r-(at.OFFSET_X+w.offsetWidth):r+at.OFFSET_X;var c=Bt+at.OFFSET_Y;c+w.offsetHeight>o+window.scrollY&&(c-=w.offsetHeight+2*at.OFFSET_Y),t?r=Math.max(at.MARGINS-window.scrollX,r):r+w.offsetWidth>e+window.scrollX-2*at.MARGINS&&(r=e-w.offsetWidth-2*at.MARGINS),w.style.top=c+"px",w.style.left=r+"px"}},s={SVG_NS:"http://www.w3.org/2000/svg",HTML_NS:"http://www.w3.org/1999/xhtml",XLINK_NS:"http://www.w3.org/1999/xlink",NodeType:{ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16}},a=null,p=0,y=null;s.createSvgElement=function(t,e,o){for(var r in t=document.createElementNS(s.SVG_NS,String(t)),e)t.setAttribute(r,e[r]);return document.body.runtimeStyle&&(t.runtimeStyle=t.currentStyle=t.style),o&&o.appendChild(t),t},s.addClass=function(t,e){var o=t.getAttribute("class")||"";return-1===(" "+o+" ").indexOf(" "+e+" ")&&(o&&(o+=" "),t.setAttribute("class",o+e),!0)},s.removeClasses=function(t,e){e=e.split(" ");for(var o=0;o<e.length;o++)(0,s.removeClass)(t,e[o])},s.removeClass=function(t,e){var o=t.getAttribute("class");if(-1===(" "+o+" ").indexOf(" "+e+" "))return!1;o=o.split(/\s+/);for(var r=0;r<o.length;r++)o[r]&&o[r]!==e||(o.splice(r,1),r--);return o.length?t.setAttribute("class",o.join(" ")):t.removeAttribute("class"),!0},s.hasClass=function(t,e){return-1!==(" "+t.getAttribute("class")+" ").indexOf(" "+e+" ")},s.removeNode=function(t){return t&&t.parentNode?t.parentNode.removeChild(t):null},s.insertAfter=function(t,e){var o=e.nextSibling;if(!(e=e.parentNode))throw Error("Reference node has no parent.");o?e.insertBefore(t,o):e.appendChild(t)},s.containsNode=function(t,e){return!!(t.compareDocumentPosition(e)&s.NodeType.DOCUMENT_POSITION_CONTAINED_BY)},s.setCssTransform=function(t,e){t.style.transform=e,t.style["-webkit-transform"]=e},s.startTextWidthCache=function(){p++,a||(a=Object.create(null))},s.stopTextWidthCache=function(){--p||(a=null)},s.getTextWidth=function(t){var o,e=t.textContent+"\n"+t.className.baseVal;if(a&&(o=a[e]))return o;try{o=ot.IE||ot.EDGE?t.getBBox().width:t.getComputedTextLength()}catch{return 8*t.textContent.length}return a&&(a[e]=o),o},s.getFastTextWidth=function(t,e,o,r){return(0,s.getFastTextWidthWithSizeString)(t,e+"pt",o,r)},s.getFastTextWidthWithSizeString=function(t,e,o,r){var h,c=t.textContent;return t=c+"\n"+t.className.baseVal,a&&(h=a[t])||(y||((h=document.createElement("canvas")).className="blocklyComputeCanvas",document.body.appendChild(h),y=h.getContext("2d")),y.font=o+" "+e+" "+r,h=y.measureText(c).width,a&&(a[t]=h)),h},s.measureFontMetrics=function(t,e,o,r){var c=document.createElement("span");c.style.font=o+" "+e+" "+r,c.textContent=t,(t=document.createElement("div")).style.width="1px",t.style.height=0,(e=document.createElement("div")).setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),e.appendChild(c),e.appendChild(t),document.body.appendChild(e),o={height:0,baseline:0};try{e.style.alignItems="baseline",o.baseline=t.offsetTop-c.offsetTop,e.style.alignItems="flex-end",o.height=t.offsetTop-c.offsetTop}finally{document.body.removeChild(e)}return o};var E,m={},v=null,R=null,d="",T="";m.getDiv=function(){return E},m.testOnly_setDiv=function(t){E=t},Object.defineProperties(m,{DIV:{get:function(){return(0,ht.warn)("Blockly.WidgetDiv.DIV","September 2021","September 2022","Blockly.WidgetDiv.getDiv()"),(0,m.getDiv)()}}}),m.createDom=function(){E||((E=document.createElement("div")).className="blocklyWidgetDiv",((0,l.module$exports$Blockly$common.getParentContainer)()||document.body).appendChild(E))},m.show=function(t,e,o){(0,m.hide)(),v=t,R=o,(t=E).style.direction=e?"rtl":"ltr",t.style.display="block",e=(0,l.module$exports$Blockly$common.getMainWorkspace)(),d=e.getRenderer().getClassName(),T=e.getTheme().getClassName(),(0,s.addClass)(t,d),(0,s.addClass)(t,T)},m.hide=function(){if((0,m.isVisible)()){v=null;var t=E;t.style.display="none",t.style.left="",t.style.top="",R&&R(),R=null,t.textContent="",d&&((0,s.removeClass)(t,d),d=""),T&&((0,s.removeClass)(t,T),T=""),(0,l.module$exports$Blockly$common.getMainWorkspace)().markFocused()}},m.isVisible=function(){return!!v},m.hideIfOwner=function(t){v===t&&(0,m.hide)()};var I=function(t,e,o){E.style.left=t+"px",E.style.top=e+"px",E.style.height=o+"px"};m.positionWithAnchor=function(t,e,o,r){var c=X(t,e,o);t=M(t,e,o,r),0>c?I(t,0,o.height+c):I(t,c,o.height)};var M=function(t,e,o,r){return r?Math.min(Math.max(e.right-o.width,t.left),t.right-o.width):Math.max(Math.min(e.left,t.right-o.width),t.left)},X=function(t,e,o){return e.bottom+o.height>=t.bottom?e.top-o.height:e.bottom},F={Role:{GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",LISTBOX:"listbox",MENU:"menu",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",OPTION:"option",PRESENTATION:"presentation",ROW:"row",TREE:"tree",TREEITEM:"treeitem"},State:{ACTIVEDESCENDANT:"activedescendant",COLCOUNT:"colcount",DISABLED:"disabled",EXPANDED:"expanded",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",ORIENTATION:"orientation",POSINSET:"posinset",ROWCOUNT:"rowcount",SELECTED:"selected",SETSIZE:"setsize",VALUEMAX:"valuemax",VALUEMIN:"valuemin"},setRole:function(t,e){t.setAttribute("role",e)},setState:function(t,e,o){Array.isArray(o)&&(o=o.join(" ")),t.setAttribute("aria-"+e,o)}},_t={TEST_ONLY:{}},Fe=0;_t.getNextUniqueId=function(){return"blockly-"+(Fe++).toString(36)};var Ge="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";_t.TEST_ONLY.genUid=function(){for(var t=Ge.length,e=[],o=0;20>o;o++)e[o]=Ge.charAt(Math.random()*t);return e.join("")},_t.genUid=function(){return _t.TEST_ONLY.genUid()};var x={},To=Object.create(null);x.TEST_ONLY={typeMap:To};var Mn=Object.create(null);x.DEFAULT="default",x.Type=function(t){this.name_=t},x.Type.prototype.toString=function(){return this.name_},x.Type.CONNECTION_CHECKER=new x.Type("connectionChecker"),x.Type.CURSOR=new x.Type("cursor"),x.Type.EVENT=new x.Type("event"),x.Type.FIELD=new x.Type("field"),x.Type.RENDERER=new x.Type("renderer"),x.Type.TOOLBOX=new x.Type("toolbox"),x.Type.THEME=new x.Type("theme"),x.Type.TOOLBOX_ITEM=new x.Type("toolboxItem"),x.Type.FLYOUTS_VERTICAL_TOOLBOX=new x.Type("flyoutsVerticalToolbox"),x.Type.FLYOUTS_HORIZONTAL_TOOLBOX=new x.Type("flyoutsHorizontalToolbox"),x.Type.METRICS_MANAGER=new x.Type("metricsManager"),x.Type.BLOCK_DRAGGER=new x.Type("blockDragger"),x.Type.SERIALIZER=new x.Type("serializer"),x.register=function(t,e,o,r){if(!(t instanceof x.Type)&&"string"!=typeof t||""===String(t).trim())throw Error('Invalid type "'+t+'". The type must be a non-empty string or a Blockly.registry.Type.');if(t=String(t).toLowerCase(),"string"!=typeof e||""===e.trim())throw Error('Invalid name "'+e+'". The name must be a non-empty string.');var c=e.toLowerCase();if(!o)throw Error("Can not register a null value");var h=To[t],k=Mn[t];if(h||(h=To[t]=Object.create(null),k=Mn[t]=Object.create(null)),bi(t,o),!r&&h[c])throw Error('Name "'+c+'" with type "'+t+'" already registered.');h[c]=o,k[c]=e};var bi=function(t,e){if(t===String(x.Type.FIELD)&&"function"!=typeof e.fromJson)throw Error('Type "'+t+'" must have a fromJson function')};x.unregister=function(t,e){t=String(t).toLowerCase(),e=e.toLowerCase();var o=To[t];o&&o[e]?(delete To[t][e],delete Mn[t][e]):console.warn("Unable to unregister ["+e+"]["+t+"] from the registry.")};var un=function(t,e,o){t=String(t).toLowerCase(),e=e.toLowerCase();var r=To[t];if(!r||!r[e]){if(e="Unable to find ["+e+"]["+t+"] in the registry.",o)throw Error(e+" You must require or register a "+t+" plugin.");return console.warn(e),null}return r[e]};x.hasItem=function(t,e){return t=String(t).toLowerCase(),e=e.toLowerCase(),!!(t=To[t])&&!!t[e]},x.getClass=function(t,e,o){return un(t,e,o)},x.getObject=function(t,e,o){return un(t,e,o)},x.getAllItems=function(t,e,o){t=String(t).toLowerCase();var r=To[t];if(!r){if(r="Unable to find ["+t+"] in the registry.",o)throw Error(r+" You must require or register a "+t+" plugin.");return console.warn(r),null}if(!e)return r;t=Mn[t],o=Object.create(null),e=Object.keys(r);for(var c=0;c<e.length;c++){var h=e[c];o[t[h]]=r[h]}return o},x.getClassFromOptions=function(t,e,o){return"function"==typeof(e=e.plugins[t.toString()]||x.DEFAULT)?e:(0,x.getClass)(t,e,o)};var f={},ti="",ko=!0;f.setRecordUndo=function(t){ko=t},f.getRecordUndo=function(){return ko};var On=0;f.CREATE="create",f.BLOCK_CREATE=f.CREATE,f.DELETE="delete",f.BLOCK_DELETE=f.DELETE,f.CHANGE="change",f.BLOCK_CHANGE=f.CHANGE,f.MOVE="move",f.BLOCK_MOVE=f.MOVE,f.VAR_CREATE="var_create",f.VAR_DELETE="var_delete",f.VAR_RENAME="var_rename",f.UI="ui",f.BLOCK_DRAG="drag",f.SELECTED="selected",f.CLICK="click",f.MARKER_MOVE="marker_move",f.BUBBLE_OPEN="bubble_open",f.TRASHCAN_OPEN="trashcan_open",f.TOOLBOX_ITEM_SELECT="toolbox_item_select",f.THEME_CHANGE="theme_change",f.VIEWPORT_CHANGE="viewport_change",f.COMMENT_CREATE="comment_create",f.COMMENT_DELETE="comment_delete",f.COMMENT_CHANGE="comment_change",f.COMMENT_MOVE="comment_move",f.FINISHED_LOADING="finished_loading",f.BUMP_EVENTS=[f.CREATE,f.MOVE,f.COMMENT_CREATE,f.COMMENT_MOVE];var Eo=[];f.fire=function(t){(0,f.isEnabled)()&&(Eo.length||setTimeout(Y,0),Eo.push(t))};var Y=function(){for(var o,t=(0,f.filter)(Eo,!0),e=Eo.length=0;o=t[e];e++)if(o.workspaceId){var r=Q.Workspace.getById(o.workspaceId);r&&r.fireChangeListener(o)}};f.filter=function(t,e){t=t.slice(),e||t.reverse();for(var o=[],r=Object.create(null),c=0,h=void 0;h=t[c];c++)if(!h.isNull()){var k=[h.isUiEvent?f.UI:h.type,h.blockId,h.workspaceId].join(" "),C=r[k],G=C?C.event:null;C?h.type===f.MOVE&&C.index===c-1?(G.newParentId=h.newParentId,G.newInputName=h.newInputName,G.newCoordinate=h.newCoordinate,C.index=c):h.type===f.CHANGE&&h.element===G.element&&h.name===G.name?G.newValue=h.newValue:h.type===f.VIEWPORT_CHANGE?(G.viewTop=h.viewTop,G.viewLeft=h.viewLeft,G.scale=h.scale,G.oldScale=h.oldScale):(h.type!==f.CLICK||G.type!==f.BUBBLE_OPEN)&&(r[k]={event:h,index:c},o.push(h)):(r[k]={event:h,index:c},o.push(h))}for(t=o.filter(function(j){return!j.isNull()}),e||t.reverse(),e=1,o=void 0;o=t[e];e++)o.type===f.CHANGE&&"mutation"===o.element&&t.unshift(t.splice(e,1)[0]);return t},f.clearPendingUndo=function(){for(var e,t=0;e=Eo[t];t++)e.recordUndo=!1},f.disable=function(){On++},f.enable=function(){On--},f.isEnabled=function(){return 0===On},f.getGroup=function(){return ti},f.setGroup=function(t){ti="boolean"==typeof t?t?(0,_t.genUid)():"":t},f.getDescendantIds=function(t){var e=[];t=t.getDescendants(!1);for(var r,o=0;r=t[o];o++)e[o]=r.id;return e},f.fromJson=function(t,e){var o=(0,f.get)(t.type);if(!o)throw Error("Unknown event type.");return(o=new o).fromJson(t),o.workspaceId=e.id,o},f.get=function(t){return(0,x.getClass)(x.Type.EVENT,t)},f.disableOrphans=function(t){if((t.type===f.MOVE||t.type===f.CREATE)&&t.workspaceId){var e=Q.Workspace.getById(t.workspaceId),o=e.getBlockById(t.blockId);if(o){t=ko;try{ko=!1;var r=o.getParent();if(r&&r.isEnabled()){var c=o.getDescendants(!1);for(e=0,r=void 0;r=c[e];e++)r.setEnabled(!0)}else if((o.outputConnection||o.previousConnection)&&!e.isDragging())do{o.setEnabled(!1),o=o.getNextBlock()}while(o)}finally{ko=t}}}},f.TEST_ONLY={FIRE_QUEUE:Eo,fireNow:Y};var V={toRadians:function(t){return t*Math.PI/180},toDegrees:function(t){return 180*t/Math.PI},clamp:function(t,e,o){if(o<t){var r=o;o=t,t=r}return Math.max(t,Math.min(e,o))}},rt={bumpIntoBounds:function(t,e,o){var r=o.getBoundingRectangle(),c=r.right-r.left,h=(0,V.clamp)(e.top,r.top,e.top+e.height-(r.bottom-r.top))-r.top,k=e.left;return e=e.left+e.width-c,t.RTL?k=Math.min(e,k):e=Math.max(k,e),!(!(t=(0,V.clamp)(k,r.left,e)-r.left)&&!h||(o.moveBy(t,h),0))},bumpIntoBoundsHandler:function(t){return function(e){var o=t.getMetricsManager();if(o.hasFixedEdges()&&!t.isDragging())if(-1!==f.BUMP_EVENTS.indexOf(e.type)){o=o.getScrollMetrics(!0);var r=lt(t,e);if(r){var c=(0,f.getGroup)();(0,f.setGroup)(e.group),(0,rt.bumpIntoBounds)(t,o,r)&&!e.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),null!==c&&(0,f.setGroup)(c)}}else e.type===f.VIEWPORT_CHANGE&&e.scale>e.oldScale&&(0,rt.bumpTopObjectsIntoBounds)(t)}}},lt=function(t,e){var o=null;switch(e.type){case f.CREATE:case f.MOVE:(o=t.getBlockById(e.blockId))&&(o=o.getRootBlock());break;case f.COMMENT_CREATE:case f.COMMENT_MOVE:o=t.getCommentById(e.commentId)}return o};rt.bumpTopObjectsIntoBounds=function(t){var e=t.getMetricsManager();if(e.hasFixedEdges()&&!t.isDragging()){e=e.getScrollMetrics(!0);for(var c,o=t.getTopBoundedElements(),r=0;c=o[r];r++)(0,rt.bumpIntoBounds)(t,e,c)}};var N={Coordinate:function(t,e){this.x=t,this.y=e}};N.Coordinate.equals=function(t,e){return t===e||!(!t||!e)&&t.x===e.x&&t.y===e.y},N.Coordinate.distance=function(t,e){var o=t.x-e.x;return t=t.y-e.y,Math.sqrt(o*o+t*t)},N.Coordinate.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},N.Coordinate.difference=function(t,e){return new N.Coordinate(t.x-e.x,t.y-e.y)},N.Coordinate.sum=function(t,e){return new N.Coordinate(t.x+e.x,t.y+e.y)},N.Coordinate.prototype.clone=function(){return new N.Coordinate(this.x,this.y)},N.Coordinate.prototype.scale=function(t){return this.x*=t,this.y*=t,this},N.Coordinate.prototype.translate=function(t,e){return this.x+=t,this.y+=e,this};var et={Size:function(t,e){this.width=t,this.height=e}};et.Size.equals=function(t,e){return t===e||!(!t||!e)&&t.width===e.width&&t.height===e.height};var q={getSize:function(t){if("none"!==$t(t,"display"))return ft(t);var e=t.style,o=e.display,r=e.visibility,c=e.position;e.visibility="hidden",e.position="absolute",e.display="inline";var h=t.offsetWidth;return t=t.offsetHeight,e.display=o,e.position=c,e.visibility=r,new et.Size(h,t)}},ft=function(t){return new et.Size(t.offsetWidth,t.offsetHeight)},$t=function(t,e){return(0,q.getComputedStyle)(t,e)||(0,q.getCascadedStyle)(t,e)||t.style&&t.style[e]};q.getComputedStyle=function(t,e){return document.defaultView&&document.defaultView.getComputedStyle&&(t=document.defaultView.getComputedStyle(t,null))&&(t[e]||t.getPropertyValue(e))||""},q.getCascadedStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:null},q.getPageOffset=function(t){var e=new N.Coordinate(0,0);t=t.getBoundingClientRect();var o=document.documentElement;return o=new N.Coordinate(window.pageXOffset||o.scrollLeft,window.pageYOffset||o.scrollTop),e.x=t.left+o.x,e.y=t.top+o.y,e},q.getViewportPageOffset=function(){var t=document.body,e=document.documentElement;return new N.Coordinate(t.scrollLeft||e.scrollLeft,t.scrollTop||e.scrollTop)},q.setElementShown=function(t,e){t.style.display=e?"":"none"},q.isRightToLeft=function(t){return"rtl"===$t(t,"direction")},q.getBorderBox=function(t){var e=(0,q.getComputedStyle)(t,"borderLeftWidth"),o=(0,q.getComputedStyle)(t,"borderRightWidth"),r=(0,q.getComputedStyle)(t,"borderTopWidth");return t=(0,q.getComputedStyle)(t,"borderBottomWidth"),{top:parseFloat(r),right:parseFloat(o),bottom:parseFloat(t),left:parseFloat(e)}},q.scrollIntoContainerView=function(t,e,o){t=(0,q.getContainerOffsetToScrollInto)(t,e,o),e.scrollLeft=t.x,e.scrollTop=t.y},q.getContainerOffsetToScrollInto=function(t,e,o){var r=(0,q.getPageOffset)(t),c=(0,q.getPageOffset)(e),h=(0,q.getBorderBox)(e),k=r.x-c.x-h.left;return r=r.y-c.y-h.top,c=ft(t),t=e.clientWidth-c.width,c=e.clientHeight-c.height,h=e.scrollLeft,e=e.scrollTop,o?(h+=k-t/2,e+=r-c/2):(h+=Math.min(k,Math.max(k-t,0)),e+=Math.min(r,Math.max(r-c,0))),new N.Coordinate(h,e)};var yt={Rect:function(t,e,o,r){this.top=t,this.bottom=e,this.left=o,this.right=r}};yt.Rect.prototype.contains=function(t,e){return t>=this.left&&t<=this.right&&e>=this.top&&e<=this.bottom},yt.Rect.prototype.intersects=function(t){return!(this.left>t.right||this.right<t.left||this.top>t.bottom||this.bottom<t.top)};var dt={},ie=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,jt=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/;dt.getRelativeXY=function(t){var e=new N.Coordinate(0,0),o=t.getAttribute("x");return o&&(e.x=parseInt(o,10)),(o=t.getAttribute("y"))&&(e.y=parseInt(o,10)),(o=(o=t.getAttribute("transform"))&&o.match(ie))&&(e.x+=Number(o[1]),o[3]&&(e.y+=Number(o[3]))),(t=t.getAttribute("style"))&&-1<t.indexOf("translate")&&(t=t.match(jt))&&(e.x+=Number(t[1]),t[3]&&(e.y+=Number(t[3]))),e},dt.getInjectionDivXY=function(t){for(var e=0,o=0;t;){var r=(0,dt.getRelativeXY)(t);if(e+=r.x,o+=r.y,-1!==(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;t=t.parentNode}return new N.Coordinate(e,o)},dt.is3dSupported=function(){if(void 0!==dt.is3dSupported.cached_)return dt.is3dSupported.cached_;if(!l.module$exports$Blockly$utils$global.globalThis.getComputedStyle)return!1;var t=document.createElement("p"),e="none",o={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var r in document.body.insertBefore(t,null),o)if(void 0!==t.style[r]){if(t.style[r]="translate3d(1px,1px,1px)",!(e=l.module$exports$Blockly$utils$global.globalThis.getComputedStyle(t)))return document.body.removeChild(t),!1;e=e.getPropertyValue(o[r])}return document.body.removeChild(t),dt.is3dSupported.cached_="none"!==e,dt.is3dSupported.cached_},dt.getViewportBBox=function(){var t=(0,q.getViewportPageOffset)();return new yt.Rect(t.y,document.documentElement.clientHeight+t.y,t.x,document.documentElement.clientWidth+t.x)},dt.getDocumentScroll=function(){var t=document.documentElement,e=window;return ot.IE&&e.pageYOffset!==t.scrollTop?new N.Coordinate(t.scrollLeft,t.scrollTop):new N.Coordinate(e.pageXOffset||t.scrollLeft,e.pageYOffset||t.scrollTop)},dt.screenToWsCoordinates=function(t,e){var o=e.x;e=e.y;var r=t.getInjectionDiv().getBoundingClientRect();return o=new N.Coordinate(o-r.left,e-r.top),e=t.getOriginOffsetInPixels(),N.Coordinate.difference(o,e).scale(1/t.scale)},dt.svgSize=function(t){return(0,ht.warn)("Blockly.svgSize","March 2021","March 2022","workspace.getCachedParentSvgSize"),new et.Size(t.cachedWidth_,t.cachedHeight_)},dt.TEST_ONLY={XY_REGEX:ie,XY_STYLE_REGEX:jt};var B={Svg:function(t){this.tagName_=t}};B.Svg.prototype.toString=function(){return this.tagName_},B.Svg.ANIMATE=new B.Svg("animate"),B.Svg.CIRCLE=new B.Svg("circle"),B.Svg.CLIPPATH=new B.Svg("clipPath"),B.Svg.DEFS=new B.Svg("defs"),B.Svg.FECOMPOSITE=new B.Svg("feComposite"),B.Svg.FECOMPONENTTRANSFER=new B.Svg("feComponentTransfer"),B.Svg.FEFLOOD=new B.Svg("feFlood"),B.Svg.FEFUNCA=new B.Svg("feFuncA"),B.Svg.FEGAUSSIANBLUR=new B.Svg("feGaussianBlur"),B.Svg.FEPOINTLIGHT=new B.Svg("fePointLight"),B.Svg.FESPECULARLIGHTING=new B.Svg("feSpecularLighting"),B.Svg.FILTER=new B.Svg("filter"),B.Svg.FOREIGNOBJECT=new B.Svg("foreignObject"),B.Svg.G=new B.Svg("g"),B.Svg.IMAGE=new B.Svg("image"),B.Svg.LINE=new B.Svg("line"),B.Svg.PATH=new B.Svg("path"),B.Svg.PATTERN=new B.Svg("pattern"),B.Svg.POLYGON=new B.Svg("polygon"),B.Svg.RECT=new B.Svg("rect"),B.Svg.SVG=new B.Svg("svg"),B.Svg.TEXT=new B.Svg("text"),B.Svg.TSPAN=new B.Svg("tspan");var Ot={BlockDragSurfaceSvg:function(t){this.container_=t,this.createDom()}};Ot.BlockDragSurfaceSvg.prototype.SVG_=null,Ot.BlockDragSurfaceSvg.prototype.dragGroup_=null,Ot.BlockDragSurfaceSvg.prototype.container_=null,Ot.BlockDragSurfaceSvg.prototype.scale_=1,Ot.BlockDragSurfaceSvg.prototype.surfaceXY_=null,Ot.BlockDragSurfaceSvg.prototype.childSurfaceXY_=new N.Coordinate(0,0),Ot.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=(0,s.createSvgElement)(B.Svg.SVG,{xmlns:s.SVG_NS,"xmlns:html":s.HTML_NS,"xmlns:xlink":s.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),this.dragGroup_=(0,s.createSvgElement)(B.Svg.G,{},this.SVG_))},Ot.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(t){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(t),this.SVG_.style.display="block",this.surfaceXY_=new N.Coordinate(0,0)},Ot.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(t,e,o){this.scale_=o,t=t.toFixed(0),e=e.toFixed(0),this.childSurfaceXY_.x=parseInt(t,10),this.childSurfaceXY_.y=parseInt(e,10),this.dragGroup_.setAttribute("transform","translate("+t+","+e+") scale("+o+")")},Ot.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var t=this.surfaceXY_.x,e=this.surfaceXY_.y;t=t.toFixed(0),e=e.toFixed(0),this.SVG_.style.display="block",(0,s.setCssTransform)(this.SVG_,"translate3d("+t+"px, "+e+"px, 0)")},Ot.BlockDragSurfaceSvg.prototype.translateBy=function(t,e){this.surfaceXY_=new N.Coordinate(this.surfaceXY_.x+t,this.surfaceXY_.y+e),this.translateSurfaceInternal_()},Ot.BlockDragSurfaceSvg.prototype.translateSurface=function(t,e){this.surfaceXY_=new N.Coordinate(t*this.scale_,e*this.scale_),this.translateSurfaceInternal_()},Ot.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var t=(0,dt.getRelativeXY)(this.SVG_);return new N.Coordinate(t.x/this.scale_,t.y/this.scale_)},Ot.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},Ot.BlockDragSurfaceSvg.prototype.getSvgRoot=function(){return this.SVG_},Ot.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},Ot.BlockDragSurfaceSvg.prototype.getWsTranslation=function(){return this.childSurfaceXY_.clone()},Ot.BlockDragSurfaceSvg.prototype.clearAndHide=function(t){if(t?t.appendChild(this.getCurrentBlock()):this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null};var D={DropDownDiv:function(){}};D.DropDownDiv.ARROW_SIZE=16,D.DropDownDiv.BORDER_SIZE=1,D.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,D.DropDownDiv.PADDING_Y=16,D.DropDownDiv.ANIMATION_TIME=.25,D.DropDownDiv.animateOutTimer_=null,D.DropDownDiv.onHide_=null,D.DropDownDiv.rendererClassName_="",D.DropDownDiv.themeClassName_="",D.DropDownDiv.boundsElement_=null,D.DropDownDiv.owner_=null,D.DropDownDiv.positionToField_=null,D.DropDownDiv.createDom=function(){if(!D.DropDownDiv.DIV_){var t=document.createElement("div");t.className="blocklyDropDownDiv",((0,l.module$exports$Blockly$common.getParentContainer)()||document.body).appendChild(t),D.DropDownDiv.DIV_=t,(t=document.createElement("div")).className="blocklyDropDownContent",D.DropDownDiv.DIV_.appendChild(t),D.DropDownDiv.content_=t,(t=document.createElement("div")).className="blocklyDropDownArrow",D.DropDownDiv.DIV_.appendChild(t),D.DropDownDiv.arrow_=t,D.DropDownDiv.DIV_.style.opacity=0,D.DropDownDiv.DIV_.style.transition="transform "+D.DropDownDiv.ANIMATION_TIME+"s, opacity "+D.DropDownDiv.ANIMATION_TIME+"s",D.DropDownDiv.DIV_.addEventListener("focusin",function(){(0,s.addClass)(D.DropDownDiv.DIV_,"blocklyFocused")}),D.DropDownDiv.DIV_.addEventListener("focusout",function(){(0,s.removeClass)(D.DropDownDiv.DIV_,"blocklyFocused")})}},D.DropDownDiv.setBoundsElement=function(t){D.DropDownDiv.boundsElement_=t},D.DropDownDiv.getContentDiv=function(){return D.DropDownDiv.content_},D.DropDownDiv.clearContent=function(){D.DropDownDiv.content_.textContent="",D.DropDownDiv.content_.style.width=""},D.DropDownDiv.setColour=function(t,e){D.DropDownDiv.DIV_.style.backgroundColor=t,D.DropDownDiv.DIV_.style.borderColor=e},D.DropDownDiv.showPositionedByBlock=function(t,e,o,r){return Kt(Ue(e),t,o,r)},D.DropDownDiv.showPositionedByField=function(t,e,o){return D.DropDownDiv.positionToField_=!0,Kt(Uo(t),t,e,o)};var te={},Ue=function(t){var e=t.getSvgRoot(),o=e.getBBox(),r=t.workspace.scale;return t=o.height*r,o=o.width*r,e=(0,q.getPageOffset)(e),new yt.Rect(e.y,e.y+t,e.x,e.x+o)},Uo=function(t){return t=t.getScaledBBox(),new yt.Rect(t.top,t.bottom,t.left,t.right)},Kt=function(t,e,o,r){var c=t.left+(t.right-t.left)/2,h=t.bottom;t=t.top,r&&(t+=r);for(var k=(r=e.getSourceBlock()).workspace;k.options.parentWorkspace;)k=k.options.parentWorkspace;return D.DropDownDiv.setBoundsElement(k.getParentSvg().parentNode),D.DropDownDiv.show(e,r.RTL,c,h,c,t,o)};D.DropDownDiv.show=function(t,e,o,r,c,h,k){return D.DropDownDiv.owner_=t,D.DropDownDiv.onHide_=k||null,(t=D.DropDownDiv.DIV_).style.direction=e?"rtl":"ltr",e=(0,l.module$exports$Blockly$common.getMainWorkspace)(),D.DropDownDiv.rendererClassName_=e.getRenderer().getClassName(),D.DropDownDiv.themeClassName_=e.getTheme().getClassName(),(0,s.addClass)(t,D.DropDownDiv.rendererClassName_),(0,s.addClass)(t,D.DropDownDiv.themeClassName_),ve(o,r,c,h)},te.getBoundsInfo=function(){var t=(0,q.getPageOffset)(D.DropDownDiv.boundsElement_),e=(0,q.getSize)(D.DropDownDiv.boundsElement_);return{left:t.x,right:t.x+e.width,top:t.y,bottom:t.y+e.height,width:e.width,height:e.height}},te.getPositionMetrics=function(t,e,o,r){var c=te.getBoundsInfo(),h=(0,q.getSize)(D.DropDownDiv.DIV_);return e+h.height<c.bottom?Ho(t,e,c,h):r-h.height>c.top?vo(o,r,c,h):e+h.height<document.documentElement.clientHeight?Ho(t,e,c,h):r-h.height>document.documentElement.clientTop?vo(o,r,c,h):io(t,c,h)};var Ho=function(t,e,o,r){return{initialX:(t=D.DropDownDiv.getPositionX(t,o.left,o.right,r.width)).divX,initialY:e,finalX:t.divX,finalY:e+D.DropDownDiv.PADDING_Y,arrowX:t.arrowX,arrowY:-(D.DropDownDiv.ARROW_SIZE/2+D.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}},vo=function(t,e,o,r){return{initialX:(t=D.DropDownDiv.getPositionX(t,o.left,o.right,r.width)).divX,initialY:e-r.height,finalX:t.divX,finalY:e-r.height-D.DropDownDiv.PADDING_Y,arrowX:t.arrowX,arrowY:r.height-2*D.DropDownDiv.BORDER_SIZE-D.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}},io=function(t,e,o){return{initialX:(t=D.DropDownDiv.getPositionX(t,e.left,e.right,o.width)).divX,initialY:0,finalX:t.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}};D.DropDownDiv.getPositionX=function(t,e,o,r){return e=(0,V.clamp)(e,t-r/2,o-r),{arrowX:t=(0,V.clamp)(o=D.DropDownDiv.ARROW_HORIZONTAL_PADDING,t=t-D.DropDownDiv.ARROW_SIZE/2-e,r-o-D.DropDownDiv.ARROW_SIZE),divX:e}},D.DropDownDiv.isVisible=function(){return!!D.DropDownDiv.owner_},D.DropDownDiv.hideIfOwner=function(t,e){return D.DropDownDiv.owner_===t&&(e?D.DropDownDiv.hideWithoutAnimation():D.DropDownDiv.hide(),!0)},D.DropDownDiv.hide=function(){D.DropDownDiv.DIV_.style.transform="translate(0, 0)",D.DropDownDiv.DIV_.style.opacity=0,D.DropDownDiv.animateOutTimer_=setTimeout(function(){D.DropDownDiv.hideWithoutAnimation()},1e3*D.DropDownDiv.ANIMATION_TIME),D.DropDownDiv.onHide_&&(D.DropDownDiv.onHide_(),D.DropDownDiv.onHide_=null)},D.DropDownDiv.hideWithoutAnimation=function(){if(D.DropDownDiv.isVisible()){D.DropDownDiv.animateOutTimer_&&clearTimeout(D.DropDownDiv.animateOutTimer_);var t=D.DropDownDiv.DIV_;t.style.transform="",t.style.left="",t.style.top="",t.style.opacity=0,t.style.display="none",t.style.backgroundColor="",t.style.borderColor="",D.DropDownDiv.onHide_&&(D.DropDownDiv.onHide_(),D.DropDownDiv.onHide_=null),D.DropDownDiv.clearContent(),D.DropDownDiv.owner_=null,D.DropDownDiv.rendererClassName_&&((0,s.removeClass)(t,D.DropDownDiv.rendererClassName_),D.DropDownDiv.rendererClassName_=""),D.DropDownDiv.themeClassName_&&((0,s.removeClass)(t,D.DropDownDiv.themeClassName_),D.DropDownDiv.themeClassName_=""),(0,l.module$exports$Blockly$common.getMainWorkspace)().markFocused()}};var ve=function(t,e,o,r){(t=te.getPositionMetrics(t,e,o,r)).arrowVisible?(D.DropDownDiv.arrow_.style.display="",D.DropDownDiv.arrow_.style.transform="translate("+t.arrowX+"px,"+t.arrowY+"px) rotate(45deg)",D.DropDownDiv.arrow_.setAttribute("class",t.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):D.DropDownDiv.arrow_.style.display="none",e=Math.floor(t.initialX),o=Math.floor(t.initialY),r=Math.floor(t.finalX);var c=Math.floor(t.finalY),h=D.DropDownDiv.DIV_;return h.style.left=e+"px",h.style.top=o+"px",h.style.display="block",h.style.opacity=1,h.style.transform="translate("+(r-e)+"px,"+(c-o)+"px)",!!t.arrowAtTop};D.DropDownDiv.repositionForWindowResize=function(){if(D.DropDownDiv.owner_){var t=D.DropDownDiv.owner_,e=t.getSourceBlock();t=D.DropDownDiv.positionToField_?Uo(t):Ue(e),ve(e=t.left+(t.right-t.left)/2,t.bottom,e,t.top)}else D.DropDownDiv.hide()},D.DropDownDiv.TEST_ONLY=te;var de,Hn,ei,re={Grid:function(t,e){this.gridPattern_=t,this.spacing_=e.spacing,this.length_=e.length,this.line2_=(this.line1_=t.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=e.snap}};re.Grid.prototype.scale_=1,re.Grid.prototype.dispose=function(){this.gridPattern_=null},re.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},re.Grid.prototype.getSpacing=function(){return this.spacing_},re.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},re.Grid.prototype.update=function(t){this.scale_=t;var e=this.spacing_*t||100;this.gridPattern_.setAttribute("width",e),this.gridPattern_.setAttribute("height",e);var o=(e=Math.floor(this.spacing_/2)+.5)-this.length_/2,r=e+this.length_/2;this.setLineAttributes_(this.line1_,t,o*=t,r*=t,e*=t,e),this.setLineAttributes_(this.line2_,t,e,e,o,r)},re.Grid.prototype.setLineAttributes_=function(t,e,o,r,c,h){t&&(t.setAttribute("stroke-width",e),t.setAttribute("x1",o),t.setAttribute("y1",c),t.setAttribute("x2",r),t.setAttribute("y2",h))},re.Grid.prototype.moveTo=function(t,e){this.gridPattern_.setAttribute("x",t),this.gridPattern_.setAttribute("y",e),(ot.IE||ot.EDGE)&&this.update(this.scale_)},re.Grid.createDom=function(t,e,o){return t=(0,s.createSvgElement)(B.Svg.PATTERN,{id:"blocklyGridPattern"+t,patternUnits:"userSpaceOnUse"},o),0<e.length&&0<e.spacing?((0,s.createSvgElement)(B.Svg.LINE,{stroke:e.colour},t),1<e.length&&(0,s.createSvgElement)(B.Svg.LINE,{stroke:e.colour},t)):(0,s.createSvgElement)(B.Svg.LINE,{},t),t},l.module$exports$Blockly$Msg={},l.module$exports$Blockly$Msg.Msg=Object.create(null),l.module$exports$Blockly$utils$xml={NAME_SPACE:"https://developers.google.com/blockly/xml"},de=l.module$exports$Blockly$utils$global.globalThis.document,l.module$exports$Blockly$utils$xml.getDocument=function(){return de},l.module$exports$Blockly$utils$xml.setDocument=function(t){de=t},l.module$exports$Blockly$utils$xml.createElement=function(t){return de.createElementNS(l.module$exports$Blockly$utils$xml.NAME_SPACE,t)},l.module$exports$Blockly$utils$xml.createTextNode=function(t){return de.createTextNode(t)},l.module$exports$Blockly$utils$xml.textToDomDocument=function(t){return(new DOMParser).parseFromString(t,"text/xml")},l.module$exports$Blockly$utils$xml.domToText=function(t){return(new XMLSerializer).serializeToString(t)},l.module$exports$Blockly$inputTypes={},l.module$exports$Blockly$inputTypes.inputTypes={VALUE:l.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE,STATEMENT:l.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT,DUMMY:5},l.module$exports$Blockly$Xml={workspaceToDom:function(t,e){var o=(0,l.module$exports$Blockly$utils$xml.createElement)("xml"),r=(0,l.module$exports$Blockly$Xml.variablesToDom)(l.module$exports$Blockly$Variables.allUsedVarModels(t));r.hasChildNodes()&&o.appendChild(r),r=t.getTopComments(!0);for(var c=0;c<r.length;c++)o.appendChild(r[c].toXmlWithXY(e));for(t=t.getTopBlocks(!0),r=0;r<t.length;r++)o.appendChild((0,l.module$exports$Blockly$Xml.blockToDomWithXY)(t[r],e));return o},variablesToDom:function(t){for(var e=(0,l.module$exports$Blockly$utils$xml.createElement)("variables"),o=0;o<t.length;o++){var r=t[o],c=(0,l.module$exports$Blockly$utils$xml.createElement)("variable");c.appendChild((0,l.module$exports$Blockly$utils$xml.createTextNode)(r.name)),r.type&&c.setAttribute("type",r.type),c.id=r.getId(),e.appendChild(c)}return e},blockToDomWithXY:function(t,e){if(t.isInsertionMarker()&&!(t=t.getChildren(!1)[0]))return new DocumentFragment;var o;t.workspace.RTL&&(o=t.workspace.getWidth()),e=(0,l.module$exports$Blockly$Xml.blockToDom)(t,e);var r=t.getRelativeToSurfaceXY();return e.setAttribute("x",Math.round(t.workspace.RTL?o-r.x:r.x)),e.setAttribute("y",Math.round(r.y)),e}},Hn=function(t){if(t.isSerializable()){var e=(0,l.module$exports$Blockly$utils$xml.createElement)("field");return e.setAttribute("name",t.name||""),t.toXml(e)}return null},ei=function(t,e){for(var o=0;o<t.inputList.length;o++)for(var r=t.inputList[o],c=0;c<r.fieldRow.length;c++){var h=Hn(r.fieldRow[c]);h&&e.appendChild(h)}},l.module$exports$Blockly$Xml.blockToDom=function(t,e){if(t.isInsertionMarker())return(e=t.getChildren(!1)[0])?(0,l.module$exports$Blockly$Xml.blockToDom)(e):new DocumentFragment;var o=(0,l.module$exports$Blockly$utils$xml.createElement)(t.isShadow()?"shadow":"block");if(o.setAttribute("type",t.type),e||o.setAttribute("id",t.id),t.mutationToDom){var r=t.mutationToDom();r&&(r.hasChildNodes()||r.hasAttributes())&&o.appendChild(r)}if(ei(t,o),r=t.getCommentText()){var c=t.commentModel.size,h=t.commentModel.pinned,k=(0,l.module$exports$Blockly$utils$xml.createElement)("comment");k.appendChild((0,l.module$exports$Blockly$utils$xml.createTextNode)(r)),k.setAttribute("pinned",h),k.setAttribute("h",c.height),k.setAttribute("w",c.width),o.appendChild(k)}for(t.data&&((r=(0,l.module$exports$Blockly$utils$xml.createElement)("data")).appendChild((0,l.module$exports$Blockly$utils$xml.createTextNode)(t.data)),o.appendChild(r)),r=0;r<t.inputList.length;r++)if(h=void 0,k=!0,(c=t.inputList[r]).type!==l.module$exports$Blockly$inputTypes.inputTypes.DUMMY){var C=c.connection.targetBlock();c.type===l.module$exports$Blockly$inputTypes.inputTypes.VALUE?h=(0,l.module$exports$Blockly$utils$xml.createElement)("value"):c.type===l.module$exports$Blockly$inputTypes.inputTypes.STATEMENT&&(h=(0,l.module$exports$Blockly$utils$xml.createElement)("statement"));var G=c.connection.getShadowDom();!G||C&&C.isShadow()||h.appendChild(Xi(G,e)),C&&(C=(0,l.module$exports$Blockly$Xml.blockToDom)(C,e)).nodeType===s.NodeType.ELEMENT_NODE&&(h.appendChild(C),k=!1),h.setAttribute("name",c.name),k||o.appendChild(h)}if(void 0!==t.inputsInline&&t.inputsInline!==t.inputsInlineDefault&&o.setAttribute("inline",t.inputsInline),t.isCollapsed()&&o.setAttribute("collapsed",!0),t.isEnabled()||o.setAttribute("disabled",!0),t.isDeletable()||t.isShadow()||o.setAttribute("deletable",!1),t.isMovable()||t.isShadow()||o.setAttribute("movable",!1),t.isEditable()||o.setAttribute("editable",!1),(r=t.getNextBlock())&&(c=(0,l.module$exports$Blockly$Xml.blockToDom)(r,e)).nodeType===s.NodeType.ELEMENT_NODE){var j=(0,l.module$exports$Blockly$utils$xml.createElement)("next");j.appendChild(c),o.appendChild(j)}return!(t=t.nextConnection&&t.nextConnection.getShadowDom())||r&&r.isShadow()||j.appendChild(Xi(t,e)),o};var Xi=function(t,e){for(var r,o=t=t.cloneNode(!0);o;)if(e&&"shadow"===o.nodeName&&o.removeAttribute("id"),o.firstChild)o=o.firstChild;else{for(;o&&!o.nextSibling;)r=o,o=o.parentNode,r.nodeType===s.NodeType.TEXT_NODE&&""===r.data.trim()&&o.firstChild!==r&&(0,s.removeNode)(r);o&&(r=o,o=o.nextSibling,r.nodeType===s.NodeType.TEXT_NODE&&""===r.data.trim()&&(0,s.removeNode)(r))}return t};l.module$exports$Blockly$Xml.domToText=function(t){return(0,l.module$exports$Blockly$utils$xml.domToText)(t).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},l.module$exports$Blockly$Xml.domToPrettyText=function(t){t=(0,l.module$exports$Blockly$Xml.domToText)(t).split("<");for(var e="",o=1;o<t.length;o++){var r=t[o];"/"===r[0]&&(e=e.substring(2)),t[o]=e+"<"+r,"/"!==r[0]&&"/>"!==r.slice(-2)&&(e+="  ")}return(t=(t=t.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},l.module$exports$Blockly$Xml.textToDom=function(t){var e=(0,l.module$exports$Blockly$utils$xml.textToDomDocument)(t);if(!e||!e.documentElement||e.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+t);return e.documentElement},l.module$exports$Blockly$Xml.clearWorkspaceAndLoadFromXml=function(t,e){return e.setResizesEnabled(!1),e.clear(),t=(0,l.module$exports$Blockly$Xml.domToWorkspace)(t,e),e.setResizesEnabled(!0),t},l.module$exports$Blockly$Xml.domToWorkspace=function(t,e){if(t instanceof Q.Workspace){var o=t;t=e,e=o,console.warn("Deprecated call to domToWorkspace, swap the arguments.")}var r;e.RTL&&(r=e.getWidth()),o=[],(0,s.startTextWidthCache)();var c=(0,f.getGroup)();c||(0,f.setGroup)(!0),e.setResizesEnabled&&e.setResizesEnabled(!1);var h=!0;try{for(var k=0,C=void 0;C=t.childNodes[k];k++){var G=C.nodeName.toLowerCase(),j=C;if("block"===G||"shadow"===G&&!(0,f.getRecordUndo)()){var Et=(0,l.module$exports$Blockly$Xml.domToBlock)(j,e);o.push(Et.id);var le=j.hasAttribute("x")?parseInt(j.getAttribute("x"),10):10,fe=j.hasAttribute("y")?parseInt(j.getAttribute("y"),10):10;isNaN(le)||isNaN(fe)||Et.moveBy(e.RTL?r-le:le,fe),h=!1}else{if("shadow"===G)throw TypeError("Shadow block cannot be a top-level block.");if("comment"===G)if(e.rendered){var Lo=it.WorkspaceCommentSvg;Lo?Lo.fromXml(j,e,r):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment.")}else{var No=Nt.WorkspaceComment;No?No.fromXml(j,e):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.")}else if("variables"===G){if(!h)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");(0,l.module$exports$Blockly$Xml.domToVariables)(j,e),h=!1}}}}finally{c||(0,f.setGroup)(!1),(0,s.stopTextWidthCache)()}return e.setResizesEnabled&&e.setResizesEnabled(!0),(0,f.fire)(new((0,f.get)(f.FINISHED_LOADING))(e)),o},l.module$exports$Blockly$Xml.appendDomToWorkspace=function(t,e){var o;if(Object.prototype.hasOwnProperty.call(e,"scale")&&(o=e.getBlocksBoundingBox()),t=(0,l.module$exports$Blockly$Xml.domToWorkspace)(t,e),o&&o.top!==o.bottom){var r=o.bottom;o=e.RTL?o.right:o.left;for(var c=1/0,h=-1/0,k=1/0,C=0;C<t.length;C++){var G=e.getBlockById(t[C]).getRelativeToSurfaceXY();G.y<k&&(k=G.y),G.x<c&&(c=G.x),G.x>h&&(h=G.x)}for(r=r-k+10,o=e.RTL?o-h:o-c,c=0;c<t.length;c++)e.getBlockById(t[c]).moveBy(o,r)}return t},l.module$exports$Blockly$Xml.domToBlock=function(t,e){if(t instanceof Q.Workspace){var o=t;t=e,e=o,console.warn("Deprecated call to domToBlock, swap the arguments.")}(0,f.disable)(),o=e.getAllVariables();try{var r=Bi(t,e),c=r.getDescendants(!1);if(e.rendered){r.setConnectionTracking(!1);for(var h=c.length-1;0<=h;h--)c[h].initSvg();for(var k=c.length-1;0<=k;k--)c[k].render(!1);setTimeout(function(){r.disposed||r.setConnectionTracking(!0)},1),r.updateDisabled(),e.resizeContents()}else for(var C=c.length-1;0<=C;C--)c[C].initModel()}finally{(0,f.enable)()}if((0,f.isEnabled)()){for(t=l.module$exports$Blockly$Variables.getAddedVariables(e,o),e=0;e<t.length;e++)c=t[e],(0,f.fire)(new((0,f.get)(f.VAR_CREATE))(c));(0,f.fire)(new((0,f.get)(f.CREATE))(r))}return r},l.module$exports$Blockly$Xml.domToVariables=function(t,e){for(var o=0;o<t.childNodes.length;o++){var r=t.childNodes[o];if(r.nodeType===s.NodeType.ELEMENT_NODE){var c=r.getAttribute("type"),h=r.getAttribute("id");e.createVariable(r.textContent,c,h)}}};var Yi=function(t){for(var e={childBlockElement:null,childShadowElement:null},o=0;o<t.childNodes.length;o++){var r=t.childNodes[o];r.nodeType===s.NodeType.ELEMENT_NODE&&("block"===r.nodeName.toLowerCase()?e.childBlockElement=r:"shadow"===r.nodeName.toLowerCase()&&(e.childShadowElement=r))}return e},Bi=function(t,e,o,r){var c=t.getAttribute("type");if(!c)throw TypeError("Block type unspecified: "+t.outerHTML);var h=t.getAttribute("id");h=e.newBlock(c,h);var k=function(t){for(var e={mutation:[],comment:[],data:[],field:[],input:[],next:[]},o=0;o<t.childNodes.length;o++){var r=t.childNodes[o];if(r.nodeType!==s.NodeType.TEXT_NODE)switch(r.nodeName.toLowerCase()){case"mutation":e.mutation.push(r);break;case"comment":if(!ue){console.warn("Missing require for Comment, ignoring block comment.");break}e.comment.push(r);break;case"data":e.data.push(r);break;case"title":case"field":e.field.push(r);break;case"value":case"statement":e.input.push(r);break;case"next":e.next.push(r);break;default:console.warn("Ignoring unknown tag: "+r.nodeName)}}return e}(t),C=function(t,e){for(var o=!1,r=0;r<t.length;r++)e.domToMutation&&(e.domToMutation(t[r]),e.initSvg&&(o=!0));return o}(k.mutation,h);if(function(t,e){for(var o=0;o<t.length;o++){var r=t[o],c=r.textContent,h="true"===r.getAttribute("pinned"),k=parseInt(r.getAttribute("w"),10);r=parseInt(r.getAttribute("h"),10),e.setCommentText(c),e.commentModel.pinned=h,isNaN(k)||isNaN(r)||(e.commentModel.size=new et.Size(k,r)),h&&e.getCommentIcon&&!e.isInFlyout&&setTimeout(function(){e.getCommentIcon().setVisible(!0)},1)}}(k.comment,h),function(t,e){for(var o=0;o<t.length;o++)e.data=t[o].textContent}(k.data,h),o)if(r){if(!h.previousConnection)throw TypeError("Next block does not have previous statement.");o.connect(h.previousConnection)}else if(h.outputConnection)o.connect(h.outputConnection);else{if(!h.previousConnection)throw TypeError("Child block does not have output or previous statement.");o.connect(h.previousConnection)}if(function(t,e){for(var o=0;o<t.length;o++){var r=t[o],c=r.getAttribute("name");Sr(e,c,r)}}(k.field,h),function(t,e,o,r){for(var c=0;c<t.length;c++){var h=t[c],k=h.getAttribute("name"),C=o.getInput(k);if(!C){console.warn("Ignoring non-existent input "+k+" in block "+r);break}if((h=Yi(h)).childBlockElement){if(!C.connection)throw TypeError("Input connection does not exist.");Bi(h.childBlockElement,e,C.connection,!1)}h.childShadowElement&&C.connection.setShadowDom(h.childShadowElement)}}(k.input,e,h,c),function(t,e,o){for(var r=0;r<t.length;r++){var c=Yi(t[r]);if(c.childBlockElement){if(!o.nextConnection)throw TypeError("Next statement does not exist.");if(o.nextConnection.isConnected())throw TypeError("Next statement is already connected.");Bi(c.childBlockElement,e,o.nextConnection,!0)}c.childShadowElement&&o.nextConnection&&o.nextConnection.setShadowDom(c.childShadowElement)}}(k.next,e,h),C&&h.initSvg(),(e=t.getAttribute("inline"))&&h.setInputsInline("true"===e),(e=t.getAttribute("disabled"))&&h.setEnabled("true"!==e&&"disabled"!==e),(e=t.getAttribute("deletable"))&&h.setDeletable("true"===e),(e=t.getAttribute("movable"))&&h.setMovable("true"===e),(e=t.getAttribute("editable"))&&h.setEditable("true"===e),(e=t.getAttribute("collapsed"))&&h.setCollapsed("true"===e),"shadow"===t.nodeName.toLowerCase()){for(t=h.getChildren(!1),e=0;e<t.length;e++)if(!t[e].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(h.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");h.setShadow(!0)}return h},Sr=function(t,e,o){var r=t.getField(e);r?r.fromXml(o):console.warn("Ignoring non-existent field "+e+" in block "+t.type)};l.module$exports$Blockly$Xml.deleteNext=function(t){for(var e=0;e<t.childNodes.length;e++){var o=t.childNodes[e];if("next"===o.nodeName.toLowerCase()){t.removeChild(o);break}}};var st={},Ii="categoryToolbox",ji="flyoutToolbox";st.Position={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3},st.convertToolboxDefToJson=function(t){return t?((t instanceof Element||"string"==typeof t)&&(t=(0,st.parseToolboxTree)(t),t=br(t)),Cr(t),t):null};var Cr=function(t){var e=t.kind;if(t=t.contents,e&&e!==ji&&e!==Ii)throw Error("Invalid toolbox kind "+e+". Please supply either "+ji+" or "+Ii);if(!t)throw Error("Toolbox must have a contents attribute.")};st.convertFlyoutDefToJsonArray=function(t){return t?t.contents?t.contents:Array.isArray(t)&&0<t.length&&!t[0].nodeType?t:Ri(t):[]},st.hasCategories=function(t){if(!t)return!1;var e=t.kind;return e?e===Ii:!!t.contents.filter(function(o){return"CATEGORY"===o.kind.toUpperCase()}).length},st.isCategoryCollapsible=function(t){return!(!t||!t.contents||!t.contents.filter(function(e){return"CATEGORY"===e.kind.toUpperCase()}).length)};var br=function(t){var e={contents:Ri(t)};return t instanceof Node&&Ki(t,e),e},Ri=function(t){var r,e=[],o=t.childNodes;for(o||(o=t),t=0;r=o[t];t++)if(r.tagName){var c={},h=r.tagName.toUpperCase();c.kind=h,"BLOCK"===h?c.blockxml=r:r.childNodes&&0<r.childNodes.length&&(c.contents=Ri(r)),Ki(r,c),e.push(c)}return e},Ki=function(t,e){for(var o=0;o<t.attributes.length;o++){var r=t.attributes[o];-1<r.nodeName.indexOf("css-")?(e.cssconfig=e.cssconfig||{},e.cssconfig[r.nodeName.replace("css-","")]=r.value):e[r.nodeName]=r.value}};st.parseToolboxTree=function(t){if(t){if("string"!=typeof t&&(ot.IE&&t.outerHTML?t=t.outerHTML:t instanceof Element||(t=null)),"string"==typeof t&&"xml"!==(t=(0,l.module$exports$Blockly$Xml.textToDom)(t)).nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else t=null;return t},l.module$exports$Blockly$utils$object={inherits:function(t,e){t.superClass_=e.prototype,Object.setPrototypeOf(t,e),t.prototype=Object.create(e.prototype),t.prototype.constructor=t},mixin:function(t,e){for(var o in e)t[o]=e[o]},deepMerge:function(t,e){for(var o in e)t[o]=null!==e[o]&&"object"==typeof e[o]?(0,l.module$exports$Blockly$utils$object.deepMerge)(t[o]||Object.create(null),e[o]):e[o];return t},values:function(t){return Object.values?Object.values(t):Object.keys(t).map(function(e){return t[e]})}};var Oe={Theme:function(t,e,o,r){this.name=t,this.blockStyles=e||Object.create(null),this.categoryStyles=o||Object.create(null),this.componentStyles=r||Object.create(null),this.fontStyle=Object.create(null),this.startHats=null,(0,x.register)(x.Type.THEME,t,this)}};Oe.Theme.prototype.getClassName=function(){return this.name+"-theme"},Oe.Theme.prototype.setBlockStyle=function(t,e){this.blockStyles[t]=e},Oe.Theme.prototype.setCategoryStyle=function(t,e){this.categoryStyles[t]=e},Oe.Theme.prototype.getComponentStyle=function(t){return(t=this.componentStyles[t])&&"string"==typeof t&&this.getComponentStyle(t)?this.getComponentStyle(t):t?String(t):null},Oe.Theme.prototype.setComponentStyle=function(t,e){this.componentStyles[t]=e},Oe.Theme.prototype.setFontStyle=function(t){this.fontStyle=t},Oe.Theme.prototype.setStartHats=function(t){this.startHats=t},Oe.Theme.defineTheme=function(t,e){var o=new Oe.Theme(t),r=e.base;return r&&("string"==typeof r&&(r=(0,x.getObject)(x.Type.THEME,r)),r instanceof Oe.Theme&&((0,l.module$exports$Blockly$utils$object.deepMerge)(o,r),o.name=t)),(0,l.module$exports$Blockly$utils$object.deepMerge)(o.blockStyles,e.blockStyles),(0,l.module$exports$Blockly$utils$object.deepMerge)(o.categoryStyles,e.categoryStyles),(0,l.module$exports$Blockly$utils$object.deepMerge)(o.componentStyles,e.componentStyles),(0,l.module$exports$Blockly$utils$object.deepMerge)(o.fontStyle,e.fontStyle),null!==e.startHats&&(o.startHats=e.startHats),o};var Vn={};Vn.Classic=new Oe.Theme("classic",{colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},{colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}});var Ae={Options:function(t){var e=null,o=!1,r=!1,c=!1,h=!1,k=!1,C=!1,G=!!t.readOnly;G||(e=(0,st.convertToolboxDefToJson)(t.toolbox),o=(0,st.hasCategories)(e),void 0===(r=t.trashcan)&&(r=o),void 0===(c=t.collapse)&&(c=o),void 0===(h=t.comments)&&(h=o),void 0===(k=t.disable)&&(k=o),void 0===(C=t.sounds)&&(C=!0));var j=t.maxTrashcanContents;r?void 0===j&&(j=32):j=0;var Et=!!t.rtl,le=t.horizontalLayout;void 0===le&&(le=!1);var fe=t.toolboxPosition;fe="end"!==fe,fe=le?fe?st.Position.TOP:st.Position.BOTTOM:fe===Et?st.Position.RIGHT:st.Position.LEFT;var Lo=t.css;void 0===Lo&&(Lo=!0);var No="https://blockly-demo.appspot.com/static/media/";t.media?No=t.media:t.path&&(No=t.path+"media/");var Un=void 0===t.oneBasedIndex||!!t.oneBasedIndex,El=t.renderer||"geras",vl=t.plugins||{};this.RTL=Et,this.oneBasedIndex=Un,this.collapse=c,this.comments=h,this.disable=k,this.readOnly=G,this.maxBlocks=t.maxBlocks||1/0,this.maxInstances=t.maxInstances,this.pathToMedia=No,this.hasCategories=o,this.moveOptions=Ae.Options.parseMoveOptions_(t,o),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=r,this.maxTrashcanContents=j,this.hasSounds=C,this.hasCss=Lo,this.horizontalLayout=le,this.languageTree=e,this.gridOptions=Ae.Options.parseGridOptions_(t),this.zoomOptions=Ae.Options.parseZoomOptions_(t),this.toolboxPosition=fe,this.theme=Ae.Options.parseThemeOptions_(t),this.renderer=El,this.rendererOverrides=t.rendererOverrides,this.gridPattern=null,this.parentWorkspace=t.parentWorkspace,this.plugins=vl}};Ae.Options.parseMoveOptions_=function(t,e){var o=t.move||{},r={};return void 0===o.scrollbars&&void 0===t.scrollbars?r.scrollbars=e:"object"==typeof o.scrollbars?(r.scrollbars={},r.scrollbars.horizontal=!!o.scrollbars.horizontal,r.scrollbars.vertical=!!o.scrollbars.vertical,r.scrollbars.horizontal&&r.scrollbars.vertical?r.scrollbars=!0:r.scrollbars.horizontal||r.scrollbars.vertical||(r.scrollbars=!1)):r.scrollbars=!!o.scrollbars||!!t.scrollbars,r.wheel=r.scrollbars&&void 0!==o.wheel?!!o.wheel:"object"==typeof r.scrollbars,r.drag=!(!r.scrollbars||void 0!==o.drag&&!o.drag),r},Ae.Options.parseZoomOptions_=function(t){var e={};return e.controls=void 0!==(t=t.zoom||{}).controls&&!!t.controls,e.wheel=void 0!==t.wheel&&!!t.wheel,e.startScale=void 0===t.startScale?1:Number(t.startScale),e.maxScale=void 0===t.maxScale?3:Number(t.maxScale),e.minScale=void 0===t.minScale?.3:Number(t.minScale),e.scaleSpeed=void 0===t.scaleSpeed?1.2:Number(t.scaleSpeed),e.pinch=void 0===t.pinch?e.wheel||e.controls:!!t.pinch,e},Ae.Options.parseGridOptions_=function(t){t=t.grid||{};var e={};return e.spacing=Number(t.spacing)||0,e.colour=t.colour||"#888",e.length=void 0===t.length?1:Number(t.length),e.snap=0<e.spacing&&!!t.snap,e},Ae.Options.parseThemeOptions_=function(t){return"string"==typeof(t=t.theme||Vn.Classic)?(0,x.getObject)(x.Type.THEME,t):t instanceof Oe.Theme?t:Oe.Theme.defineTheme(t.name||"builtin"+(0,_t.getNextUniqueId)(),t)};var J={Scrollbar:function(t,e,o,r,c){this.workspace_=t,this.pair_=o||!1,this.horizontal_=e,this.margin_=void 0!==c?c:J.Scrollbar.DEFAULT_SCROLLBAR_MARGIN,this.ratio=this.oldHostMetrics_=null,this.createDom_(r),this.position=new N.Coordinate(0,0),t=J.Scrollbar.scrollbarThickness,e?(this.svgBackground_.setAttribute("height",t),this.outerSvg_.setAttribute("height",t),this.svgHandle_.setAttribute("height",t-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",t),this.outerSvg_.setAttribute("width",t),this.svgHandle_.setAttribute("width",t-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=(0,g.conditionalBind)(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=(0,g.conditionalBind)(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)}};J.Scrollbar.prototype.origin_=new N.Coordinate(0,0),J.Scrollbar.prototype.startDragMouse_=0,J.Scrollbar.prototype.scrollbarLength_=0,J.Scrollbar.prototype.handleLength_=0,J.Scrollbar.prototype.handlePosition_=0,J.Scrollbar.prototype.isVisible_=!0,J.Scrollbar.prototype.containerVisible_=!0,J.Scrollbar.scrollbarThickness=15,tt.TOUCH_ENABLED&&(J.Scrollbar.scrollbarThickness=25),J.Scrollbar.DEFAULT_SCROLLBAR_MARGIN=.5,J.Scrollbar.metricsAreEquivalent_=function(t,e){return t.viewWidth===e.viewWidth&&t.viewHeight===e.viewHeight&&t.viewLeft===e.viewLeft&&t.viewTop===e.viewTop&&t.absoluteTop===e.absoluteTop&&t.absoluteLeft===e.absoluteLeft&&t.scrollWidth===e.scrollWidth&&t.scrollHeight===e.scrollHeight&&t.scrollLeft===e.scrollLeft&&t.scrollTop===e.scrollTop},J.Scrollbar.prototype.dispose=function(){this.cleanUp_(),(0,g.unbind)(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,(0,g.unbind)(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,(0,s.removeNode)(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null),this.workspace_=null},J.Scrollbar.prototype.constrainHandleLength_=function(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_)},J.Scrollbar.prototype.setHandleLength_=function(t){this.handleLength_=t,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},J.Scrollbar.prototype.constrainHandlePosition_=function(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_-this.handleLength_)},J.Scrollbar.prototype.setHandlePosition=function(t){this.handlePosition_=t,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},J.Scrollbar.prototype.setScrollbarLength_=function(t){this.scrollbarLength_=t,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollbarLength_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollbarLength_)},J.Scrollbar.prototype.setPosition=function(t,e){this.position.x=t,this.position.y=e,(0,s.setCssTransform)(this.outerSvg_,"translate("+(this.position.x+this.origin_.x)+"px,"+(this.position.y+this.origin_.y)+"px)")},J.Scrollbar.prototype.resize=function(t){!t&&!(t=this.workspace_.getMetrics())||this.oldHostMetrics_&&J.Scrollbar.metricsAreEquivalent_(t,this.oldHostMetrics_)||(this.horizontal_?this.resizeHorizontal_(t):this.resizeVertical_(t),this.oldHostMetrics_=t,this.updateMetrics_())},J.Scrollbar.prototype.requiresViewResize_=function(t){return!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==t.viewWidth||this.oldHostMetrics_.viewHeight!==t.viewHeight||this.oldHostMetrics_.absoluteLeft!==t.absoluteLeft||this.oldHostMetrics_.absoluteTop!==t.absoluteTop},J.Scrollbar.prototype.resizeHorizontal_=function(t){this.requiresViewResize_(t)?this.resizeViewHorizontal(t):this.resizeContentHorizontal(t)},J.Scrollbar.prototype.resizeViewHorizontal=function(t){var e=t.viewWidth-2*this.margin_;this.pair_&&(e-=J.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,e)),e=t.absoluteLeft+this.margin_,this.pair_&&this.workspace_.RTL&&(e+=J.Scrollbar.scrollbarThickness),this.setPosition(e,t.absoluteTop+t.viewHeight-J.Scrollbar.scrollbarThickness-this.margin_),this.resizeContentHorizontal(t)},J.Scrollbar.prototype.resizeContentHorizontal=function(t){if(t.viewWidth>=t.scrollWidth)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var e=this.scrollbarLength_*t.viewWidth/t.scrollWidth;e=this.constrainHandleLength_(e),this.setHandleLength_(e);var o=this.scrollbarLength_-this.handleLength_;t=this.constrainHandlePosition_(t=(t.viewLeft-t.scrollLeft)/(e=t.scrollWidth-t.viewWidth)*o),this.setHandlePosition(t),this.ratio=o/e}},J.Scrollbar.prototype.resizeVertical_=function(t){this.requiresViewResize_(t)?this.resizeViewVertical(t):this.resizeContentVertical(t)},J.Scrollbar.prototype.resizeViewVertical=function(t){var e=t.viewHeight-2*this.margin_;this.pair_&&(e-=J.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,e)),this.setPosition(this.workspace_.RTL?t.absoluteLeft+this.margin_:t.absoluteLeft+t.viewWidth-J.Scrollbar.scrollbarThickness-this.margin_,t.absoluteTop+this.margin_),this.resizeContentVertical(t)},J.Scrollbar.prototype.resizeContentVertical=function(t){if(t.viewHeight>=t.scrollHeight)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var e=this.scrollbarLength_*t.viewHeight/t.scrollHeight;e=this.constrainHandleLength_(e),this.setHandleLength_(e);var o=this.scrollbarLength_-this.handleLength_;t=this.constrainHandlePosition_(t=(t.viewTop-t.scrollTop)/(e=t.scrollHeight-t.viewHeight)*o),this.setHandlePosition(t),this.ratio=o/e}},J.Scrollbar.prototype.createDom_=function(t){var e="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");t&&(e+=" "+t),this.outerSvg_=(0,s.createSvgElement)(B.Svg.SVG,{class:e},null),this.svgGroup_=(0,s.createSvgElement)(B.Svg.G,{},this.outerSvg_),this.svgBackground_=(0,s.createSvgElement)(B.Svg.RECT,{class:"blocklyScrollbarBackground"},this.svgGroup_),t=Math.floor((J.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=(0,s.createSvgElement)(B.Svg.RECT,{class:"blocklyScrollbarHandle",rx:t,ry:t},this.svgGroup_),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),(0,s.insertAfter)(this.outerSvg_,this.workspace_.getParentSvg())},J.Scrollbar.prototype.isVisible=function(){return this.isVisible_},J.Scrollbar.prototype.setContainerVisible=function(t){var e=t!==this.containerVisible_;this.containerVisible_=t,e&&this.updateDisplay_()},J.Scrollbar.prototype.setVisible=function(t){var e=t!==this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=t,e&&this.updateDisplay_()},J.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},J.Scrollbar.prototype.onMouseDownBar_=function(t){if(this.workspace_.markFocused(),(0,tt.clearTouchIdentifier)(),this.cleanUp_(),(0,g.isRightButton)(t))t.stopPropagation();else{var e=(0,g.mouseToSvg)(t,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());e=this.horizontal_?e.x:e.y;var o=(0,dt.getInjectionDivXY)(this.svgHandle_),r=this.handlePosition_,c=.95*this.handleLength_;e<=(o=this.horizontal_?o.x:o.y)?r-=c:e>=o+this.handleLength_&&(r+=c),this.setHandlePosition(this.constrainHandlePosition_(r)),this.updateMetrics_(),t.stopPropagation(),t.preventDefault()}},J.Scrollbar.prototype.onMouseDownHandle_=function(t){this.workspace_.markFocused(),this.cleanUp_(),(0,g.isRightButton)(t)?t.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?t.clientX:t.clientY,J.Scrollbar.onMouseUpWrapper_=(0,g.conditionalBind)(document,"mouseup",this,this.onMouseUpHandle_),J.Scrollbar.onMouseMoveWrapper_=(0,g.conditionalBind)(document,"mousemove",this,this.onMouseMoveHandle_),t.stopPropagation(),t.preventDefault())},J.Scrollbar.prototype.onMouseMoveHandle_=function(t){this.setHandlePosition(this.constrainHandlePosition_(this.startDragHandle+((this.horizontal_?t.clientX:t.clientY)-this.startDragMouse_))),this.updateMetrics_()},J.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),(0,tt.clearTouchIdentifier)(),this.cleanUp_()},J.Scrollbar.prototype.cleanUp_=function(){this.workspace_.hideChaff(!0),J.Scrollbar.onMouseUpWrapper_&&((0,g.unbind)(J.Scrollbar.onMouseUpWrapper_),J.Scrollbar.onMouseUpWrapper_=null),J.Scrollbar.onMouseMoveWrapper_&&((0,g.unbind)(J.Scrollbar.onMouseMoveWrapper_),J.Scrollbar.onMouseMoveWrapper_=null)},J.Scrollbar.prototype.getRatio_=function(){var t=this.handlePosition_/(this.scrollbarLength_-this.handleLength_);return isNaN(t)&&(t=0),t},J.Scrollbar.prototype.updateMetrics_=function(){var t=this.getRatio_(),e={};this.horizontal_?e.x=t:e.y=t,this.workspace_.setMetrics(e)},J.Scrollbar.prototype.set=function(t,e){this.setHandlePosition(this.constrainHandlePosition_(t*this.ratio)),(e||void 0===e)&&this.updateMetrics_()},J.Scrollbar.prototype.setOrigin=function(t,e){this.origin_=new N.Coordinate(t,e)};var De={ScrollbarPair:function(t,e,o,r,c){this.workspace_=t,o=void 0===o||o;var h=(e=void 0===e||e)&&o;e&&(this.hScroll=new J.Scrollbar(t,!0,h,r,c)),o&&(this.vScroll=new J.Scrollbar(t,!1,h,r,c)),h&&(this.corner_=(0,s.createSvgElement)(B.Svg.RECT,{height:J.Scrollbar.scrollbarThickness,width:J.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),(0,s.insertAfter)(this.corner_,t.getBubbleCanvas())),this.oldHostMetrics_=null}};De.ScrollbarPair.prototype.dispose=function(){(0,s.removeNode)(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)},De.ScrollbarPair.prototype.resize=function(){var t=this.workspace_.getMetrics();if(t){var e=!1,o=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth===t.viewWidth&&this.oldHostMetrics_.viewHeight===t.viewHeight&&this.oldHostMetrics_.absoluteTop===t.absoluteTop&&this.oldHostMetrics_.absoluteLeft===t.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth===t.scrollWidth&&this.oldHostMetrics_.viewLeft===t.viewLeft&&this.oldHostMetrics_.scrollLeft===t.scrollLeft||(e=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight===t.scrollHeight&&this.oldHostMetrics_.viewTop===t.viewTop&&this.oldHostMetrics_.scrollTop===t.scrollTop||(o=!0)):o=e=!0,e||o){try{(0,f.disable)(),this.hScroll&&e&&this.hScroll.resize(t),this.vScroll&&o&&this.vScroll.resize(t)}finally{(0,f.enable)()}this.workspace_.maybeFireViewportChangeEvent()}this.hScroll&&this.vScroll&&(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth===t.viewWidth&&this.oldHostMetrics_.absoluteLeft===t.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight===t.viewHeight&&this.oldHostMetrics_.absoluteTop===t.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position.y)),this.oldHostMetrics_=t}},De.ScrollbarPair.prototype.canScrollHorizontally=function(){return!!this.hScroll},De.ScrollbarPair.prototype.canScrollVertically=function(){return!!this.vScroll},De.ScrollbarPair.prototype.setOrigin=function(t,e){this.hScroll&&this.hScroll.setOrigin(t,e),this.vScroll&&this.vScroll.setOrigin(t,e)},De.ScrollbarPair.prototype.set=function(t,e,o){this.hScroll&&this.hScroll.set(t,!1),this.vScroll&&this.vScroll.set(e,!1),(o||void 0===o)&&(t={},this.hScroll&&(t.x=this.hScroll.getRatio_()),this.vScroll&&(t.y=this.vScroll.getRatio_()),this.workspace_.setMetrics(t))},De.ScrollbarPair.prototype.setX=function(t){this.hScroll&&this.hScroll.set(t,!0)},De.ScrollbarPair.prototype.setY=function(t){this.vScroll&&this.vScroll.set(t,!0)},De.ScrollbarPair.prototype.setContainerVisible=function(t){this.hScroll&&this.hScroll.setContainerVisible(t),this.vScroll&&this.vScroll.setContainerVisible(t)},De.ScrollbarPair.prototype.isVisible=function(){var t=!1;return this.hScroll&&(t=this.hScroll.isVisible()),this.vScroll&&(t=t||this.vScroll.isVisible()),t},De.ScrollbarPair.prototype.resizeContent=function(t){this.hScroll&&this.hScroll.resizeContentHorizontal(t),this.vScroll&&this.vScroll.resizeContentVertical(t)},De.ScrollbarPair.prototype.resizeView=function(t){this.hScroll&&this.hScroll.resizeViewHorizontal(t),this.vScroll&&this.vScroll.resizeViewVertical(t)};var Z_KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},nt={ShortcutRegistry:function(){nt.ShortcutRegistry.registry=this,this.registry_=Object.create(null),this.keyMap_=Object.create(null)}};nt.ShortcutRegistry.modifierKeys={Shift:Z_KeyCodes.SHIFT,Control:Z_KeyCodes.CTRL,Alt:Z_KeyCodes.ALT,Meta:Z_KeyCodes.META},nt.ShortcutRegistry.prototype.register=function(t,e){if(this.registry_[t.name]&&!e)throw Error('Shortcut with name "'+t.name+'" already exists.');this.registry_[t.name]=t},nt.ShortcutRegistry.prototype.unregister=function(t){return this.registry_[t]?(this.removeAllKeyMappings(t),delete this.registry_[t],!0):(console.warn('Keyboard shortcut with name "'+t+'" not found.'),!1)},nt.ShortcutRegistry.prototype.addKeyMapping=function(t,e,o){t=String(t);var r=this.keyMap_[t];if(r&&!o)throw Error('Shortcut with name "'+e+'" collides with shortcuts '+r.toString());r&&o?r.unshift(e):this.keyMap_[t]=[e]},nt.ShortcutRegistry.prototype.removeKeyMapping=function(t,e,o){var r=this.keyMap_[t];if(!r&&!o)return console.warn('No keyboard shortcut with name "'+e+'" registered with key code "'+t+'"'),!1;var c=r.indexOf(e);return-1<c?(r.splice(c,1),0===r.length&&delete this.keyMap_[t],!0):(o||console.warn('No keyboard shortcut with name "'+e+'" registered with key code "'+t+'"'),!1)},nt.ShortcutRegistry.prototype.removeAllKeyMappings=function(t){for(var e in this.keyMap_)this.removeKeyMapping(e,t,!0)},nt.ShortcutRegistry.prototype.setKeyMap=function(t){this.keyMap_=t},nt.ShortcutRegistry.prototype.getKeyMap=function(){return(0,l.module$exports$Blockly$utils$object.deepMerge)(Object.create(null),this.keyMap_)},nt.ShortcutRegistry.prototype.getRegistry=function(){return(0,l.module$exports$Blockly$utils$object.deepMerge)(Object.create(null),this.registry_)},nt.ShortcutRegistry.prototype.onKeyDown=function(t,e){var o=this.serializeKeyEvent_(e);if(!(o=this.getShortcutNamesByKeyCode(o)))return!1;for(var c,r=0;c=o[r];r++)if((!(c=this.registry_[c]).preconditionFn||c.preconditionFn(t))&&c.callback&&c.callback(t,e,c))return!0;return!1},nt.ShortcutRegistry.prototype.getShortcutNamesByKeyCode=function(t){return this.keyMap_[t]||[]},nt.ShortcutRegistry.prototype.getKeyCodesByShortcutName=function(t){var o,e=[];for(o in this.keyMap_)-1<this.keyMap_[o].indexOf(t)&&e.push(o);return e},nt.ShortcutRegistry.prototype.serializeKeyEvent_=function(t){var o,e="";for(o in nt.ShortcutRegistry.modifierKeys)t.getModifierState(o)&&(""!==e&&(e+="+"),e+=o);return""!==e&&t.keyCode?e=e+"+"+t.keyCode:t.keyCode&&(e=t.keyCode.toString()),e},nt.ShortcutRegistry.prototype.checkModifiers_=function(t){for(var r,e=(0,l.module$exports$Blockly$utils$object.values)(nt.ShortcutRegistry.modifierKeys),o=0;r=t[o];o++)if(0>e.indexOf(r))throw Error(r+" is not a valid modifier key.")},nt.ShortcutRegistry.prototype.createSerializedKey=function(t,e){var o="";if(e)for(var r in this.checkModifiers_(e),nt.ShortcutRegistry.modifierKeys)-1<e.indexOf(nt.ShortcutRegistry.modifierKeys[r])&&(""!==o&&(o+="+"),o+=r);return""!==o&&t?o=o+"+"+t:t&&(o=t.toString()),o},new nt.ShortcutRegistry;var Vo={WorkspaceDragSurfaceSvg:function(t){this.container_=t,this.createDom()}};Vo.WorkspaceDragSurfaceSvg.prototype.SVG_=null,Vo.WorkspaceDragSurfaceSvg.prototype.container_=null,Vo.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=(0,s.createSvgElement)(B.Svg.SVG,{xmlns:s.SVG_NS,"xmlns:html":s.HTML_NS,"xmlns:xlink":s.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},Vo.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(t,e){t=t.toFixed(0),e=e.toFixed(0),this.SVG_.style.display="block",(0,s.setCssTransform)(this.SVG_,"translate3d("+t+"px, "+e+"px, 0)")},Vo.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return(0,dt.getRelativeXY)(this.SVG_)},Vo.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(t){if(!t)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var e=this.SVG_.childNodes[0],o=this.SVG_.childNodes[1];if(!(e&&o&&(0,s.hasClass)(e,"blocklyBlockCanvas")&&(0,s.hasClass)(o,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!==this.previousSibling_?(0,s.insertAfter)(e,this.previousSibling_):t.insertBefore(e,t.firstChild),(0,s.insertAfter)(o,e),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");(0,s.setCssTransform)(this.SVG_,""),this.previousSibling_=null},Vo.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(t,e,o,r,c,h){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=o,t.setAttribute("transform","translate(0, 0) scale("+h+")"),e.setAttribute("transform","translate(0, 0) scale("+h+")"),this.SVG_.setAttribute("width",r),this.SVG_.setAttribute("height",c),this.SVG_.appendChild(t),this.SVG_.appendChild(e),this.SVG_.style.display="block"};var Ke={},Wo=null;Ke.copy=function(t){Wo=t.toCopyData()},Ke.paste=function(){if(!Wo)return!1;var t=Wo.source;return t.isFlyout&&(t=t.targetWorkspace),!(!Wo.typeCounts||!t.isCapacityAvailable(Wo.typeCounts)||((0,f.setGroup)(!0),t.paste(Wo.saveInfo),(0,f.setGroup)(!1),0))},Ke.duplicate=function(t){var e=Wo;(0,Ke.copy)(t),t.workspace.paste(Wo.saveInfo),Wo=e};var $e={MenuItem:function(t,e){this.content_=t,this.value_=e,this.enabled_=!0,this.element_=null,this.rightToLeft_=!1,this.roleName_=null,this.highlight_=this.checked_=this.checkable_=!1,this.actionHandler_=null}};$e.MenuItem.prototype.createDom=function(){var t=document.createElement("div");t.id=(0,_t.getNextUniqueId)(),this.element_=t,t.className="blocklyMenuItem goog-menuitem "+(this.enabled_?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked_?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight_?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft_?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var e=document.createElement("div");if(e.className="blocklyMenuItemContent goog-menuitem-content",this.checkable_){var o=document.createElement("div");o.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",e.appendChild(o)}return o=this.content_,"string"==typeof this.content_&&(o=document.createTextNode(this.content_)),e.appendChild(o),t.appendChild(e),this.roleName_&&(0,F.setRole)(t,this.roleName_),(0,F.setState)(t,F.State.SELECTED,this.checkable_&&this.checked_||!1),(0,F.setState)(t,F.State.DISABLED,!this.enabled_),t},$e.MenuItem.prototype.dispose=function(){this.element_=null},$e.MenuItem.prototype.getElement=function(){return this.element_},$e.MenuItem.prototype.getId=function(){return this.element_.id},$e.MenuItem.prototype.getValue=function(){return this.value_},$e.MenuItem.prototype.setRightToLeft=function(t){this.rightToLeft_=t},$e.MenuItem.prototype.setRole=function(t){this.roleName_=t},$e.MenuItem.prototype.setCheckable=function(t){this.checkable_=t},$e.MenuItem.prototype.setChecked=function(t){this.checked_=t},$e.MenuItem.prototype.setHighlighted=function(t){this.highlight_=t;var e=this.getElement();e&&this.isEnabled()&&(t?((0,s.addClass)(e,"blocklyMenuItemHighlight"),(0,s.addClass)(e,"goog-menuitem-highlight")):((0,s.removeClass)(e,"blocklyMenuItemHighlight"),(0,s.removeClass)(e,"goog-menuitem-highlight")))},$e.MenuItem.prototype.isEnabled=function(){return this.enabled_},$e.MenuItem.prototype.setEnabled=function(t){this.enabled_=t},$e.MenuItem.prototype.performAction=function(){this.isEnabled()&&this.actionHandler_&&this.actionHandler_(this)},$e.MenuItem.prototype.onAction=function(t,e){this.actionHandler_=t.bind(e)};var ee={Menu:function(){this.menuItems_=[],this.roleName_=this.element_=this.onKeyDownHandler_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=this.highlightedItem_=this.openingCoords=null}};ee.Menu.prototype.addChild=function(t){this.menuItems_.push(t)},ee.Menu.prototype.render=function(t){var e=document.createElement("div");e.className="blocklyMenu goog-menu blocklyNonSelectable",e.tabIndex=0,this.roleName_&&(0,F.setRole)(e,this.roleName_),this.element_=e;for(var r,o=0;r=this.menuItems_[o];o++)e.appendChild(r.createDom());this.mouseOverHandler_=(0,g.conditionalBind)(e,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=(0,g.conditionalBind)(e,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=(0,g.conditionalBind)(e,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=(0,g.conditionalBind)(e,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownHandler_=(0,g.conditionalBind)(e,"keydown",this,this.handleKeyEvent_),t.appendChild(e)},ee.Menu.prototype.getElement=function(){return this.element_},ee.Menu.prototype.focus=function(){var t=this.getElement();t&&(t.focus({preventScroll:!0}),(0,s.addClass)(t,"blocklyFocused"))},ee.Menu.prototype.blur_=function(){var t=this.getElement();t&&(t.blur(),(0,s.removeClass)(t,"blocklyFocused"))},ee.Menu.prototype.setRole=function(t){this.roleName_=t},ee.Menu.prototype.dispose=function(){this.mouseOverHandler_&&((0,g.unbind)(this.mouseOverHandler_),this.mouseOverHandler_=null),this.clickHandler_&&((0,g.unbind)(this.clickHandler_),this.clickHandler_=null),this.mouseEnterHandler_&&((0,g.unbind)(this.mouseEnterHandler_),this.mouseEnterHandler_=null),this.mouseLeaveHandler_&&((0,g.unbind)(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null),this.onKeyDownHandler_&&((0,g.unbind)(this.onKeyDownHandler_),this.onKeyDownHandler_=null);for(var e,t=0;e=this.menuItems_[t];t++)e.dispose();this.element_=null},ee.Menu.prototype.getMenuItem_=function(t){for(var e=this.getElement();t&&t!==e;){if((0,s.hasClass)(t,"blocklyMenuItem"))for(var r,o=0;r=this.menuItems_[o];o++)if(r.getElement()===t)return r;t=t.parentElement}return null},ee.Menu.prototype.setHighlighted=function(t){var e=this.highlightedItem_;e&&(e.setHighlighted(!1),this.highlightedItem_=null),t&&(t.setHighlighted(!0),this.highlightedItem_=t,e=this.getElement(),(0,q.scrollIntoContainerView)(t.getElement(),e),(0,F.setState)(e,F.State.ACTIVEDESCENDANT,t.getId()))},ee.Menu.prototype.highlightNext=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(t,1)},ee.Menu.prototype.highlightPrevious=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(0>t?this.menuItems_.length:t,-1)},ee.Menu.prototype.highlightFirst_=function(){this.highlightHelper_(-1,1)},ee.Menu.prototype.highlightLast_=function(){this.highlightHelper_(this.menuItems_.length,-1)},ee.Menu.prototype.highlightHelper_=function(t,e){t+=e;for(var o;o=this.menuItems_[t];){if(o.isEnabled()){this.setHighlighted(o);break}t+=e}},ee.Menu.prototype.handleMouseOver_=function(t){(t=this.getMenuItem_(t.target))&&(t.isEnabled()?this.highlightedItem_!==t&&this.setHighlighted(t):this.setHighlighted(null))},ee.Menu.prototype.handleClick_=function(t){var e=this.openingCoords;if(this.openingCoords=null,e&&"number"==typeof t.clientX){var o=new N.Coordinate(t.clientX,t.clientY);if(1>N.Coordinate.distance(e,o))return}(t=this.getMenuItem_(t.target))&&t.performAction()},ee.Menu.prototype.handleMouseEnter_=function(t){this.focus()},ee.Menu.prototype.handleMouseLeave_=function(t){this.getElement()&&(this.blur_(),this.setHighlighted(null))},ee.Menu.prototype.handleKeyEvent_=function(t){if(this.menuItems_.length&&!(t.shiftKey||t.ctrlKey||t.metaKey||t.altKey)){var e=this.highlightedItem_;switch(t.keyCode){case Z_KeyCodes.ENTER:case Z_KeyCodes.SPACE:e&&e.performAction();break;case Z_KeyCodes.UP:this.highlightPrevious();break;case Z_KeyCodes.DOWN:this.highlightNext();break;case Z_KeyCodes.PAGE_UP:case Z_KeyCodes.HOME:this.highlightFirst_();break;case Z_KeyCodes.PAGE_DOWN:case Z_KeyCodes.END:this.highlightLast_();break;default:return}t.preventDefault(),t.stopPropagation()}},ee.Menu.prototype.getSize=function(){var t=this.getElement(),e=(0,q.getSize)(t);return e.height=t.scrollHeight,e};var xi={VARIABLES:100,BLOCKS:50},wi={register:function(t,e){(0,x.register)(x.Type.SERIALIZER,t,e)},unregister:function(t){(0,x.unregister)(x.Type.SERIALIZER,t)}},Wt={DeserializationError:function(){var t=Error.apply(this,arguments);this.message=t.message,"stack"in t&&(this.stack=t.stack)}};_.inherits(Wt.DeserializationError,Error),Wt.MissingBlockType=function(t){Wt.DeserializationError.call(this,"Expected to find a 'type' property, defining the block type"),this.state=t},_.inherits(Wt.MissingBlockType,Wt.DeserializationError),Wt.MissingConnection=function(t,e,o){Wt.DeserializationError.call(this,"The block "+e.toDevString()+" is missing a(n) "+t+"\nconnection"),this.block=e,this.state=o},_.inherits(Wt.MissingConnection,Wt.DeserializationError),Wt.BadConnectionCheck=function(t,e,o,r){Wt.DeserializationError.call(this,"The block "+o.toDevString()+" could not connect its\n"+e+" to its parent, because: "+t),this.childBlock=o,this.childState=r},_.inherits(Wt.BadConnectionCheck,Wt.DeserializationError),Wt.RealChildOfShadow=function(t){Wt.DeserializationError.call(this,"Encountered a real block which is defined as a child of a shadow\nblock. It is an invariant of Blockly that shadow blocks only have shadow\nchildren"),this.state=t},_.inherits(Wt.RealChildOfShadow,Wt.DeserializationError);var oi={ISerializer:function(){}};oi.ISerializer.prototype.save=function(t){},oi.ISerializer.prototype.load=function(t,e){},oi.ISerializer.prototype.clear=function(t){};var ye={save:function(t,e){var o=void 0===e?{}:e;e=void 0!==o.addCoordinates&&o.addCoordinates;var r=void 0===o.addInputBlocks||o.addInputBlocks,c=void 0===o.addNextBlocks||o.addNextBlocks;if(o=void 0===o.doFullSerialization||o.doFullSerialization,t.isInsertionMarker())return null;var h={type:t.type,id:t.id};return e&&xr(t,h),Rr(t,h),wr(t,h),Mr(t,h),Or(t,h,o),r&&Ar(t,h,o),c&&Dr(t,h,o),h}},Rr=function(t,e){t.isCollapsed()&&(e.collapsed=!0),t.isEnabled()||(e.enabled=!1),void 0!==t.inputsInline&&t.inputsInline!==t.inputsInlineDefault&&(e.inline=t.inputsInline),t.data&&(e.data=t.data)},xr=function(t,e){var o=t.workspace;t=t.getRelativeToSurfaceXY(),e.x=Math.round(o.RTL?o.getWidth()-t.x:t.x),e.y=Math.round(t.y)},wr=function(t,e){t.saveExtraState?null!==(t=t.saveExtraState())&&(e.extraState=t):t.mutationToDom&&null!==(t=t.mutationToDom())&&(e.extraState=(0,l.module$exports$Blockly$Xml.domToText)(t).replace(' xmlns="https://developers.google.com/blockly/xml"',""))},Mr=function(t,e){t.getCommentText()&&(e.icons={comment:{text:t.getCommentText(),pinned:t.commentModel.pinned,height:Math.round(t.commentModel.size.height),width:Math.round(t.commentModel.size.width)}})},Or=function(t,e,o){for(var r=Object.create(null),c=0;c<t.inputList.length;c++)for(var h=t.inputList[c],k=0;k<h.fieldRow.length;k++){var C=h.fieldRow[k];C.isSerializable()&&(r[C.name]=C.saveState(o))}Object.keys(r).length&&(e.fields=r)},Ar=function(t,e,o){for(var r=Object.create(null),c=0;c<t.inputList.length;c++){var h=t.inputList[c];if(h.type!==l.module$exports$Blockly$inputTypes.inputTypes.DUMMY){var k=Ji(h.connection,o);k&&(r[h.name]=k)}}Object.keys(r).length&&(e.inputs=r)},Dr=function(t,e,o){t.nextConnection&&(t=Ji(t.nextConnection,o))&&(e.next=t)},Ji=function(t,e){var o=t.getShadowState(!0);if(t=t.targetBlock(),!o&&!t)return null;var r=Object.create(null);return o&&(r.shadow=o),t&&!t.isShadow()&&(r.block=(0,ye.save)(t,{doFullSerialization:e})),r};ye.append=function(t,e,o){return(0,ye.appendInternal)(t,e,{recordUndo:void 0!==(o=void 0===o?{}:o).recordUndo&&o.recordUndo})},ye.appendInternal=function(t,e,o){var r=void 0===o?{}:o;o=void 0===r.parentConnection?void 0:r.parentConnection;var c=void 0!==r.isShadow&&r.isShadow,h=void 0!==r.recordUndo&&r.recordUndo;r=(0,f.getRecordUndo)(),(0,f.setRecordUndo)(h),(h=(0,f.getGroup)())||(0,f.setGroup)(!0),(0,f.disable)();var k=Zi(t,e,{parentConnection:o,isShadow:c});return(0,f.enable)(),(0,f.fire)(new((0,f.get)(f.CREATE))(k)),(0,f.setGroup)(h),(0,f.setRecordUndo)(r),e.rendered&&setTimeout(function(){k.disposed||k.setConnectionTracking(!0)},1),k};var Zi=function(t,e,o){var r=void 0===o?{}:o;if(o=void 0===r.parentConnection?void 0:r.parentConnection,r=void 0!==r.isShadow&&r.isShadow,!t.type)throw new Wt.MissingBlockType(t);var c=e.newBlock(t.type,t.id);return c.setShadow(r),Lr(c,t),Nr(c,t),Pr(c,t),Fr(o,c,t),Gr(c,t),Ur(c,t),Hr(c,t),Vr(c,t),Wr(c,e.rendered),c},Lr=function(t,e){var o=void 0===e.x?0:e.x;e=void 0===e.y?0:e.y;var r=t.workspace;o=r.RTL?r.getWidth()-o:o,t.moveBy(o,e)},Nr=function(t,e){e.collapsed&&t.setCollapsed(!0),!1===e.enabled&&t.setEnabled(!1),void 0!==e.inline&&t.setInputsInline(e.inline),void 0!==e.data&&(t.data=e.data)},Pr=function(t,e){e.extraState&&(t.loadExtraState?t.loadExtraState(e.extraState):t.domToMutation((0,l.module$exports$Blockly$Xml.textToDom)(e.extraState)))},Fr=function(t,e,o){if(t){if(t.getSourceBlock().isShadow()&&!e.isShadow())throw new Wt.RealChildOfShadow(o);if(t.type===l.module$exports$Blockly$inputTypes.inputTypes.VALUE){var r=e.outputConnection;if(!r)throw new Wt.MissingConnection("output",e,o)}else if(!(r=e.previousConnection))throw new Wt.MissingConnection("previous",e,o);if(!t.connect(r)){var c=e.workspace.connectionChecker;throw new Wt.BadConnectionCheck(c.getErrorMessage(c.canConnectWithReason(r,t,!1),r,t),t.type===l.module$exports$Blockly$inputTypes.inputTypes.VALUE?"output connection":"previous connection",e,o)}}},Gr=function(t,e){e.icons&&(e=e.icons.comment)&&(t.setCommentText(e.text),t.commentModel.pinned=e.pinned,t.commentModel.size=new et.Size(e.width,e.height),e.pinned&&t.getCommentIcon&&!t.isInFlyout&&setTimeout(function(){return t.getCommentIcon().setVisible(!0)},1))},Ur=function(t,e){if(e.fields)for(var o=Object.keys(e.fields),r=0;r<o.length;r++){var c=o[r],h=e.fields[c],k=t.getField(c);k?k.loadState(h):console.warn("Ignoring non-existant field "+c+" in block "+t.type)}},Hr=function(t,e){if(e.inputs)for(var o=Object.keys(e.inputs),r=0;r<o.length;r++){var c=o[r],h=t.getInput(c);if(!h||!h.connection)throw new Wt.MissingConnection(c,t,e);qi(h.connection,e.inputs[c])}},Vr=function(t,e){if(e.next){if(!t.nextConnection)throw new Wt.MissingConnection("next",t,e);qi(t.nextConnection,e.next)}},qi=function(t,e){e.shadow&&t.setShadowState(e.shadow),e.block&&Zi(e.block,t.getSourceBlock().workspace,{parentConnection:t})},Wr=function(t,e){e?(t.setConnectionTracking(!1),t.initSvg(),t.render(!1)):t.initModel()},zr=ye.save,ni=function(){this.priority=xi.BLOCKS};ni.prototype.save=function(t){for(var e=[],o=(t=_.makeIterator(t.getTopBlocks(!1))).next();!o.done;o=t.next())(o=zr(o.value,{addCoordinates:!0,doFullSerialization:!1}))&&e.push(o);return e.length?{languageVersion:0,blocks:e}:null},ni.prototype.load=function(t,e){for(var o=(t=_.makeIterator(t.blocks)).next();!o.done;o=t.next())(0,ye.append)(o.value,e,{recordUndo:(0,f.getRecordUndo)()})},ni.prototype.clear=function(t){for(var e=(t=_.makeIterator(t.getTopBlocks(!1))).next();!e.done;e=t.next())e.value.dispose(!1)},(0,wi.register)("blocks",new ni);var eo=function(){this.isBlank=null,this.workspaceId=void 0,this.group=(0,f.getGroup)(),this.recordUndo=(0,f.getRecordUndo)()};eo.prototype.isUiEvent=!1,eo.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),t},eo.prototype.fromJson=function(t){this.isBlank=!1,this.group=t.group},eo.prototype.isNull=function(){return!1},eo.prototype.run=function(t){},eo.prototype.getEventWorkspace_=function(){var t;if(this.workspaceId&&(t=Q.Workspace.getById(this.workspaceId)),!t)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return t};var ro={BlockBase:function(t){ro.BlockBase.superClass_.constructor.call(this),this.blockId=(this.isBlank=typeof t>"u")?"":t.id,this.workspaceId=this.isBlank?"":t.workspace.id}};(0,l.module$exports$Blockly$utils$object.inherits)(ro.BlockBase,eo),ro.BlockBase.prototype.toJson=function(){var t=ro.BlockBase.superClass_.toJson.call(this);return t.blockId=this.blockId,t},ro.BlockBase.prototype.fromJson=function(t){ro.BlockBase.superClass_.fromJson.call(this,t),this.blockId=t.blockId};var Wn,$o={BlockCreate:function(t){$o.BlockCreate.superClass_.constructor.call(this,t),t&&(t.isShadow()&&(this.recordUndo=!1),this.xml=(0,l.module$exports$Blockly$Xml.blockToDomWithXY)(t),this.ids=(0,f.getDescendantIds)(t),this.json=(0,ye.save)(t,{addCoordinates:!0}))}};(0,l.module$exports$Blockly$utils$object.inherits)($o.BlockCreate,ro.BlockBase),$o.BlockCreate.prototype.type=f.CREATE,$o.BlockCreate.prototype.toJson=function(){var t=$o.BlockCreate.superClass_.toJson.call(this);return t.xml=(0,l.module$exports$Blockly$Xml.domToText)(this.xml),t.ids=this.ids,t.json=this.json,this.recordUndo||(t.recordUndo=this.recordUndo),t},$o.BlockCreate.prototype.fromJson=function(t){$o.BlockCreate.superClass_.fromJson.call(this,t),this.xml=(0,l.module$exports$Blockly$Xml.textToDom)(t.xml),this.ids=t.ids,this.json=t.json,void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},$o.BlockCreate.prototype.run=function(t){var e=this.getEventWorkspace_();if(t)(0,ye.append)(this.json,e);else for(t=0;t<this.ids.length;t++){var o=this.ids[t],r=e.getBlockById(o);r?r.dispose(!1):o===this.blockId&&console.warn("Can't uncreate non-existent block: "+o)}},(0,x.register)(x.Type.EVENT,f.CREATE,$o.BlockCreate),l.module$exports$Blockly$ContextMenu={},Wn=null,l.module$exports$Blockly$ContextMenu.getCurrentBlock=function(){return Wn},l.module$exports$Blockly$ContextMenu.setCurrentBlock=function(t){Wn=t},Object.defineProperties(l.module$exports$Blockly$ContextMenu,{currentBlock:{get:function(){return(0,ht.warn)("Blockly.ContextMenu.currentBlock","September 2021","September 2022","Blockly.Tooltip.getCurrentBlock()"),(0,l.module$exports$Blockly$ContextMenu.getCurrentBlock)()},set:function(t){(0,ht.warn)("Blockly.ContextMenu.currentBlock","September 2021","September 2022","Blockly.Tooltip.setCurrentBlock(block)"),(0,l.module$exports$Blockly$ContextMenu.setCurrentBlock)(t)}}});var ii=null;l.module$exports$Blockly$ContextMenu.show=function(t,e,o){if((0,m.show)(l.module$exports$Blockly$ContextMenu,o,l.module$exports$Blockly$ContextMenu.dispose),e.length){var r=Xr(e,o);ii=r,Yr(r,t,o),setTimeout(function(){r.focus()},1),Wn=null}else(0,l.module$exports$Blockly$ContextMenu.hide)()};var Xr=function(t,e){var o=new ee.Menu;o.setRole(F.Role.MENU);for(var r=0;r<t.length;r++){var c=t[r],h=new $e.MenuItem(c.text);h.setRightToLeft(e),h.setRole(F.Role.MENUITEM),o.addChild(h),h.setEnabled(c.enabled),c.enabled&&h.onAction(function(k){(0,l.module$exports$Blockly$ContextMenu.hide)(),this.callback(this.scope)},c)}return o},Yr=function(t,e,o){var r=(0,dt.getViewportBBox)();e=new yt.Rect(e.clientY+r.top,e.clientY+r.top,e.clientX+r.left,e.clientX+r.left),jr(t);var c=t.getSize();o&&(e.left+=c.width,e.right+=c.width,r.left+=c.width,r.right+=c.width),(0,m.positionWithAnchor)(r,e,c,o),t.focus()},jr=function(t){var e=(0,m.getDiv)();if(!e)throw Error("Attempting to create a context menu when widget div is null");t.render(e),e=t.getElement(),(0,s.addClass)(e,"blocklyContextMenu"),(0,g.conditionalBind)(e,"contextmenu",null,Kr),t.focus()},Kr=function(t){t.preventDefault(),t.stopPropagation()};l.module$exports$Blockly$ContextMenu.hide=function(){(0,m.hideIfOwner)(l.module$exports$Blockly$ContextMenu),Wn=null},l.module$exports$Blockly$ContextMenu.dispose=function(){ii&&(ii.dispose(),ii=null)},l.module$exports$Blockly$ContextMenu.callbackFactory=function(t,e){return function(){(0,f.disable)();try{var o=(0,l.module$exports$Blockly$Xml.domToBlock)(e,t.workspace),r=t.getRelativeToSurfaceXY();r.x=t.RTL?r.x-l.module$exports$Blockly$internalConstants.SNAP_RADIUS:r.x+l.module$exports$Blockly$internalConstants.SNAP_RADIUS,r.y+=2*l.module$exports$Blockly$internalConstants.SNAP_RADIUS,o.moveBy(r.x,r.y)}finally{(0,f.enable)()}(0,f.isEnabled)()&&!o.isShadow()&&(0,f.fire)(new((0,f.get)(f.CREATE))(o)),o.select()}},l.module$exports$Blockly$ContextMenu.commentDeleteOption=function(t){return{text:l.module$exports$Blockly$Msg.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){(0,f.setGroup)(!0),t.dispose(),(0,f.setGroup)(!1)}}},l.module$exports$Blockly$ContextMenu.commentDuplicateOption=function(t){return{text:l.module$exports$Blockly$Msg.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){(0,Ke.duplicate)(t)}}},l.module$exports$Blockly$ContextMenu.workspaceCommentOption=function(t,e){var o=it;if(!o)throw Error("Missing require for Blockly.WorkspaceCommentSvg");var r={enabled:!ot.IE};return r.text=l.module$exports$Blockly$Msg.Msg.ADD_COMMENT,r.callback=function(){var c=new o(t,l.module$exports$Blockly$Msg.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,o.DEFAULT_SIZE,o.DEFAULT_SIZE),h=t.getInjectionDiv().getBoundingClientRect();h=new N.Coordinate(e.clientX-h.left,e.clientY-h.top);var k=t.getOriginOffsetInPixels();(h=N.Coordinate.difference(h,k)).scale(1/t.scale),c.moveBy(h.x,h.y),t.rendered&&(c.initSvg(),c.render(),c.select())},r};var Je_removeElem=function(t,e){return-1!==(e=t.indexOf(e))&&(t.splice(e,1),!0)},so={},Mi=!1;so.isDebuggerEnabled=function(){return Mi},so.startDebugger=function(){Mi=!0},so.stopDebugger=function(){Mi=!1};var S={Types:{NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608}};S.Types.LEFT_CORNER=S.Types.LEFT_SQUARE_CORNER|S.Types.LEFT_ROUND_CORNER,S.Types.RIGHT_CORNER=S.Types.RIGHT_SQUARE_CORNER|S.Types.RIGHT_ROUND_CORNER,S.Types.nextTypeValue_=16777216,S.Types.getType=function(t){return Object.prototype.hasOwnProperty.call(S.Types,t)||(S.Types[t]=S.Types.nextTypeValue_,S.Types.nextTypeValue_<<=1),S.Types[t]},S.Types.isField=function(t){return t.type&S.Types.FIELD},S.Types.isHat=function(t){return t.type&S.Types.HAT},S.Types.isIcon=function(t){return t.type&S.Types.ICON},S.Types.isSpacer=function(t){return t.type&S.Types.SPACER},S.Types.isInRowSpacer=function(t){return t.type&S.Types.IN_ROW_SPACER},S.Types.isInput=function(t){return t.type&S.Types.INPUT},S.Types.isExternalInput=function(t){return t.type&S.Types.EXTERNAL_VALUE_INPUT},S.Types.isInlineInput=function(t){return t.type&S.Types.INLINE_INPUT},S.Types.isStatementInput=function(t){return t.type&S.Types.STATEMENT_INPUT},S.Types.isPreviousConnection=function(t){return t.type&S.Types.PREVIOUS_CONNECTION},S.Types.isNextConnection=function(t){return t.type&S.Types.NEXT_CONNECTION},S.Types.isPreviousOrNextConnection=function(t){return t.type&(S.Types.PREVIOUS_CONNECTION|S.Types.NEXT_CONNECTION)},S.Types.isLeftRoundedCorner=function(t){return t.type&S.Types.LEFT_ROUND_CORNER},S.Types.isRightRoundedCorner=function(t){return t.type&S.Types.RIGHT_ROUND_CORNER},S.Types.isLeftSquareCorner=function(t){return t.type&S.Types.LEFT_SQUARE_CORNER},S.Types.isRightSquareCorner=function(t){return t.type&S.Types.RIGHT_SQUARE_CORNER},S.Types.isCorner=function(t){return t.type&S.Types.CORNER},S.Types.isJaggedEdge=function(t){return t.type&S.Types.JAGGED_EDGE},S.Types.isRow=function(t){return t.type&S.Types.ROW},S.Types.isBetweenRowSpacer=function(t){return t.type&S.Types.BETWEEN_ROW_SPACER},S.Types.isTopRow=function(t){return t.type&S.Types.TOP_ROW},S.Types.isBottomRow=function(t){return t.type&S.Types.BOTTOM_ROW},S.Types.isTopOrBottomRow=function(t){return t.type&(S.Types.TOP_ROW|S.Types.BOTTOM_ROW)},S.Types.isInputRow=function(t){return t.type&S.Types.INPUT_ROW};var lo={Row:function(t){this.type=S.Types.ROW,this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT,this.align=null}};lo.Row.prototype.getLastInput=function(){for(var t=this.elements.length-1;0<=t;t--){var e=this.elements[t];if(S.Types.isInput(e))return e}return null},lo.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")},lo.Row.prototype.startsWithElemSpacer=function(){return!0},lo.Row.prototype.endsWithElemSpacer=function(){return!0},lo.Row.prototype.getFirstSpacer=function(){for(var t=0;t<this.elements.length;t++){var e=this.elements[t];if(S.Types.isSpacer(e))return e}return null},lo.Row.prototype.getLastSpacer=function(){for(var t=this.elements.length-1;0<=t;t--){var e=this.elements[t];if(S.Types.isSpacer(e))return e}return null};var So={BottomRow:function(t){So.BottomRow.superClass_.constructor.call(this,t),this.type|=S.Types.BOTTOM_ROW,this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0}};(0,l.module$exports$Blockly$utils$object.inherits)(So.BottomRow,lo.Row),So.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||!!t.getNextBlock()},So.BottomRow.prototype.hasRightSquareCorner=function(t){return!0},So.BottomRow.prototype.measure=function(){for(var t=0,e=0,o=0,r=0;r<this.elements.length;r++){var c=this.elements[r];e+=c.width,S.Types.isSpacer(c)||(S.Types.isNextConnection(c)?o=Math.max(o,c.height):t=Math.max(t,c.height))}this.width=Math.max(this.minWidth,e),this.height=Math.max(this.minHeight,t)+o,this.descenderHeight=o,this.widthWithConnectedBlocks=this.width},So.BottomRow.prototype.startsWithElemSpacer=function(){return!1},So.BottomRow.prototype.endsWithElemSpacer=function(){return!1};var Co_Measurable=function(t){this.height=this.width=0,this.type=S.Types.NONE,this.centerline=this.xPos=0,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT},fn={Connection:function(t,e){fn.Connection.superClass_.constructor.call(this,t),this.connectionModel=e,this.shape=this.constants_.shapeFor(e),this.isDynamicShape=!!this.shape.isDynamic,this.type|=S.Types.CONNECTION}};(0,l.module$exports$Blockly$utils$object.inherits)(fn.Connection,Co_Measurable);var wt={},Oi=.45;wt.getHsvSaturation=function(){return Oi},wt.setHsvSaturation=function(t){Oi=t};var Ai=.65;wt.getHsvValue=function(){return Ai},wt.setHsvValue=function(t){Ai=t},wt.parse=function(t){t=String(t).toLowerCase().trim();var e=wt.names[t];if(e||(e="0x"===t.substring(0,2)?"#"+t.substring(2):t,/^#[0-9a-f]{6}$/.test(e="#"===e[0]?e:"#"+e)))return e;if(/^#[0-9a-f]{3}$/.test(e))return["#",e[1],e[1],e[2],e[2],e[3],e[3]].join("");var o=t.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return o&&(t=Number(o[1]),e=Number(o[2]),o=Number(o[3]),0<=t&&256>t&&0<=e&&256>e&&0<=o&&256>o)?(0,wt.rgbToHex)(t,e,o):null},wt.rgbToHex=function(t,e,o){return e=t<<16|e<<8|o,16>t?"#"+(16777216|e).toString(16).substr(1):"#"+e.toString(16)},wt.hexToRgb=function(t){return(t=(0,wt.parse)(t))?[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t]:[0,0,0]},wt.hsvToHex=function(t,e,o){var r=0,c=0,h=0;if(0===e)h=c=r=o;else{var k=Math.floor(t/60),C=t/60-k;t=o*(1-e);var G=o*(1-e*C);switch(e=o*(1-e*(1-C)),k){case 1:r=G,c=o,h=t;break;case 2:r=t,c=o,h=e;break;case 3:r=t,c=G,h=o;break;case 4:r=e,c=t,h=o;break;case 5:r=o,c=t,h=G;break;case 6:case 0:r=o,c=e,h=t}}return(0,wt.rgbToHex)(Math.floor(r),Math.floor(c),Math.floor(h))},wt.blend=function(t,e,o){return(t=(0,wt.parse)(t))&&(e=(0,wt.parse)(e))?(t=(0,wt.hexToRgb)(t),e=(0,wt.hexToRgb)(e),(0,wt.rgbToHex)(Math.round(e[0]+o*(t[0]-e[0])),Math.round(e[1]+o*(t[1]-e[1])),Math.round(e[2]+o*(t[2]-e[2])))):null},wt.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},wt.hueToHex=function(t){return(0,wt.hsvToHex)(t,Oi,255*Ai)};var b={point:function(t,e){return" "+t+","+e+" "},curve:function(t,e){return" "+t+e.join("")},moveTo:function(t,e){return" M "+t+","+e+" "},moveBy:function(t,e){return" m "+t+","+e+" "},lineTo:function(t,e){return" l "+t+","+e+" "},line:function(t){return" l"+t.join("")},lineOnAxis:function(t,e){return" "+t+" "+e+" "},arc:function(t,e,o,r){return t+" "+o+" "+o+" "+e+r}},It={},Di=function(t,e){var o=[],r=t.split("");r.push("");var c=0;t=[];for(var h=null,k=0;k<r.length;k++){var C=r[k];0===c?"%"===C?((c=t.join(""))&&o.push(c),t.length=0,c=1):t.push(C):1===c?"%"===C?(t.push(C),c=0):e&&"0"<=C&&"9">=C?(c=2,h=C,(C=t.join(""))&&o.push(C),t.length=0):"{"===C?c=3:(t.push("%",C),c=0):2===c?"0"<=C&&"9">=C?h+=C:(o.push(parseInt(h,10)),k--,c=0):3===c&&(""===C?(t.splice(0,0,"%{"),k--,c=0):"}"!==C?t.push(C):(c=t.join(""),/[A-Z]\w*/i.test(c)?(C=c.toUpperCase(),(C=(0,l.module$exports$Blockly$utils$string.startsWith)(C,"BKY_")?C.substring(4):null)&&C in l.module$exports$Blockly$Msg.Msg?"string"==typeof(c=l.module$exports$Blockly$Msg.Msg[C])?Array.prototype.push.apply(o,Di(c,e)):o.push(e?String(c):c):o.push("%{"+c+"}")):o.push("%{"+c+"}"),c=t.length=0))}for((e=t.join(""))&&o.push(e),r=[],h=t.length=0;h<o.length;h++)"string"==typeof o[h]?t.push(o[h]):((e=t.join(""))&&r.push(e),t.length=0,r.push(o[h]));return(e=t.join(""))&&r.push(e),t.length=0,r};It.tokenizeInterpolation=function(t){return Di(t,!0)},It.replaceMessageReferences=function(t){return"string"!=typeof t?t:(t=Di(t,!1)).length?String(t[0]):""},It.checkMessageReferences=function(t){for(var e=!0,o=l.module$exports$Blockly$Msg.Msg,r=t.match(/%{BKY_[A-Z]\w*}/gi),c=0;c<r.length;c++)void 0===o[r[c].toUpperCase().slice(6,-1)]&&(console.warn("No message string for "+r[c]+" in "+t),e=!1);return e},It.parseBlockColour=function(t){var e="string"==typeof t?(0,It.replaceMessageReferences)(t):t,o=Number(e);if(!isNaN(o)&&0<=o&&360>=o)return{hue:o,hex:(0,wt.hsvToHex)(o,(0,wt.getHsvSaturation)(),255*(0,wt.getHsvValue)())};if(o=(0,wt.parse)(e))return{hue:null,hex:o};throw o='Invalid colour: "'+e+'"',t!==e&&(o+=' (from "'+t+'")'),Error(o)};var Pt={ConstantProvider:function(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.CORNER_RADIUS=8,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=(0,b.moveBy)(0,0),this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_TEXT_BASELINE_CENTER=!ot.IE&&!ot.EDGE,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2),this.defs_=null,this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2}}};Pt.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()},Pt.ConstantProvider.prototype.setTheme=function(t){this.blockStyles=Object.create(null);var o,e=t.blockStyles;for(o in e)this.blockStyles[o]=this.validatedBlockStyle_(e[o]);this.setDynamicProperties_(t)},Pt.ConstantProvider.prototype.setDynamicProperties_=function(t){this.setFontConstants_(t),this.setComponentConstants_(t),this.ADD_START_HATS=null!==t.startHats?t.startHats:this.ADD_START_HATS},Pt.ConstantProvider.prototype.setFontConstants_=function(t){this.FIELD_TEXT_FONTFAMILY=t.fontStyle&&void 0!==t.fontStyle.family?t.fontStyle.family:this.FIELD_TEXT_FONTFAMILY,this.FIELD_TEXT_FONTWEIGHT=t.fontStyle&&void 0!==t.fontStyle.weight?t.fontStyle.weight:this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTSIZE=t.fontStyle&&void 0!==t.fontStyle.size?t.fontStyle.size:this.FIELD_TEXT_FONTSIZE,t=(0,s.measureFontMetrics)("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=t.height,this.FIELD_TEXT_BASELINE=t.baseline},Pt.ConstantProvider.prototype.setComponentConstants_=function(t){this.CURSOR_COLOUR=t.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=t.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=t.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(t.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY},Pt.ConstantProvider.prototype.getBlockStyleForColour=function(t){var e="auto_"+t;return this.blockStyles[e]||(this.blockStyles[e]=this.createBlockStyle_(t)),{style:this.blockStyles[e],name:e}},Pt.ConstantProvider.prototype.getBlockStyle=function(t){return this.blockStyles[t||""]||(t&&0===t.indexOf("auto_")?this.getBlockStyleForColour(t.substring(5)).style:this.createBlockStyle_("#000000"))},Pt.ConstantProvider.prototype.createBlockStyle_=function(t){return this.validatedBlockStyle_({colourPrimary:t})},Pt.ConstantProvider.prototype.validatedBlockStyle_=function(t){var e={};return t&&(0,l.module$exports$Blockly$utils$object.mixin)(e,t),t=(0,It.parseBlockColour)(e.colourPrimary||"#000"),e.colourPrimary=t.hex,e.colourSecondary=e.colourSecondary?(0,It.parseBlockColour)(e.colourSecondary).hex:this.generateSecondaryColour_(e.colourPrimary),e.colourTertiary=e.colourTertiary?(0,It.parseBlockColour)(e.colourTertiary).hex:this.generateTertiaryColour_(e.colourPrimary),e.hat=e.hat||"",e},Pt.ConstantProvider.prototype.generateSecondaryColour_=function(t){return(0,wt.blend)("#fff",t,.6)||t},Pt.ConstantProvider.prototype.generateTertiaryColour_=function(t){return(0,wt.blend)("#fff",t,.3)||t},Pt.ConstantProvider.prototype.dispose=function(){this.embossFilter_&&(0,s.removeNode)(this.embossFilter_),this.disabledPattern_&&(0,s.removeNode)(this.disabledPattern_),this.debugFilter_&&(0,s.removeNode)(this.debugFilter_),this.cssNode_=null},Pt.ConstantProvider.prototype.makeJaggedTeeth=function(){var t=this.JAGGED_TEETH_HEIGHT,e=this.JAGGED_TEETH_WIDTH;return{height:t,width:e,path:(0,b.line)([(0,b.point)(e,t/4),(0,b.point)(2*-e,t/2),(0,b.point)(e,t/4)])}},Pt.ConstantProvider.prototype.makeStartHat=function(){var t=this.START_HAT_HEIGHT,e=this.START_HAT_WIDTH;return{height:t,width:e,path:(0,b.curve)("c",[(0,b.point)(30,-t),(0,b.point)(70,-t),(0,b.point)(e,0)])}},Pt.ConstantProvider.prototype.makePuzzleTab=function(){function t(h){var k=-(h=h?-1:1),C=o/2,G=C+2.5,j=C+.5,Et=(0,b.point)(-e,h*C);return C=(0,b.point)(e,h*C),(0,b.curve)("c",[(0,b.point)(0,h*G),(0,b.point)(-e,k*j),Et])+(0,b.curve)("s",[(0,b.point)(e,2.5*k),C])}var e=this.TAB_WIDTH,o=this.TAB_HEIGHT,r=t(!0),c=t(!1);return{type:this.SHAPES.PUZZLE,width:e,height:o,pathDown:c,pathUp:r}},Pt.ConstantProvider.prototype.makeNotch=function(){function t(k){return(0,b.line)([(0,b.point)(k*r,o),(0,b.point)(3*k,0),(0,b.point)(k*r,-o)])}var e=this.NOTCH_WIDTH,o=this.NOTCH_HEIGHT,r=(e-3)/2,c=t(1),h=t(-1);return{type:this.SHAPES.NOTCH,width:e,height:o,pathLeft:c,pathRight:h}},Pt.ConstantProvider.prototype.makeInsideCorners=function(){var t=this.CORNER_RADIUS;return{width:t,height:t,pathTop:(0,b.arc)("a","0 0,0",t,(0,b.point)(-t,t)),pathBottom:(0,b.arc)("a","0 0,0",t,(0,b.point)(t,t))}},Pt.ConstantProvider.prototype.makeOutsideCorners=function(){var t=this.CORNER_RADIUS,e=(0,b.moveBy)(0,t)+(0,b.arc)("a","0 0,1",t,(0,b.point)(t,-t)),o=(0,b.arc)("a","0 0,1",t,(0,b.point)(t,t)),r=(0,b.arc)("a","0 0,1",t,(0,b.point)(-t,-t));return{topLeft:e,topRight:o,bottomRight:(0,b.arc)("a","0 0,1",t,(0,b.point)(-t,t)),bottomLeft:r,rightHeight:t}},Pt.ConstantProvider.prototype.shapeFor=function(t){switch(t.type){case l.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE:case l.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE:return this.PUZZLE_TAB;case l.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT:case l.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}},Pt.ConstantProvider.prototype.createDom=function(t,e,o){this.injectCSS_(e,o),this.defs_=(0,s.createSvgElement)(B.Svg.DEFS,{},t),t=(0,s.createSvgElement)(B.Svg.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs_),(0,s.createSvgElement)(B.Svg.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},t),e=(0,s.createSvgElement)(B.Svg.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},t),(0,s.createSvgElement)(B.Svg.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},e),(0,s.createSvgElement)(B.Svg.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},t),(0,s.createSvgElement)(B.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},t),this.embossFilterId=t.id,this.embossFilter_=t,t=(0,s.createSvgElement)(B.Svg.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs_),(0,s.createSvgElement)(B.Svg.RECT,{width:10,height:10,fill:"#aaa"},t),(0,s.createSvgElement)(B.Svg.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},t),this.disabledPatternId=t.id,this.disabledPattern_=t,this.createDebugFilter()},Pt.ConstantProvider.prototype.createDebugFilter=function(){if(!this.debugFilter_){var t=(0,s.createSvgElement)(B.Svg.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs_),e=(0,s.createSvgElement)(B.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},t);(0,s.createSvgElement)(B.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},e),(0,s.createSvgElement)(B.Svg.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},t),(0,s.createSvgElement)(B.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.debugFilterId=t.id,this.debugFilter_=t}},Pt.ConstantProvider.prototype.injectCSS_=function(t,e){e=this.getCSS_(e),t="blockly-renderer-style-"+t,this.cssNode_=document.getElementById(t);var o=e.join("\n");this.cssNode_?this.cssNode_.firstChild.textContent=o:((e=document.createElement("style")).id=t,t=document.createTextNode(o),e.appendChild(t),document.head.insertBefore(e,document.head.firstChild),this.cssNode_=e)},Pt.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText, ",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect,",t+" .blocklyEditableText>rect {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","fill-opacity: .6;","stroke: none;","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text {","fill: #000;","}",t+" .blocklyFlyoutLabelText {","fill: #000;","}",t+" .blocklyText.blocklyBubbleText {","fill: #000;","}",t+" .blocklyEditableText:not(.editing):hover>rect {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",t+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",t+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",t+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",t+" .blocklyReplaceable .blocklyPathLight,",t+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]};var He={register:function(t,e){(0,x.register)(x.Type.FIELD,t,e)},unregister:function(t){(0,x.unregister)(x.Type.FIELD,t)},fromJson:function(t){var e=(0,x.getObject)(x.Type.FIELD,t.type);return e?e.fromJson(t):(console.warn("Blockly could not create a field of type "+t.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)}},Ve={MarkerManager:function(t){this.cursorSvg_=this.cursor_=null,this.markers_=Object.create(null),this.workspace_=t}};Ve.MarkerManager.LOCAL_MARKER="local_marker_1",Ve.MarkerManager.prototype.registerMarker=function(t,e){this.markers_[t]&&this.unregisterMarker(t),e.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,e)),this.setMarkerSvg(e.getDrawer().createDom()),this.markers_[t]=e},Ve.MarkerManager.prototype.unregisterMarker=function(t){var e=this.markers_[t];if(!e)throw Error("Marker with ID "+t+" does not exist. Can only unregister markers that exist.");e.dispose(),delete this.markers_[t]},Ve.MarkerManager.prototype.getCursor=function(){return this.cursor_},Ve.MarkerManager.prototype.getMarker=function(t){return this.markers_[t]||null},Ve.MarkerManager.prototype.setCursor=function(t){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=t)&&(t=this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,this.cursor_),this.cursor_.setDrawer(t),this.setCursorSvg(this.cursor_.getDrawer().createDom()))},Ve.MarkerManager.prototype.setCursorSvg=function(t){t?(this.workspace_.getBlockCanvas().appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},Ve.MarkerManager.prototype.setMarkerSvg=function(t){t?this.workspace_.getBlockCanvas()&&(this.cursorSvg_?this.workspace_.getBlockCanvas().insertBefore(t,this.cursorSvg_):this.workspace_.getBlockCanvas().appendChild(t)):this.markerSvg_=null},Ve.MarkerManager.prototype.updateMarkers=function(){this.workspace_.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace_.getCursor().draw()},Ve.MarkerManager.prototype.dispose=function(){for(var o,t=Object.keys(this.markers_),e=0;o=t[e];e++)this.unregisterMarker(o);this.markers_=null,this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)};var be={BlockChange:function(t,e,o,r,c){be.BlockChange.superClass_.constructor.call(this,t),t&&(this.element=typeof e>"u"?"":e,this.name=typeof o>"u"?"":o,this.oldValue=typeof r>"u"?"":r,this.newValue=typeof c>"u"?"":c)}};(0,l.module$exports$Blockly$utils$object.inherits)(be.BlockChange,ro.BlockBase),be.BlockChange.prototype.type=f.CHANGE,be.BlockChange.prototype.toJson=function(){var t=be.BlockChange.superClass_.toJson.call(this);return t.element=this.element,this.name&&(t.name=this.name),t.oldValue=this.oldValue,t.newValue=this.newValue,t},be.BlockChange.prototype.fromJson=function(t){be.BlockChange.superClass_.fromJson.call(this,t),this.element=t.element,this.name=t.name,this.oldValue=t.oldValue,this.newValue=t.newValue},be.BlockChange.prototype.isNull=function(){return this.oldValue===this.newValue},be.BlockChange.prototype.run=function(t){var e=this.getEventWorkspace_().getBlockById(this.blockId);if(e)switch(e.mutator&&e.mutator.setVisible(!1),t=t?this.newValue:this.oldValue,this.element){case"field":(e=e.getField(this.name))?e.setValue(t):console.warn("Can't set non-existent field: "+this.name);break;case"comment":e.setCommentText(t||null);break;case"collapsed":e.setCollapsed(!!t);break;case"disabled":e.setEnabled(!t);break;case"inline":e.setInputsInline(!!t);break;case"mutation":var o=be.BlockChange.getExtraBlockState_(e);e.loadExtraState?e.loadExtraState(JSON.parse(t||"{}")):e.domToMutation&&e.domToMutation((0,l.module$exports$Blockly$Xml.textToDom)(t||"<mutation/>")),(0,f.fire)(new be.BlockChange(e,"mutation",null,o,t));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},be.BlockChange.getExtraBlockState_=function(t){return t.saveExtraState?(t=t.saveExtraState())?JSON.stringify(t):"":t.mutationToDom&&(t=t.mutationToDom())?(0,l.module$exports$Blockly$Xml.domToText)(t):""},(0,x.register)(x.Type.EVENT,f.CHANGE,be.BlockChange);var co={},Li=0,ri=null;co.disposeUiEffect=function(t){var e=t.workspace,o=t.getSvgRoot();e.getAudioManager().play("delete"),t=e.getSvgXY(o),(o=o.cloneNode(!0)).translateX_=t.x,o.translateY_=t.y,o.setAttribute("transform","translate("+t.x+","+t.y+")"),e.getParentSvg().appendChild(o),o.bBox_=o.getBBox(),Qi(o,e.RTL,new Date,e.scale)};var Qi=function(t,e,o,r){var c=(new Date-o)/150;1<c?(0,s.removeNode)(t):(t.setAttribute("transform","translate("+(t.translateX_+(e?-1:1)*t.bBox_.width*r/2*c)+","+(t.translateY_+t.bBox_.height*r*c)+") scale("+(1-c)*r+")"),setTimeout(Qi,10,t,e,o,r))};co.connectionUiEffect=function(t){var e=t.workspace,o=e.scale;if(e.getAudioManager().play("click"),!(1>o)){var r=e.getSvgXY(t.getSvgRoot());t.outputConnection?(r.x+=(t.RTL?3:-3)*o,r.y+=13*o):t.previousConnection&&(r.x+=(t.RTL?-23:23)*o,r.y+=3*o),t=(0,s.createSvgElement)(B.Svg.CIRCLE,{cx:r.x,cy:r.y,r:0,fill:"none",stroke:"#888","stroke-width":10},e.getParentSvg()),tr(t,new Date,o)}};var tr=function(t,e,o){var r=(new Date-e)/150;1<r?(0,s.removeNode)(t):(t.setAttribute("r",25*r*o),t.style.opacity=1-r,Li=setTimeout(tr,10,t,e,o))};co.disconnectUiEffect=function(t){if(t.workspace.getAudioManager().play("disconnect"),!(1>t.workspace.scale)){var e=t.getHeightWidth().height;e=Math.atan(10/e)/Math.PI*180,t.RTL||(e*=-1),er(t.getSvgRoot(),e,new Date)}};var er=function(t,e,o){var r=(new Date-o)/200;1<r?t.skew_="":(t.skew_="skewX("+Math.round(Math.sin(r*Math.PI*3)*(1-r)*e)+")",ri=t,Li=setTimeout(er,10,t,e,o)),t.setAttribute("transform",t.translate_+t.skew_)};co.disconnectUiStop=function(){if(ri){clearTimeout(Li);var t=ri;t.skew_="",t.setAttribute("transform",t.translate_),ri=null}};var At={ComponentManager:function(){this.componentData_=Object.create(null),this.capabilityToComponentIds_=Object.create(null)}};At.ComponentManager.prototype.addComponent=function(t,e){var o=t.component.id;if(!e&&this.componentData_[o])throw Error('Plugin "'+o+'" with capabilities "'+this.componentData_[o].capabilities+'" already added.');this.componentData_[o]=t,e=[];for(var r=0;r<t.capabilities.length;r++){var c=String(t.capabilities[r]).toLowerCase();e.push(c),void 0===this.capabilityToComponentIds_[c]?this.capabilityToComponentIds_[c]=[o]:this.capabilityToComponentIds_[c].push(o)}this.componentData_[o].capabilities=e},At.ComponentManager.prototype.removeComponent=function(t){var e=this.componentData_[t];if(e){for(var o=0;o<e.capabilities.length;o++){var r=String(e.capabilities[o]).toLowerCase();Je_removeElem(this.capabilityToComponentIds_[r],t)}delete this.componentData_[t]}},At.ComponentManager.prototype.addCapability=function(t,e){if(!this.getComponent(t))throw Error('Cannot add capability, "'+e+'". Plugin "'+t+'" has not been added to the ComponentManager');this.hasCapability(t,e)?console.warn('Plugin "'+t+'already has capability "'+e+'"'):(e=String(e).toLowerCase(),this.componentData_[t].capabilities.push(e),this.capabilityToComponentIds_[e].push(t))},At.ComponentManager.prototype.removeCapability=function(t,e){if(!this.getComponent(t))throw Error('Cannot remove capability, "'+e+'". Plugin "'+t+'" has not been added to the ComponentManager');this.hasCapability(t,e)?(e=String(e).toLowerCase(),Je_removeElem(this.componentData_[t].capabilities,e),Je_removeElem(this.capabilityToComponentIds_[e],t)):console.warn('Plugin "'+t+"doesn't have capability \""+e+'" to remove')},At.ComponentManager.prototype.hasCapability=function(t,e){return e=String(e).toLowerCase(),-1!==this.componentData_[t].capabilities.indexOf(e)},At.ComponentManager.prototype.getComponent=function(t){return this.componentData_[t]&&this.componentData_[t].component},At.ComponentManager.prototype.getComponents=function(t,e){if(t=String(t).toLowerCase(),!(t=this.capabilityToComponentIds_[t]))return[];var o=[];if(e){var r=[],c=this.componentData_;t.forEach(function(k){r.push(c[k])}),r.sort(function(k,C){return k.weight-C.weight}),r.forEach(function(k){o.push(k.component)})}else{var h=this.componentData_;t.forEach(function(k){o.push(h[k].component)})}return o},At.ComponentManager.Capability=function(t){this.name_=t},At.ComponentManager.Capability.prototype.toString=function(){return this.name_},At.ComponentManager.Capability.POSITIONABLE=new At.ComponentManager.Capability("positionable"),At.ComponentManager.Capability.DRAG_TARGET=new At.ComponentManager.Capability("drag_target"),At.ComponentManager.Capability.DELETE_AREA=new At.ComponentManager.Capability("delete_area"),At.ComponentManager.Capability.AUTOHIDEABLE=new At.ComponentManager.Capability("autohideable");var _e={},or=function(t,e){window.alert(t),e&&e()},nr=function(t,e){e(window.confirm(t))},ir=function(t,e,o){o(window.prompt(t,e))};_e.alert=function(t,e){or(t,e)},_e.setAlert=function(t){or=t},_e.confirm=function(t,e){nr(t,e)},_e.setConfirm=function(t){nr=t},_e.prompt=function(t,e,o){ir(t,e,o)},_e.setPrompt=function(t){ir=t};var bo={VarBase:function(t){bo.VarBase.superClass_.constructor.call(this),this.varId=(this.isBlank=typeof t>"u")?"":t.getId(),this.workspaceId=this.isBlank?"":t.workspace.id}};(0,l.module$exports$Blockly$utils$object.inherits)(bo.VarBase,eo),bo.VarBase.prototype.toJson=function(){var t=bo.VarBase.superClass_.toJson.call(this);return t.varId=this.varId,t},bo.VarBase.prototype.fromJson=function(t){bo.VarBase.superClass_.toJson.call(this),this.varId=t.varId};var Bo={VarCreate:function(t){Bo.VarCreate.superClass_.constructor.call(this,t),t&&(this.varType=t.type,this.varName=t.name)}};(0,l.module$exports$Blockly$utils$object.inherits)(Bo.VarCreate,bo.VarBase),Bo.VarCreate.prototype.type=f.VAR_CREATE,Bo.VarCreate.prototype.toJson=function(){var t=Bo.VarCreate.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},Bo.VarCreate.prototype.fromJson=function(t){Bo.VarCreate.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},Bo.VarCreate.prototype.run=function(t){var e=this.getEventWorkspace_();t?e.createVariable(this.varName,this.varType,this.varId):e.deleteVariableById(this.varId)},(0,x.register)(x.Type.EVENT,f.VAR_CREATE,Bo.VarCreate);var Ni,yn={VariableModel:function(t,e,o,r){this.workspace=t,this.name=e,this.type=o||"",this.id_=r||(0,_t.genUid)(),(0,f.fire)(new((0,f.get)(f.VAR_CREATE))(this))}};yn.VariableModel.prototype.getId=function(){return this.id_},yn.VariableModel.compareByName=function(t,e){return t.name.localeCompare(e.name,void 0,{sensitivity:"base"})},l.module$exports$Blockly$Variables={CATEGORY_NAME:"VARIABLE",allUsedVarModels:function(t){var e=t.getAllBlocks(!1);t=Object.create(null);for(var o=0;o<e.length;o++){var r=e[o].getVarModels();if(r)for(var c=0;c<r.length;c++){var h=r[c],k=h.getId();k&&(t[k]=h)}}for(var C in e=[],t)e.push(t[C]);return e}},Ni={},l.module$exports$Blockly$Variables.allDeveloperVariables=function(t){t=t.getAllBlocks(!1);for(var r,e=Object.create(null),o=0;r=t[o];o++){var c=r.getDeveloperVariables;if(!c&&r.getDeveloperVars&&(c=r.getDeveloperVars,Ni[r.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+r.type+"')"),Ni[r.type]=!0)),c)for(r=c(),c=0;c<r.length;c++)e[r[c]]=!0}return Object.keys(e)},l.module$exports$Blockly$Variables.flyoutCategory=function(t){var e=[],o=document.createElement("button");return o.setAttribute("text","%{BKY_NEW_VARIABLE}"),o.setAttribute("callbackKey","CREATE_VARIABLE"),t.registerButtonCallback("CREATE_VARIABLE",function(r){(0,l.module$exports$Blockly$Variables.createVariableButtonHandler)(r.getTargetWorkspace())}),e.push(o),t=(0,l.module$exports$Blockly$Variables.flyoutCategoryBlocks)(t),e.concat(t)},l.module$exports$Blockly$Variables.flyoutCategoryBlocks=function(t){var e=[];if(0<(t=t.getVariablesOfType("")).length){var o=t[t.length-1];if(l.module$exports$Blockly$blocks.Blocks.variables_set){var r=(0,l.module$exports$Blockly$utils$xml.createElement)("block");r.setAttribute("type","variables_set"),r.setAttribute("gap",l.module$exports$Blockly$blocks.Blocks.math_change?8:24),r.appendChild((0,l.module$exports$Blockly$Variables.generateVariableFieldDom)(o)),e.push(r)}if(l.module$exports$Blockly$blocks.Blocks.math_change&&((r=(0,l.module$exports$Blockly$utils$xml.createElement)("block")).setAttribute("type","math_change"),r.setAttribute("gap",l.module$exports$Blockly$blocks.Blocks.variables_get?20:8),r.appendChild((0,l.module$exports$Blockly$Variables.generateVariableFieldDom)(o)),o=(0,l.module$exports$Blockly$Xml.textToDom)('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),r.appendChild(o),e.push(r)),l.module$exports$Blockly$blocks.Blocks.variables_get)for(t.sort(yn.VariableModel.compareByName),o=0;r=t[o];o++){var c=(0,l.module$exports$Blockly$utils$xml.createElement)("block");c.setAttribute("type","variables_get"),c.setAttribute("gap",8),c.appendChild((0,l.module$exports$Blockly$Variables.generateVariableFieldDom)(r)),e.push(c)}}return e},l.module$exports$Blockly$Variables.VAR_LETTER_OPTIONS="ijkmnopqrstuvwxyzabcdefgh",l.module$exports$Blockly$Variables.generateUniqueName=function(t){return(0,l.module$exports$Blockly$Variables.generateUniqueNameFromOptions)(l.module$exports$Blockly$Variables.VAR_LETTER_OPTIONS.charAt(0),t.getAllVariableNames())},l.module$exports$Blockly$Variables.generateUniqueNameFromOptions=function(t,e){if(!e.length)return t;for(var o=l.module$exports$Blockly$Variables.VAR_LETTER_OPTIONS,r="",c=o.indexOf(t);;){for(var h=!1,k=0;k<e.length;k++)if(e[k].toLowerCase()===t){h=!0;break}if(!h)return t;++c===o.length&&(c=0,r=Number(r)+1),t=o.charAt(c)+r}},l.module$exports$Blockly$Variables.createVariableButtonHandler=function(t,e,o){var r=o||"",c=function(h){(0,l.module$exports$Blockly$Variables.promptName)(l.module$exports$Blockly$Msg.Msg.NEW_VARIABLE_TITLE,h,function(k){if(k){var C=(0,l.module$exports$Blockly$Variables.nameUsedWithAnyType)(k,t);if(C){if(C.type===r)var G=l.module$exports$Blockly$Msg.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",C.name);else G=(G=l.module$exports$Blockly$Msg.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",C.name).replace("%2",C.type);(0,_e.alert)(G,function(){c(k)})}else t.createVariable(k,r),e&&e(k)}else e&&e(null)})};c("")},l.module$exports$Blockly$Variables.renameVariable=function(t,e,o){var r=function(c){var h=l.module$exports$Blockly$Msg.Msg.RENAME_VARIABLE_TITLE.replace("%1",e.name);(0,l.module$exports$Blockly$Variables.promptName)(h,c,function(k){if(k){var C=rs(k,e.type,t);C?(C=l.module$exports$Blockly$Msg.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",C.name).replace("%2",C.type),(0,_e.alert)(C,function(){r(k)})):(t.renameVariableById(e.getId(),k),o&&o(k))}else o&&o(null)})};r("")},l.module$exports$Blockly$Variables.promptName=function(t,e,o){(0,_e.prompt)(t,e,function(r){r&&((r=r.replace(/[\s\xa0]+/g," ").trim())===l.module$exports$Blockly$Msg.Msg.RENAME_VARIABLE||r===l.module$exports$Blockly$Msg.Msg.NEW_VARIABLE)&&(r=null),o(r)})};var rs=function(t,e,o){o=o.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var c,r=0;c=o[r];r++)if(c.name.toLowerCase()===t&&c.type!==e)return c;return null};l.module$exports$Blockly$Variables.nameUsedWithAnyType=function(t,e){e=e.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var r,o=0;r=e[o];o++)if(r.name.toLowerCase()===t)return r;return null},l.module$exports$Blockly$Variables.generateVariableFieldDom=function(t){var e=(0,l.module$exports$Blockly$utils$xml.createElement)("field");return e.setAttribute("name","VAR"),e.setAttribute("id",t.getId()),e.setAttribute("variabletype",t.type),t=(0,l.module$exports$Blockly$utils$xml.createTextNode)(t.name),e.appendChild(t),e},l.module$exports$Blockly$Variables.getOrCreateVariablePackage=function(t,e,o,r){var c=(0,l.module$exports$Blockly$Variables.getVariable)(t,e,o,r);return c||(c=ss(t,e,o,r)),c},l.module$exports$Blockly$Variables.getVariable=function(t,e,o,r){var c=t.getPotentialVariableMap(),h=null;if(e&&(!(h=t.getVariableById(e))&&c&&(h=c.getVariableById(e)),h))return h;if(o){if(void 0===r)throw Error("Tried to look up a variable by name without a type");!(h=t.getVariable(o,r))&&c&&(h=c.getVariable(o,r))}return h};var ss=function(t,e,o,r){var c=t.getPotentialVariableMap();return o||(o=l.module$exports$Blockly$Variables.generateUniqueName(t.isFlyout?t.targetWorkspace:t)),c?c.createVariable(o,r,e):t.createVariable(o,r,e)};l.module$exports$Blockly$Variables.getAddedVariables=function(t,e){t=t.getAllVariables();var o=[];if(e.length!==t.length)for(var r=0;r<t.length;r++){var c=t[r];-1===e.indexOf(c)&&o.push(c)}return o},l.module$exports$Blockly$Names={Names:function(t,e){if(this.variablePrefix_=e||"",this.reservedDict_=Object.create(null),t)for(t=t.split(","),e=0;e<t.length;e++)this.reservedDict_[t[e]]=!0;this.reset()},NameType:{DEVELOPER_VARIABLE:"DEVELOPER_VARIABLE",VARIABLE:"VARIABLE",PROCEDURE:"PROCEDURE"}},l.module$exports$Blockly$Names.Names.DEVELOPER_VARIABLE_TYPE=l.module$exports$Blockly$Names.NameType.DEVELOPER_VARIABLE,l.module$exports$Blockly$Names.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},l.module$exports$Blockly$Names.Names.prototype.setVariableMap=function(t){this.variableMap_=t},l.module$exports$Blockly$Names.Names.prototype.getNameForUserVariable_=function(t){return this.variableMap_?(t=this.variableMap_.getVariableById(t))?t.name:null:(console.warn("Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());"),null)},l.module$exports$Blockly$Names.Names.prototype.populateVariables=function(t){t=(0,l.module$exports$Blockly$Variables.allUsedVarModels)(t);for(var e=0;e<t.length;e++)this.getName(t[e].getId(),l.module$exports$Blockly$Names.NameType.VARIABLE)},l.module$exports$Blockly$Names.Names.prototype.populateProcedures=function(t){t=(t=l.module$exports$Blockly$Procedures.allProcedures(t))[0].concat(t[1]);for(var e=0;e<t.length;e++)this.getName(t[e][0],l.module$exports$Blockly$Names.NameType.PROCEDURE)},l.module$exports$Blockly$Names.Names.prototype.getName=function(t,e){var o=t;e===l.module$exports$Blockly$Names.NameType.VARIABLE&&(t=this.getNameForUserVariable_(t))&&(o=t),t=o.toLowerCase();var r=e===l.module$exports$Blockly$Names.NameType.VARIABLE||e===l.module$exports$Blockly$Names.NameType.DEVELOPER_VARIABLE?this.variablePrefix_:"";e in this.db_||(this.db_[e]=Object.create(null));var c=this.db_[e];return t in c?r+c[t]:(e=this.getDistinctName(o,e),c[t]=e.substr(r.length),e)},l.module$exports$Blockly$Names.Names.prototype.getUserNames=function(t){return Object.keys(this.db_[t]||{})},l.module$exports$Blockly$Names.Names.prototype.getDistinctName=function(t,e){t=this.safeName_(t);for(var o="";this.dbReverse_[t+o]||t+o in this.reservedDict_;)o=o?o+1:2;return this.dbReverse_[t+=o]=!0,(e===l.module$exports$Blockly$Names.NameType.VARIABLE||e===l.module$exports$Blockly$Names.NameType.DEVELOPER_VARIABLE?this.variablePrefix_:"")+t},l.module$exports$Blockly$Names.Names.prototype.safeName_=function(t){return t?(t=encodeURI(t.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!=="0123456789".indexOf(t[0])&&(t="my_"+t)):t=l.module$exports$Blockly$Msg.Msg.UNNAMED_KEY||"unnamed",t},l.module$exports$Blockly$Names.Names.equals=function(t,e){return t.toLowerCase()===e.toLowerCase()};var Io={VarDelete:function(t){Io.VarDelete.superClass_.constructor.call(this,t),t&&(this.varType=t.type,this.varName=t.name)}};(0,l.module$exports$Blockly$utils$object.inherits)(Io.VarDelete,bo.VarBase),Io.VarDelete.prototype.type=f.VAR_DELETE,Io.VarDelete.prototype.toJson=function(){var t=Io.VarDelete.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},Io.VarDelete.prototype.fromJson=function(t){Io.VarDelete.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},Io.VarDelete.prototype.run=function(t){var e=this.getEventWorkspace_();t?e.deleteVariableById(this.varId):e.createVariable(this.varName,this.varType,this.varId)},(0,x.register)(x.Type.EVENT,f.VAR_DELETE,Io.VarDelete);var Ro={VarRename:function(t,e){Ro.VarRename.superClass_.constructor.call(this,t),t&&(this.oldName=t.name,this.newName=typeof e>"u"?"":e)}};(0,l.module$exports$Blockly$utils$object.inherits)(Ro.VarRename,bo.VarBase),Ro.VarRename.prototype.type=f.VAR_RENAME,Ro.VarRename.prototype.toJson=function(){var t=Ro.VarRename.superClass_.toJson.call(this);return t.oldName=this.oldName,t.newName=this.newName,t},Ro.VarRename.prototype.fromJson=function(t){Ro.VarRename.superClass_.fromJson.call(this,t),this.oldName=t.oldName,this.newName=t.newName},Ro.VarRename.prototype.run=function(t){this.getEventWorkspace_().renameVariableById(this.varId,t?this.newName:this.oldName)},(0,x.register)(x.Type.EVENT,f.VAR_RENAME,Ro.VarRename);var me={VariableMap:function(t){this.variableMap_=Object.create(null),this.workspace=t}};me.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)},me.VariableMap.prototype.renameVariable=function(t,e){var o=this.getVariable(e,t.type),r=this.workspace.getAllBlocks(!1);(0,f.setGroup)(!0);try{o&&o.getId()!==t.getId()?this.renameVariableWithConflict_(t,e,o,r):this.renameVariableAndUses_(t,e,r)}finally{(0,f.setGroup)(!1)}},me.VariableMap.prototype.renameVariableById=function(t,e){var o=this.getVariableById(t);if(!o)throw Error("Tried to rename a variable that didn't exist. ID: "+t);this.renameVariable(o,e)},me.VariableMap.prototype.renameVariableAndUses_=function(t,e,o){for((0,f.fire)(new((0,f.get)(f.VAR_RENAME))(t,e)),t.name=e,e=0;e<o.length;e++)o[e].updateVarName(t)},me.VariableMap.prototype.renameVariableWithConflict_=function(t,e,o,r){var c=t.type;for(e!==o.name&&this.renameVariableAndUses_(o,e,r),e=0;e<r.length;e++)r[e].renameVarById(t.getId(),o.getId());(0,f.fire)(new((0,f.get)(f.VAR_DELETE))(t)),Je_removeElem(this.variableMap_[c],t)},me.VariableMap.prototype.createVariable=function(t,e,o){var r=this.getVariable(t,e);if(r){if(o&&r.getId()!==o)throw Error('Variable "'+t+'" is already in use and its id is "'+r.getId()+'" which conflicts with the passed in id, "'+o+'".');return r}if(o&&this.getVariableById(o))throw Error('Variable id, "'+o+'", is already in use.');return r=o||(0,_t.genUid)(),r=new yn.VariableModel(this.workspace,t,e=e||"",r),(t=this.variableMap_[e]||[]).push(r),delete this.variableMap_[e],this.variableMap_[e]=t,r},me.VariableMap.prototype.deleteVariable=function(t){for(var e=t.getId(),o=this.variableMap_[t.type],r=0;r<o.length;r++)if(o[r].getId()===e){o.splice(r,1),(0,f.fire)(new((0,f.get)(f.VAR_DELETE))(t));break}},me.VariableMap.prototype.deleteVariableById=function(t){var e=this.getVariableById(t);if(e){var o=e.name,r=this.getVariableUsesById(t);t=0;for(var c=void 0;c=r[t];t++)if("procedures_defnoreturn"===c.type||"procedures_defreturn"===c.type)return t=String(c.getFieldValue("NAME")),o=l.module$exports$Blockly$Msg.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",o).replace("%2",t),void(0,_e.alert)(o);var h=this;1<r.length?(o=l.module$exports$Blockly$Msg.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(r.length)).replace("%2",o),(0,_e.confirm)(o,function(k){k&&e&&h.deleteVariableInternal(e,r)})):h.deleteVariableInternal(e,r)}else console.warn("Can't delete non-existent variable: "+t)},me.VariableMap.prototype.deleteVariableInternal=function(t,e){var o=(0,f.getGroup)();o||(0,f.setGroup)(!0);try{for(var r=0;r<e.length;r++)e[r].dispose(!0);this.deleteVariable(t)}finally{o||(0,f.setGroup)(!1)}},me.VariableMap.prototype.getVariable=function(t,e){if(e=this.variableMap_[e||""])for(var r,o=0;r=e[o];o++)if(l.module$exports$Blockly$Names.Names.equals(r.name,t))return r;return null},me.VariableMap.prototype.getVariableById=function(t){for(var e=Object.keys(this.variableMap_),o=0;o<e.length;o++)for(var h,r=e[o],c=0;h=this.variableMap_[r][c];c++)if(h.getId()===t)return h;return null},me.VariableMap.prototype.getVariablesOfType=function(t){return(t=this.variableMap_[t||""])?t.slice():[]},me.VariableMap.prototype.getVariableTypes=function(t){var e={};(0,l.module$exports$Blockly$utils$object.mixin)(e,this.variableMap_),t&&t.getPotentialVariableMap()&&(0,l.module$exports$Blockly$utils$object.mixin)(e,t.getPotentialVariableMap().variableMap_),t=Object.keys(e),e=!1;for(var o=0;o<t.length;o++)""===t[o]&&(e=!0);return e||t.push(""),t},me.VariableMap.prototype.getAllVariables=function(){var e,t=[];for(e in this.variableMap_)t=t.concat(this.variableMap_[e]);return t},me.VariableMap.prototype.getAllVariableNames=function(){var e,t=[];for(e in this.variableMap_)for(var c,o=this.variableMap_[e],r=0;c=o[r];r++)t.push(c.name);return t},me.VariableMap.prototype.getVariableUsesById=function(t){for(var e=[],o=this.workspace.getAllBlocks(!1),r=0;r<o.length;r++){var c=o[r].getVarModels();if(c)for(var h=0;h<c.length;h++)c[h].getId()===t&&e.push(o[r])}return e};var Ze={BlockMove:function(t){Ze.BlockMove.superClass_.constructor.call(this,t),t&&(t.isShadow()&&(this.recordUndo=!1),t=this.currentLocation_(),this.oldParentId=t.parentId,this.oldInputName=t.inputName,this.oldCoordinate=t.coordinate)}};(0,l.module$exports$Blockly$utils$object.inherits)(Ze.BlockMove,ro.BlockBase),Ze.BlockMove.prototype.type=f.MOVE,Ze.BlockMove.prototype.toJson=function(){var t=Ze.BlockMove.superClass_.toJson.call(this);return this.newParentId&&(t.newParentId=this.newParentId),this.newInputName&&(t.newInputName=this.newInputName),this.newCoordinate&&(t.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),this.recordUndo||(t.recordUndo=this.recordUndo),t},Ze.BlockMove.prototype.fromJson=function(t){if(Ze.BlockMove.superClass_.fromJson.call(this,t),this.newParentId=t.newParentId,this.newInputName=t.newInputName,t.newCoordinate){var e=t.newCoordinate.split(",");this.newCoordinate=new N.Coordinate(Number(e[0]),Number(e[1]))}void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},Ze.BlockMove.prototype.recordNew=function(){var t=this.currentLocation_();this.newParentId=t.parentId,this.newInputName=t.inputName,this.newCoordinate=t.coordinate},Ze.BlockMove.prototype.currentLocation_=function(){var t=this.getEventWorkspace_().getBlockById(this.blockId),e={},o=t.getParent();return o?(e.parentId=o.id,(t=o.getInputWithBlock(t))&&(e.inputName=t.name)):e.coordinate=t.getRelativeToSurfaceXY(),e},Ze.BlockMove.prototype.isNull=function(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&N.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},Ze.BlockMove.prototype.run=function(t){var e=this.getEventWorkspace_(),o=e.getBlockById(this.blockId);if(o){var r=t?this.newParentId:this.oldParentId,c=t?this.newInputName:this.oldInputName;if(t=t?this.newCoordinate:this.oldCoordinate,r){var h=e.getBlockById(r);if(!h)return void console.warn("Can't connect to non-existent block: "+r)}if(o.getParent()&&o.unplug(),t)c=o.getRelativeToSurfaceXY(),o.moveBy(t.x-c.x,t.y-c.y);else{if((!(e=o.outputConnection)||o.previousConnection&&o.previousConnection.isConnected())&&(e=o.previousConnection),o=e.type,c){if(o=h.getInput(c))var k=o.connection}else o===l.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT&&(k=h.nextConnection);k?e.connect(k):console.warn("Can't connect to non-existent input: "+c)}}else console.warn("Can't move non-existent block: "+this.blockId)},(0,x.register)(x.Type.EVENT,f.MOVE,Ze.BlockMove);var zo={COLLAPSED_INPUT_NAME:"_TEMP_COLLAPSED_INPUT",COLLAPSED_FIELD_NAME:"_TEMP_COLLAPSED_FIELD"},K={Connection:function(t,e){this.sourceBlock_=t,this.type=e}};K.Connection.CAN_CONNECT=0,K.Connection.REASON_SELF_CONNECTION=1,K.Connection.REASON_WRONG_TYPE=2,K.Connection.REASON_TARGET_NULL=3,K.Connection.REASON_CHECKS_FAILED=4,K.Connection.REASON_DIFFERENT_WORKSPACES=5,K.Connection.REASON_SHADOW_PARENT=6,K.Connection.REASON_DRAG_CHECKS_FAILED=7,K.Connection.REASON_PREVIOUS_AND_OUTPUT=8,K.Connection.prototype.targetConnection=null,K.Connection.prototype.disposed=!1,K.Connection.prototype.check_=null,K.Connection.prototype.shadowDom_=null,K.Connection.prototype.x=0,K.Connection.prototype.y=0,K.Connection.prototype.connect_=function(t){var C,e=l.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE,o=this.getSourceBlock(),r=t.getSourceBlock();if(t.isConnected()&&t.disconnect(),this.isConnected()){var c=this.stashShadowState_(),h=this.targetBlock();if(h.isShadow())h.dispose(!1);else{this.disconnect();var k=h}this.applyShadowState_(c)}(0,f.isEnabled)()&&(C=new((0,f.get)(f.MOVE))(r)),ls(this,t),r.setParent(o),C&&(C.recordNew(),(0,f.fire)(C)),k&&((r=K.Connection.getConnectionForOrphanedConnection(r,t=this.type===e?k.outputConnection:k.previousConnection))?t.connect(r):t.onFailedConnect(this))},K.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowStateInternal_();var t=this.targetBlock();t&&t.unplug()}this.disposed=!0},K.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},K.Connection.prototype.isSuperior=function(){return this.type===l.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE||this.type===l.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT},K.Connection.prototype.isConnected=function(){return!!this.targetConnection},K.Connection.prototype.getConnectionChecker=function(){return this.sourceBlock_.workspace.connectionChecker},K.Connection.prototype.onFailedConnect=function(t){},K.Connection.prototype.connect=function(t){if(this.targetConnection===t)return!0;if(this.getConnectionChecker().canConnect(this,t,!1)){var e=(0,f.getGroup)();e||(0,f.setGroup)(!0),this.isSuperior()?this.connect_(t):t.connect_(this),e||(0,f.setGroup)(!1)}return this.isConnected()};var ls=function(t,e){if(!t||!e)throw Error("Cannot connect null connections.");t.targetConnection=e,e.targetConnection=t},cs=function(t,e){for(var h,o=null,r=(e=e.outputConnection).getConnectionChecker(),c=0;h=t.inputList[c];c++)if((h=h.connection)&&r.canConnect(e,h,!1)){if(o)return null;o=h}return o};K.Connection.getConnectionForOrphanedConnection=function(t,e){if(e.type===l.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE)return function(t,e){for(var o;o=cs(t,e);)if(!(t=o.targetBlock())||t.isShadow())return o;return null}(t,e.getSourceBlock());t=t.lastConnectionInStack(!0);var o=e.getConnectionChecker();return t&&o.canConnect(e,t,!1)?t:null},K.Connection.prototype.disconnect=function(){var t=this.targetConnection;if(!t)throw Error("Source connection not connected.");if(t.targetConnection!==this)throw Error("Target connection not connected to source connection.");if(this.isSuperior()){var e=this.sourceBlock_,o=t.getSourceBlock();t=this}else e=t.getSourceBlock(),o=this.sourceBlock_;var r=(0,f.getGroup)();r||(0,f.setGroup)(!0),this.disconnectInternal_(e,o),o.isShadow()||t.respawnShadow_(),r||(0,f.setGroup)(!1)},K.Connection.prototype.disconnectInternal_=function(t,e){var o;(0,f.isEnabled)()&&(o=new((0,f.get)(f.MOVE))(e)),this.targetConnection=this.targetConnection.targetConnection=null,e.setParent(null),o&&(o.recordNew(),(0,f.fire)(o))},K.Connection.prototype.respawnShadow_=function(){this.createShadowBlock_(!0)},K.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},K.Connection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},K.Connection.prototype.setCheck=function(t){return t?(Array.isArray(t)||(t=[t]),this.check_=t,this.onCheckChanged_()):this.check_=null,this},K.Connection.prototype.getCheck=function(){return this.check_},K.Connection.prototype.setShadowDom=function(t){this.setShadowStateInternal_({shadowDom:t})},K.Connection.prototype.getShadowDom=function(t){return t&&this.targetBlock().isShadow()?(0,l.module$exports$Blockly$Xml.blockToDom)(this.targetBlock()):this.shadowDom_},K.Connection.prototype.setShadowState=function(t){this.setShadowStateInternal_({shadowState:t})},K.Connection.prototype.getShadowState=function(t){return t&&this.targetBlock()&&this.targetBlock().isShadow()?(0,ye.save)(this.targetBlock()):this.shadowState_},K.Connection.prototype.neighbours=function(t){return[]},K.Connection.prototype.getParentInput=function(){for(var t=null,e=this.sourceBlock_.inputList,o=0;o<e.length;o++)if(e[o].connection===this){t=e[o];break}return t},K.Connection.prototype.toString=function(){var t=this.sourceBlock_;if(!t)return"Orphan Connection";if(t.outputConnection===this)var e="Output Connection of ";else if(t.previousConnection===this)e="Previous Connection of ";else if(t.nextConnection===this)e="Next Connection of ";else{e=null;for(var r,o=0;r=t.inputList[o];o++)if(r.connection===this){e=r;break}if(!e)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";e='Input "'+e.name+'" connection on '}return e+t.toDevString()},K.Connection.prototype.stashShadowState_=function(){var t=this.getShadowDom(!0),e=this.getShadowState(!0);return this.shadowState_=this.shadowDom_=null,{shadowDom:t,shadowState:e}},K.Connection.prototype.applyShadowState_=function(t){var e=t.shadowState;this.shadowDom_=t.shadowDom,this.shadowState_=e},K.Connection.prototype.setShadowStateInternal_=function(t){var e=void 0===(t=void 0===t?{}:t).shadowState?null:t.shadowState;this.shadowDom_=void 0===t.shadowDom?null:t.shadowDom,this.shadowState_=e,(t=this.targetBlock())?t.isShadow()?(t.dispose(!1),this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow_(this.targetBlock())):(t=this.createShadowBlock_(!1),this.serializeShadow_(t),t&&t.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow_(this.targetBlock()))},K.Connection.prototype.createShadowBlock_=function(t){var e=this.getSourceBlock(),o=this.getShadowState(),r=this.getShadowDom();if(!e.workspace||!o&&!r)return null;if(o)return(0,ye.appendInternal)(o,e.workspace,{parentConnection:t?this:void 0,isShadow:!0,recordUndo:!1});if(r){if(e=(0,l.module$exports$Blockly$Xml.domToBlock)(r,e.workspace),t)if(this.type===l.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE){if(!e.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(e.outputConnection))throw Error("Could not connect shadow block to connection")}else{if(this.type!==l.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT)throw Error("Cannot connect a shadow block to a previous/output connection");if(!e.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(e.previousConnection))throw Error("Could not connect shadow block to connection")}return e}return null},K.Connection.prototype.serializeShadow_=function(t){t&&(this.shadowDom_=(0,l.module$exports$Blockly$Xml.blockToDom)(t),this.shadowState_=(0,ye.save)(t))};var Xo={ConnectionChecker:function(){}};Xo.ConnectionChecker.prototype.canConnect=function(t,e,o,r){return this.canConnectWithReason(t,e,o,r)===K.Connection.CAN_CONNECT},Xo.ConnectionChecker.prototype.canConnectWithReason=function(t,e,o,r){var c=this.doSafetyChecks(t,e);return c!==K.Connection.CAN_CONNECT?c:this.doTypeChecks(t,e)?o&&!this.doDragChecks(t,e,r||0)?K.Connection.REASON_DRAG_CHECKS_FAILED:K.Connection.CAN_CONNECT:K.Connection.REASON_CHECKS_FAILED},Xo.ConnectionChecker.prototype.getErrorMessage=function(t,e,o){switch(t){case K.Connection.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case K.Connection.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case K.Connection.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case K.Connection.REASON_TARGET_NULL:return"Target connection is null.";case K.Connection.REASON_CHECKS_FAILED:return"Connection checks failed. "+e+" expected "+e.getCheck()+", found "+o.getCheck();case K.Connection.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case K.Connection.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case K.Connection.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}},Xo.ConnectionChecker.prototype.doSafetyChecks=function(t,e){if(!t||!e)return K.Connection.REASON_TARGET_NULL;if(t.isSuperior())var o=t.getSourceBlock(),r=e.getSourceBlock(),c=e;else r=t.getSourceBlock(),o=e.getSourceBlock(),c=t,t=e;return o===r?K.Connection.REASON_SELF_CONNECTION:c.type!==l.module$exports$Blockly$internalConstants.OPPOSITE_TYPE[t.type]?K.Connection.REASON_WRONG_TYPE:o.workspace!==r.workspace?K.Connection.REASON_DIFFERENT_WORKSPACES:o.isShadow()&&!r.isShadow()?K.Connection.REASON_SHADOW_PARENT:c.type===l.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE&&r.previousConnection&&r.previousConnection.isConnected()||c.type===l.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT&&r.outputConnection&&r.outputConnection.isConnected()?K.Connection.REASON_PREVIOUS_AND_OUTPUT:K.Connection.CAN_CONNECT},Xo.ConnectionChecker.prototype.doTypeChecks=function(t,e){if(t=t.getCheck(),e=e.getCheck(),!t||!e)return!0;for(var o=0;o<t.length;o++)if(-1!==e.indexOf(t[o]))return!0;return!1},Xo.ConnectionChecker.prototype.doDragChecks=function(t,e,o){if(t.distanceFrom(e)>o||e.getSourceBlock().isInsertionMarker())return!1;switch(e.type){case l.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(t,e);case l.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE:if(e.isConnected()&&!e.targetBlock().isInsertionMarker()||t.isConnected())return!1;break;case l.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE:if(e.isConnected()&&!e.targetBlock().isMovable()&&!e.targetBlock().isShadow())return!1;break;case l.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT:if(e.isConnected()&&!t.getSourceBlock().nextConnection&&!e.targetBlock().isShadow()&&e.targetBlock().nextConnection)return!1;break;default:return!1}return-1===l.module$exports$Blockly$common.draggingConnections.indexOf(e)},Xo.ConnectionChecker.prototype.canConnectToPrevious_=function(t,e){return!(t.targetConnection||-1!==l.module$exports$Blockly$common.draggingConnections.indexOf(e)||e.targetConnection&&(!(t=e.targetBlock()).isInsertionMarker()||t.getPreviousBlock()))},(0,x.register)(x.Type.CONNECTION_CHECKER,x.DEFAULT,Xo.ConnectionChecker);var Q={},zn=Object.create(null);Q.Workspace=function(t){this.id=(0,_t.genUid)(),zn[this.id]=this,this.options=t||new Ae.Options({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new((0,x.getClassFromOptions)(x.Type.CONNECTION_CHECKER,this.options,!0))(this),this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.typedBlocksDB_=Object.create(null),this.variableMap_=new me.VariableMap(this),this.potentialVariableMap_=null},Q.Workspace.prototype.rendered=!1,Q.Workspace.prototype.isClearing=!1,Q.Workspace.prototype.MAX_UNDO=1024,Q.Workspace.prototype.connectionDBList=null,Q.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete zn[this.id]},Q.Workspace.SCAN_ANGLE=3,Q.Workspace.prototype.sortObjects_=function(t,e){return t=t.getRelativeToSurfaceXY(),e=e.getRelativeToSurfaceXY(),t.y+Q.Workspace.prototype.sortObjects_.offset*t.x-(e.y+Q.Workspace.prototype.sortObjects_.offset*e.x)},Q.Workspace.prototype.addTopBlock=function(t){this.topBlocks_.push(t)},Q.Workspace.prototype.removeTopBlock=function(t){if(!Je_removeElem(this.topBlocks_,t))throw Error("Block not present in workspace's list of top-most blocks.")},Q.Workspace.prototype.getTopBlocks=function(t){var e=[].concat(this.topBlocks_);return t&&1<e.length&&(this.sortObjects_.offset=Math.sin((0,V.toRadians)(Q.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),e.sort(this.sortObjects_)),e},Q.Workspace.prototype.addTypedBlock=function(t){this.typedBlocksDB_[t.type]||(this.typedBlocksDB_[t.type]=[]),this.typedBlocksDB_[t.type].push(t)},Q.Workspace.prototype.removeTypedBlock=function(t){Je_removeElem(this.typedBlocksDB_[t.type],t),this.typedBlocksDB_[t.type].length||delete this.typedBlocksDB_[t.type]},Q.Workspace.prototype.getBlocksByType=function(t,e){return this.typedBlocksDB_[t]?(t=this.typedBlocksDB_[t].slice(0),e&&1<t.length&&(this.sortObjects_.offset=Math.sin((0,V.toRadians)(Q.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),t.sort(this.sortObjects_)),t.filter(function(o){return!o.isInsertionMarker()})):[]},Q.Workspace.prototype.addTopComment=function(t){this.topComments_.push(t),this.commentDB_[t.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+t.id+'"'),this.commentDB_[t.id]=t},Q.Workspace.prototype.removeTopComment=function(t){if(!Je_removeElem(this.topComments_,t))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[t.id]},Q.Workspace.prototype.getTopComments=function(t){var e=[].concat(this.topComments_);return t&&1<e.length&&(this.sortObjects_.offset=Math.sin((0,V.toRadians)(Q.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),e.sort(this.sortObjects_)),e},Q.Workspace.prototype.getAllBlocks=function(t){if(t){var e=this.getTopBlocks(!0);t=[];for(var o=0;o<e.length;o++)t.push.apply(t,e[o].getDescendants(!0))}else for(t=this.getTopBlocks(!1),e=0;e<t.length;e++)t.push.apply(t,t[e].getChildren(!1));return t.filter(function(r){return!r.isInsertionMarker()})},Q.Workspace.prototype.clear=function(){this.isClearing=!0;try{var t=(0,f.getGroup)();for(t||(0,f.setGroup)(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose();t||(0,f.setGroup)(!1),this.variableMap_.clear(),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}},Q.Workspace.prototype.renameVariableById=function(t,e){this.variableMap_.renameVariableById(t,e)},Q.Workspace.prototype.createVariable=function(t,e,o){return this.variableMap_.createVariable(t,e,o)},Q.Workspace.prototype.getVariableUsesById=function(t){return this.variableMap_.getVariableUsesById(t)},Q.Workspace.prototype.deleteVariableById=function(t){this.variableMap_.deleteVariableById(t)},Q.Workspace.prototype.getVariable=function(t,e){return this.variableMap_.getVariable(t,e)},Q.Workspace.prototype.getVariableById=function(t){return this.variableMap_.getVariableById(t)},Q.Workspace.prototype.getVariablesOfType=function(t){return this.variableMap_.getVariablesOfType(t)},Q.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)},Q.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},Q.Workspace.prototype.getAllVariableNames=function(){return this.variableMap_.getAllVariableNames()},Q.Workspace.prototype.getWidth=function(){return 0},Q.Workspace.prototype.newBlock=function(t,e){return new H.Block(this,t,e)},Q.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length},Q.Workspace.prototype.remainingCapacityOfType=function(t){return this.options.maxInstances?(void 0!==this.options.maxInstances[t]?this.options.maxInstances[t]:1/0)-this.getBlocksByType(t,!1).length:1/0},Q.Workspace.prototype.isCapacityAvailable=function(t){if(!this.hasBlockLimits())return!0;var o,e=0;for(o in t){if(t[o]>this.remainingCapacityOfType(o))return!1;e+=t[o]}return!(e>this.remainingCapacity())},Q.Workspace.prototype.hasBlockLimits=function(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances},Q.Workspace.prototype.getUndoStack=function(){return this.undoStack_},Q.Workspace.prototype.getRedoStack=function(){return this.redoStack_},Q.Workspace.prototype.undo=function(t){var e=t?this.redoStack_:this.undoStack_,o=t?this.undoStack_:this.redoStack_,r=e.pop();if(r){for(var c=[r];e.length&&r.group&&r.group===e[e.length-1].group;)c.push(e.pop());for(e=0;e<c.length;e++)o.push(c[e]);c=(0,f.filter)(c,t),(0,f.setRecordUndo)(!1);try{for(o=0;o<c.length;o++)c[o].run(t)}finally{(0,f.setRecordUndo)(!0)}}},Q.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,(0,f.clearPendingUndo)()},Q.Workspace.prototype.addChangeListener=function(t){return this.listeners_.push(t),t},Q.Workspace.prototype.removeChangeListener=function(t){Je_removeElem(this.listeners_,t)},Q.Workspace.prototype.fireChangeListener=function(t){if(t.recordUndo)for(this.undoStack_.push(t),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var e=0;e<this.listeners_.length;e++)(0,this.listeners_[e])(t)},Q.Workspace.prototype.getBlockById=function(t){return this.blockDB_[t]||null},Q.Workspace.prototype.setBlockById=function(t,e){this.blockDB_[t]=e},Q.Workspace.prototype.removeBlockById=function(t){delete this.blockDB_[t]},Q.Workspace.prototype.getCommentById=function(t){return this.commentDB_[t]||null},Q.Workspace.prototype.allInputsFilled=function(t){for(var e=this.getTopBlocks(!1),o=0;o<e.length;o++)if(!e[o].allInputsFilled(t))return!1;return!0},Q.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},Q.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new me.VariableMap(this)},Q.Workspace.prototype.getVariableMap=function(){return this.variableMap_},Q.Workspace.prototype.setVariableMap=function(t){this.variableMap_=t},Q.Workspace.getById=function(t){return zn[t]||null},Q.Workspace.getAll=function(){var e,t=[];for(e in zn)t.push(zn[e]);return t};var W={Bubble:function(t,e,o,r,c,h){this.workspace_=t,this.content_=e,this.shape_=o,this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null,this.disposed=!1,o=W.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(o=-o),this.arrow_radians_=(0,V.toRadians)(o),t.getBubbleCanvas().appendChild(this.createDom_(e,!(!c||!h))),this.setAnchorLocation(r),c&&h||(c=(t=this.content_.getBBox()).width+2*W.Bubble.BORDER_WIDTH,h=t.height+2*W.Bubble.BORDER_WIDTH),this.setBubbleSize(c,h),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0}};W.Bubble.BORDER_WIDTH=6,W.Bubble.ARROW_THICKNESS=5,W.Bubble.ARROW_ANGLE=20,W.Bubble.ARROW_BEND=4,W.Bubble.ANCHOR_RADIUS=8,W.Bubble.onMouseUpWrapper_=null,W.Bubble.onMouseMoveWrapper_=null,W.Bubble.unbindDragEvents_=function(){W.Bubble.onMouseUpWrapper_&&((0,g.unbind)(W.Bubble.onMouseUpWrapper_),W.Bubble.onMouseUpWrapper_=null),W.Bubble.onMouseMoveWrapper_&&((0,g.unbind)(W.Bubble.onMouseMoveWrapper_),W.Bubble.onMouseMoveWrapper_=null)},W.Bubble.bubbleMouseUp_=function(t){(0,tt.clearTouchIdentifier)(),W.Bubble.unbindDragEvents_()},W.Bubble.prototype.rendered_=!1,W.Bubble.prototype.anchorXY_=null,W.Bubble.prototype.relativeLeft_=0,W.Bubble.prototype.relativeTop_=0,W.Bubble.prototype.width_=0,W.Bubble.prototype.height_=0,W.Bubble.prototype.autoLayout_=!0,W.Bubble.prototype.createDom_=function(t,e){this.bubbleGroup_=(0,s.createSvgElement)(B.Svg.G,{},null);var o={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return ot.JAVA_FX&&(o={}),o=(0,s.createSvgElement)(B.Svg.G,o,this.bubbleGroup_),this.bubbleArrow_=(0,s.createSvgElement)(B.Svg.PATH,{},o),this.bubbleBack_=(0,s.createSvgElement)(B.Svg.RECT,{class:"blocklyDraggable",x:0,y:0,rx:W.Bubble.BORDER_WIDTH,ry:W.Bubble.BORDER_WIDTH},o),e?(this.resizeGroup_=(0,s.createSvgElement)(B.Svg.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),(0,s.createSvgElement)(B.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,(e=2*W.Bubble.BORDER_WIDTH).toString())},this.resizeGroup_),(0,s.createSvgElement)(B.Svg.LINE,{class:"blocklyResizeLine",x1:e/3,y1:e-1,x2:e-1,y2:e/3},this.resizeGroup_),(0,s.createSvgElement)(B.Svg.LINE,{class:"blocklyResizeLine",x1:2*e/3,y1:e-1,x2:e-1,y2:2*e/3},this.resizeGroup_)):this.resizeGroup_=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=(0,g.conditionalBind)(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=(0,g.conditionalBind)(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))),this.bubbleGroup_.appendChild(t),this.bubbleGroup_},W.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},W.Bubble.prototype.setSvgId=function(t){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=t)},W.Bubble.prototype.bubbleMouseDown_=function(t){var e=this.workspace_.getGesture(t);e&&e.handleBubbleStart(t,this)},W.Bubble.prototype.showContextMenu=function(t){},W.Bubble.prototype.isDeletable=function(){return!1},W.Bubble.prototype.setDeleteStyle=function(t){},W.Bubble.prototype.resizeMouseDown_=function(t){this.promote(),W.Bubble.unbindDragEvents_(),(0,g.isRightButton)(t)||(this.workspace_.startDrag(t,new N.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),W.Bubble.onMouseUpWrapper_=(0,g.conditionalBind)(document,"mouseup",this,W.Bubble.bubbleMouseUp_),W.Bubble.onMouseMoveWrapper_=(0,g.conditionalBind)(document,"mousemove",this,this.resizeMouseMove_),this.workspace_.hideChaff()),t.stopPropagation()},W.Bubble.prototype.resizeMouseMove_=function(t){this.autoLayout_=!1,t=this.workspace_.moveDrag(t),this.setBubbleSize(this.workspace_.RTL?-t.x:t.x,t.y),this.workspace_.RTL&&this.positionBubble_()},W.Bubble.prototype.registerResizeEvent=function(t){this.resizeCallback_=t},W.Bubble.prototype.registerMoveEvent=function(t){this.moveCallback_=t},W.Bubble.prototype.promote=function(){var t=this.bubbleGroup_.parentNode;return t.lastChild!==this.bubbleGroup_&&(t.appendChild(this.bubbleGroup_),!0)},W.Bubble.prototype.setAnchorLocation=function(t){this.anchorXY_=t,this.rendered_&&this.positionBubble_()},W.Bubble.prototype.layoutBubble_=function(){var t=this.workspace_.getMetricsManager().getViewMetrics(!0),e=this.getOptimalRelativeLeft_(t),o=this.getOptimalRelativeTop_(t),r=this.shape_.getBBox(),c={x:e,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},h={x:-this.width_-30,y:o};o={x:r.width,y:o};var k={x:e,y:r.height};e=r.width<r.height?o:k,r=r.width<r.height?k:o,o=this.getOverlap_(c,t),k=this.getOverlap_(h,t);var C=this.getOverlap_(e,t);t=this.getOverlap_(r,t),o===(t=Math.max(o,k,C,t))?(this.relativeLeft_=c.x,this.relativeTop_=c.y):k===t?(this.relativeLeft_=h.x,this.relativeTop_=h.y):C===t?(this.relativeLeft_=e.x,this.relativeTop_=e.y):(this.relativeLeft_=r.x,this.relativeTop_=r.y)},W.Bubble.prototype.getOverlap_=function(t,e){var o=this.workspace_.RTL?this.anchorXY_.x-t.x-this.width_:t.x+this.anchorXY_.x;return t=t.y+this.anchorXY_.y,Math.max(0,Math.min(1,(Math.min(o+this.width_,e.left+e.width)-Math.max(o,e.left))*(Math.min(t+this.height_,e.top+e.height)-Math.max(t,e.top))/(this.width_*this.height_)))},W.Bubble.prototype.getOptimalRelativeLeft_=function(t){var e=-this.width_/4;if(this.width_>t.width)return e;if(this.workspace_.RTL){var o=this.anchorXY_.x-e,r=t.left+t.width;o-this.width_<(t=t.left+J.Scrollbar.scrollbarThickness/this.workspace_.scale)?e=-(t-this.anchorXY_.x+this.width_):o>r&&(e=-(r-this.anchorXY_.x))}else{r=(o=e+this.anchorXY_.x)+this.width_;var c=t.left;t=t.left+t.width-J.Scrollbar.scrollbarThickness/this.workspace_.scale,o<c?e=c-this.anchorXY_.x:r>t&&(e=t-this.anchorXY_.x-this.width_)}return e},W.Bubble.prototype.getOptimalRelativeTop_=function(t){var e=-this.height_/4;if(this.height_>t.height)return e;var o=this.anchorXY_.y+e,c=t.top;t=t.top+t.height-J.Scrollbar.scrollbarThickness/this.workspace_.scale;var h=this.anchorXY_.y;return o<c?e=c-h:o+this.height_>t&&(e=t-h-this.height_),e},W.Bubble.prototype.positionBubble_=function(){var t=this.anchorXY_.x;this.moveTo(t=this.workspace_.RTL?t-(this.relativeLeft_+this.width_):t+this.relativeLeft_,this.relativeTop_+this.anchorXY_.y)},W.Bubble.prototype.moveTo=function(t,e){this.bubbleGroup_.setAttribute("transform","translate("+t+","+e+")")},W.Bubble.prototype.setDragging=function(t){!t&&this.moveCallback_&&this.moveCallback_()},W.Bubble.prototype.getBubbleSize=function(){return new et.Size(this.width_,this.height_)},W.Bubble.prototype.setBubbleSize=function(t,e){var o=2*W.Bubble.BORDER_WIDTH;t=Math.max(t,o+45),e=Math.max(e,o+20),this.width_=t,this.height_=e,this.bubbleBack_.setAttribute("width",t),this.bubbleBack_.setAttribute("height",e),this.resizeGroup_&&this.resizeGroup_.setAttribute("transform",this.workspace_.RTL?"translate("+2*W.Bubble.BORDER_WIDTH+","+(e-o)+") scale(-1 1)":"translate("+(t-o)+","+(e-o)+")"),this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()},W.Bubble.prototype.renderArrow_=function(){var t=[],e=this.width_/2,o=this.height_/2,r=-this.relativeLeft_,c=-this.relativeTop_;if(e===r&&o===c)t.push("M "+e+","+o);else{c-=o,r-=e,this.workspace_.RTL&&(r*=-1);var h=Math.sqrt(c*c+r*r),k=Math.acos(r/h);0>c&&(k=2*Math.PI-k);var C=k+Math.PI/2;C>2*Math.PI&&(C-=2*Math.PI);var G=Math.sin(C),j=Math.cos(C),Et=this.getBubbleSize();C=(Et.width+Et.height)/W.Bubble.ARROW_THICKNESS,C=Math.min(C,Et.width,Et.height)/4,r=e+(Et=1-W.Bubble.ANCHOR_RADIUS/h)*r,c=o+Et*c,Et=e+C*j;var le=o+C*G;e-=C*j,o-=C*G,(G=k+this.arrow_radians_)>2*Math.PI&&(G-=2*Math.PI),k=Math.sin(G)*h/W.Bubble.ARROW_BEND,h=Math.cos(G)*h/W.Bubble.ARROW_BEND,t.push("M"+Et+","+le),t.push("C"+(Et+h)+","+(le+k)+" "+r+","+c+" "+r+","+c),t.push("C"+r+","+c+" "+(e+h)+","+(o+k)+" "+e+","+o)}t.push("z"),this.bubbleArrow_.setAttribute("d",t.join(" "))},W.Bubble.prototype.setColour=function(t){this.bubbleBack_.setAttribute("fill",t),this.bubbleArrow_.setAttribute("fill",t)},W.Bubble.prototype.dispose=function(){this.onMouseDownBubbleWrapper_&&(0,g.unbind)(this.onMouseDownBubbleWrapper_),this.onMouseDownResizeWrapper_&&(0,g.unbind)(this.onMouseDownResizeWrapper_),W.Bubble.unbindDragEvents_(),(0,s.removeNode)(this.bubbleGroup_),this.disposed=!0},W.Bubble.prototype.moveDuringDrag=function(t,e){t?t.translateSurface(e.x,e.y):this.moveTo(e.x,e.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-e.x-this.width_:e.x-this.anchorXY_.x,this.relativeTop_=e.y-this.anchorXY_.y,this.renderArrow_()},W.Bubble.prototype.getRelativeToSurfaceXY=function(){return new N.Coordinate(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},W.Bubble.prototype.setAutoLayout=function(t){this.autoLayout_=t},W.Bubble.textToDom=function(t){var e=(0,s.createSvgElement)(B.Svg.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:W.Bubble.BORDER_WIDTH},null);t=t.split("\n");for(var o=0;o<t.length;o++){var r=(0,s.createSvgElement)(B.Svg.TSPAN,{dy:"1em",x:W.Bubble.BORDER_WIDTH},e),c=document.createTextNode(t[o]);r.appendChild(c)}return e},W.Bubble.createNonEditableBubble=function(t,e,o){if((o=new W.Bubble(e.workspace,t,e.pathObject.svgPath,o,null,null)).setSvgId(e.id),e.RTL){e=t.getBBox().width;for(var c,r=0;c=t.childNodes[r];r++)c.setAttribute("text-anchor","end"),c.setAttribute("x",e+W.Bubble.BORDER_WIDTH)}return o};var qe={CommentBase:function(t){this.commentId=(this.isBlank=typeof t>"u")?"":t.id,this.workspaceId=this.isBlank?"":t.workspace.id,this.group=(0,f.getGroup)(),this.recordUndo=(0,f.getRecordUndo)()}};(0,l.module$exports$Blockly$utils$object.inherits)(qe.CommentBase,eo),qe.CommentBase.prototype.toJson=function(){var t=qe.CommentBase.superClass_.toJson.call(this);return this.commentId&&(t.commentId=this.commentId),t},qe.CommentBase.prototype.fromJson=function(t){qe.CommentBase.superClass_.fromJson.call(this,t),this.commentId=t.commentId},qe.CommentBase.CommentCreateDeleteHelper=function(t,e){var o=t.getEventWorkspace_();e?((e=(0,l.module$exports$Blockly$utils$xml.createElement)("xml")).appendChild(t.xml),(0,l.module$exports$Blockly$Xml.domToWorkspace)(e,o)):(o=o.getCommentById(t.commentId))?o.dispose():console.warn("Can't uncreate non-existent comment: "+t.commentId)};var Qe={CommentMove:function(t){Qe.CommentMove.superClass_.constructor.call(this,t),t&&(this.comment_=t,this.oldCoordinate_=t.getXY(),this.newCoordinate_=null)}};(0,l.module$exports$Blockly$utils$object.inherits)(Qe.CommentMove,qe.CommentBase),Qe.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY(),this.comment_=null},Qe.CommentMove.prototype.type=f.COMMENT_MOVE,Qe.CommentMove.prototype.setOldCoordinate=function(t){this.oldCoordinate_=t},Qe.CommentMove.prototype.toJson=function(){var t=Qe.CommentMove.superClass_.toJson.call(this);return this.oldCoordinate_&&(t.oldCoordinate=Math.round(this.oldCoordinate_.x)+","+Math.round(this.oldCoordinate_.y)),this.newCoordinate_&&(t.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),t},Qe.CommentMove.prototype.fromJson=function(t){if(Qe.CommentMove.superClass_.fromJson.call(this,t),t.oldCoordinate){var e=t.oldCoordinate.split(",");this.oldCoordinate_=new N.Coordinate(Number(e[0]),Number(e[1]))}t.newCoordinate&&(t=t.newCoordinate.split(","),this.newCoordinate_=new N.Coordinate(Number(t[0]),Number(t[1])))},Qe.CommentMove.prototype.isNull=function(){return N.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},Qe.CommentMove.prototype.run=function(t){var e=this.getEventWorkspace_().getCommentById(this.commentId);if(e){t=t?this.newCoordinate_:this.oldCoordinate_;var o=e.getXY();e.moveBy(t.x-o.x,t.y-o.y)}else console.warn("Can't move non-existent comment: "+this.commentId)},(0,x.register)(x.Type.EVENT,f.COMMENT_MOVE,Qe.CommentMove);var ao={BubbleDragger:function(t,e){this.draggingBubble_=t,this.workspace_=e,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=(0,dt.is3dSupported)()&&e.getBlockDragSurface()?e.getBlockDragSurface():null}};ao.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},ao.BubbleDragger.prototype.startBubbleDrag=function(){(0,f.getGroup)()||(0,f.setGroup)(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0)},ao.BubbleDragger.prototype.dragBubble=function(t,e){e=this.pixelsToWorkspaceUnits_(e),e=N.Coordinate.sum(this.startXY_,e),this.draggingBubble_.moveDuringDrag(this.dragSurface_,e),e=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(t),t=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),t!==this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==e&&(e&&e.onDragExit(this.draggingBubble_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBubble_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBubble_)},ao.BubbleDragger.prototype.shouldDelete_=function(t){return!(!t||!this.workspace_.getComponentManager().hasCapability(t.id,At.ComponentManager.Capability.DELETE_AREA))&&t.wouldDelete(this.draggingBubble_,!1)},ao.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.draggingBubble_.setDeleteStyle(this.wouldDeleteBubble_)},ao.BubbleDragger.prototype.endBubbleDrag=function(t,e){this.dragBubble(t,e),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBubble_)?t=this.startXY_:(t=this.pixelsToWorkspaceUnits_(e),t=N.Coordinate.sum(this.startXY_,t)),this.draggingBubble_.moveTo(t.x,t.y),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBubble_),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),(0,f.setGroup)(!1)},ao.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var t=new((0,f.get)(f.COMMENT_MOVE))(this.draggingBubble_);t.setOldCoordinate(this.startXY_),t.recordNew(),(0,f.fire)(t)}},ao.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new N.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},ao.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())};var An={WorkspaceDragger:function(t){this.workspace_=t,this.horizontalScrollEnabled_=this.workspace_.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace_.isMovableVertically(),this.startScrollXY_=new N.Coordinate(t.scrollX,t.scrollY)}};An.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},An.WorkspaceDragger.prototype.startDrag=function(){(0,l.module$exports$Blockly$common.getSelected)()&&(0,l.module$exports$Blockly$common.getSelected)().unselect(),this.workspace_.setupDragSurface()},An.WorkspaceDragger.prototype.endDrag=function(t){this.drag(t),this.workspace_.resetDragSurface()},An.WorkspaceDragger.prototype.drag=function(t){if(t=N.Coordinate.sum(this.startScrollXY_,t),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace_.scroll(t.x,t.y);else if(this.horizontalScrollEnabled_)this.workspace_.scroll(t.x,this.workspace_.scrollY);else{if(!this.verticalScrollEnabled_)throw new TypeError("Invalid state.");this.workspace_.scroll(this.workspace_.scrollX,t.y)}};var Rt={InsertionMarkerManager:function(t){(0,l.module$exports$Blockly$common.setSelected)(t),this.topBlock_=t,this.workspace_=t.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null,this.availableConnections_=this.initAvailableConnections_()}};Rt.InsertionMarkerManager.PREVIEW_TYPE={INSERTION_MARKER:0,INPUT_OUTLINE:1,REPLACEMENT_FADE:2},Rt.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",Rt.InsertionMarkerManager.prototype.dispose=function(){this.availableConnections_.length=0,(0,f.disable)();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{(0,f.enable)()}},Rt.InsertionMarkerManager.prototype.updateAvailableConnections=function(){this.availableConnections_=this.initAvailableConnections_()},Rt.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},Rt.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_},Rt.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&((0,f.disable)(),this.hidePreview_(),(0,f.enable)(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var t=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;(0,co.connectionUiEffect)(t.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}},Rt.InsertionMarkerManager.prototype.update=function(t,e){var o=this.getCandidate_(t);((this.wouldDeleteBlock_=this.shouldDelete_(o,e))||this.shouldUpdatePreviews_(o,t))&&((0,f.disable)(),this.maybeHidePreview_(o),this.maybeShowPreview_(o),(0,f.enable)())},Rt.InsertionMarkerManager.prototype.createMarkerBlock_=function(t){var e=t.type;(0,f.disable)();try{var o=this.workspace_.newBlock(e);if(o.setInsertionMarker(!0),t.saveExtraState){var r=t.saveExtraState();r&&o.loadExtraState(r)}else if(t.mutationToDom){var c=t.mutationToDom();c&&o.domToMutation(c)}for(e=0;e<t.inputList.length;e++){var h=t.inputList[e];if(h.name!==zo.COLLAPSED_INPUT_NAME){var k=o.inputList[e];if(!k)throw Error(Rt.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","an input"));for(r=0;r<h.fieldRow.length;r++){var C=h.fieldRow[r],G=k.fieldRow[r];if(!G)throw Error(Rt.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","a field"));G.setValue(C.getValue())}}}o.setCollapsed(t.isCollapsed()),o.setInputsInline(t.getInputsInline()),o.initSvg(),o.getSvgRoot().setAttribute("visibility","hidden")}finally{(0,f.enable)()}return o},Rt.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var t=this.topBlock_.getConnections_(!1),e=this.topBlock_.lastConnectionInStack(!0);if(e&&e!==this.topBlock_.nextConnection){if(t.push(e),this.lastOnStack_=e,this.lastMarker_){(0,f.disable)();try{this.lastMarker_.dispose()}finally{(0,f.enable)()}}this.lastMarker_=this.createMarkerBlock_(e.getSourceBlock())}return t},Rt.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(t,e){var o=t.local,r=t.closest;return t=t.radius,o&&r?this.localConnection_&&this.closestConnection_?!(this.closestConnection_===r&&this.localConnection_===o||(o=this.localConnection_.x+e.x-this.closestConnection_.x,e=this.localConnection_.y+e.y-this.closestConnection_.y,e=Math.sqrt(o*o+e*e),r&&t>e-l.module$exports$Blockly$internalConstants.CURRENT_CONNECTION_PREFERENCE)):!this.localConnection_&&!this.closestConnection_||(console.error("Only one of localConnection_ and closestConnection_ was set."),console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0):!(!this.localConnection_||!this.closestConnection_)},Rt.InsertionMarkerManager.prototype.getCandidate_=function(t){for(var e=this.getStartRadius_(),o=null,r=null,c=0;c<this.availableConnections_.length;c++){var h=this.availableConnections_[c],k=h.closest(e,t);k.connection&&(o=k.connection,r=h,e=k.radius)}return{closest:o,local:r,radius:e}},Rt.InsertionMarkerManager.prototype.getStartRadius_=function(){return l.module$exports$Blockly$internalConstants.SNAP_RADIUS},Rt.InsertionMarkerManager.prototype.shouldDelete_=function(t,e){return!(!e||!this.workspace_.getComponentManager().hasCapability(e.id,At.ComponentManager.Capability.DELETE_AREA))&&e.wouldDelete(this.topBlock_,t&&!!t.closest)},Rt.InsertionMarkerManager.prototype.maybeShowPreview_=function(t){if(!this.wouldDeleteBlock_){var e=t.closest;t=t.local,e&&(e===this.closestConnection_||e.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=e,this.localConnection_=t,this.showPreview_()))}},Rt.InsertionMarkerManager.prototype.showPreview_=function(){var t=this.closestConnection_,e=this.workspace_.getRenderer();switch(e.getConnectionPreviewMethod(t,this.localConnection_,this.topBlock_)){case Rt.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case Rt.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case Rt.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}t&&e.shouldHighlightConnection(t)&&t.highlight()},Rt.InsertionMarkerManager.prototype.maybeHidePreview_=function(t){if(t.closest){var e=this.closestConnection_!==t.closest;t=this.localConnection_!==t.local,this.closestConnection_&&this.localConnection_&&(e||t||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null},Rt.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()},Rt.InsertionMarkerManager.prototype.showInsertionMarker_=function(){var t=this.localConnection_,e=this.closestConnection_,o=this.lastOnStack_&&t===this.lastOnStack_?this.lastMarker_:this.firstMarker_;if((t=o.getMatchingConnection(t.getSourceBlock(),t))===this.markerConnection_)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");o.render(),o.rendered=!0,o.getSvgRoot().setAttribute("visibility","visible"),t&&e&&o.positionNearConnection(t,e),e&&t.connect(e),this.markerConnection_=t},Rt.InsertionMarkerManager.prototype.hideInsertionMarker_=function(){if(this.markerConnection_){var t=this.markerConnection_,e=t.getSourceBlock(),o=e.nextConnection,r=e.previousConnection,c=e.outputConnection;if(c=t.type===l.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE&&!(c&&c.targetConnection),!(t!==o||r&&r.targetConnection)||c?t.targetBlock().unplug(!1):t.type===l.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT&&t!==o?((o=t.targetConnection).getSourceBlock().unplug(!1),r=r?r.targetConnection:null,e.unplug(!0),r&&r.connect(o)):e.unplug(!0),t.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,(t=e.getSvgRoot())&&t.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},Rt.InsertionMarkerManager.prototype.showInsertionInputOutline_=function(){var t=this.closestConnection_;this.highlightedBlock_=t.getSourceBlock(),this.highlightedBlock_.highlightShapeForInput(t,!0)},Rt.InsertionMarkerManager.prototype.hideInsertionInputOutline_=function(){this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1),this.highlightedBlock_=null},Rt.InsertionMarkerManager.prototype.showReplacementFade_=function(){this.fadedBlock_=this.closestConnection_.targetBlock(),this.fadedBlock_.fadeForReplacement(!0)},Rt.InsertionMarkerManager.prototype.hideReplacementFade_=function(){this.fadedBlock_.fadeForReplacement(!1),this.fadedBlock_=null},Rt.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var t=[];return this.firstMarker_&&t.push(this.firstMarker_),this.lastMarker_&&t.push(this.lastMarker_),t};var We={UiBase:function(t){We.UiBase.superClass_.constructor.call(this),this.isBlank=typeof t>"u",this.workspaceId=t||"",this.recordUndo=!1}};(0,l.module$exports$Blockly$utils$object.inherits)(We.UiBase,eo),We.UiBase.prototype.isUiEvent=!0;var Yo={BlockDrag:function(t,e,o){Yo.BlockDrag.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.isStart=e,this.blocks=o}};(0,l.module$exports$Blockly$utils$object.inherits)(Yo.BlockDrag,We.UiBase),Yo.BlockDrag.prototype.type=f.BLOCK_DRAG,Yo.BlockDrag.prototype.toJson=function(){var t=Yo.BlockDrag.superClass_.toJson.call(this);return t.isStart=this.isStart,t.blockId=this.blockId,t.blocks=this.blocks,t},Yo.BlockDrag.prototype.fromJson=function(t){Yo.BlockDrag.superClass_.fromJson.call(this,t),this.isStart=t.isStart,this.blockId=t.blockId,this.blocks=t.blocks},(0,x.register)(x.Type.EVENT,f.BLOCK_DRAG,Yo.BlockDrag);var Te={BlockDragger:function(t,e){this.draggingBlock_=t,this.workspace_=e,this.draggedConnectionManager_=new Rt.InsertionMarkerManager(this.draggingBlock_),this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=ps(t)}};Te.BlockDragger.prototype.dispose=function(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()};var ps=function(t){var e=[];t=t.getDescendants(!1);for(var r,o=0;r=t[o];o++){r=r.getIcons();for(var c=0;c<r.length;c++){var h={location:r[c].getIconLocation(),icon:r[c]};e.push(h)}}return e};Te.BlockDragger.prototype.startDrag=function(t,e){(0,f.getGroup)()||(0,f.setGroup)(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),(0,s.startTextWidthCache)(),this.workspace_.setResizesEnabled(!1),(0,co.disconnectUiStop)(),this.shouldDisconnect_(e)&&this.disconnectBlock_(e,t),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()},Te.BlockDragger.prototype.shouldDisconnect_=function(t){return!!(this.draggingBlock_.getParent()||t&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())},Te.BlockDragger.prototype.disconnectBlock_=function(t,e){this.draggingBlock_.unplug(t),t=this.pixelsToWorkspaceUnits_(e),t=N.Coordinate.sum(this.startXY_,t),this.draggingBlock_.translate(t.x,t.y),(0,co.disconnectUiEffect)(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()},Te.BlockDragger.prototype.fireDragStartEvent_=function(){var t=new((0,f.get)(f.BLOCK_DRAG))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));(0,f.fire)(t)},Te.BlockDragger.prototype.drag=function(t,e){e=this.pixelsToWorkspaceUnits_(e);var o=N.Coordinate.sum(this.startXY_,e);this.draggingBlock_.moveDuringDrag(o),this.dragIcons_(e),o=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(t),this.draggedConnectionManager_.update(e,this.dragTarget_),t=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock(),t!==this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==o&&(o&&o.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)},Te.BlockDragger.prototype.endDrag=function(t,e){if(this.drag(t,e),this.dragIconData_=[],this.fireDragEndEvent_(),(0,s.stopTextWidthCache)(),(0,co.disconnectUiStop)(),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_))t=this.startXY_;else{var o=(t=this.getNewLocationAfterDrag_(e)).delta;t=t.newLocation}this.draggingBlock_.moveOffDragSurface(t),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),o?this.updateBlockAfterMove_(o):(0,rt.bumpIntoBounds)(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),(0,f.setGroup)(!1)},Te.BlockDragger.prototype.getNewLocationAfterDrag_=function(t){var e={};return e.delta=this.pixelsToWorkspaceUnits_(t),e.newLocation=N.Coordinate.sum(this.startXY_,e.delta),e},Te.BlockDragger.prototype.maybeDeleteBlock_=function(){return!!this.wouldDeleteBlock_&&(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),l.module$exports$Blockly$common.draggingConnections.length=0,!0)},Te.BlockDragger.prototype.updateBlockAfterMove_=function(t){this.draggingBlock_.moveConnections(t.x,t.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()},Te.BlockDragger.prototype.fireDragEndEvent_=function(){var t=new((0,f.get)(f.BLOCK_DRAG))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));(0,f.fire)(t)},Te.BlockDragger.prototype.updateToolboxStyle_=function(t){var e=this.workspace_.getToolbox();if(e){var o=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";t&&"function"==typeof e.removeStyle?e.removeStyle(o):t||"function"!=typeof e.addStyle||e.addStyle(o)}},Te.BlockDragger.prototype.fireMoveEvent_=function(){var t=new((0,f.get)(f.MOVE))(this.draggingBlock_);t.oldCoordinate=this.startXY_,t.recordNew(),(0,f.fire)(t)},Te.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)},Te.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new N.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},Te.BlockDragger.prototype.dragIcons_=function(t){for(var e=0;e<this.dragIconData_.length;e++){var o=this.dragIconData_[e];o.icon.setIconLocation(N.Coordinate.sum(o.location,t))}},Te.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]},(0,x.register)(x.Type.BLOCK_DRAGGER,x.DEFAULT,Te.BlockDragger);var jo={Click:function(t,e,o){jo.Click.superClass_.constructor.call(this,t?t.workspace.id:e),this.blockId=t?t.id:null,this.targetType=o}};(0,l.module$exports$Blockly$utils$object.inherits)(jo.Click,We.UiBase),jo.Click.prototype.type=f.CLICK,jo.Click.prototype.toJson=function(){var t=jo.Click.superClass_.toJson.call(this);return t.targetType=this.targetType,this.blockId&&(t.blockId=this.blockId),t},jo.Click.prototype.fromJson=function(t){jo.Click.superClass_.fromJson.call(this,t),this.targetType=t.targetType,this.blockId=t.blockId},(0,x.register)(x.Type.EVENT,f.CLICK,jo.Click);var gt={Gesture:function(t,e){this.mouseDownXY_=null,this.currentDragDeltaXY_=new N.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.creatorWorkspace_=e,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=t,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!l.module$exports$Blockly$internalConstants.DRAG_STACK}};gt.Gesture.prototype.dispose=function(){(0,tt.clearTouchIdentifier)(),(0,at.unblock)(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&(0,g.unbind)(this.onMoveWrapper_),this.onUpWrapper_&&(0,g.unbind)(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.bubbleDragger_&&this.bubbleDragger_.dispose()},gt.Gesture.prototype.updateFromEvent_=function(t){var e=new N.Coordinate(t.clientX,t.clientY);this.updateDragDelta_(e)&&(this.updateIsDragging_(),(0,tt.longStop)()),this.mostRecentEvent_=t},gt.Gesture.prototype.updateDragDelta_=function(t){return this.currentDragDeltaXY_=N.Coordinate.difference(t,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=N.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?l.module$exports$Blockly$internalConstants.FLYOUT_DRAG_RADIUS:l.module$exports$Blockly$internalConstants.DRAG_RADIUS))},gt.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!(!this.targetBlock_||!this.flyout_.isBlockCreatable_(this.targetBlock_)||this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)||(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),(0,f.getGroup)()||(0,f.setGroup)(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),0))},gt.Gesture.prototype.updateIsDraggingBubble_=function(){return!!this.startBubble_&&(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0)},gt.Gesture.prototype.updateIsDraggingBlock_=function(){return!!this.targetBlock_&&(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0),!!this.isDraggingBlock_&&(this.startDraggingBlock_(),!0))},gt.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new An.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},gt.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},gt.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new((0,x.getClassFromOptions)(x.Type.BLOCK_DRAGGER,this.creatorWorkspace_.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)},gt.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new ao.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},gt.Gesture.prototype.doStart=function(t){(0,g.isTargetInput)(t)?this.cancel():(this.hasStarted_=!0,(0,co.disconnectUiStop)(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.startWorkspace_.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=t,(0,at.block)(),this.targetBlock_&&this.targetBlock_.select(),(0,g.isRightButton)(t)?this.handleRightClick(t):("touchstart"!==t.type.toLowerCase()&&"pointerdown"!==t.type.toLowerCase()||"mouse"===t.pointerType||(0,tt.longStart)(t,this),this.mouseDownXY_=new N.Coordinate(t.clientX,t.clientY),this.healStack_=t.altKey||t.ctrlKey||t.metaKey,this.bindMouseEvents(t)))},gt.Gesture.prototype.bindMouseEvents=function(t){this.onMoveWrapper_=(0,g.conditionalBind)(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=(0,g.conditionalBind)(document,"mouseup",null,this.handleUp.bind(this)),t.preventDefault(),t.stopPropagation()},gt.Gesture.prototype.handleMove=function(t){this.updateFromEvent_(t),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),t.preventDefault(),t.stopPropagation()},gt.Gesture.prototype.handleUp=function(t){this.updateFromEvent_(t),(0,tt.longStop)(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(t,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(t,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(t),t.preventDefault(),t.stopPropagation(),this.dispose())},gt.Gesture.prototype.cancel=function(){this.isEnding_||((0,tt.longStop)(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},gt.Gesture.prototype.handleRightClick=function(t){this.targetBlock_?(this.bringBlockToFront_(),this.targetBlock_.workspace.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(t)):this.startBubble_?this.startBubble_.showContextMenu(t):this.startWorkspace_&&!this.flyout_&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu(t)),t.preventDefault(),t.stopPropagation(),this.dispose()},gt.Gesture.prototype.handleWsStart=function(t,e){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(e),this.mostRecentEvent_=t,this.doStart(t)},gt.Gesture.prototype.fireWorkspaceClick_=function(t){(0,f.fire)(new((0,f.get)(f.CLICK))(null,t.id,"workspace"))},gt.Gesture.prototype.handleFlyoutStart=function(t,e){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(e),this.handleWsStart(t,e.getWorkspace())},gt.Gesture.prototype.handleBlockStart=function(t,e){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(e),this.mostRecentEvent_=t},gt.Gesture.prototype.handleBubbleStart=function(t,e){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(e),this.mostRecentEvent_=t},gt.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},gt.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()},gt.Gesture.prototype.doBlockClick_=function(){if(this.flyout_&&this.flyout_.autoClose)this.targetBlock_.isEnabled()&&((0,f.getGroup)()||(0,f.setGroup)(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump());else{var t=new((0,f.get)(f.CLICK))(this.startBlock_,this.startWorkspace_.id,"block");(0,f.fire)(t)}this.bringBlockToFront_(),(0,f.setGroup)(!1)},gt.Gesture.prototype.doWorkspaceClick_=function(t){t=this.creatorWorkspace_,(0,l.module$exports$Blockly$common.getSelected)()&&(0,l.module$exports$Blockly$common.getSelected)().unselect(),this.fireWorkspaceClick_(this.startWorkspace_||t)},gt.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},gt.Gesture.prototype.setStartField=function(t){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=t)},gt.Gesture.prototype.setStartBubble=function(t){this.startBubble_||(this.startBubble_=t)},gt.Gesture.prototype.setStartBlock=function(t){this.startBlock_||this.startBubble_||(this.startBlock_=t,t.isInFlyout&&t!==t.getRootBlock()?this.setTargetBlock_(t.getRootBlock()):this.setTargetBlock_(t))},gt.Gesture.prototype.setTargetBlock_=function(t){t.isShadow()?this.setTargetBlock_(t.getParent()):this.targetBlock_=t},gt.Gesture.prototype.setStartWorkspace_=function(t){this.startWorkspace_||(this.startWorkspace_=t)},gt.Gesture.prototype.setStartFlyout_=function(t){this.flyout_||(this.flyout_=t)},gt.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},gt.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},gt.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},gt.Gesture.prototype.isWorkspaceClick_=function(){return!(this.startBlock_||this.startBubble_||this.startField_||this.hasExceededDragRadius_)},gt.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},gt.Gesture.prototype.hasStarted=function(){return this.hasStarted_},gt.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]},gt.Gesture.prototype.getCurrentDragger=function(){return this.isDraggingBlock_?this.blockDragger_:this.isDraggingWorkspace_?this.workspaceDragger_:this.isDraggingBubble_?this.bubbleDragger_:null},gt.Gesture.inProgress=function(){for(var o,t=Q.Workspace.getAll(),e=0;o=t[e];e++)if(o.currentGesture_)return!0;return!1};var z={Field:function(t,e,o){this.value_=this.DEFAULT_VALUE,this.tooltip_=this.validator_=null,this.size_=new et.Size(0,0),this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=null,o&&this.configure_(o),this.setValue(t),e&&this.setValidator(e)}};z.Field.prototype.DEFAULT_VALUE=null,z.Field.prototype.name=void 0,z.Field.prototype.disposed=!1,z.Field.prototype.maxDisplayLength=50,z.Field.prototype.sourceBlock_=null,z.Field.prototype.isDirty_=!0,z.Field.prototype.visible_=!0,z.Field.prototype.enabled_=!0,z.Field.prototype.clickTarget_=null,z.Field.NBSP="\xa0",z.Field.prototype.EDITABLE=!0,z.Field.prototype.SERIALIZABLE=!1,z.Field.prototype.configure_=function(t){var e=t.tooltip;"string"==typeof e&&(e=(0,It.replaceMessageReferences)(t.tooltip)),e&&this.setTooltip(e)},z.Field.prototype.setSourceBlock=function(t){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=t},z.Field.prototype.getConstants=function(){return!this.constants_&&this.sourceBlock_&&this.sourceBlock_.workspace&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_},z.Field.prototype.getSourceBlock=function(){return this.sourceBlock_},z.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=(0,s.createSvgElement)(B.Svg.G,{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())},z.Field.prototype.initView=function(){this.createBorderRect_(),this.createTextElement_()},z.Field.prototype.initModel=function(){},z.Field.prototype.createBorderRect_=function(){this.borderRect_=(0,s.createSvgElement)(B.Svg.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)},z.Field.prototype.createTextElement_=function(){this.textElement_=(0,s.createSvgElement)(B.Svg.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)},z.Field.prototype.bindEvents_=function(){(0,at.bindMouseEvents)(this.getClickTarget_()),this.mouseDownWrapper_=(0,g.conditionalBind)(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)},z.Field.prototype.fromXml=function(t){this.setValue(t.textContent)},z.Field.prototype.toXml=function(t){return t.textContent=this.getValue(),t},z.Field.prototype.saveState=function(t){return null!==(t=this.saveLegacyState(z.Field))?t:this.getValue()},z.Field.prototype.loadState=function(t){this.loadLegacyState(z.Field,t)||this.setValue(t)},z.Field.prototype.saveLegacyState=function(t){return t.prototype.saveState===this.saveState&&t.prototype.toXml!==this.toXml?((t=(0,l.module$exports$Blockly$utils$xml.createElement)("field")).setAttribute("name",this.name||""),(0,l.module$exports$Blockly$Xml.domToText)(this.toXml(t)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null},z.Field.prototype.loadLegacyState=function(t,e){return t.prototype.loadState===this.loadState&&t.prototype.fromXml!==this.fromXml&&(this.fromXml((0,l.module$exports$Blockly$Xml.textToDom)(e)),!0)},z.Field.prototype.dispose=function(){D.DropDownDiv.hideIfOwner(this),(0,m.hideIfOwner)(this),(0,at.unbindMouseEvents)(this.getClickTarget_()),this.mouseDownWrapper_&&(0,g.unbind)(this.mouseDownWrapper_),(0,s.removeNode)(this.fieldGroup_),this.disposed=!0},z.Field.prototype.updateEditable=function(){var t=this.fieldGroup_;this.EDITABLE&&t&&(this.enabled_&&this.sourceBlock_.isEditable()?((0,s.addClass)(t,"blocklyEditableText"),(0,s.removeClass)(t,"blocklyNonEditableText"),t.style.cursor=this.CURSOR):((0,s.addClass)(t,"blocklyNonEditableText"),(0,s.removeClass)(t,"blocklyEditableText"),t.style.cursor=""))},z.Field.prototype.setEnabled=function(t){this.enabled_=t,this.updateEditable()},z.Field.prototype.isEnabled=function(){return this.enabled_},z.Field.prototype.isClickable=function(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&"function"==typeof this.showEditor_},z.Field.prototype.isCurrentlyEditable=function(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},z.Field.prototype.isSerializable=function(){var t=!1;return this.name&&(this.SERIALIZABLE?t=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),t=!0)),t},z.Field.prototype.isVisible=function(){return this.visible_},z.Field.prototype.setVisible=function(t){if(this.visible_!==t){this.visible_=t;var e=this.getSvgRoot();e&&(e.style.display=t?"block":"none")}},z.Field.prototype.setValidator=function(t){this.validator_=t},z.Field.prototype.getValidator=function(){return this.validator_},z.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},z.Field.prototype.applyColour=function(){},z.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()},z.Field.prototype.showEditor=function(t){this.isClickable()&&this.showEditor_(t)},z.Field.prototype.updateSize_=function(t){var e=this.getConstants(),o=2*(t=void 0!==t?t:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0),r=e.FIELD_TEXT_HEIGHT,c=0;this.textElement_&&(o+=c=(0,s.getFastTextWidth)(this.textElement_,e.FIELD_TEXT_FONTSIZE,e.FIELD_TEXT_FONTWEIGHT,e.FIELD_TEXT_FONTFAMILY)),this.borderRect_&&(r=Math.max(r,e.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=r,this.size_.width=o,this.positionTextElement_(t,c),this.positionBorderRect_()},z.Field.prototype.positionTextElement_=function(t,e){if(this.textElement_){var o=this.getConstants(),r=this.size_.height/2;this.textElement_.setAttribute("x",this.sourceBlock_.RTL?this.size_.width-e-t:t),this.textElement_.setAttribute("y",o.FIELD_TEXT_BASELINE_CENTER?r:r-o.FIELD_TEXT_HEIGHT/2+o.FIELD_TEXT_BASELINE)}},z.Field.prototype.positionBorderRect_=function(){this.borderRect_&&(this.borderRect_.setAttribute("width",this.size_.width),this.borderRect_.setAttribute("height",this.size_.height),this.borderRect_.setAttribute("rx",this.getConstants().FIELD_BORDER_RECT_RADIUS),this.borderRect_.setAttribute("ry",this.getConstants().FIELD_BORDER_RECT_RADIUS))},z.Field.prototype.getSize=function(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0===this.size_.width&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new et.Size(0,0)},z.Field.prototype.getScaledBBox=function(){if(this.borderRect_)var t=this.borderRect_.getBoundingClientRect(),e=(0,q.getPageOffset)(this.borderRect_),o=t.width,r=t.height;else r=this.sourceBlock_.getHeightWidth(),t=this.sourceBlock_.workspace.scale,e=this.getAbsoluteXY_(),o=r.width*t,r=r.height*t,ot.GECKO?(e.x+=1.5*t,e.y+=1.5*t):ot.EDGE||ot.IE||(e.x-=.5*t,e.y-=.5*t),o+=1*t,r+=1*t;return new yt.Rect(e.y,e.y+r,e.x,e.x+o)},z.Field.prototype.getDisplayText_=function(){var t=this.getText();return t?(t.length>this.maxDisplayLength&&(t=t.substring(0,this.maxDisplayLength-2)+"\u2026"),t=t.replace(/\s/g,z.Field.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(t+="\u200f"),t):z.Field.NBSP},z.Field.prototype.getText=function(){if(this.getText_){var t=this.getText_.call(this);if(null!==t)return String(t)}return String(this.getValue())},z.Field.prototype.markDirty=function(){this.isDirty_=!0,this.constants_=null},z.Field.prototype.forceRerender=function(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())},z.Field.prototype.setValue=function(t){if(null!==t){var e=this.doClassValidation_(t);if(!((t=this.processValidation_(t,e))instanceof Error)){if((e=this.getValidator())&&(e=e.call(this,t),(t=this.processValidation_(t,e))instanceof Error))return;if(!(e=this.sourceBlock_)||!e.disposed){var o=this.getValue();o===t?this.doValueUpdate_(t):(this.doValueUpdate_(t),e&&(0,f.isEnabled)()&&(0,f.fire)(new((0,f.get)(f.CHANGE))(e,"field",this.name||null,o,t)),this.isDirty_&&this.forceRerender())}}}},z.Field.prototype.processValidation_=function(t,e){return null===e?(this.doValueInvalid_(t),this.isDirty_&&this.forceRerender(),Error()):(void 0!==e&&(t=e),t)},z.Field.prototype.getValue=function(){return this.value_},z.Field.prototype.doClassValidation_=function(t){return t??null},z.Field.prototype.doValueUpdate_=function(t){this.value_=t,this.isDirty_=!0},z.Field.prototype.doValueInvalid_=function(t){},z.Field.prototype.onMouseDown_=function(t){this.sourceBlock_&&this.sourceBlock_.workspace&&(t=this.sourceBlock_.workspace.getGesture(t))&&t.setStartField(this)},z.Field.prototype.setTooltip=function(t){t||""===t||(t=this.sourceBlock_);var e=this.getClickTarget_();e?e.tooltip=t:this.tooltip_=t},z.Field.prototype.getTooltip=function(){var t=this.getClickTarget_();return(0,at.getTooltipOfObject)(t||{tooltip:this.tooltip_})},z.Field.prototype.getClickTarget_=function(){return this.clickTarget_||this.getSvgRoot()},z.Field.prototype.getAbsoluteXY_=function(){return(0,q.getPageOffset)(this.getClickTarget_())},z.Field.prototype.referencesVariables=function(){return!1},z.Field.prototype.getParentInput=function(){for(var t=null,e=this.sourceBlock_,o=e.inputList,r=0;r<e.inputList.length;r++)for(var c=o[r],h=c.fieldRow,k=0;k<h.length;k++)if(h[k]===this){t=c;break}return t},z.Field.prototype.getFlipRtl=function(){return!1},z.Field.prototype.isTabNavigable=function(){return!1},z.Field.prototype.onShortcut=function(t){return!1},z.Field.prototype.setCursorSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},z.Field.prototype.setMarkerSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.markerSvg_=t):this.markerSvg_=null},z.Field.prototype.updateMarkers_=function(){var t=this.sourceBlock_.workspace;t.keyboardAccessibilityMode&&this.cursorSvg_&&t.getCursor().draw(),t.keyboardAccessibilityMode&&this.markerSvg_&&t.getMarker(Ve.MarkerManager.LOCAL_MARKER).draw()},l.module$exports$Blockly$FieldLabel={FieldLabel:function(t,e,o){this.class_=null,l.module$exports$Blockly$FieldLabel.FieldLabel.superClass_.constructor.call(this,t,null,o),o||(this.class_=e||null)}},(0,l.module$exports$Blockly$utils$object.inherits)(l.module$exports$Blockly$FieldLabel.FieldLabel,z.Field),l.module$exports$Blockly$FieldLabel.FieldLabel.prototype.DEFAULT_VALUE="",l.module$exports$Blockly$FieldLabel.FieldLabel.fromJson=function(t){return new this((0,It.replaceMessageReferences)(t.text),void 0,t)},l.module$exports$Blockly$FieldLabel.FieldLabel.prototype.EDITABLE=!1,l.module$exports$Blockly$FieldLabel.FieldLabel.prototype.configure_=function(t){l.module$exports$Blockly$FieldLabel.FieldLabel.superClass_.configure_.call(this,t),this.class_=t.class},l.module$exports$Blockly$FieldLabel.FieldLabel.prototype.initView=function(){this.createTextElement_(),this.class_&&(0,s.addClass)(this.textElement_,this.class_)},l.module$exports$Blockly$FieldLabel.FieldLabel.prototype.doClassValidation_=function(t){return null==t?null:String(t)},l.module$exports$Blockly$FieldLabel.FieldLabel.prototype.setClass=function(t){this.textElement_&&(this.class_&&(0,s.removeClass)(this.textElement_,this.class_),t&&(0,s.addClass)(this.textElement_,t)),this.class_=t},(0,He.register)("field_label",l.module$exports$Blockly$FieldLabel.FieldLabel);var oe={Debug:function(t){this.debugElements_=[],this.svgRoot_=null,this.constants_=t}};oe.Debug.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0},oe.Debug.prototype.clearElems=function(){for(var t=0;t<this.debugElements_.length;t++)(0,s.removeNode)(this.debugElements_[t]);this.debugElements_=[]},oe.Debug.prototype.drawSpacerRow=function(t,e,o){if(oe.Debug.config.rowSpacers){var r=Math.abs(t.height),c=0>t.height;c&&(e-=r),this.debugElements_.push((0,s.createSvgElement)(B.Svg.RECT,{class:"rowSpacerRect blockRenderDebug",x:o?-(t.xPos+t.width):t.xPos,y:e,width:t.width,height:r,stroke:c?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},oe.Debug.prototype.drawSpacerElem=function(t,e,o){if(oe.Debug.config.elemSpacers){e=Math.abs(t.width);var r=0>t.width,c=r?t.xPos-e:t.xPos;o&&(c=-(c+e)),this.debugElements_.push((0,s.createSvgElement)(B.Svg.RECT,{class:"elemSpacerRect blockRenderDebug",x:c,y:t.centerline-t.height/2,width:e,height:t.height,stroke:"pink",fill:r?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},oe.Debug.prototype.drawRenderedElem=function(t,e){if(oe.Debug.config.elems){var o=t.xPos;e&&(o=-(o+t.width)),this.debugElements_.push((0,s.createSvgElement)(B.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:o,y:e=t.centerline-t.height/2,width:t.width,height:t.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),S.Types.isField(t)&&t.field instanceof l.module$exports$Blockly$FieldLabel.FieldLabel&&this.debugElements_.push((0,s.createSvgElement)(B.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:o,y:e+this.constants_.FIELD_TEXT_BASELINE,width:t.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}S.Types.isInput(t)&&oe.Debug.config.connections&&this.drawConnection(t.connectionModel)},oe.Debug.prototype.drawConnection=function(t){if(oe.Debug.config.connections){if(t.type===l.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE)var e=4,o="magenta",r="none";else t.type===l.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE?(e=2,r=o="magenta"):t.type===l.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT?(e=4,o="goldenrod",r="none"):t.type===l.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT&&(e=2,r=o="goldenrod");this.debugElements_.push((0,s.createSvgElement)(B.Svg.CIRCLE,{class:"blockRenderDebug",cx:t.offsetInBlock_.x,cy:t.offsetInBlock_.y,r:e,fill:r,stroke:o},this.svgRoot_))}},oe.Debug.prototype.drawRenderedRow=function(t,e,o){oe.Debug.config.rows&&(this.debugElements_.push((0,s.createSvgElement)(B.Svg.RECT,{class:"elemRenderingRect blockRenderDebug",x:o?-(t.xPos+t.width):t.xPos,y:t.yPos,width:t.width,height:t.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),S.Types.isTopOrBottomRow(t)||oe.Debug.config.connectedBlockBounds&&this.debugElements_.push((0,s.createSvgElement)(B.Svg.RECT,{class:"connectedBlockWidth blockRenderDebug",x:o?-(t.xPos+t.widthWithConnectedBlocks):t.xPos,y:t.yPos,width:t.widthWithConnectedBlocks,height:t.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))},oe.Debug.prototype.drawRowWithElements=function(t,e,o){for(var r=0;r<t.elements.length;r++){var c=t.elements[r];c?S.Types.isSpacer(c)?this.drawSpacerElem(c,t.height,o):this.drawRenderedElem(c,o):console.warn("A row has an undefined or null element.",t,c)}this.drawRenderedRow(t,e,o)},oe.Debug.prototype.drawBoundingBox=function(t){if(oe.Debug.config.blockBounds){var e=t.RTL?-t.width:0;this.debugElements_.push((0,s.createSvgElement)(B.Svg.RECT,{class:"blockBoundingBox blockRenderDebug",x:e,y:0,width:t.width,height:t.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),oe.Debug.config.connectedBlockBounds&&this.debugElements_.push((0,s.createSvgElement)(B.Svg.RECT,{class:"blockRenderDebug",x:e=t.RTL?-t.widthWithChildren:0,y:0,width:t.widthWithChildren,height:t.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_))}},oe.Debug.prototype.drawDebug=function(t,e){this.clearElems(),this.svgRoot_=t.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);for(var o=0,r=0;r<e.rows.length;r++){var c=e.rows[r];S.Types.isBetweenRowSpacer(c)?this.drawSpacerRow(c,o,e.RTL):this.drawRowWithElements(c,o,e.RTL),o+=c.height}t.previousConnection&&this.drawConnection(t.previousConnection),t.nextConnection&&this.drawConnection(t.nextConnection),t.outputConnection&&this.drawConnection(t.outputConnection),e.rightSide&&this.drawRenderedElem(e.rightSide,e.RTL),this.drawBoundingBox(e),this.drawRender(t.pathObject.svgPath)},oe.Debug.prototype.drawRender=function(t){oe.Debug.config.render&&(t.setAttribute("filter","url(#"+this.constants_.debugFilterId+")"),setTimeout(function(){t.setAttribute("filter","")},100))};var zt={Drawer:function(t,e){this.block_=t,this.info_=e,this.topLeft_=t.getRelativeToSurfaceXY(),this.inlinePath_=this.outlinePath_="",this.constants_=e.getRenderer().getConstants()}};zt.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),(0,so.isDebuggerEnabled)()&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},zt.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren},zt.Drawer.prototype.hideHiddenIcons_=function(){for(var e,t=0;e=this.info_.hiddenIcons[t];t++)e.icon.iconGroup_.setAttribute("display","none")},zt.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var t=1;t<this.info_.rows.length-1;t++){var e=this.info_.rows[t];e.hasJaggedEdge?this.drawJaggedEdge_(e):e.hasStatement?this.drawStatementInput_(e):e.hasExternalInput?this.drawValueInput_(e):this.drawRightSideRow_(e)}this.drawBottom_(),this.drawLeft_()},zt.Drawer.prototype.drawTop_=function(){var t=this.info_.topRow,e=t.elements;this.positionPreviousConnection_(),this.outlinePath_+=(0,b.moveBy)(t.xPos,this.info_.startY);for(var r,o=0;r=e[o];o++)S.Types.isLeftRoundedCorner(r)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:S.Types.isRightRoundedCorner(r)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:S.Types.isPreviousConnection(r)?this.outlinePath_+=r.shape.pathLeft:S.Types.isHat(r)?this.outlinePath_+=this.constants_.START_HAT.path:S.Types.isSpacer(r)&&(this.outlinePath_+=(0,b.lineOnAxis)("h",r.width));this.outlinePath_+=(0,b.lineOnAxis)("v",t.height)},zt.Drawer.prototype.drawJaggedEdge_=function(t){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+(0,b.lineOnAxis)("v",t.height-this.constants_.JAGGED_TEETH.height)},zt.Drawer.prototype.drawValueInput_=function(t){var e=t.getLastInput();this.positionExternalValueConnection_(t);var o="function"==typeof e.shape.pathDown?e.shape.pathDown(e.height):e.shape.pathDown;this.outlinePath_+=(0,b.lineOnAxis)("H",e.xPos+e.width)+o+(0,b.lineOnAxis)("v",t.height-e.connectionHeight)},zt.Drawer.prototype.drawStatementInput_=function(t){var e=t.getLastInput(),o=e.xPos+e.notchOffset+e.shape.width;e=e.shape.pathRight+(0,b.lineOnAxis)("h",-(e.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var r=t.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=(0,b.lineOnAxis)("H",o)+e+(0,b.lineOnAxis)("v",r)+this.constants_.INSIDE_CORNERS.pathBottom+(0,b.lineOnAxis)("H",t.xPos+t.width),this.positionStatementInputConnection_(t)},zt.Drawer.prototype.drawRightSideRow_=function(t){this.outlinePath_+=(0,b.lineOnAxis)("V",t.yPos+t.height)},zt.Drawer.prototype.drawBottom_=function(){var t=this.info_.bottomRow,e=t.elements;this.positionNextConnection_();for(var h,o=0,r="",c=e.length-1;h=e[c];c--)S.Types.isNextConnection(h)?r+=h.shape.pathRight:S.Types.isLeftSquareCorner(h)?r+=(0,b.lineOnAxis)("H",t.xPos):S.Types.isLeftRoundedCorner(h)?r+=this.constants_.OUTSIDE_CORNERS.bottomLeft:S.Types.isRightRoundedCorner(h)?(r+=this.constants_.OUTSIDE_CORNERS.bottomRight,o=this.constants_.OUTSIDE_CORNERS.rightHeight):S.Types.isSpacer(h)&&(r+=(0,b.lineOnAxis)("h",-1*h.width));this.outlinePath_+=(0,b.lineOnAxis)("V",t.baseline-o),this.outlinePath_+=r},zt.Drawer.prototype.drawLeft_=function(){var t=this.info_.outputConnection;if(this.positionOutputConnection_(),t){var e=t.connectionOffsetY+t.height;t="function"==typeof t.shape.pathUp?t.shape.pathUp(t.height):t.shape.pathUp,this.outlinePath_+=(0,b.lineOnAxis)("V",e)+t}this.outlinePath_+="z"},zt.Drawer.prototype.drawInternals_=function(){for(var e,t=0;e=this.info_.rows[t];t++)for(var r,o=0;r=e.elements[o];o++)S.Types.isInlineInput(r)?this.drawInlineInput_(r):(S.Types.isIcon(r)||S.Types.isField(r))&&this.layoutField_(r)},zt.Drawer.prototype.layoutField_=function(t){if(S.Types.isField(t))var e=t.field.getSvgRoot();else S.Types.isIcon(t)&&(e=t.icon.iconGroup_);var o=t.centerline-t.height/2,r=t.xPos,c="";this.info_.RTL&&(r=-(r+t.width),t.flipRtl&&(r+=t.width,c="scale(-1 1)")),S.Types.isIcon(t)?(e.setAttribute("display","block"),e.setAttribute("transform","translate("+r+","+o+")"),t.icon.computeIconLocation()):e.setAttribute("transform","translate("+r+","+o+")"+c),this.info_.isInsertionMarker&&e.setAttribute("display","none")},zt.Drawer.prototype.drawInlineInput_=function(t){var e=t.width,o=t.height,r=t.connectionOffsetY,c=t.connectionHeight+r;this.inlinePath_+=(0,b.moveTo)(t.xPos+t.connectionWidth,t.centerline-o/2)+(0,b.lineOnAxis)("v",r)+t.shape.pathDown+(0,b.lineOnAxis)("v",o-c)+(0,b.lineOnAxis)("h",e-t.connectionWidth)+(0,b.lineOnAxis)("v",-o)+"z",this.positionInlineInputConnection_(t)},zt.Drawer.prototype.positionInlineInputConnection_=function(t){if(t.connectionModel){var o=t.xPos+t.connectionWidth+t.connectionOffsetX;this.info_.RTL&&(o*=-1),t.connectionModel.setOffsetInBlock(o,t.centerline-t.height/2+t.connectionOffsetY)}},zt.Drawer.prototype.positionStatementInputConnection_=function(t){var e=t.getLastInput();if(e.connectionModel){var o=t.xPos+t.statementEdge+e.notchOffset;this.info_.RTL&&(o*=-1),e.connectionModel.setOffsetInBlock(o,t.yPos)}},zt.Drawer.prototype.positionExternalValueConnection_=function(t){var e=t.getLastInput();if(e.connectionModel){var o=t.xPos+t.width;this.info_.RTL&&(o*=-1),e.connectionModel.setOffsetInBlock(o,t.yPos)}},zt.Drawer.prototype.positionPreviousConnection_=function(){var t=this.info_.topRow;if(t.connection){var e=t.xPos+t.notchOffset;t.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-e:e,0)}},zt.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var e=t.connection,o=e.xPos;e.connectionModel.setOffsetInBlock(this.info_.RTL?-o:o,t.baseline)}},zt.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var t=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-t:t,this.info_.outputConnection.connectionOffsetY)}};var Dn={InputConnection:function(t,e){Dn.InputConnection.superClass_.constructor.call(this,t,e.connection),this.type|=S.Types.INPUT,this.input=e,this.align=e.align,(this.connectedBlock=e.connection&&e.connection.targetBlock()?e.connection.targetBlock():null)?(t=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=t.width,this.connectedBlockHeight=t.height):this.connectedBlockHeight=this.connectedBlockWidth=0,this.connectionOffsetY=this.connectionOffsetX=0}};(0,l.module$exports$Blockly$utils$object.inherits)(Dn.InputConnection,fn.Connection);var Xn={ExternalValueInput:function(t,e){Xn.ExternalValueInput.superClass_.constructor.call(this,t,e),this.type|=S.Types.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}};(0,l.module$exports$Blockly$utils$object.inherits)(Xn.ExternalValueInput,Dn.InputConnection);var si={Field:function(t,e,o){si.Field.superClass_.constructor.call(this,t),this.field=e,this.isEditable=e.EDITABLE,this.flipRtl=e.getFlipRtl(),this.type|=S.Types.FIELD,t=this.field.getSize(),this.height=t.height,this.width=t.width,this.parentInput=o}};(0,l.module$exports$Blockly$utils$object.inherits)(si.Field,Co_Measurable);var li={Hat:function(t){li.Hat.superClass_.constructor.call(this,t),this.type|=S.Types.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}};(0,l.module$exports$Blockly$utils$object.inherits)(li.Hat,Co_Measurable);var ci={Icon:function(t,e){ci.Icon.superClass_.constructor.call(this,t),this.icon=e,this.isVisible=e.isVisible(),this.type|=S.Types.ICON,t=e.getCorrectedSize(),this.height=t.height,this.width=t.width}};(0,l.module$exports$Blockly$utils$object.inherits)(ci.Icon,Co_Measurable);var Le={InRowSpacer:function(t,e){Le.InRowSpacer.superClass_.constructor.call(this,t),this.type=this.type|S.Types.SPACER|S.Types.IN_ROW_SPACER,this.width=e,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}};(0,l.module$exports$Blockly$utils$object.inherits)(Le.InRowSpacer,Co_Measurable);var Yn={InlineInput:function(t,e){Yn.InlineInput.superClass_.constructor.call(this,t,e),this.type|=S.Types.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY=this.isDynamicShape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=this.isDynamicShape?this.shape.connectionOffsetX(this.connectionWidth):0}};(0,l.module$exports$Blockly$utils$object.inherits)(Yn.InlineInput,Dn.InputConnection);var mn={InputRow:function(t){mn.InputRow.superClass_.constructor.call(this,t),this.type|=S.Types.INPUT_ROW,this.connectedBlockWidths=0}};(0,l.module$exports$Blockly$utils$object.inherits)(mn.InputRow,lo.Row),mn.InputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.minHeight;for(var t=0,e=0;e<this.elements.length;e++){var o=this.elements[e];this.width+=o.width,S.Types.isInput(o)&&(S.Types.isStatementInput(o)?t+=o.connectedBlockWidth:S.Types.isExternalInput(o)&&0!==o.connectedBlockWidth&&(t+=o.connectedBlockWidth-o.connectionWidth)),S.Types.isSpacer(o)||(this.height=Math.max(this.height,o.height))}this.connectedBlockWidths=t,this.widthWithConnectedBlocks=this.width+t},mn.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement};var ai={JaggedEdge:function(t){ai.JaggedEdge.superClass_.constructor.call(this,t),this.type|=S.Types.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}};(0,l.module$exports$Blockly$utils$object.inherits)(ai.JaggedEdge,Co_Measurable);var L={ASTNode:function(t,e,o){if(!e)throw Error("Cannot create a node without a location.");this.type_=t,this.isConnection_=L.ASTNode.isConnectionType_(t),this.location_=e,this.wsCoordinate_=null,this.processParams_(o||null)}};L.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"},L.ASTNode.NAVIGATE_ALL_FIELDS=!1,L.ASTNode.DEFAULT_OFFSET_Y=-20,L.ASTNode.isConnectionType_=function(t){switch(t){case L.ASTNode.types.PREVIOUS:case L.ASTNode.types.NEXT:case L.ASTNode.types.INPUT:case L.ASTNode.types.OUTPUT:return!0}return!1},L.ASTNode.createFieldNode=function(t){return t?new L.ASTNode(L.ASTNode.types.FIELD,t):null},L.ASTNode.createConnectionNode=function(t){if(!t)return null;var e=t.type;return e===l.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE||e===l.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT&&t.getParentInput()?L.ASTNode.createInputNode(t.getParentInput()):e===l.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT?new L.ASTNode(L.ASTNode.types.NEXT,t):e===l.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE?new L.ASTNode(L.ASTNode.types.OUTPUT,t):e===l.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT?new L.ASTNode(L.ASTNode.types.PREVIOUS,t):null},L.ASTNode.createInputNode=function(t){return t&&t.connection?new L.ASTNode(L.ASTNode.types.INPUT,t.connection):null},L.ASTNode.createBlockNode=function(t){return t?new L.ASTNode(L.ASTNode.types.BLOCK,t):null},L.ASTNode.createStackNode=function(t){return t?new L.ASTNode(L.ASTNode.types.STACK,t):null},L.ASTNode.createWorkspaceNode=function(t,e){return e&&t?new L.ASTNode(L.ASTNode.types.WORKSPACE,t,{wsCoordinate:e}):null};var ui=function(t){var e=t.outputConnection;return(!e||t.previousConnection&&t.previousConnection.isConnected())&&(e=t.previousConnection),e};L.ASTNode.createTopNode=function(t){var e=ui(t);return e?L.ASTNode.createConnectionNode(e):L.ASTNode.createBlockNode(t)},L.ASTNode.prototype.processParams_=function(t){t&&t.wsCoordinate&&(this.wsCoordinate_=t.wsCoordinate)},L.ASTNode.prototype.getLocation=function(){return this.location_},L.ASTNode.prototype.getType=function(){return this.type_},L.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_},L.ASTNode.prototype.isConnection=function(){return this.isConnection_},L.ASTNode.prototype.findNextForInput_=function(){var t=this.location_.getParentInput(),e=t.getSourceBlock();for(t=e.inputList.indexOf(t)+1;t<e.inputList.length;t++){for(var o=e.inputList[t],r=o.fieldRow,c=0;c<r.length;c++){var h=r[c];if(h.isClickable()||L.ASTNode.NAVIGATE_ALL_FIELDS)return L.ASTNode.createFieldNode(h)}if(o.connection)return L.ASTNode.createInputNode(o)}return null},L.ASTNode.prototype.findNextForField_=function(){var t=this.location_,e=t.getParentInput(),o=t.getSourceBlock(),r=o.inputList.indexOf(e);for(t=e.fieldRow.indexOf(t)+1;r<o.inputList.length;r++){for(var c=(e=o.inputList[r]).fieldRow;t<c.length;){if(c[t].isClickable()||L.ASTNode.NAVIGATE_ALL_FIELDS)return L.ASTNode.createFieldNode(c[t]);t++}if(t=0,e.connection)return L.ASTNode.createInputNode(e)}return null},L.ASTNode.prototype.findPrevForInput_=function(){for(var t=this.location_.getParentInput(),e=t.getSourceBlock(),o=e.inputList.indexOf(t);0<=o;o--){var r=e.inputList[o];if(r.connection&&r!==t)return L.ASTNode.createInputNode(r);for(var c=(r=r.fieldRow).length-1;0<=c;c--){var h=r[c];if(h.isClickable()||L.ASTNode.NAVIGATE_ALL_FIELDS)return L.ASTNode.createFieldNode(h)}}return null},L.ASTNode.prototype.findPrevForField_=function(){var t=this.location_,e=t.getParentInput(),o=t.getSourceBlock(),r=o.inputList.indexOf(e);for(t=e.fieldRow.indexOf(t)-1;0<=r;r--){var c=o.inputList[r];if(c.connection&&c!==e)return L.ASTNode.createInputNode(c);for(c=c.fieldRow;-1<t;){if(c[t].isClickable()||L.ASTNode.NAVIGATE_ALL_FIELDS)return L.ASTNode.createFieldNode(c[t]);t--}0<=r-1&&(t=o.inputList[r-1].fieldRow.length-1)}return null},L.ASTNode.prototype.navigateBetweenStacks_=function(t){var e=this.getLocation();if(e.getSourceBlock&&(e=e.getSourceBlock()),!e||!e.workspace)return null;var o=e.getRootBlock();e=o.workspace.getTopBlocks(!0);for(var r=0;r<e.length;r++)if(o.id===e[r].id)return-1===(t=r+(t?1:-1))||t===e.length?null:L.ASTNode.createStackNode(e[t]);throw Error("Couldn't find "+(t?"next":"previous")+" stack?!")},L.ASTNode.prototype.findTopASTNodeForBlock_=function(t){var e=ui(t);return e?L.ASTNode.createConnectionNode(e):L.ASTNode.createBlockNode(t)},L.ASTNode.prototype.getOutAstNodeForBlock_=function(t){if(!t)return null;t=t.getTopStackBlock();var e=ui(t);return e&&e.targetConnection&&e.targetConnection.getParentInput()?L.ASTNode.createInputNode(e.targetConnection.getParentInput()):L.ASTNode.createStackNode(t)},L.ASTNode.prototype.findFirstFieldOrInput_=function(t){t=t.inputList;for(var e=0;e<t.length;e++){for(var o=t[e],r=o.fieldRow,c=0;c<r.length;c++){var h=r[c];if(h.isClickable()||L.ASTNode.NAVIGATE_ALL_FIELDS)return L.ASTNode.createFieldNode(h)}if(o.connection)return L.ASTNode.createInputNode(o)}return null},L.ASTNode.prototype.getSourceBlock=function(){return this.getType()===L.ASTNode.types.BLOCK||this.getType()===L.ASTNode.types.STACK?this.getLocation():this.getType()===L.ASTNode.types.WORKSPACE?null:this.getLocation().getSourceBlock()},L.ASTNode.prototype.next=function(){switch(this.type_){case L.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case L.ASTNode.types.OUTPUT:return L.ASTNode.createBlockNode(this.location_.getSourceBlock());case L.ASTNode.types.FIELD:return this.findNextForField_();case L.ASTNode.types.INPUT:return this.findNextForInput_();case L.ASTNode.types.BLOCK:return L.ASTNode.createConnectionNode(this.location_.nextConnection);case L.ASTNode.types.PREVIOUS:return L.ASTNode.createBlockNode(this.location_.getSourceBlock());case L.ASTNode.types.NEXT:return L.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},L.ASTNode.prototype.in=function(){switch(this.type_){case L.ASTNode.types.WORKSPACE:var t=this.location_.getTopBlocks(!0);if(0<t.length)return L.ASTNode.createStackNode(t[0]);break;case L.ASTNode.types.STACK:return this.findTopASTNodeForBlock_(this.location_);case L.ASTNode.types.BLOCK:return this.findFirstFieldOrInput_(this.location_);case L.ASTNode.types.INPUT:return L.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},L.ASTNode.prototype.prev=function(){switch(this.type_){case L.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case L.ASTNode.types.FIELD:return this.findPrevForField_();case L.ASTNode.types.INPUT:return this.findPrevForInput_();case L.ASTNode.types.BLOCK:var t=ui(this.location_);return L.ASTNode.createConnectionNode(t);case L.ASTNode.types.PREVIOUS:if((t=this.location_.targetConnection)&&!t.getParentInput())return L.ASTNode.createConnectionNode(t);break;case L.ASTNode.types.NEXT:return L.ASTNode.createBlockNode(this.location_.getSourceBlock())}return null},L.ASTNode.prototype.out=function(){switch(this.type_){case L.ASTNode.types.STACK:var t=this.location_,e=t.getRelativeToSurfaceXY();return e=new N.Coordinate(e.x,e.y+L.ASTNode.DEFAULT_OFFSET_Y),L.ASTNode.createWorkspaceNode(t.workspace,e);case L.ASTNode.types.OUTPUT:return(e=(t=this.location_).targetConnection)?L.ASTNode.createConnectionNode(e):L.ASTNode.createStackNode(t.getSourceBlock());case L.ASTNode.types.FIELD:case L.ASTNode.types.INPUT:return L.ASTNode.createBlockNode(this.location_.getSourceBlock());case L.ASTNode.types.BLOCK:return this.getOutAstNodeForBlock_(this.location_);case L.ASTNode.types.PREVIOUS:case L.ASTNode.types.NEXT:return this.getOutAstNodeForBlock_(this.location_.getSourceBlock())}return null};var Ko={MarkerMove:function(t,e,o,r){var c=t?t.workspace.id:void 0;r&&r.getType()===L.ASTNode.types.WORKSPACE&&(c=r.getLocation().id),Ko.MarkerMove.superClass_.constructor.call(this,c),this.blockId=t?t.id:null,this.oldNode=o,this.newNode=r,this.isCursor=e}};(0,l.module$exports$Blockly$utils$object.inherits)(Ko.MarkerMove,We.UiBase),Ko.MarkerMove.prototype.type=f.MARKER_MOVE,Ko.MarkerMove.prototype.toJson=function(){var t=Ko.MarkerMove.superClass_.toJson.call(this);return t.isCursor=this.isCursor,t.blockId=this.blockId,t.oldNode=this.oldNode,t.newNode=this.newNode,t},Ko.MarkerMove.prototype.fromJson=function(t){Ko.MarkerMove.superClass_.fromJson.call(this,t),this.isCursor=t.isCursor,this.blockId=t.blockId,this.oldNode=t.oldNode,this.newNode=t.newNode},(0,x.register)(x.Type.EVENT,f.MARKER_MOVE,Ko.MarkerMove);var Dt={MarkerSvg:function(t,e,o){this.workspace_=t,this.marker_=o,this.parent_=null,this.constants_=e,this.currentMarkerSvg=null,t=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=o.colour||t}};Dt.MarkerSvg.prototype.getSvgRoot=function(){return this.svgGroup_},Dt.MarkerSvg.prototype.getMarker=function(){return this.marker_},Dt.MarkerSvg.prototype.isCursor=function(){return"cursor"===this.marker_.type},Dt.MarkerSvg.prototype.createDom=function(){var t=this.isCursor()?"blocklyCursor":"blocklyMarker";return this.svgGroup_=(0,s.createSvgElement)(B.Svg.G,{class:t},null),this.createDomInternal_(),this.svgGroup_},Dt.MarkerSvg.prototype.setParent_=function(t){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),t.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),t.setMarkerSvg(this.getSvgRoot())),this.parent_=t},Dt.MarkerSvg.prototype.draw=function(t,e){if(e){this.constants_=this.workspace_.getRenderer().getConstants();var o=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker_.colour||o,this.applyColour_(e),this.showAtLocation_(e),this.fireMarkerEvent_(t,e),void 0!==(t=this.currentMarkerSvg.childNodes[0])&&t.beginElement&&t.beginElement()}else this.hide()},Dt.MarkerSvg.prototype.showAtLocation_=function(t){var e=t.getLocation().type;t.getType()===L.ASTNode.types.BLOCK?this.showWithBlock_(t):t.getType()===L.ASTNode.types.OUTPUT?this.showWithOutput_(t):e===l.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE?this.showWithInput_(t):e===l.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT?this.showWithNext_(t):t.getType()===L.ASTNode.types.PREVIOUS?this.showWithPrevious_(t):t.getType()===L.ASTNode.types.FIELD?this.showWithField_(t):t.getType()===L.ASTNode.types.WORKSPACE?this.showWithCoordinates_(t):t.getType()===L.ASTNode.types.STACK&&this.showWithStack_(t)},Dt.MarkerSvg.prototype.showWithBlockPrevOutput_=function(t){var e=(t=t.getSourceBlock()).width,o=t.height,r=.75*o,c=this.constants_.CURSOR_BLOCK_PADDING;t.previousConnection?(o=this.constants_.shapeFor(t.previousConnection),this.positionPrevious_(e,c,r,o)):t.outputConnection?(r=this.constants_.shapeFor(t.outputConnection),this.positionOutput_(e,o,r)):this.positionBlock_(e,c,r),this.setParent_(t),this.showCurrent_()},Dt.MarkerSvg.prototype.showWithBlock_=function(t){this.showWithBlockPrevOutput_(t)},Dt.MarkerSvg.prototype.showWithPrevious_=function(t){this.showWithBlockPrevOutput_(t)},Dt.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithBlockPrevOutput_(t)},Dt.MarkerSvg.prototype.showWithCoordinates_=function(t){var e=t.getWsCoordinate();t=e.x,this.workspace_.RTL&&(t-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(t,e=e.y,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace_),this.showCurrent_()},Dt.MarkerSvg.prototype.showWithField_=function(t){var e=(t=t.getLocation()).getSize().width,o=t.getSize().height;this.positionRect_(0,0,e,o),this.setParent_(t),this.showCurrent_()},Dt.MarkerSvg.prototype.showWithInput_=function(t){var e=(t=t.getLocation()).getSourceBlock();this.positionInput_(t),this.setParent_(e),this.showCurrent_()},Dt.MarkerSvg.prototype.showWithNext_=function(t){var e=t.getLocation();t=e.getSourceBlock();var o=0;e=e.getOffsetInBlock().y;var r=t.getHeightWidth().width;this.workspace_.RTL&&(o=-r),this.positionLine_(o,e,r),this.setParent_(t),this.showCurrent_()},Dt.MarkerSvg.prototype.showWithStack_=function(t){var e=(t=t.getLocation()).getHeightWidth(),o=e.width+this.constants_.CURSOR_STACK_PADDING,r=-this.constants_.CURSOR_STACK_PADDING/2,h=r;this.workspace_.RTL&&(h=-(o+r)),this.positionRect_(h,-this.constants_.CURSOR_STACK_PADDING/2,o,e=e.height+this.constants_.CURSOR_STACK_PADDING),this.setParent_(t),this.showCurrent_()},Dt.MarkerSvg.prototype.showCurrent_=function(){this.hide(),this.currentMarkerSvg.style.display=""},Dt.MarkerSvg.prototype.positionBlock_=function(t,e,o){t=(0,b.moveBy)(-e,o)+(0,b.lineOnAxis)("V",-e)+(0,b.lineOnAxis)("H",t+2*e)+(0,b.lineOnAxis)("V",o),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},Dt.MarkerSvg.prototype.positionInput_=function(t){var e=t.getOffsetInBlock().x,o=t.getOffsetInBlock().y;t=(0,b.moveTo)(0,0)+this.constants_.shapeFor(t).pathDown,this.markerInput_.setAttribute("d",t),this.markerInput_.setAttribute("transform","translate("+e+","+o+")"+(this.workspace_.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_},Dt.MarkerSvg.prototype.positionLine_=function(t,e,o){this.markerSvgLine_.setAttribute("x",t),this.markerSvgLine_.setAttribute("y",e),this.markerSvgLine_.setAttribute("width",o),this.currentMarkerSvg=this.markerSvgLine_},Dt.MarkerSvg.prototype.positionOutput_=function(t,e,o){t=(0,b.moveBy)(t,0)+(0,b.lineOnAxis)("h",-(t-o.width))+(0,b.lineOnAxis)("v",this.constants_.TAB_OFFSET_FROM_TOP)+o.pathDown+(0,b.lineOnAxis)("V",e)+(0,b.lineOnAxis)("H",t),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},Dt.MarkerSvg.prototype.positionPrevious_=function(t,e,o,r){t=(0,b.moveBy)(-e,o)+(0,b.lineOnAxis)("V",-e)+(0,b.lineOnAxis)("H",this.constants_.NOTCH_OFFSET_LEFT)+r.pathLeft+(0,b.lineOnAxis)("H",t+2*e)+(0,b.lineOnAxis)("V",o),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},Dt.MarkerSvg.prototype.positionRect_=function(t,e,o,r){this.markerSvgRect_.setAttribute("x",t),this.markerSvgRect_.setAttribute("y",e),this.markerSvgRect_.setAttribute("width",o),this.markerSvgRect_.setAttribute("height",r),this.currentMarkerSvg=this.markerSvgRect_},Dt.MarkerSvg.prototype.flipRtl_=function(t){t.setAttribute("transform","scale(-1 1)")},Dt.MarkerSvg.prototype.hide=function(){this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"},Dt.MarkerSvg.prototype.fireMarkerEvent_=function(t,e){var o=e.getSourceBlock();t=new((0,f.get)(f.MARKER_MOVE))(o,this.isCursor(),t,e),(0,f.fire)(t)},Dt.MarkerSvg.prototype.getBlinkProperties_=function(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}},Dt.MarkerSvg.prototype.createDomInternal_=function(){if(this.markerSvg_=(0,s.createSvgElement)(B.Svg.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=(0,s.createSvgElement)(B.Svg.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=(0,s.createSvgElement)(B.Svg.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=(0,s.createSvgElement)(B.Svg.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=(0,s.createSvgElement)(B.Svg.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var t=this.getBlinkProperties_();(0,s.createSvgElement)(B.Svg.ANIMATE,t,this.markerSvgLine_),(0,s.createSvgElement)(B.Svg.ANIMATE,t,this.markerInput_),t.attributeName="stroke",(0,s.createSvgElement)(B.Svg.ANIMATE,t,this.markerBlock_)}return this.markerSvg_},Dt.MarkerSvg.prototype.applyColour_=function(t){this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(this.markerSvgLine_.firstChild.setAttribute("values",t=this.colour_+";transparent;transparent;"),this.markerInput_.firstChild.setAttribute("values",t),this.markerBlock_.firstChild.setAttribute("values",t))},Dt.MarkerSvg.prototype.dispose=function(){this.svgGroup_&&(0,s.removeNode)(this.svgGroup_)};var hi={NextConnection:function(t,e){hi.NextConnection.superClass_.constructor.call(this,t,e),this.type|=S.Types.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}};(0,l.module$exports$Blockly$utils$object.inherits)(hi.NextConnection,fn.Connection);var pi={OutputConnection:function(t,e){pi.OutputConnection.superClass_.constructor.call(this,t,e),this.type|=S.Types.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=0}};(0,l.module$exports$Blockly$utils$object.inherits)(pi.OutputConnection,fn.Connection);var ge={PathObject:function(t,e,o){this.constants=o,this.svgRoot=t,this.svgPath=(0,s.createSvgElement)(B.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.style=e,this.markerSvg=this.cursorSvg=null}};ge.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t)},ge.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")},ge.PathObject.prototype.setCursorSvg=function(t){t?(this.svgRoot.appendChild(t),this.cursorSvg=t):this.cursorSvg=null},ge.PathObject.prototype.setMarkerSvg=function(t){t?(this.cursorSvg?this.svgRoot.insertBefore(t,this.cursorSvg):this.svgRoot.appendChild(t),this.markerSvg=t):this.markerSvg=null},ge.PathObject.prototype.applyColour=function(t){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(t.isShadow()),this.updateDisabled_(!t.isEnabled()||t.getInheritedDisabled())},ge.PathObject.prototype.setStyle=function(t){this.style=t},ge.PathObject.prototype.setClass_=function(t,e){e?(0,s.addClass)(this.svgRoot,t):(0,s.removeClass)(this.svgRoot,t)},ge.PathObject.prototype.updateHighlighted=function(t){this.svgPath.setAttribute("filter",t?"url(#"+this.constants.embossFilterId+")":"none")},ge.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},ge.PathObject.prototype.updateDisabled_=function(t){this.setClass_("blocklyDisabled",t),t&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")},ge.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t)},ge.PathObject.prototype.updateDraggingDelete=function(t){this.setClass_("blocklyDraggingDelete",t)},ge.PathObject.prototype.updateInsertionMarker=function(t){this.setClass_("blocklyInsertionMarker",t)},ge.PathObject.prototype.updateMovable=function(t){this.setClass_("blocklyDraggable",t)},ge.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t)},ge.PathObject.prototype.updateShapeForInputHighlight=function(t,e){};var di={PreviousConnection:function(t,e){di.PreviousConnection.superClass_.constructor.call(this,t,e),this.type|=S.Types.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}};(0,l.module$exports$Blockly$utils$object.inherits)(di.PreviousConnection,fn.Connection),l.module$exports$Blockly$Input={Align:{LEFT:-1,CENTRE:0,RIGHT:1},Input:function(t,e,o,r){if(t!==l.module$exports$Blockly$inputTypes.inputTypes.DUMMY&&!e)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=t,this.name=e,this.sourceBlock_=o,this.connection=r,this.fieldRow=[]}},l.module$exports$Blockly$Input.Input.prototype.align=l.module$exports$Blockly$Input.Align.LEFT,l.module$exports$Blockly$Input.Input.prototype.visible_=!0,l.module$exports$Blockly$Input.Input.prototype.getSourceBlock=function(){return this.sourceBlock_},l.module$exports$Blockly$Input.Input.prototype.appendField=function(t,e){return this.insertFieldAt(this.fieldRow.length,t,e),this},l.module$exports$Blockly$Input.Input.prototype.insertFieldAt=function(t,e,o){if(0>t||t>this.fieldRow.length)throw Error("index "+t+" out of bounds.");return(e||""===e&&o)&&("string"==typeof e&&(e=(0,He.fromJson)({type:"field_label",text:e})),e.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&(e.init(),e.applyColour()),e.name=o,e.setVisible(this.isVisible()),e.prefixField&&(t=this.insertFieldAt(t,e.prefixField)),this.fieldRow.splice(t,0,e),t++,e.suffixField&&(t=this.insertFieldAt(t,e.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours())),t},l.module$exports$Blockly$Input.Input.prototype.removeField=function(t,e){for(var r,o=0;r=this.fieldRow[o];o++)if(r.name===t)return r.dispose(),this.fieldRow.splice(o,1),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(e)return!1;throw Error('Field "'+t+'" not found.')},l.module$exports$Blockly$Input.Input.prototype.isVisible=function(){return this.visible_},l.module$exports$Blockly$Input.Input.prototype.setVisible=function(t){var e=[];if(this.visible_===t)return e;this.visible_=t;for(var r,o=0;r=this.fieldRow[o];o++)r.setVisible(t);return this.connection&&(this.connection=this.connection,t?e=this.connection.startTrackingAll():this.connection.stopTrackingAll(),o=this.connection.targetBlock())&&(o.getSvgRoot().style.display=t?"block":"none"),e},l.module$exports$Blockly$Input.Input.prototype.markDirty=function(){for(var e,t=0;e=this.fieldRow[t];t++)e.markDirty()},l.module$exports$Blockly$Input.Input.prototype.setCheck=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(t),this},l.module$exports$Blockly$Input.Input.prototype.setAlign=function(t){return this.align=t,this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render()),this},l.module$exports$Blockly$Input.Input.prototype.setShadowDom=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(t),this},l.module$exports$Blockly$Input.Input.prototype.getShadowDom=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()},l.module$exports$Blockly$Input.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var t=0;t<this.fieldRow.length;t++)this.fieldRow[t].init()},l.module$exports$Blockly$Input.Input.prototype.dispose=function(){for(var e,t=0;e=this.fieldRow[t];t++)e.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null};var Tn={RoundCorner:function(t,e){Tn.RoundCorner.superClass_.constructor.call(this,t),this.type=(e&&"left"!==e?S.Types.RIGHT_ROUND_CORNER:S.Types.LEFT_ROUND_CORNER)|S.Types.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}};(0,l.module$exports$Blockly$utils$object.inherits)(Tn.RoundCorner,Co_Measurable);var jn={SpacerRow:function(t,e,o){jn.SpacerRow.superClass_.constructor.call(this,t),this.type=this.type|S.Types.SPACER|S.Types.BETWEEN_ROW_SPACER,this.width=o,this.height=e,this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.elements=[new Le.InRowSpacer(this.constants_,o)]}};(0,l.module$exports$Blockly$utils$object.inherits)(jn.SpacerRow,lo.Row),jn.SpacerRow.prototype.measure=function(){};var kn={SquareCorner:function(t,e){kn.SquareCorner.superClass_.constructor.call(this,t),this.type=(e&&"left"!==e?S.Types.RIGHT_SQUARE_CORNER:S.Types.LEFT_SQUARE_CORNER)|S.Types.CORNER,this.width=this.height=this.constants_.NO_PADDING}};(0,l.module$exports$Blockly$utils$object.inherits)(kn.SquareCorner,Co_Measurable);var Ln={StatementInput:function(t,e){Ln.StatementInput.superClass_.constructor.call(this,t,e),this.type|=S.Types.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}};(0,l.module$exports$Blockly$utils$object.inherits)(Ln.StatementInput,Dn.InputConnection);var xo={TopRow:function(t){xo.TopRow.superClass_.constructor.call(this,t),this.type|=S.Types.TOP_ROW,this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null}};(0,l.module$exports$Blockly$utils$object.inherits)(xo.TopRow,lo.Row),xo.TopRow.prototype.hasLeftSquareCorner=function(t){var e=(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection,o=t.getPreviousBlock();return!!t.outputConnection||e||!!o&&o.getNextBlock()===t},xo.TopRow.prototype.hasRightSquareCorner=function(t){return!0},xo.TopRow.prototype.measure=function(){for(var t=0,e=0,o=0,r=0;r<this.elements.length;r++){var c=this.elements[r];e+=c.width,S.Types.isSpacer(c)||(S.Types.isHat(c)?o=Math.max(o,c.ascenderHeight):t=Math.max(t,c.height))}this.width=Math.max(this.minWidth,e),this.height=Math.max(this.minHeight,t)+o,this.capline=this.ascenderHeight=o,this.widthWithConnectedBlocks=this.width},xo.TopRow.prototype.startsWithElemSpacer=function(){return!1},xo.TopRow.prototype.endsWithElemSpacer=function(){return!1};var Ft={RenderInfo:function(t,e){this.block_=e,this.renderer_=t,this.constants_=this.renderer_.getConstants(),this.outputConnection=e.outputConnection?new pi.OutputConnection(this.constants_,e.outputConnection):null,this.isInline=e.getInputsInline()&&!e.isCollapsed(),this.isCollapsed=e.isCollapsed(),this.isInsertionMarker=e.isInsertionMarker(),this.RTL=e.RTL,this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.topRow=new xo.TopRow(this.constants_),this.bottomRow=new So.BottomRow(this.constants_),this.startY=this.startX=0}};Ft.RenderInfo.prototype.getRenderer=function(){return this.renderer_},Ft.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},Ft.RenderInfo.prototype.createRows_=function(){this.populateTopRow_(),this.rows.push(this.topRow);var t=new mn.InputRow(this.constants_);this.inputRows.push(t);for(var r,e=this.block_.getIcons(),o=0;r=e[o];o++){var c=new ci.Icon(this.constants_,r);this.isCollapsed&&r.collapseHidden?this.hiddenIcons.push(c):t.elements.push(c)}for(r=null,e=0;o=this.block_.inputList[e];e++)if(o.isVisible()){for(this.shouldStartNewRow_(o,r)&&(this.rows.push(t),t=new mn.InputRow(this.constants_),this.inputRows.push(t)),r=0;c=o.fieldRow[r];r++)t.elements.push(new si.Field(this.constants_,c,o));this.addInput_(o,t),r=o}this.isCollapsed&&(t.hasJaggedEdge=!0,t.elements.push(new ai.JaggedEdge(this.constants_))),(t.elements.length||t.hasDummyInput)&&this.rows.push(t),this.populateBottomRow_(),this.rows.push(this.bottomRow)},Ft.RenderInfo.prototype.populateTopRow_=function(){var t=!!this.block_.previousConnection,e=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!t,o=this.topRow.hasLeftSquareCorner(this.block_)?kn.SquareCorner:Tn.RoundCorner;this.topRow.elements.push(new o(this.constants_)),e?(t=new li.Hat(this.constants_),this.topRow.elements.push(t),this.topRow.capline=t.ascenderHeight):t&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new di.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.topRow.minHeight=this.block_.inputList.length&&this.block_.inputList[0].type===l.module$exports$Blockly$inputTypes.inputTypes.STATEMENT&&!this.block_.isCollapsed()?this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.constants_.TOP_ROW_MIN_HEIGHT,o=this.topRow.hasRightSquareCorner(this.block_)?kn.SquareCorner:Tn.RoundCorner,this.topRow.elements.push(new o(this.constants_,"right"))},Ft.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type===l.module$exports$Blockly$inputTypes.inputTypes.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new kn.SquareCorner(this.constants_)):this.bottomRow.elements.push(new Tn.RoundCorner(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new hi.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new kn.SquareCorner(this.constants_,"right")):this.bottomRow.elements.push(new Tn.RoundCorner(this.constants_,"right"))},Ft.RenderInfo.prototype.addInput_=function(t,e){this.isInline&&t.type===l.module$exports$Blockly$inputTypes.inputTypes.VALUE?(e.elements.push(new Yn.InlineInput(this.constants_,t)),e.hasInlineInput=!0):t.type===l.module$exports$Blockly$inputTypes.inputTypes.STATEMENT?(e.elements.push(new Ln.StatementInput(this.constants_,t)),e.hasStatement=!0):t.type===l.module$exports$Blockly$inputTypes.inputTypes.VALUE?(e.elements.push(new Xn.ExternalValueInput(this.constants_,t)),e.hasExternalInput=!0):t.type===l.module$exports$Blockly$inputTypes.inputTypes.DUMMY&&(e.minHeight=Math.max(e.minHeight,t.getSourceBlock()&&t.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),e.hasDummyInput=!0),null===e.align&&(e.align=t.align)},Ft.RenderInfo.prototype.shouldStartNewRow_=function(t,e){return!(!e||t.type!==l.module$exports$Blockly$inputTypes.inputTypes.STATEMENT&&e.type!==l.module$exports$Blockly$inputTypes.inputTypes.STATEMENT&&(t.type!==l.module$exports$Blockly$inputTypes.inputTypes.VALUE&&t.type!==l.module$exports$Blockly$inputTypes.inputTypes.DUMMY||this.isInline))},Ft.RenderInfo.prototype.addElemSpacing_=function(){for(var e,t=0;e=this.rows[t];t++){var o=e.elements;if(e.elements=[],e.startsWithElemSpacer()&&e.elements.push(new Le.InRowSpacer(this.constants_,this.getInRowSpacing_(null,o[0]))),o.length){for(var r=0;r<o.length-1;r++){e.elements.push(o[r]);var c=this.getInRowSpacing_(o[r],o[r+1]);e.elements.push(new Le.InRowSpacer(this.constants_,c))}e.elements.push(o[o.length-1]),e.endsWithElemSpacer()&&e.elements.push(new Le.InRowSpacer(this.constants_,this.getInRowSpacing_(o[o.length-1],null)))}}},Ft.RenderInfo.prototype.getInRowSpacing_=function(t,e){if(!t&&e&&S.Types.isStatementInput(e))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(t&&S.Types.isInput(t)&&!e){if(S.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(S.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(S.Types.isStatementInput(t))return this.constants_.NO_PADDING}return t&&S.Types.isLeftSquareCorner(t)&&e&&(S.Types.isPreviousConnection(e)||S.Types.isNextConnection(e))?e.notchOffset:t&&S.Types.isLeftRoundedCorner(t)&&e&&(S.Types.isPreviousConnection(e)||S.Types.isNextConnection(e))?e.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},Ft.RenderInfo.prototype.computeBounds_=function(){for(var c,t=0,e=0,o=0,r=0;c=this.rows[r];r++){if(c.measure(),e=Math.max(e,c.width),c.hasStatement){var h=c.getLastInput();t=Math.max(t,c.width-h.width)}o=Math.max(o,c.widthWithConnectedBlocks)}for(this.statementEdge=t,this.width=e,t=0;r=this.rows[t];t++)r.hasStatement&&(r.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(e,o),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)},Ft.RenderInfo.prototype.alignRowElements_=function(){for(var e,t=0;e=this.rows[t];t++)if(e.hasStatement)this.alignStatementRow_(e);else{var o=e.width;0<(o=this.getDesiredRowWidth_(e)-o)&&this.addAlignmentPadding_(e,o),S.Types.isTopOrBottomRow(e)&&(e.widthWithConnectedBlocks=e.width)}},Ft.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.width-this.startX},Ft.RenderInfo.prototype.addAlignmentPadding_=function(t,e){var o=t.getFirstSpacer(),r=t.getLastSpacer();(t.hasExternalInput||t.hasStatement)&&(t.widthWithConnectedBlocks+=e),t.align===l.module$exports$Blockly$Input.Align.LEFT?r.width+=e:t.align===l.module$exports$Blockly$Input.Align.CENTRE?(o.width+=e/2,r.width+=e/2):t.align===l.module$exports$Blockly$Input.Align.RIGHT?o.width+=e:r.width+=e,t.width+=e},Ft.RenderInfo.prototype.alignStatementRow_=function(t){var e=t.getLastInput(),o=t.width-e.width,r=this.statementEdge;0<(o=r-o)&&this.addAlignmentPadding_(t,o),o=t.width,r=this.getDesiredRowWidth_(t),e.width+=r-o,e.height=Math.max(e.height,t.height),t.width+=r-o,t.widthWithConnectedBlocks=Math.max(t.width,this.statementEdge+t.connectedBlockWidths)},Ft.RenderInfo.prototype.addRowSpacing_=function(){var t=this.rows;this.rows=[];for(var e=0;e<t.length;e++)this.rows.push(t[e]),e!==t.length-1&&this.rows.push(this.makeSpacerRow_(t[e],t[e+1]))},Ft.RenderInfo.prototype.makeSpacerRow_=function(t,e){var o=this.getSpacerRowHeight_(t,e),r=this.getSpacerRowWidth_(t,e);return o=new jn.SpacerRow(this.constants_,o,r),t.hasStatement&&(o.followsStatement=!0),e.hasStatement&&(o.precedesStatement=!0),o},Ft.RenderInfo.prototype.getSpacerRowWidth_=function(t,e){return this.width-this.startX},Ft.RenderInfo.prototype.getSpacerRowHeight_=function(t,e){return this.constants_.MEDIUM_PADDING},Ft.RenderInfo.prototype.getElemCenterline_=function(t,e){return S.Types.isSpacer(e)?t.yPos+e.height/2:S.Types.isBottomRow(t)?(t=t.yPos+t.height-t.descenderHeight,S.Types.isNextConnection(e)?t+e.height/2:t-e.height/2):S.Types.isTopRow(t)?S.Types.isHat(e)?t.capline-e.height/2:t.capline+e.height/2:t.yPos+t.height/2},Ft.RenderInfo.prototype.recordElemPositions_=function(t){for(var r,e=t.xPos,o=0;r=t.elements[o];o++)S.Types.isSpacer(r)&&(r.height=t.height),r.xPos=e,r.centerline=this.getElemCenterline_(t,r),e+=r.width},Ft.RenderInfo.prototype.finalize_=function(){for(var r,t=0,e=0,o=0;r=this.rows[o];o++)r.yPos=e,r.xPos=this.startX,e+=r.height,t=Math.max(t,r.widthWithConnectedBlocks),this.recordElemPositions_(r);this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.widthWithChildren=t+this.startX,this.height=e,this.startY=this.topRow.capline,this.bottomRow.baseline=e-this.bottomRow.descenderHeight};var ae={Renderer:function(t){this.name=t,this.overrides=this.constants_=null}};ae.Renderer.prototype.getClassName=function(){return this.name+"-renderer"},ae.Renderer.prototype.init=function(t,e){this.constants_=this.makeConstants_(),e&&(this.overrides=e,(0,l.module$exports$Blockly$utils$object.mixin)(this.constants_,e)),this.constants_.setTheme(t),this.constants_.init()},ae.Renderer.prototype.createDom=function(t,e){this.constants_.createDom(t,this.name+"-"+e.name,"."+this.getClassName()+"."+e.getClassName())},ae.Renderer.prototype.refreshDom=function(t,e){var o=this.getConstants();o.dispose(),this.constants_=this.makeConstants_(),this.overrides&&(0,l.module$exports$Blockly$utils$object.mixin)(this.constants_,this.overrides),this.constants_.randomIdentifier=o.randomIdentifier,this.constants_.setTheme(e),this.constants_.init(),this.createDom(t,e)},ae.Renderer.prototype.dispose=function(){this.constants_&&this.constants_.dispose()},ae.Renderer.prototype.makeConstants_=function(){return new Pt.ConstantProvider},ae.Renderer.prototype.makeRenderInfo_=function(t){return new Ft.RenderInfo(this,t)},ae.Renderer.prototype.makeDrawer_=function(t,e){return new zt.Drawer(t,e)},ae.Renderer.prototype.makeDebugger_=function(){var t=oe.Debug;if(!t)throw Error("Missing require for Blockly.blockRendering.Debug");return new t(this.getConstants())},ae.Renderer.prototype.makeMarkerDrawer=function(t,e){return new Dt.MarkerSvg(t,this.getConstants(),e)},ae.Renderer.prototype.makePathObject=function(t,e){return new ge.PathObject(t,e,this.constants_)},ae.Renderer.prototype.getConstants=function(){return this.constants_},ae.Renderer.prototype.shouldHighlightConnection=function(t){return!0},ae.Renderer.prototype.orphanCanConnectAtEnd=function(t,e,o){return!!K.Connection.getConnectionForOrphanedConnection(t,o===l.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE?e.outputConnection:e.previousConnection)},ae.Renderer.prototype.getConnectionPreviewMethod=function(t,e,o){return e.type===l.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE||e.type===l.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT?!t.isConnected()||this.orphanCanConnectAtEnd(o,t.targetBlock(),e.type)?Rt.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:Rt.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:Rt.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER},ae.Renderer.prototype.render=function(t){(0,so.isDebuggerEnabled)()&&!t.renderingDebugger&&(t.renderingDebugger=this.makeDebugger_());var e=this.makeRenderInfo_(t);e.measure(),this.makeDrawer_(t,e).draw()};var En,xt={isDebuggerEnabled:function(){return(0,ht.warn)("Blockly.blockRendering.isDebuggerEnabled()","September 2021","September 2022","Blockly.blockRendering.debug.isDebuggerEnabled()"),(0,so.isDebuggerEnabled)()},register:function(t,e){(0,x.register)(x.Type.RENDERER,t,e)},unregister:function(t){(0,x.unregister)(x.Type.RENDERER,t)},startDebugger:function(){(0,ht.warn)("Blockly.blockRendering.startDebugger()","September 2021","September 2022","Blockly.blockRendering.debug.startDebugger()"),(0,so.startDebugger)()},stopDebugger:function(){(0,ht.warn)("Blockly.blockRendering.stopDebugger()","September 2021","September 2022","Blockly.blockRendering.debug.stopDebugger()"),(0,so.stopDebugger)()},init:function(t,e,o){return(t=new((0,x.getClass)(x.Type.RENDERER,t))(t)).init(e,o),t}};xt.BottomRow=So.BottomRow,xt.Connection=fn.Connection,xt.ConstantProvider=Pt.ConstantProvider,xt.Debug=oe.Debug,xt.Drawer=zt.Drawer,xt.ExternalValueInput=Xn.ExternalValueInput,xt.Field=si.Field,xt.Hat=li.Hat,xt.Icon=ci.Icon,xt.InRowSpacer=Le.InRowSpacer,xt.InlineInput=Yn.InlineInput,xt.InputConnection=Dn.InputConnection,xt.InputRow=mn.InputRow,xt.IPathObject=function(t,e){},xt.JaggedEdge=ai.JaggedEdge,xt.MarkerSvg=Dt.MarkerSvg,xt.Measurable=Co_Measurable,xt.NextConnection=hi.NextConnection,xt.OutputConnection=pi.OutputConnection,xt.PathObject=ge.PathObject,xt.PreviousConnection=di.PreviousConnection,xt.Renderer=ae.Renderer,xt.RenderInfo=Ft.RenderInfo,xt.RoundCorner=Tn.RoundCorner,xt.Row=lo.Row,xt.SpacerRow=jn.SpacerRow,xt.SquareCorner=kn.SquareCorner,xt.StatementInput=Ln.StatementInput,xt.TopRow=xo.TopRow,xt.Types=S.Types,xt.debug=so,l.module$exports$Blockly$Extensions={},l.module$exports$Blockly$Extensions.TEST_ONLY={allExtensions:En=Object.create(null)},l.module$exports$Blockly$Extensions.register=function(t,e){if("string"!=typeof t||""===t.trim())throw Error('Error: Invalid extension name "'+t+'"');if(En[t])throw Error('Error: Extension "'+t+'" is already registered.');if("function"!=typeof e)throw Error('Error: Extension "'+t+'" must be a function');En[t]=e},l.module$exports$Blockly$Extensions.registerMixin=function(t,e){if(!e||"object"!=typeof e)throw Error('Error: Mixin "'+t+'" must be a object');(0,l.module$exports$Blockly$Extensions.register)(t,function(){this.mixin(e)})},l.module$exports$Blockly$Extensions.registerMutator=function(t,e,o,r){var c='Error when registering mutator "'+t+'": ';sr(c,e);var h=rr(e,c);if(o&&"function"!=typeof o)throw Error(c+'Extension "'+t+'" is not a function');(0,l.module$exports$Blockly$Extensions.register)(t,function(){if(h){var k=l.module$exports$Blockly$Mutator.Mutator;if(!k)throw Error(c+"Missing require for Blockly.Mutator");this.setMutator(new k(r||[]))}this.mixin(e),o&&o.apply(this)})},l.module$exports$Blockly$Extensions.unregister=function(t){(0,l.module$exports$Blockly$Extensions.isRegistered)(t)?delete En[t]:console.warn('No extension mapping for name "'+t+'" found to unregister')},l.module$exports$Blockly$Extensions.isRegistered=function(t){return!!En[t]},l.module$exports$Blockly$Extensions.apply=function(t,e,o){var c,r=En[t];if("function"!=typeof r)throw Error('Error: Extension "'+t+'" not found.');if(o?ys(t,e):c=Fi(e),r.apply(e),o)sr('Error after applying mutator "'+t+'": ',e);else if(!ks(c,e))throw Error('Error when applying extension "'+t+'": mutation properties changed when applying a non-mutator extension.')};var ys=function(t,e){if(Fi(e).length)throw Error('Error: tried to apply mutation "'+t+'" to a block that already has mutator functions.  Block id: '+e.id)},rr=function(t,e){return Pi(t.compose,t.decompose,e+" compose/decompose")},Pi=function(t,e,o){if(t&&e){if("function"!=typeof t||"function"!=typeof e)throw Error(o+" must be a function");return!0}if(!t&&!e)return!1;throw Error(o+"Must have both or neither functions")},sr=function(t,e){var o=function(t,e){return Pi(t.mutationToDom,t.domToMutation,e+" mutationToDom/domToMutation")}(e,t),r=function(t,e){return Pi(t.saveExtraState,t.loadExtraState,e+" saveExtraState/loadExtraState")}(e,t);if(!o&&!r)throw Error(t+"Mutations must contain either XML hooks, or JSON hooks, or both");rr(e,t)},Fi=function(t){var e=[];return void 0!==t.domToMutation&&e.push(t.domToMutation),void 0!==t.mutationToDom&&e.push(t.mutationToDom),void 0!==t.saveExtraState&&e.push(t.saveExtraState),void 0!==t.loadExtraState&&e.push(t.loadExtraState),void 0!==t.compose&&e.push(t.compose),void 0!==t.decompose&&e.push(t.decompose),e},ks=function(t,e){if((e=Fi(e)).length!==t.length)return!1;for(var o=0;o<e.length;o++)if(t[o]!==e[o])return!1;return!0};l.module$exports$Blockly$Extensions.runAfterPageLoad=function(t){if("object"!=typeof document)throw Error("runAfterPageLoad() requires browser document.");if("complete"===document.readyState)t();else var e=setInterval(function(){"complete"===document.readyState&&(clearInterval(e),t())},10)},l.module$exports$Blockly$Extensions.buildTooltipForDropdown=function(t,e){var o=[];return"object"==typeof document&&(0,l.module$exports$Blockly$Extensions.runAfterPageLoad)(function(){for(var r in e)(0,It.checkMessageReferences)(e[r])}),function(){this.type&&-1===o.indexOf(this.type)&&(Es(this,t,e),o.push(this.type)),this.setTooltip(function(){var r=String(this.getFieldValue(t)),c=e[r];return null===c?-1===o.indexOf(this.type)&&(r="No tooltip mapping for value "+r+" of field "+t,null!==this.type&&(r+=" of block type "+this.type),console.warn(r+".")):c=(0,It.replaceMessageReferences)(c),c}.bind(this))}};var Es=function(t,e,o){var r=t.getField(e);if(!r.isOptionListDynamic()){r=r.getOptions();for(var c=0;c<r.length;c++){var h=r[c][1];null===o[h]&&console.warn("No tooltip mapping for value "+h+" of field "+e+" of block type "+t.type)}}};l.module$exports$Blockly$Extensions.buildTooltipWithFieldText=function(t,e){return"object"==typeof document&&(0,l.module$exports$Blockly$Extensions.runAfterPageLoad)(function(){(0,It.checkMessageReferences)(t)}),function(){this.setTooltip(function(){var o=this.getField(e);return(0,It.replaceMessageReferences)(t).replace("%1",o?o.getText():"")}.bind(this))}},(0,l.module$exports$Blockly$Extensions.register)("parent_tooltip_when_inline",function(){this.tooltipWhenNotConnected=this.tooltip,this.setTooltip(function(){var t=this.getParent();return t&&t.getInputsInline()&&t.tooltip||this.tooltipWhenNotConnected}.bind(this))});var mt={aria:F,colour:wt};mt.Coordinate=N.Coordinate,mt.deprecation=ht,mt.dom=s,mt.global=l.module$exports$Blockly$utils$global.globalThis,mt.idGenerator=_t,mt.KeyCodes=Z_KeyCodes,mt.math=V,mt.Metrics=function(){},mt.object=l.module$exports$Blockly$utils$object,mt.parsing=It,mt.Rect=yt.Rect,mt.Size=et.Size,mt.string=l.module$exports$Blockly$utils$string,mt.style=q,mt.Svg=B.Svg,mt.svgPaths=b,mt.svgMath=dt,mt.toolbox=st,mt.userAgent=ot,mt.xml=l.module$exports$Blockly$utils$xml,mt.noEvent=function(t){(0,ht.warn)("Blockly.utils.noEvent","September 2021","September 2022"),t.preventDefault(),t.stopPropagation()},mt.isTargetInput=function(t){return(0,ht.warn)("Blockly.utils.isTargetInput","September 2021","September 2022","Blockly.browserEvents.isTargetInput"),(0,g.isTargetInput)(t)},mt.getRelativeXY=function(t){return(0,ht.warn)("Blockly.utils.getRelativeXY","December 2021","December 2022","Blockly.utils.svgMath.getRelativeXY"),(0,dt.getRelativeXY)(t)},mt.getInjectionDivXY_=function(t){return(0,ht.warn)("Blockly.utils.getInjectionDivXY_","December 2021","December 2022","Blockly.utils.svgMath.getInjectionDivXY"),(0,dt.getInjectionDivXY)(t)},mt.isRightButton=function(t){return(0,ht.warn)("Blockly.utils.isRightButton","September 2021","September 2022","Blockly.browserEvents.isRightButton"),(0,g.isRightButton)(t)},mt.mouseToSvg=function(t,e,o){return(0,ht.warn)("Blockly.utils.mouseToSvg","September 2021","September 2022","Blockly.browserEvents.mouseToSvg"),(0,g.mouseToSvg)(t,e,o)},mt.getScrollDeltaPixels=function(t){return(0,ht.warn)("Blockly.utils.getScrollDeltaPixels","September 2021","September 2022","Blockly.browserEvents.getScrollDeltaPixels"),(0,g.getScrollDeltaPixels)(t)},mt.tokenizeInterpolation=function(t){return(0,ht.warn)("Blockly.utils.tokenizeInterpolation","December 2021","December 2022","Blockly.utils.parsing.tokenizeInterpolation"),(0,It.tokenizeInterpolation)(t)},mt.replaceMessageReferences=function(t){return(0,ht.warn)("Blockly.utils.replaceMessageReferences","December 2021","December 2022","Blockly.utils.parsing.replaceMessageReferences"),(0,It.replaceMessageReferences)(t)},mt.checkMessageReferences=function(t){return(0,ht.warn)("Blockly.utils.checkMessageReferences","December 2021","December 2022","Blockly.utils.parsing.checkMessageReferences"),(0,It.checkMessageReferences)(t)},mt.genUid=function(){return(0,ht.warn)("Blockly.utils.genUid","September 2021","September 2022","Blockly.utils.idGenerator.genUid"),(0,_t.genUid)()},mt.is3dSupported=function(){return(0,ht.warn)("Blockly.utils.is3dSupported","December 2021","December 2022","Blockly.utils.svgMath.is3dSupported"),(0,dt.is3dSupported)()},mt.getViewportBBox=function(){return(0,ht.warn)("Blockly.utils.getViewportBBox","December 2021","December 2022","Blockly.utils.svgMath.getViewportBBox"),(0,dt.getViewportBBox)()},mt.arrayRemove=function(t,e){return(0,ht.warn)("Blockly.utils.arrayRemove","December 2021","December 2022"),Je_removeElem(t,e)},mt.getDocumentScroll=function(){return(0,ht.warn)("Blockly.utils.getDocumentScroll","December 2021","December 2022","Blockly.utils.svgMath.getDocumentScroll"),(0,dt.getDocumentScroll)()},mt.getBlockTypeCounts=function(t,e){return(0,ht.warn)("Blockly.utils.getBlockTypeCounts","December 2021","December 2022","Blockly.common.getBlockTypeCounts"),(0,l.module$exports$Blockly$common.getBlockTypeCounts)(t,e)},mt.screenToWsCoordinates=function(t,e){return(0,ht.warn)("Blockly.utils.screenToWsCoordinates","December 2021","December 2022","Blockly.utils.svgMath.screenToWsCoordinates"),(0,dt.screenToWsCoordinates)(t,e)},mt.parseBlockColour=function(t){return(0,ht.warn)("Blockly.utils.parseBlockColour","December 2021","December 2022","Blockly.utils.parsing.parseBlockColour"),(0,It.parseBlockColour)(t)},mt.runAfterPageLoad=function(t){(0,ht.warn)("Blockly.utils.runAfterPageLoad","December 2021","December 2022"),(0,l.module$exports$Blockly$Extensions.runAfterPageLoad)(t)};var wo={BlockDelete:function(t){if(wo.BlockDelete.superClass_.constructor.call(this,t),t){if(t.getParent())throw Error("Connected blocks cannot be deleted.");t.isShadow()&&(this.recordUndo=!1),this.oldXml=(0,l.module$exports$Blockly$Xml.blockToDomWithXY)(t),this.ids=(0,f.getDescendantIds)(t),this.wasShadow=t.isShadow(),this.oldJson=(0,ye.save)(t,{addCoordinates:!0})}}};(0,l.module$exports$Blockly$utils$object.inherits)(wo.BlockDelete,ro.BlockBase),wo.BlockDelete.prototype.type=f.DELETE,wo.BlockDelete.prototype.toJson=function(){var t=wo.BlockDelete.superClass_.toJson.call(this);return t.oldXml=(0,l.module$exports$Blockly$Xml.domToText)(this.oldXml),t.ids=this.ids,t.wasShadow=this.wasShadow,t.oldJson=this.oldJson,this.recordUndo||(t.recordUndo=this.recordUndo),t},wo.BlockDelete.prototype.fromJson=function(t){wo.BlockDelete.superClass_.fromJson.call(this,t),this.oldXml=(0,l.module$exports$Blockly$Xml.textToDom)(t.oldXml),this.ids=t.ids,this.wasShadow=t.wasShadow||"shadow"===this.oldXml.tagName.toLowerCase(),this.oldJson=t.oldJson,void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},wo.BlockDelete.prototype.run=function(t){var e=this.getEventWorkspace_();if(t)for(t=0;t<this.ids.length;t++){var o=this.ids[t],r=e.getBlockById(o);r?r.dispose(!1):o===this.blockId&&console.warn("Can't delete non-existent block: "+o)}else(0,ye.append)(this.oldJson,e)},(0,x.register)(x.Type.EVENT,f.DELETE,wo.BlockDelete);var H={Block:function(t,e,o){var r=l.module$exports$Blockly$Generator.Generator;if(r&&typeof r.prototype[e]<"u")throw Error('Block prototypeName "'+e+'" conflicts with Blockly.Generator members.');if(this.id=o&&!t.getBlockById(o)?o:(0,_t.genUid)(),t.setBlockById(this.id,this),this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.comment=this.outputShape_=null,this.commentModel={text:null,pinned:!1,size:new et.Size(160,80)},this.xy_=new N.Coordinate(0,0),this.workspace=t,this.isInFlyout=t.isFlyout,this.isInMutator=t.isMutator,this.RTL=t.RTL,this.isInsertionMarker_=!1,this.hat=void 0,this.rendered=null,this.statementInputCount=0,e){if(this.type=e,!(o=l.module$exports$Blockly$blocks.Blocks[e])||"object"!=typeof o)throw TypeError("Unknown block type: "+e);(0,l.module$exports$Blockly$utils$object.mixin)(this,o)}t.addTopBlock(this),t.addTypedBlock(this),(t=(0,f.getGroup)())||(0,f.setGroup)(!0),e=(0,f.getRecordUndo)();try{"function"==typeof this.init&&((0,f.setRecordUndo)(!1),this.init(),(0,f.setRecordUndo)(e)),(0,f.isEnabled)()&&(0,f.fire)(new((0,f.get)(f.CREATE))(this))}finally{t||(0,f.setGroup)(!1),(0,f.setRecordUndo)(e)}this.inputsInlineDefault=this.inputsInline,"function"==typeof this.onchange&&this.setOnChange(this.onchange)}};H.Block.COLLAPSED_INPUT_NAME=zo.COLLAPSED_INPUT_NAME,H.Block.COLLAPSED_FIELD_NAME=zo.COLLAPSED_FIELD_NAME,H.Block.prototype.data=null,H.Block.prototype.disposed=!1,H.Block.prototype.hue_=null,H.Block.prototype.colour_="#000000",H.Block.prototype.styleName_="",H.Block.prototype.dispose=function(t){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(t),(0,f.isEnabled)()&&(0,f.fire)(new((0,f.get)(f.DELETE))(this)),(0,f.disable)();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.workspace=null),(0,l.module$exports$Blockly$common.getSelected)()===this&&(0,l.module$exports$Blockly$common.setSelected)(null);for(var e=this.childBlocks_.length-1;0<=e;e--)this.childBlocks_[e].dispose(!1);for(t=0,e=void 0;e=this.inputList[t];t++)e.dispose();this.inputList.length=0;var o=this.getConnections_(!0);for(t=0,e=void 0;e=o[t];t++)e.dispose()}finally{(0,f.enable)(),this.disposed=!0}}},H.Block.prototype.initModel=function(){for(var e,t=0;e=this.inputList[t];t++)for(var r,o=0;r=e.fieldRow[o];o++)r.initModel&&r.initModel()},H.Block.prototype.unplug=function(t){this.outputConnection&&this.unplugFromRow_(t),this.previousConnection&&this.unplugFromStack_(t)},H.Block.prototype.unplugFromRow_=function(t){var e=null;this.outputConnection.isConnected()&&(e=this.outputConnection.targetConnection,this.outputConnection.disconnect()),e&&t&&(t=this.getOnlyValueConnection_())&&t.isConnected()&&!t.targetBlock().isShadow()&&((t=t.targetConnection).disconnect(),this.workspace.connectionChecker.canConnect(t,e,!1)?e.connect(t):t.onFailedConnect(e))},H.Block.prototype.getOnlyValueConnection_=function(){for(var t=null,e=0;e<this.inputList.length;e++){var o=this.inputList[e].connection;if(o&&o.type===l.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE&&o.targetConnection){if(t)return null;t=o}}return t},H.Block.prototype.unplugFromStack_=function(t){var e=null;this.previousConnection.isConnected()&&(e=this.previousConnection.targetConnection,this.previousConnection.disconnect());var o=this.getNextBlock();t&&o&&!o.isShadow()&&((t=this.nextConnection.targetConnection).disconnect(),e&&this.workspace.connectionChecker.canConnect(e,t,!1)&&e.connect(t))},H.Block.prototype.getConnections_=function(t){t=[],this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection);for(var o,e=0;o=this.inputList[e];e++)o.connection&&t.push(o.connection);return t},H.Block.prototype.lastConnectionInStack=function(t){for(var e=this.nextConnection;e;){var o=e.targetBlock();if(!o||t&&o.isShadow())return e;e=o.nextConnection}return null},H.Block.prototype.bumpNeighbours=function(){},H.Block.prototype.getParent=function(){return this.parentBlock_},H.Block.prototype.getInputWithBlock=function(t){for(var o,e=0;o=this.inputList[e];e++)if(o.connection&&o.connection.targetBlock()===t)return o;return null},H.Block.prototype.getSurroundParent=function(){var t=this;do{var e=t;if(!(t=t.getParent()))return null}while(t.getNextBlock()===e);return t},H.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},H.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},H.Block.prototype.getFirstStatementConnection=function(){for(var e,t=0;e=this.inputList[t];t++)if(e.connection&&e.connection.type===l.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT)return e.connection;return null},H.Block.prototype.getRootBlock=function(){var t=this;do{var e=t;t=e.parentBlock_}while(t);return e},H.Block.prototype.getTopStackBlock=function(){var t=this;do{var e=t.getPreviousBlock()}while(e&&e.getNextBlock()===t&&(t=e));return t},H.Block.prototype.getChildren=function(t){if(!t)return this.childBlocks_;t=[];for(var o,e=0;o=this.inputList[e];e++)o.connection&&(o=o.connection.targetBlock())&&t.push(o);return(e=this.getNextBlock())&&t.push(e),t},H.Block.prototype.setParent=function(t){if(t!==this.parentBlock_){var e=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),o=!!e;if(o&&t&&e!==t)throw Error("Block connected to superior one that is not new parent.");if(!o&&t)throw Error("Block not connected to new parent.");if(o&&!t)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?Je_removeElem(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=t)?t.childBlocks_.push(this):this.workspace.addTopBlock(this)}},H.Block.prototype.getDescendants=function(t){for(var r,e=[this],o=this.getChildren(t),c=0;r=o[c];c++)e.push.apply(e,r.getDescendants(t));return e},H.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},H.Block.prototype.setDeletable=function(t){this.deletable_=t},H.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},H.Block.prototype.setMovable=function(t){this.movable_=t},H.Block.prototype.isDuplicatable=function(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable((0,l.module$exports$Blockly$common.getBlockTypeCounts)(this,!0))},H.Block.prototype.isShadow=function(){return this.isShadow_},H.Block.prototype.setShadow=function(t){this.isShadow_=t},H.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},H.Block.prototype.setInsertionMarker=function(t){this.isInsertionMarker_=t},H.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},H.Block.prototype.setEditable=function(t){this.editable_=t,t=0;for(var e;e=this.inputList[t];t++)for(var r,o=0;r=e.fieldRow[o];o++)r.updateEditable()},H.Block.prototype.isDisposed=function(){return this.disposed},H.Block.prototype.getMatchingConnection=function(t,e){var o=this.getConnections_(!0);if(t=t.getConnections_(!0),o.length!==t.length)throw Error("Connection lists did not match in length.");for(var r=0;r<t.length;r++)if(t[r]===e)return o[r];return null},H.Block.prototype.setHelpUrl=function(t){this.helpUrl=t},H.Block.prototype.setTooltip=function(t){this.tooltip=t},H.Block.prototype.getTooltip=function(){return(0,at.getTooltipOfObject)(this)},H.Block.prototype.getColour=function(){return this.colour_},H.Block.prototype.getStyleName=function(){return this.styleName_},H.Block.prototype.getHue=function(){return this.hue_},H.Block.prototype.setColour=function(t){t=(0,It.parseBlockColour)(t),this.hue_=t.hue,this.colour_=t.hex},H.Block.prototype.setStyle=function(t){this.styleName_=t},H.Block.prototype.setOnChange=function(t){if(t&&"function"!=typeof t)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=t)&&(this.onchangeWrapper_=t.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},H.Block.prototype.getField=function(t){if("string"!=typeof t)throw TypeError("Block.prototype.getField expects a string with the field name but received "+(void 0===t?"nothing":t+" of type "+typeof t)+" instead");for(var o,e=0;o=this.inputList[e];e++)for(var c,r=0;c=o.fieldRow[r];r++)if(c.name===t)return c;return null},H.Block.prototype.getVars=function(){for(var o,t=[],e=0;o=this.inputList[e];e++)for(var c,r=0;c=o.fieldRow[r];r++)c.referencesVariables()&&t.push(c.getValue());return t},H.Block.prototype.getVarModels=function(){for(var o,t=[],e=0;o=this.inputList[e];e++)for(var c,r=0;c=o.fieldRow[r];r++)c.referencesVariables()&&(c=this.workspace.getVariableById(c.getValue()))&&t.push(c);return t},H.Block.prototype.updateVarName=function(t){for(var o,e=0;o=this.inputList[e];e++)for(var c,r=0;c=o.fieldRow[r];r++)c.referencesVariables()&&t.getId()===c.getValue()&&c.refreshVariableName()},H.Block.prototype.renameVarById=function(t,e){for(var r,o=0;r=this.inputList[o];o++)for(var h,c=0;h=r.fieldRow[c];c++)h.referencesVariables()&&t===h.getValue()&&h.setValue(e)},H.Block.prototype.getFieldValue=function(t){return(t=this.getField(t))?t.getValue():null},H.Block.prototype.setFieldValue=function(t,e){var o=this.getField(e);if(!o)throw Error('Field "'+e+'" not found.');o.setValue(t)},H.Block.prototype.setPreviousStatement=function(t,e){if(t)void 0===e&&(e=null),this.previousConnection||(this.previousConnection=this.makeConnection_(l.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(e);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}},H.Block.prototype.setNextStatement=function(t,e){if(t)void 0===e&&(e=null),this.nextConnection||(this.nextConnection=this.makeConnection_(l.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT)),this.nextConnection.setCheck(e);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}},H.Block.prototype.setOutput=function(t,e){if(t)void 0===e&&(e=null),this.outputConnection||(this.outputConnection=this.makeConnection_(l.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE)),this.outputConnection.setCheck(e);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}},H.Block.prototype.setInputsInline=function(t){this.inputsInline!==t&&((0,f.fire)(new((0,f.get)(f.CHANGE))(this,"inline",null,this.inputsInline,t)),this.inputsInline=t)},H.Block.prototype.getInputsInline=function(){if(void 0!==this.inputsInline)return this.inputsInline;for(var t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type===l.module$exports$Blockly$inputTypes.inputTypes.DUMMY&&this.inputList[t].type===l.module$exports$Blockly$inputTypes.inputTypes.DUMMY)return!1;for(t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type===l.module$exports$Blockly$inputTypes.inputTypes.VALUE&&this.inputList[t].type===l.module$exports$Blockly$inputTypes.inputTypes.DUMMY)return!0;return!1},H.Block.prototype.setOutputShape=function(t){this.outputShape_=t},H.Block.prototype.getOutputShape=function(){return this.outputShape_},H.Block.prototype.isEnabled=function(){return!this.disabled},H.Block.prototype.setEnabled=function(t){if(this.isEnabled()!==t){var e=this.disabled;this.disabled=!t,(0,f.fire)(new((0,f.get)(f.CHANGE))(this,"disabled",null,e,!t))}},H.Block.prototype.getInheritedDisabled=function(){for(var t=this.getSurroundParent();t;){if(t.disabled)return!0;t=t.getSurroundParent()}return!1},H.Block.prototype.isCollapsed=function(){return this.collapsed_},H.Block.prototype.setCollapsed=function(t){this.collapsed_!==t&&((0,f.fire)(new((0,f.get)(f.CHANGE))(this,"collapsed",null,this.collapsed_,t)),this.collapsed_=t)},H.Block.prototype.toString=function(t,e){function o(j){var Et=j.getCheck();return!Et&&j.targetConnection&&(Et=j.targetConnection.getCheck()),!!Et&&(-1!==Et.indexOf("Boolean")||-1!==Et.indexOf("Number"))}function r(){k&&k.getType()===C.getType()&&k.getLocation()===C.getLocation()&&(k=null)}var c=[];e=e||"?";var h=L.ASTNode.NAVIGATE_ALL_FIELDS;L.ASTNode.NAVIGATE_ALL_FIELDS=!0;for(var k=L.ASTNode.createBlockNode(this),C=k;k;){switch(k.getType()){case L.ASTNode.types.INPUT:var G=k.getLocation();k.in()?o(G)&&c.push("("):c.push(e);break;case L.ASTNode.types.FIELD:(G=k.getLocation()).name!==zo.COLLAPSED_FIELD_NAME&&c.push(G.getText())}if(!(k=(G=k).in()||G.next())){for(k=G.out(),r();k&&!k.next();)k=k.out(),r(),k&&k.getType()===L.ASTNode.types.INPUT&&o(k.getLocation())&&c.push(")");k&&(k=k.next())}}for(L.ASTNode.NAVIGATE_ALL_FIELDS=h,e=2;e<c.length;e++)"("===c[e-2]&&")"===c[e]&&(c[e-2]=c[e-1],c.splice(e-1,2));return c=(c=c.reduce(function(j,Et){return j+("("===j.substr(-1)||")"===Et?"":" ")+Et},"")).trim()||"???",t&&c.length>t&&(c=c.substring(0,t-3)+"..."),c},H.Block.prototype.appendValueInput=function(t){return this.appendInput_(l.module$exports$Blockly$inputTypes.inputTypes.VALUE,t)},H.Block.prototype.appendStatementInput=function(t){return this.appendInput_(l.module$exports$Blockly$inputTypes.inputTypes.STATEMENT,t)},H.Block.prototype.appendDummyInput=function(t){return this.appendInput_(l.module$exports$Blockly$inputTypes.inputTypes.DUMMY,t||"")},H.Block.prototype.jsonInit=function(t){var e=t.type?'Block "'+t.type+'": ':"";if(t.output&&t.previousStatement)throw Error(e+"Must not have both an output and a previousStatement.");if(t.style&&t.style.hat&&(this.hat=t.style.hat,t.style=null),t.style&&t.colour)throw Error(e+"Must not have both a colour and a style.");t.style?this.jsonInitStyle_(t,e):this.jsonInitColour_(t,e);for(var o=0;void 0!==t["message"+o];)this.interpolate_(t["message"+o],t["args"+o]||[],t["lastDummyAlign"+o],e),o++;if(void 0!==t.inputsInline&&this.setInputsInline(t.inputsInline),void 0!==t.output&&this.setOutput(!0,t.output),void 0!==t.outputShape&&this.setOutputShape(t.outputShape),void 0!==t.previousStatement&&this.setPreviousStatement(!0,t.previousStatement),void 0!==t.nextStatement&&this.setNextStatement(!0,t.nextStatement),void 0!==t.tooltip&&(o=(0,It.replaceMessageReferences)(t.tooltip),this.setTooltip(o)),void 0!==t.enableContextMenu&&(this.contextMenu=!!t.enableContextMenu),void 0!==t.suppressPrefixSuffix&&(this.suppressPrefixSuffix=!!t.suppressPrefixSuffix),void 0!==t.helpUrl&&(o=(0,It.replaceMessageReferences)(t.helpUrl),this.setHelpUrl(o)),"string"==typeof t.extensions&&(console.warn(e+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+t.type+"' block."),t.extensions=[t.extensions]),void 0!==t.mutator&&(0,l.module$exports$Blockly$Extensions.apply)(t.mutator,this,!0),t=t.extensions,Array.isArray(t))for(e=0;e<t.length;e++)(0,l.module$exports$Blockly$Extensions.apply)(t[e],this,!1)},H.Block.prototype.jsonInitColour_=function(t,e){if("colour"in t)if(void 0===t.colour)console.warn(e+"Undefined colour value.");else{t=t.colour;try{this.setColour(t)}catch{console.warn(e+"Illegal colour value: ",t)}}},H.Block.prototype.jsonInitStyle_=function(t,e){t=t.style;try{this.setStyle(t)}catch{console.warn(e+"Style does not exist: ",t)}},H.Block.prototype.mixin=function(t,e){if(void 0!==e&&"boolean"!=typeof e)throw Error("opt_disableCheck must be a boolean if provided");if(!e){for(var o in e=[],t)void 0!==this[o]&&e.push(o);if(e.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(e))}(0,l.module$exports$Blockly$utils$object.mixin)(this,t)},H.Block.prototype.interpolate_=function(t,e,o,r){t=(0,It.tokenizeInterpolation)(t),this.validateTokens_(t,e.length),e=this.interpolateArguments_(t,e,o),o=[],t=0;for(var c;c=e[t];t++)if(this.isInputKeyword_(c.type)){if(c=this.inputFromJson_(c,r)){for(var k,h=0;k=o[h];h++)c.appendField(k[0],k[1]);o.length=0}}else(h=this.fieldFromJson_(c))&&o.push([h,c.name])},H.Block.prototype.validateTokens_=function(t,e){for(var o=[],r=0,c=0;c<t.length;c++){var h=t[c];if("number"==typeof h){if(1>h||h>e)throw Error('Block "'+this.type+'": Message index %'+h+" out of range.");if(o[h])throw Error('Block "'+this.type+'": Message index %'+h+" duplicated.");o[h]=!0,r++}}if(r!==e)throw Error('Block "'+this.type+'": Message does not reference all '+e+" arg(s).")},H.Block.prototype.interpolateArguments_=function(t,e,o){for(var r=[],c=0;c<t.length;c++){var h=t[c];"number"==typeof h&&(h=e[h-1]),("string"!=typeof h||(h=this.stringToFieldJson_(h)))&&r.push(h)}return(t=r.length)&&!this.isInputKeyword_(r[t-1].type)&&(t={type:"input_dummy"},o&&(t.align=o),r.push(t)),r},H.Block.prototype.fieldFromJson_=function(t){var e=(0,He.fromJson)(t);return!e&&t.alt?"string"==typeof t.alt?(t=this.stringToFieldJson_(t.alt))?this.fieldFromJson_(t):null:this.fieldFromJson_(t.alt):e},H.Block.prototype.inputFromJson_=function(t,e){var o={LEFT:l.module$exports$Blockly$Input.Align.LEFT,RIGHT:l.module$exports$Blockly$Input.Align.RIGHT,CENTRE:l.module$exports$Blockly$Input.Align.CENTRE,CENTER:l.module$exports$Blockly$Input.Align.CENTRE},r=null;switch(t.type){case"input_value":r=this.appendValueInput(t.name);break;case"input_statement":r=this.appendStatementInput(t.name);break;case"input_dummy":r=this.appendDummyInput(t.name)}return r?(t.check&&r.setCheck(t.check),t.align&&(void 0===(o=o[t.align.toUpperCase()])?console.warn(e+"Illegal align value: ",t.align):r.setAlign(o)),r):null},H.Block.prototype.isInputKeyword_=function(t){return"input_value"===t||"input_statement"===t||"input_dummy"===t},H.Block.prototype.stringToFieldJson_=function(t){return(t=t.trim())?{type:"field_label",text:t}:null},H.Block.prototype.appendInput_=function(t,e){var o=null;return(t===l.module$exports$Blockly$inputTypes.inputTypes.VALUE||t===l.module$exports$Blockly$inputTypes.inputTypes.STATEMENT)&&(o=this.makeConnection_(t)),t===l.module$exports$Blockly$inputTypes.inputTypes.STATEMENT&&this.statementInputCount++,t=new l.module$exports$Blockly$Input.Input(t,e,this,o),this.inputList.push(t),t},H.Block.prototype.moveInputBefore=function(t,e){if(t!==e){for(var h,o=-1,r=e?-1:this.inputList.length,c=0;h=this.inputList[c];c++)if(h.name===t){if(o=c,-1!==r)break}else if(e&&h.name===e&&(r=c,-1!==o))break;if(-1===o)throw Error('Named input "'+t+'" not found.');if(-1===r)throw Error('Reference input "'+e+'" not found.');this.moveNumberedInputBefore(o,r)}},H.Block.prototype.moveNumberedInputBefore=function(t,e){if(t===e)throw Error("Can't move input to itself.");if(t>=this.inputList.length)throw RangeError("Input index "+t+" out of bounds.");if(e>this.inputList.length)throw RangeError("Reference input "+e+" out of bounds.");var o=this.inputList[t];this.inputList.splice(t,1),t<e&&e--,this.inputList.splice(e,0,o)},H.Block.prototype.removeInput=function(t,e){for(var r,o=0;r=this.inputList[o];o++)if(r.name===t)return r.type===l.module$exports$Blockly$inputTypes.inputTypes.STATEMENT&&this.statementInputCount--,r.dispose(),this.inputList.splice(o,1),!0;if(e)return!1;throw Error("Input not found: "+t)},H.Block.prototype.getInput=function(t){for(var o,e=0;o=this.inputList[e];e++)if(o.name===t)return o;return null},H.Block.prototype.getInputTargetBlock=function(t){return(t=this.getInput(t))&&t.connection&&t.connection.targetBlock()},H.Block.prototype.getCommentText=function(){return this.commentModel.text},H.Block.prototype.setCommentText=function(t){this.commentModel.text!==t&&((0,f.fire)(new((0,f.get)(f.CHANGE))(this,"comment",null,this.commentModel.text,t)),this.comment=this.commentModel.text=t)},H.Block.prototype.setWarningText=function(t,e){},H.Block.prototype.setMutator=function(t){},H.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},H.Block.prototype.moveBy=function(t,e){if(this.parentBlock_)throw Error("Block has parent.");var o=new((0,f.get)(f.MOVE))(this);this.xy_.translate(t,e),o.recordNew(),(0,f.fire)(o)},H.Block.prototype.makeConnection_=function(t){return new K.Connection(this,t)},H.Block.prototype.allInputsFilled=function(t){if(void 0===t&&(t=!0),!t&&this.isShadow())return!1;for(var o,e=0;o=this.inputList[e];e++)if(o.connection&&(!(o=o.connection.targetBlock())||!o.allInputsFilled(t)))return!1;return!(e=this.getNextBlock())||e.allInputsFilled(t)},H.Block.prototype.toDevString=function(){var t=this.type?'"'+this.type+'" block':"Block";return this.id&&(t+=' (id="'+this.id+'")'),t};var bt={ContextMenuRegistry:function(){bt.ContextMenuRegistry.registry=this,this.registry_=Object.create(null)}};bt.ContextMenuRegistry.ScopeType={BLOCK:"block",WORKSPACE:"workspace"},bt.ContextMenuRegistry.registry=null,bt.ContextMenuRegistry.prototype.register=function(t){if(this.registry_[t.id])throw Error('Menu item with ID "'+t.id+'" is already registered.');this.registry_[t.id]=t},bt.ContextMenuRegistry.prototype.unregister=function(t){if(!this.registry_[t])throw Error('Menu item with ID "'+t+'" not found.');delete this.registry_[t]},bt.ContextMenuRegistry.prototype.getItem=function(t){return this.registry_[t]||null},bt.ContextMenuRegistry.prototype.getContextMenuOptions=function(t,e){var o=[],r=this.registry_;return Object.keys(r).forEach(function(c){if(t===(c=r[c]).scopeType){var h=c.preconditionFn(e);"hidden"!==h&&(c={text:"function"==typeof c.displayText?c.displayText(e):c.displayText,enabled:"enabled"===h,callback:c.callback,scope:e,weight:c.weight},o.push(c))}}),o.sort(function(c,h){return c.weight-h.weight}),o},new bt.ContextMenuRegistry;var vt={RenderedConnection:function(t,e){vt.RenderedConnection.superClass_.constructor.call(this,t,e),this.db_=t.workspace.connectionDBList[e],this.dbOpposite_=t.workspace.connectionDBList[l.module$exports$Blockly$internalConstants.OPPOSITE_TYPE[e]],this.offsetInBlock_=new N.Coordinate(0,0),this.trackedState_=vt.RenderedConnection.TrackedState.WILL_TRACK,this.targetConnection=null}};(0,l.module$exports$Blockly$utils$object.inherits)(vt.RenderedConnection,K.Connection),vt.RenderedConnection.TrackedState={WILL_TRACK:-1,UNTRACKED:0,TRACKED:1},vt.RenderedConnection.prototype.dispose=function(){vt.RenderedConnection.superClass_.dispose.call(this),this.trackedState_===vt.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)},vt.RenderedConnection.prototype.getSourceBlock=function(){return vt.RenderedConnection.superClass_.getSourceBlock.call(this)},vt.RenderedConnection.prototype.targetBlock=function(){return vt.RenderedConnection.superClass_.targetBlock.call(this)},vt.RenderedConnection.prototype.distanceFrom=function(t){var e=this.x-t.x;return t=this.y-t.y,Math.sqrt(e*e+t*t)},vt.RenderedConnection.prototype.bumpAwayFrom=function(t){if(!this.sourceBlock_.workspace.isDragging()){var e=this.sourceBlock_.getRootBlock();if(!e.isInFlyout){var o=!1;if(!e.isMovable()){if(!(e=t.getSourceBlock().getRootBlock()).isMovable())return;t=this,o=!0}var r=(0,l.module$exports$Blockly$common.getSelected)()==e;r||e.addSelect();var c=t.x+l.module$exports$Blockly$internalConstants.SNAP_RADIUS+Math.floor(Math.random()*l.module$exports$Blockly$internalConstants.BUMP_RANDOMNESS)-this.x,h=t.y+l.module$exports$Blockly$internalConstants.SNAP_RADIUS+Math.floor(Math.random()*l.module$exports$Blockly$internalConstants.BUMP_RANDOMNESS)-this.y;o&&(h=-h),e.RTL&&(c=t.x-l.module$exports$Blockly$internalConstants.SNAP_RADIUS-Math.floor(Math.random()*l.module$exports$Blockly$internalConstants.BUMP_RANDOMNESS)-this.x),e.moveBy(c,h),r||e.removeSelect()}}},vt.RenderedConnection.prototype.moveTo=function(t,e){this.trackedState_===vt.RenderedConnection.TrackedState.WILL_TRACK?(this.db_.addConnection(this,e),this.trackedState_=vt.RenderedConnection.TrackedState.TRACKED):this.trackedState_===vt.RenderedConnection.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,e)),this.x=t,this.y=e},vt.RenderedConnection.prototype.moveBy=function(t,e){this.moveTo(this.x+t,this.y+e)},vt.RenderedConnection.prototype.moveToOffset=function(t){this.moveTo(t.x+this.offsetInBlock_.x,t.y+this.offsetInBlock_.y)},vt.RenderedConnection.prototype.setOffsetInBlock=function(t,e){this.offsetInBlock_.x=t,this.offsetInBlock_.y=e},vt.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_},vt.RenderedConnection.prototype.tighten=function(){var t=this.targetConnection.x-this.x,e=this.targetConnection.y-this.y;if(0!==t||0!==e){var o=this.targetBlock(),r=o.getSvgRoot();if(!r)throw Error("block is not rendered.");r=(0,dt.getRelativeXY)(r),o.getSvgRoot().setAttribute("transform","translate("+(r.x-t)+","+(r.y-e)+")"),o.moveConnections(-t,-e)}},vt.RenderedConnection.prototype.closest=function(t,e){return this.dbOpposite_.searchForClosest(this,t,e)},vt.RenderedConnection.prototype.highlight=function(){var t=this.sourceBlock_.workspace.getRenderer().getConstants(),e=t.shapeFor(this);e=this.type===l.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE||this.type===l.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE?(0,b.moveBy)(0,-(t=t.TAB_OFFSET_FROM_TOP))+(0,b.lineOnAxis)("v",t)+e.pathDown+(0,b.lineOnAxis)("v",t):(0,b.moveBy)(-(t=t.NOTCH_OFFSET_LEFT-t.CORNER_RADIUS),0)+(0,b.lineOnAxis)("h",t)+e.pathLeft+(0,b.lineOnAxis)("h",t),t=this.sourceBlock_.getRelativeToSurfaceXY(),K.Connection.highlightedPath_=(0,s.createSvgElement)(B.Svg.PATH,{class:"blocklyHighlightedConnectionPath",d:e,transform:"translate("+(this.x-t.x)+","+(this.y-t.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},vt.RenderedConnection.prototype.unhighlight=function(){(0,s.removeNode)(K.Connection.highlightedPath_),delete K.Connection.highlightedPath_},vt.RenderedConnection.prototype.setTracking=function(t){t&&this.trackedState_===vt.RenderedConnection.TrackedState.TRACKED||!t&&this.trackedState_===vt.RenderedConnection.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(t?(this.db_.addConnection(this,this.y),this.trackedState_=vt.RenderedConnection.TrackedState.TRACKED):(this.trackedState_===vt.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=vt.RenderedConnection.TrackedState.UNTRACKED))},vt.RenderedConnection.prototype.stopTrackingAll=function(){if(this.setTracking(!1),this.targetConnection)for(var t=this.targetBlock().getDescendants(!1),e=0;e<t.length;e++){for(var o=t[e],r=o.getConnections_(!0),c=0;c<r.length;c++)r[c].setTracking(!1);for(o=o.getIcons(),r=0;r<o.length;r++)o[r].setVisible(!1)}},vt.RenderedConnection.prototype.startTrackingAll=function(){this.setTracking(!0);var t=[];if(this.type!==l.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE&&this.type!==l.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT)return t;var e=this.targetBlock();if(e){if(e.isCollapsed()){var o=[];e.outputConnection&&o.push(e.outputConnection),e.nextConnection&&o.push(e.nextConnection),e.previousConnection&&o.push(e.previousConnection)}else o=e.getConnections_(!0);for(var r=0;r<o.length;r++)t.push.apply(t,o[r].startTrackingAll());t.length||(t=[e])}return t},vt.RenderedConnection.prototype.onFailedConnect=function(t){var e=this.getSourceBlock();if((0,f.getRecordUndo)()){var o=(0,f.getGroup)();setTimeout(function(){e.isDisposed()||e.getParent()||((0,f.setGroup)(o),this.bumpAwayFrom(t),(0,f.setGroup)(!1))}.bind(this),l.module$exports$Blockly$internalConstants.BUMP_DELAY)}},vt.RenderedConnection.prototype.disconnectInternal_=function(t,e){vt.RenderedConnection.superClass_.disconnectInternal_.call(this,t,e),t.rendered&&t.render(),e.rendered&&(e.updateDisabled(),e.render(),e.getSvgRoot().style.display="block")},vt.RenderedConnection.prototype.respawnShadow_=function(){vt.RenderedConnection.superClass_.respawnShadow_.call(this);var t=this.targetBlock();t&&(t.initSvg(),t.render(!1),(t=this.getSourceBlock()).rendered&&t.render())},vt.RenderedConnection.prototype.neighbours=function(t){return this.dbOpposite_.getNeighbours(this,t)},vt.RenderedConnection.prototype.connect_=function(t){vt.RenderedConnection.superClass_.connect_.call(this,t);var e=this.getSourceBlock();t=t.getSourceBlock();var o=e.rendered,r=t.rendered;o&&e.updateDisabled(),r&&t.updateDisabled(),o&&r&&(this.type===l.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT||this.type===l.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT?t.render():e.render()),(e=e.getInputWithBlock(t))&&(e=e.isVisible(),t.getSvgRoot().style.display=e?"block":"none")},vt.RenderedConnection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())};var Jo={Marker:function(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"}};Jo.Marker.prototype.setDrawer=function(t){this.drawer_=t},Jo.Marker.prototype.getDrawer=function(){return this.drawer_},Jo.Marker.prototype.getCurNode=function(){return this.curNode_},Jo.Marker.prototype.setCurNode=function(t){var e=this.curNode_;this.curNode_=t,this.drawer_&&this.drawer_.draw(e,this.curNode_)},Jo.Marker.prototype.draw=function(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)},Jo.Marker.prototype.hide=function(){this.drawer_&&this.drawer_.hide()},Jo.Marker.prototype.dispose=function(){this.getDrawer()&&this.getDrawer().dispose()};var Zo={Cursor:function(){Zo.Cursor.superClass_.constructor.call(this),this.type="cursor"}};(0,l.module$exports$Blockly$utils$object.inherits)(Zo.Cursor,Jo.Marker),Zo.Cursor.prototype.next=function(){var t=this.getCurNode();if(!t)return null;for(t=t.next();t&&t.next()&&(t.getType()===L.ASTNode.types.NEXT||t.getType()===L.ASTNode.types.BLOCK);)t=t.next();return t&&this.setCurNode(t),t},Zo.Cursor.prototype.in=function(){var t=this.getCurNode();return t?((t.getType()===L.ASTNode.types.PREVIOUS||t.getType()===L.ASTNode.types.OUTPUT)&&(t=t.next()),(t=t.in())&&this.setCurNode(t),t):null},Zo.Cursor.prototype.prev=function(){var t=this.getCurNode();if(!t)return null;for(t=t.prev();t&&t.prev()&&(t.getType()===L.ASTNode.types.NEXT||t.getType()===L.ASTNode.types.BLOCK);)t=t.prev();return t&&this.setCurNode(t),t},Zo.Cursor.prototype.out=function(){var t=this.getCurNode();return t?((t=t.out())&&t.getType()===L.ASTNode.types.BLOCK&&(t=t.prev()||t),t&&this.setCurNode(t),t):null},(0,x.register)(x.Type.CURSOR,x.DEFAULT,Zo.Cursor);var Be={BasicCursor:function(){Be.BasicCursor.superClass_.constructor.call(this)}};(0,l.module$exports$Blockly$utils$object.inherits)(Be.BasicCursor,Zo.Cursor),Be.BasicCursor.registrationName="basicCursor",Be.BasicCursor.prototype.next=function(){var t=this.getCurNode();return t?((t=this.getNextNode_(t,this.validNode_))&&this.setCurNode(t),t):null},Be.BasicCursor.prototype.in=function(){return this.next()},Be.BasicCursor.prototype.prev=function(){var t=this.getCurNode();return t?((t=this.getPreviousNode_(t,this.validNode_))&&this.setCurNode(t),t):null},Be.BasicCursor.prototype.out=function(){return this.prev()},Be.BasicCursor.prototype.getNextNode_=function(t,e){if(!t)return null;var o=t.in()||t.next();return e(o)?o:o?this.getNextNode_(o,e):e(t=this.findSiblingOrParent_(t.out()))?t:t?this.getNextNode_(t,e):null},Be.BasicCursor.prototype.getPreviousNode_=function(t,e){if(!t)return null;var o=t.prev();return e(o=o?this.getRightMostChild_(o):t.out())?o:o?this.getPreviousNode_(o,e):null},Be.BasicCursor.prototype.validNode_=function(t){var e=!1;return((t=t&&t.getType())===L.ASTNode.types.OUTPUT||t===L.ASTNode.types.INPUT||t===L.ASTNode.types.FIELD||t===L.ASTNode.types.NEXT||t===L.ASTNode.types.PREVIOUS||t===L.ASTNode.types.WORKSPACE)&&(e=!0),e},Be.BasicCursor.prototype.findSiblingOrParent_=function(t){return t?t.next()||this.findSiblingOrParent_(t.out()):null},Be.BasicCursor.prototype.getRightMostChild_=function(t){if(!t.in())return t;for(t=t.in();t.next();)t=t.next();return this.getRightMostChild_(t)},(0,x.register)(x.Type.CURSOR,Be.BasicCursor.registrationName,Be.BasicCursor);var Kn={TabNavigateCursor:function(){Kn.TabNavigateCursor.superClass_.constructor.call(this)}};(0,l.module$exports$Blockly$utils$object.inherits)(Kn.TabNavigateCursor,Be.BasicCursor),Kn.TabNavigateCursor.prototype.validNode_=function(t){var e=!1,o=t&&t.getType();return t&&(t=t.getLocation(),o===L.ASTNode.types.FIELD&&t&&t.isTabNavigable()&&t.isClickable()&&(e=!0)),e};var qo={Selected:function(t,e,o){qo.Selected.superClass_.constructor.call(this,o),this.oldElementId=t,this.newElementId=e}};(0,l.module$exports$Blockly$utils$object.inherits)(qo.Selected,We.UiBase),qo.Selected.prototype.type=f.SELECTED,qo.Selected.prototype.toJson=function(){var t=qo.Selected.superClass_.toJson.call(this);return t.oldElementId=this.oldElementId,t.newElementId=this.newElementId,t},qo.Selected.prototype.fromJson=function(t){qo.Selected.superClass_.fromJson.call(this,t),this.oldElementId=t.oldElementId,this.newElementId=t.newElementId},(0,x.register)(x.Type.EVENT,f.SELECTED,qo.Selected);var U={BlockSvg:function(t,e,o){this.svgGroup_=(0,s.createSvgElement)(B.Svg.G,{},null),this.svgGroup_.translate_="",this.style=t.getRenderer().getConstants().getBlockStyle(null),this.pathObject=t.getRenderer().makePathObject(this.svgGroup_,this.style),this.renderIsInProgress_=this.rendered=!1,this.workspace=t,this.previousConnection=this.nextConnection=this.outputConnection=null,this.useDragSurface_=(0,dt.is3dSupported)()&&!!t.getBlockDragSurface();var r=this.pathObject.svgPath;r.tooltip=this,(0,at.bindMouseEvents)(r),U.BlockSvg.superClass_.constructor.call(this,t,e,o),this.svgGroup_.dataset?this.svgGroup_.dataset.id=this.id:ot.IE&&this.svgGroup_.setAttribute("data-id",this.id)}};(0,l.module$exports$Blockly$utils$object.inherits)(U.BlockSvg,H.Block),U.BlockSvg.prototype.height=0,U.BlockSvg.prototype.width=0,U.BlockSvg.prototype.warningTextDb_=null,U.BlockSvg.INLINE=-1,U.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_",U.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var e,t=0;e=this.inputList[t];t++)e.init();for(t=this.getIcons(),e=0;e<t.length;e++)t[e].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),t=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!t||(0,g.conditionalBind)(t,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,t.parentNode||this.workspace.getCanvas().appendChild(t)},U.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary},U.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary},U.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if((0,l.module$exports$Blockly$common.getSelected)()!==this){var t=null;if((0,l.module$exports$Blockly$common.getSelected)()){t=(0,l.module$exports$Blockly$common.getSelected)().id,(0,f.disable)();try{(0,l.module$exports$Blockly$common.getSelected)().unselect()}finally{(0,f.enable)()}}t=new((0,f.get)(f.SELECTED))(t,this.id,this.workspace.id),(0,f.fire)(t),(0,l.module$exports$Blockly$common.setSelected)(this),this.addSelect()}},U.BlockSvg.prototype.unselect=function(){if((0,l.module$exports$Blockly$common.getSelected)()===this){var t=new((0,f.get)(f.SELECTED))(this.id,null,this.workspace.id);t.workspaceId=this.workspace.id,(0,f.fire)(t),(0,l.module$exports$Blockly$common.setSelected)(null),this.removeSelect()}},U.BlockSvg.prototype.mutator=null,U.BlockSvg.prototype.comment=null,U.BlockSvg.prototype.commentIcon_=null,U.BlockSvg.prototype.warning=null,U.BlockSvg.prototype.getIcons=function(){var t=[];return this.mutator&&t.push(this.mutator),this.commentIcon_&&t.push(this.commentIcon_),this.warning&&t.push(this.warning),t},U.BlockSvg.prototype.setParent=function(t){var e=this.parentBlock_;if(t!==e){(0,s.startTextWidthCache)(),U.BlockSvg.superClass_.setParent.call(this,t),(0,s.stopTextWidthCache)();var o=this.getSvgRoot();if(!this.workspace.isClearing&&o){var r=this.getRelativeToSurfaceXY();t?(t.getSvgRoot().appendChild(o),t=this.getRelativeToSurfaceXY(),this.moveConnections(t.x-r.x,t.y-r.y)):e&&(this.workspace.getCanvas().appendChild(o),this.translate(r.x,r.y)),this.applyColour()}}},U.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var t=0,e=0,o=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,r=this.getSvgRoot();if(r)do{var c=(0,dt.getRelativeXY)(r);t+=c.x,e+=c.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()===r&&(t+=(c=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,e+=c.y),r=r.parentNode}while(r&&r!==this.workspace.getCanvas()&&r!==o);return new N.Coordinate(t,e)},U.BlockSvg.prototype.moveBy=function(t,e){if(this.parentBlock_)throw Error("Block has parent.");var r,o=(0,f.isEnabled)();o&&(r=new((0,f.get)(f.MOVE))(this));var c=this.getRelativeToSurfaceXY();this.translate(c.x+t,c.y+e),this.moveConnections(t,e),o&&(r.recordNew(),(0,f.fire)(r)),this.workspace.resizeContents()},U.BlockSvg.prototype.translate=function(t,e){this.getSvgRoot().setAttribute("transform","translate("+t+","+e+")")},U.BlockSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var t=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(t.x,t.y),(t=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(t)}},U.BlockSvg.prototype.moveTo=function(t){var e=this.getRelativeToSurfaceXY();this.moveBy(t.x-e.x,t.y-e.y)},U.BlockSvg.prototype.moveOffDragSurface=function(t){this.useDragSurface_&&(this.translate(t.x,t.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))},U.BlockSvg.prototype.moveDuringDrag=function(t){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(t.x,t.y):(this.svgGroup_.translate_="translate("+t.x+","+t.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},U.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},U.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var t=this.workspace.getGrid();if(t&&t.shouldSnap()){var e=t.getSpacing(),o=e/2,r=this.getRelativeToSurfaceXY();t=Math.round(Math.round((r.x-o)/e)*e+o-r.x),e=Math.round(Math.round((r.y-o)/e)*e+o-r.y),(t||e)&&this.moveBy(t,e)}}},U.BlockSvg.prototype.getBoundingRectangle=function(){var t=this.getRelativeToSurfaceXY(),e=this.getHeightWidth();if(this.RTL)var o=t.x-e.width,r=t.x;else o=t.x,r=t.x+e.width;return new yt.Rect(t.y,t.y+e.height,o,r)},U.BlockSvg.prototype.markDirty=function(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(var e,t=0;e=this.inputList[t];t++)e.markDirty()},U.BlockSvg.prototype.setCollapsed=function(t){this.collapsed_!==t&&(U.BlockSvg.superClass_.setCollapsed.call(this,t),t?this.rendered&&this.render():this.updateCollapsed_())},U.BlockSvg.prototype.updateCollapsed_=function(){for(var c,t=this.isCollapsed(),e=zo.COLLAPSED_INPUT_NAME,o=zo.COLLAPSED_FIELD_NAME,r=0;c=this.inputList[r];r++)c.name!==e&&c.setVisible(!t);if(t){for(t=this.getIcons(),r=0;c=t[r];r++)c.setVisible(!1);t=this.toString(l.module$exports$Blockly$internalConstants.COLLAPSE_CHARS),(r=this.getField(o))?r.setValue(t):(this.getInput(e)||this.appendDummyInput(e)).appendField(new l.module$exports$Blockly$FieldLabel.FieldLabel(t),o)}else this.updateDisabled(),this.removeInput(e)},U.BlockSvg.prototype.tab=function(t,e){var o=new Kn.TabNavigateCursor;o.setCurNode(L.ASTNode.createFieldNode(t)),t=o.getCurNode(),e?o.next():o.prev(),(e=o.getCurNode())&&e!==t&&(e.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(e))},U.BlockSvg.prototype.onMouseDown_=function(t){var e=this.workspace&&this.workspace.getGesture(t);e&&e.handleBlockStart(t,this)},U.BlockSvg.prototype.showHelp=function(){var t="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;t&&window.open(t)},U.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var t=bt.ContextMenuRegistry.registry.getContextMenuOptions(bt.ContextMenuRegistry.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(t),t},U.BlockSvg.prototype.showContextMenu=function(t){var e=this.generateContextMenu();e&&e.length&&((0,l.module$exports$Blockly$ContextMenu.show)(t,e,this.RTL),(0,l.module$exports$Blockly$ContextMenu.setCurrentBlock)(this))},U.BlockSvg.prototype.moveConnections=function(t,e){if(this.rendered){for(var o=this.getConnections_(!1),r=0;r<o.length;r++)o[r].moveBy(t,e);for(o=this.getIcons(),r=0;r<o.length;r++)o[r].computeIconLocation();for(o=0;o<this.childBlocks_.length;o++)this.childBlocks_[o].moveConnections(t,e)}},U.BlockSvg.prototype.setDragging=function(t){if(t){var e=this.getSvgRoot();e.translate_="",e.skew_="",l.module$exports$Blockly$common.draggingConnections.push.apply(l.module$exports$Blockly$common.draggingConnections,_.arrayFromIterable(this.getConnections_(!0))),(0,s.addClass)(this.svgGroup_,"blocklyDragging")}else l.module$exports$Blockly$common.draggingConnections.length=0,(0,s.removeClass)(this.svgGroup_,"blocklyDragging");for(e=0;e<this.childBlocks_.length;e++)this.childBlocks_[e].setDragging(t)},U.BlockSvg.prototype.setMovable=function(t){U.BlockSvg.superClass_.setMovable.call(this,t),this.pathObject.updateMovable(t)},U.BlockSvg.prototype.setEditable=function(t){U.BlockSvg.superClass_.setEditable.call(this,t),t=this.getIcons();for(var e=0;e<t.length;e++)t[e].updateEditable()},U.BlockSvg.prototype.setShadow=function(t){U.BlockSvg.superClass_.setShadow.call(this,t),this.applyColour()},U.BlockSvg.prototype.setInsertionMarker=function(t){this.isInsertionMarker_!==t&&(this.isInsertionMarker_=t)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))},U.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},U.BlockSvg.prototype.dispose=function(t,e){if(this.workspace){(0,at.dispose)(),(0,at.unbindMouseEvents)(this.pathObject.svgPath),(0,s.startTextWidthCache)();var o=this.workspace;if((0,l.module$exports$Blockly$common.getSelected)()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),(0,l.module$exports$Blockly$ContextMenu.getCurrentBlock)()===this&&(0,l.module$exports$Blockly$ContextMenu.hide)(),e&&this.rendered&&(this.unplug(t),(0,co.disposeUiEffect)(this)),this.rendered=!1,this.warningTextDb_){for(var r in this.warningTextDb_)clearTimeout(this.warningTextDb_[r]);this.warningTextDb_=null}for(e=this.getIcons(),r=0;r<e.length;r++)e[r].dispose();U.BlockSvg.superClass_.dispose.call(this,!!t),(0,s.removeNode)(this.svgGroup_),o.resizeContents(),this.svgGroup_=null,(0,s.stopTextWidthCache)()}},U.BlockSvg.prototype.checkAndDelete=function(){this.workspace.isFlyout||((0,f.setGroup)(!0),this.workspace.hideChaff(),this.dispose(!this.outputConnection,!0),(0,f.setGroup)(!1))},U.BlockSvg.prototype.toCopyData=function(){return this.isInsertionMarker_?null:{saveInfo:(0,ye.save)(this,{addCoordinates:!0,addNextBlocks:!1}),source:this.workspace,typeCounts:(0,l.module$exports$Blockly$common.getBlockTypeCounts)(this,!0)}},U.BlockSvg.prototype.applyColour=function(){this.pathObject.applyColour(this);for(var t=this.getIcons(),e=0;e<t.length;e++)t[e].applyColour();for(t=0;e=this.inputList[t];t++)for(var r,o=0;r=e.fieldRow[o];o++)r.applyColour()},U.BlockSvg.prototype.updateDisabled=function(){var t=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(var o,e=0;o=t[e];e++)o.rendered&&o.updateDisabled()},U.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_},U.BlockSvg.prototype.setCommentText=function(t){var e=ue.Comment;if(!e)throw Error("Missing require for Blockly.Comment");this.commentModel.text!==t&&(U.BlockSvg.superClass_.setCommentText.call(this,t),!!this.commentIcon_==(t=null!==t)?this.commentIcon_.updateText():(t?this.comment=this.commentIcon_=new e(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))},U.BlockSvg.prototype.setWarningText=function(t,e){var o=no.Warning;if(!o)throw Error("Missing require for Blockly.Warning");this.warningTextDb_||(this.warningTextDb_=Object.create(null));var r=e||"";if(r)this.warningTextDb_[r]&&(clearTimeout(this.warningTextDb_[r]),delete this.warningTextDb_[r]);else for(var c=(e=_.makeIterator(Object.keys(this.warningTextDb_))).next();!c.done;c=e.next())c=c.value,clearTimeout(this.warningTextDb_[c]),delete this.warningTextDb_[c];if(this.workspace.isDragging()){var h=this;this.warningTextDb_[r]=setTimeout(function(){h.workspace&&(delete h.warningTextDb_[r],h.setWarningText(t,r))},100)}else{if(this.isInFlyout&&(t=null),e=!1,"string"==typeof t){c=this.getSurroundParent();for(var k=null;c;)c.isCollapsed()&&(k=c),c=c.getSurroundParent();k&&k.setWarningText(l.module$exports$Blockly$Msg.Msg.COLLAPSED_WARNINGS_WARNING,U.BlockSvg.COLLAPSED_WARNING_ID),this.warning||(this.warning=new o(this),e=!0),this.warning.setText(t,r)}else this.warning&&!r?(this.warning.dispose(),e=!0):this.warning&&(o=this.warning.getText(),this.warning.setText("",r),(e=this.warning.getText())||this.warning.dispose(),e=o!==e);e&&this.rendered&&(this.render(),this.bumpNeighbours())}},U.BlockSvg.prototype.setMutator=function(t){this.mutator&&this.mutator!==t&&this.mutator.dispose(),t&&(t.setBlock(this),this.mutator=t,t.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())},U.BlockSvg.prototype.setEnabled=function(t){this.isEnabled()!==t&&(U.BlockSvg.superClass_.setEnabled.call(this,t),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())},U.BlockSvg.prototype.setHighlighted=function(t){this.rendered&&this.pathObject.updateHighlighted(t)},U.BlockSvg.prototype.addSelect=function(){this.pathObject.updateSelected(!0)},U.BlockSvg.prototype.removeSelect=function(){this.pathObject.updateSelected(!1)},U.BlockSvg.prototype.setDeleteStyle=function(t){this.pathObject.updateDraggingDelete(t)},U.BlockSvg.prototype.getColour=function(){return this.style.colourPrimary},U.BlockSvg.prototype.setColour=function(t){U.BlockSvg.superClass_.setColour.call(this,t),t=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(t.style),this.style=t.style,this.styleName_=t.name,this.applyColour()},U.BlockSvg.prototype.setStyle=function(t){var e=this.workspace.getRenderer().getConstants().getBlockStyle(t);if(this.styleName_=t,!e)throw Error("Invalid style name: "+t);this.hat=e.hat,this.pathObject.setStyle(e),this.colour_=e.colourPrimary,this.style=e,this.applyColour()},U.BlockSvg.prototype.bringToFront=function(){var t=this;do{var e=t.getSvgRoot(),o=e.parentNode,r=o.childNodes;r[r.length-1]!==e&&o.appendChild(e),t=t.getParent()}while(t)},U.BlockSvg.prototype.setPreviousStatement=function(t,e){U.BlockSvg.superClass_.setPreviousStatement.call(this,t,e),this.rendered&&(this.render(),this.bumpNeighbours())},U.BlockSvg.prototype.setNextStatement=function(t,e){U.BlockSvg.superClass_.setNextStatement.call(this,t,e),this.rendered&&(this.render(),this.bumpNeighbours())},U.BlockSvg.prototype.setOutput=function(t,e){U.BlockSvg.superClass_.setOutput.call(this,t,e),this.rendered&&(this.render(),this.bumpNeighbours())},U.BlockSvg.prototype.setInputsInline=function(t){U.BlockSvg.superClass_.setInputsInline.call(this,t),this.rendered&&(this.render(),this.bumpNeighbours())},U.BlockSvg.prototype.removeInput=function(t,e){return t=U.BlockSvg.superClass_.removeInput.call(this,t,e),this.rendered&&(this.render(),this.bumpNeighbours()),t},U.BlockSvg.prototype.moveNumberedInputBefore=function(t,e){U.BlockSvg.superClass_.moveNumberedInputBefore.call(this,t,e),this.rendered&&(this.render(),this.bumpNeighbours())},U.BlockSvg.prototype.appendInput_=function(t,e){return t=U.BlockSvg.superClass_.appendInput_.call(this,t,e),this.rendered&&(this.render(),this.bumpNeighbours()),t},U.BlockSvg.prototype.setConnectionTracking=function(t){if(this.previousConnection&&this.previousConnection.setTracking(t),this.outputConnection&&this.outputConnection.setTracking(t),this.nextConnection){this.nextConnection.setTracking(t);var e=this.nextConnection.targetBlock();e&&e.setConnectionTracking(t)}if(!this.collapsed_)for(e=0;e<this.inputList.length;e++){var o=this.inputList[e].connection;o&&(o.setTracking(t),(o=o.targetBlock())&&o.setConnectionTracking(t))}},U.BlockSvg.prototype.getConnections_=function(t){var e=[];if((t||this.rendered)&&(this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection),t||!this.collapsed_)){t=0;for(var o;o=this.inputList[t];t++)o.connection&&e.push(o.connection)}return e},U.BlockSvg.prototype.lastConnectionInStack=function(t){return U.BlockSvg.superClass_.lastConnectionInStack.call(this,t)},U.BlockSvg.prototype.getMatchingConnection=function(t,e){return U.BlockSvg.superClass_.getMatchingConnection.call(this,t,e)},U.BlockSvg.prototype.makeConnection_=function(t){return new vt.RenderedConnection(this,t)},U.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var t=this.getRootBlock();if(!t.isInFlyout)for(var r,e=this.getConnections_(!1),o=0;r=e[o];o++){r.isConnected()&&r.isSuperior()&&r.targetBlock().bumpNeighbours();for(var k,c=r.neighbours(l.module$exports$Blockly$internalConstants.SNAP_RADIUS),h=0;k=c[h];h++)r.isConnected()&&k.isConnected()||k.getSourceBlock().getRootBlock()!==t&&(r.isSuperior()?k.bumpAwayFrom(r):r.bumpAwayFrom(k))}}},U.BlockSvg.prototype.scheduleSnapAndBump=function(){var t=this,e=(0,f.getGroup)();setTimeout(function(){(0,f.setGroup)(e),t.snapToGrid(),(0,f.setGroup)(!1)},l.module$exports$Blockly$internalConstants.BUMP_DELAY/2),setTimeout(function(){(0,f.setGroup)(e),t.bumpNeighbours(),(0,f.setGroup)(!1)},l.module$exports$Blockly$internalConstants.BUMP_DELAY)},U.BlockSvg.prototype.positionNearConnection=function(t,e){t.type!==l.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT&&t.type!==l.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE||this.moveBy(e.x-t.x,e.y-t.y)},U.BlockSvg.prototype.getParent=function(){return U.BlockSvg.superClass_.getParent.call(this)},U.BlockSvg.prototype.getRootBlock=function(){return U.BlockSvg.superClass_.getRootBlock.call(this)},U.BlockSvg.prototype.render=function(t){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,(0,s.startTextWidthCache)(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),!1!==t){var e=this.getParent();e?e.render(!0):this.workspace.resizeContents()}(0,s.stopTextWidthCache)(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}},U.BlockSvg.prototype.updateMarkers_=function(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(Ve.MarkerManager.LOCAL_MARKER).draw()},U.BlockSvg.prototype.updateConnectionLocations_=function(){var t=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(t),this.outputConnection&&this.outputConnection.moveToOffset(t);for(var e=0;e<this.inputList.length;e++){var o=this.inputList[e].connection;o&&(o.moveToOffset(t),o.isConnected()&&o.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(t),this.nextConnection.isConnected()&&this.nextConnection.tighten())},U.BlockSvg.prototype.setCursorSvg=function(t){this.pathObject.setCursorSvg(t)},U.BlockSvg.prototype.setMarkerSvg=function(t){this.pathObject.setMarkerSvg(t)},U.BlockSvg.prototype.getHeightWidth=function(){var t=this.height,e=this.width,o=this.getNextBlock();if(o){o=o.getHeightWidth();var r=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;t+=o.height-r,e=Math.max(e,o.width)}return{height:t,width:e}},U.BlockSvg.prototype.fadeForReplacement=function(t){this.pathObject.updateReplacementFade(t)},U.BlockSvg.prototype.highlightShapeForInput=function(t,e){this.pathObject.updateShapeForInputHighlight(t,e)};var ze={ConnectionDB:function(t){this.connections_=[],this.connectionChecker_=t}};ze.ConnectionDB.prototype.addConnection=function(t,e){e=this.calculateIndexForYPos_(e),this.connections_.splice(e,0,t)},ze.ConnectionDB.prototype.findIndexOfConnection_=function(t,e){if(!this.connections_.length)return-1;var o=this.calculateIndexForYPos_(e);if(o>=this.connections_.length)return-1;e=t.y;for(var r=o;0<=r&&this.connections_[r].y===e;){if(this.connections_[r]===t)return r;r--}for(r=o;r<this.connections_.length&&this.connections_[r].y===e;){if(this.connections_[r]===t)return r;r++}return-1},ze.ConnectionDB.prototype.calculateIndexForYPos_=function(t){if(!this.connections_.length)return 0;for(var e=0,o=this.connections_.length;e<o;){var r=Math.floor((e+o)/2);if(this.connections_[r].y<t)e=r+1;else{if(!(this.connections_[r].y>t)){e=r;break}o=r}}return e},ze.ConnectionDB.prototype.removeConnection=function(t,e){if(-1===(t=this.findIndexOfConnection_(t,e)))throw Error("Unable to find connection in connectionDB.");this.connections_.splice(t,1)},ze.ConnectionDB.prototype.getNeighbours=function(t,e){function o(j){var Et=c-r[j].x,le=h-r[j].y;return Math.sqrt(Et*Et+le*le)<=e&&G.push(r[j]),le<e}var r=this.connections_,c=t.x,h=t.y;t=0;for(var k=r.length-2,C=k;t<C;)r[C].y<h?t=C:k=C,C=Math.floor((t+k)/2);var G=[];if(k=t=C,r.length){for(;0<=t&&o(t);)t--;do{k++}while(k<r.length&&o(k))}return G},ze.ConnectionDB.prototype.isInYRange_=function(t,e,o){return Math.abs(this.connections_[t].y-e)<=o},ze.ConnectionDB.prototype.searchForClosest=function(t,e,o){if(!this.connections_.length)return{connection:null,radius:e};var r=t.y,c=t.x;t.x=c+o.x,t.y=r+o.y;var h=this.calculateIndexForYPos_(t.y);o=null;for(var C,k=e,G=h-1;0<=G&&this.isInYRange_(G,t.y,e);)this.connectionChecker_.canConnect(t,C=this.connections_[G],!0,k)&&(o=C,k=C.distanceFrom(t)),G--;for(;h<this.connections_.length&&this.isInYRange_(h,t.y,e);)this.connectionChecker_.canConnect(t,C=this.connections_[h],!0,k)&&(o=C,k=C.distanceFrom(t)),h++;return t.x=c,t.y=r,{connection:o,radius:k}},ze.ConnectionDB.init=function(t){var e=[];return e[l.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE]=new ze.ConnectionDB(t),e[l.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE]=new ze.ConnectionDB(t),e[l.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT]=new ze.ConnectionDB(t),e[l.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT]=new ze.ConnectionDB(t),e};var Qo={ThemeManager:function(t,e){this.workspace_=t,this.theme_=e,this.subscribedWorkspaces_=[],this.componentDB_=Object.create(null)}};Qo.ThemeManager.prototype.getTheme=function(){return this.theme_},Qo.ThemeManager.prototype.setTheme=function(t){var o,e=this.theme_;for(this.theme_=t,(t=this.workspace_.getInjectionDiv())&&(e&&(0,s.removeClass)(t,e.getClassName()),(0,s.addClass)(t,this.theme_.getClassName())),e=0;t=this.subscribedWorkspaces_[e];e++)t.refreshTheme();for(e=0,t=Object.keys(this.componentDB_);o=t[e];e++)for(var c,r=0;c=this.componentDB_[o][r];r++){var h=c.element;c=c.propertyName;var k=this.theme_&&this.theme_.getComponentStyle(o);h.style[c]=k||""}for(t=(e=_.makeIterator(this.subscribedWorkspaces_)).next();!t.done;t=e.next())t.value.hideChaff()},Qo.ThemeManager.prototype.subscribeWorkspace=function(t){this.subscribedWorkspaces_.push(t)},Qo.ThemeManager.prototype.unsubscribeWorkspace=function(t){if(!Je_removeElem(this.subscribedWorkspaces_,t))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")},Qo.ThemeManager.prototype.subscribe=function(t,e,o){this.componentDB_[e]||(this.componentDB_[e]=[]),this.componentDB_[e].push({element:t,propertyName:o}),e=this.theme_&&this.theme_.getComponentStyle(e),t.style[o]=e||""},Qo.ThemeManager.prototype.unsubscribe=function(t){if(t)for(var r,e=Object.keys(this.componentDB_),o=0;r=e[o];o++){for(var c=this.componentDB_[r],h=c.length-1;0<=h;h--)c[h].element===t&&c.splice(h,1);this.componentDB_[r].length||delete this.componentDB_[r]}},Qo.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null};var Gt={TouchGesture:function(t,e){Gt.TouchGesture.superClass_.constructor.call(this,t,e),this.isMultiTouch_=!1,this.cachedPoints_=Object.create(null),this.startDistance_=this.previousScale_=0,this.isPinchZoomEnabled_=this.onStartWrapper_=null}};(0,l.module$exports$Blockly$utils$object.inherits)(Gt.TouchGesture,gt.Gesture),Gt.TouchGesture.ZOOM_IN_MULTIPLIER=5,Gt.TouchGesture.ZOOM_OUT_MULTIPLIER=6,Gt.TouchGesture.prototype.doStart=function(t){this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,Gt.TouchGesture.superClass_.doStart.call(this,t),!this.isEnding_&&(0,tt.isTouchEvent)(t)&&this.handleTouchStart(t)},Gt.TouchGesture.prototype.bindMouseEvents=function(t){this.onStartWrapper_=(0,g.conditionalBind)(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=(0,g.conditionalBind)(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=(0,g.conditionalBind)(document,"mouseup",null,this.handleUp.bind(this),!0),t.preventDefault(),t.stopPropagation()},Gt.TouchGesture.prototype.handleStart=function(t){!this.isDragging()&&(0,tt.isTouchEvent)(t)&&(this.handleTouchStart(t),this.isMultiTouch()&&(0,tt.longStop)())},Gt.TouchGesture.prototype.handleMove=function(t){this.isDragging()?(0,tt.shouldHandleEvent)(t)&&Gt.TouchGesture.superClass_.handleMove.call(this,t):this.isMultiTouch()?((0,tt.isTouchEvent)(t)&&this.handleTouchMove(t),(0,tt.longStop)()):Gt.TouchGesture.superClass_.handleMove.call(this,t)},Gt.TouchGesture.prototype.handleUp=function(t){(0,tt.isTouchEvent)(t)&&!this.isDragging()&&this.handleTouchEnd(t),!this.isMultiTouch()||this.isDragging()?(0,tt.shouldHandleEvent)(t)&&Gt.TouchGesture.superClass_.handleUp.call(this,t):(t.preventDefault(),t.stopPropagation(),this.dispose())},Gt.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},Gt.TouchGesture.prototype.dispose=function(){Gt.TouchGesture.superClass_.dispose.call(this),this.onStartWrapper_&&(0,g.unbind)(this.onStartWrapper_)},Gt.TouchGesture.prototype.handleTouchStart=function(t){var e=(0,tt.getTouchIdentifierFromEvent)(t);this.cachedPoints_[e]=this.getTouchPoint(t),2===(e=Object.keys(this.cachedPoints_)).length&&(this.startDistance_=N.Coordinate.distance(this.cachedPoints_[e[0]],this.cachedPoints_[e[1]]),this.isMultiTouch_=!0,t.preventDefault())},Gt.TouchGesture.prototype.handleTouchMove=function(t){var e=(0,tt.getTouchIdentifierFromEvent)(t);this.cachedPoints_[e]=this.getTouchPoint(t),e=Object.keys(this.cachedPoints_),this.isPinchZoomEnabled_&&2===e.length?this.handlePinch_(t):Gt.TouchGesture.superClass_.handleMove.call(this,t)},Gt.TouchGesture.prototype.handlePinch_=function(t){var e=Object.keys(this.cachedPoints_);if(e=N.Coordinate.distance(this.cachedPoints_[e[0]],this.cachedPoints_[e[1]])/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){var o=e-this.previousScale_;o=0<o?o*Gt.TouchGesture.ZOOM_IN_MULTIPLIER:o*Gt.TouchGesture.ZOOM_OUT_MULTIPLIER;var r=this.startWorkspace_,c=(0,g.mouseToSvg)(t,r.getParentSvg(),r.getInverseScreenCTM());r.zoom(c.x,c.y,o)}this.previousScale_=e,t.preventDefault()},Gt.TouchGesture.prototype.handleTouchEnd=function(t){t=(0,tt.getTouchIdentifierFromEvent)(t),this.cachedPoints_[t]&&delete this.cachedPoints_[t],2>Object.keys(this.cachedPoints_).length&&(this.cachedPoints_=Object.create(null),this.previousScale_=0)},Gt.TouchGesture.prototype.getTouchPoint=function(t){return this.startWorkspace_?new N.Coordinate(t.changedTouches?t.changedTouches[0].pageX:t.pageX,t.changedTouches?t.changedTouches[0].pageY:t.pageY):null};var vn={WorkspaceAudio:function(t){this.parentWorkspace_=t,this.SOUNDS_=Object.create(null)}};vn.WorkspaceAudio.prototype.lastSound_=null,vn.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},vn.WorkspaceAudio.prototype.load=function(t,e){if(t.length){try{var o=new l.module$exports$Blockly$utils$global.globalThis.Audio}catch{return}for(var r,c=0;c<t.length;c++){var h=t[c],k=h.match(/\.(\w+)$/);if(k&&o.canPlayType("audio/"+k[1])){r=new l.module$exports$Blockly$utils$global.globalThis.Audio(h);break}}r&&r.play&&(this.SOUNDS_[e]=r)}},vn.WorkspaceAudio.prototype.preload=function(){for(var t in this.SOUNDS_){var e=this.SOUNDS_[t];e.volume=.01;var o=e.play();if(void 0!==o?o.then(e.pause).catch(function(){}):e.pause(),ot.IPAD||ot.IPHONE)break}},vn.WorkspaceAudio.prototype.play=function(t,e){var o=this.SOUNDS_[t];o?(t=new Date,null!==this.lastSound_&&t-this.lastSound_<l.module$exports$Blockly$internalConstants.SOUND_LIMIT||(this.lastSound_=t,(o=ot.IPAD||ot.ANDROID?o:o.cloneNode()).volume=void 0===e?1:e,o.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(t,e)};var tn={ThemeChange:function(t,e){tn.ThemeChange.superClass_.constructor.call(this,e),this.themeName=t}};(0,l.module$exports$Blockly$utils$object.inherits)(tn.ThemeChange,We.UiBase),tn.ThemeChange.prototype.type=f.THEME_CHANGE,tn.ThemeChange.prototype.toJson=function(){var t=tn.ThemeChange.superClass_.toJson.call(this);return t.themeName=this.themeName,t},tn.ThemeChange.prototype.fromJson=function(t){tn.ThemeChange.superClass_.fromJson.call(this,t),this.themeName=t.themeName},(0,x.register)(x.Type.EVENT,f.THEME_CHANGE,tn.ThemeChange);var en={ViewportChange:function(t,e,o,r,c){en.ViewportChange.superClass_.constructor.call(this,r),this.viewTop=t,this.viewLeft=e,this.scale=o,this.oldScale=c}};(0,l.module$exports$Blockly$utils$object.inherits)(en.ViewportChange,We.UiBase),en.ViewportChange.prototype.type=f.VIEWPORT_CHANGE,en.ViewportChange.prototype.toJson=function(){var t=en.ViewportChange.superClass_.toJson.call(this);return t.viewTop=this.viewTop,t.viewLeft=this.viewLeft,t.scale=this.scale,t.oldScale=this.oldScale,t},en.ViewportChange.prototype.fromJson=function(t){en.ViewportChange.superClass_.fromJson.call(this,t),this.viewTop=t.viewTop,this.viewLeft=t.viewLeft,this.scale=t.scale,this.oldScale=t.oldScale},(0,x.register)(x.Type.EVENT,f.VIEWPORT_CHANGE,en.ViewportChange);var Ie={MetricsManager:function(t){this.workspace_=t}};Ie.MetricsManager.prototype.getDimensionsPx_=function(t){var e=0,o=0;return t&&(e=t.getWidth(),o=t.getHeight()),new et.Size(e,o)},Ie.MetricsManager.prototype.getFlyoutMetrics=function(t){return{width:(t=this.getDimensionsPx_(this.workspace_.getFlyout(t))).width,height:t.height,position:this.workspace_.toolboxPosition}},Ie.MetricsManager.prototype.getToolboxMetrics=function(){var t=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:t.width,height:t.height,position:this.workspace_.toolboxPosition}},Ie.MetricsManager.prototype.getSvgMetrics=function(){return this.workspace_.getCachedParentSvgSize()},Ie.MetricsManager.prototype.getAbsoluteMetrics=function(){var t=0,e=this.getToolboxMetrics(),o=this.getFlyoutMetrics(!0),r=!!this.workspace_.getToolbox(),c=!!this.workspace_.getFlyout(!0),h=r?e.position:o.position,k=h===st.Position.LEFT;return h=h===st.Position.TOP,r&&k?t=e.width:c&&k&&(t=o.width),k=0,r&&h?k=e.height:c&&h&&(k=o.height),{top:k,left:t}},Ie.MetricsManager.prototype.getViewMetrics=function(t){t=t?this.workspace_.scale:1;var e=this.getSvgMetrics(),o=this.getToolboxMetrics(),r=this.getFlyoutMetrics(!0),c=this.workspace_.getToolbox()?o.position:r.position;return this.workspace_.getToolbox()?c===st.Position.TOP||c===st.Position.BOTTOM?e.height-=o.height:(c===st.Position.LEFT||c===st.Position.RIGHT)&&(e.width-=o.width):this.workspace_.getFlyout(!0)&&(c===st.Position.TOP||c===st.Position.BOTTOM?e.height-=r.height:(c===st.Position.LEFT||c===st.Position.RIGHT)&&(e.width-=r.width)),{height:e.height/t,width:e.width/t,top:-this.workspace_.scrollY/t,left:-this.workspace_.scrollX/t}},Ie.MetricsManager.prototype.getContentMetrics=function(t){t=t?1:this.workspace_.scale;var e=this.workspace_.getBlocksBoundingBox();return{height:(e.bottom-e.top)*t,width:(e.right-e.left)*t,top:e.top*t,left:e.left*t}},Ie.MetricsManager.prototype.hasFixedEdges=function(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()},Ie.MetricsManager.prototype.getComputedFixedEdges_=function(t){if(!this.hasFixedEdges())return{};var e=this.workspace_.isMovableHorizontally(),o=this.workspace_.isMovableVertically();t=t||this.getViewMetrics(!1);var r={};return o||(r.top=t.top,r.bottom=t.top+t.height),e||(r.left=t.left,r.right=t.left+t.width),r},Ie.MetricsManager.prototype.getPaddedContent_=function(t,e){var o=e.top+e.height,r=e.left+e.width,c=t.width,h=c/2,k=(t=t.height)/2;return{top:Math.min(e.top-k,o-t),bottom:Math.max(o+k,e.top+t),left:Math.min(e.left-h,r-c),right:Math.max(r+h,e.left+c)}},Ie.MetricsManager.prototype.getScrollMetrics=function(t,e,o){t=t?this.workspace_.scale:1,e=e||this.getViewMetrics(!1);var r=o||this.getContentMetrics();o=this.getComputedFixedEdges_(e),e=this.getPaddedContent_(e,r);var c=void 0!==o.left?o.left:e.left;return{top:(r=void 0!==o.top?o.top:e.top)/t,left:c/t,width:((void 0!==o.right?o.right:e.right)-c)/t,height:((void 0!==o.bottom?o.bottom:e.bottom)-r)/t}},Ie.MetricsManager.prototype.getUiMetrics=function(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}},Ie.MetricsManager.prototype.getMetrics=function(){var t=this.getToolboxMetrics(),e=this.getFlyoutMetrics(!0),o=this.getSvgMetrics(),r=this.getAbsoluteMetrics(),c=this.getViewMetrics(),h=this.getContentMetrics(),k=this.getScrollMetrics(!1,c,h);return{contentHeight:h.height,contentWidth:h.width,contentTop:h.top,contentLeft:h.left,scrollHeight:k.height,scrollWidth:k.width,scrollTop:k.top,scrollLeft:k.left,viewHeight:c.height,viewWidth:c.width,viewTop:c.top,viewLeft:c.left,absoluteTop:r.top,absoluteLeft:r.left,svgHeight:o.height,svgWidth:o.width,toolboxWidth:t.width,toolboxHeight:t.height,toolboxPosition:t.position,flyoutWidth:e.width,flyoutHeight:e.height}},(0,x.register)(x.Type.METRICS_MANAGER,x.DEFAULT,Ie.MetricsManager);var A={WorkspaceSvg:function(t,e,o){A.WorkspaceSvg.superClass_.constructor.call(this,t),this.metricsManager_=new((0,x.getClassFromOptions)(x.Type.METRICS_MANAGER,t,!0))(this),this.getMetrics=t.getMetrics||this.metricsManager_.getMetrics.bind(this.metricsManager_),this.setMetrics=t.setMetrics||A.WorkspaceSvg.setTopLevelWorkspaceMetrics_,this.componentManager_=new At.ComponentManager,this.connectionDBList=ze.ConnectionDB.init(this.connectionChecker),e&&(this.blockDragSurface_=e),o&&(this.workspaceDragSurface_=o),this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_&&(0,dt.is3dSupported)(),this.highlightedBlocks_=[],this.audioManager_=new vn.WorkspaceAudio(t.parentWorkspace),this.grid_=this.options.gridPattern?new re.Grid(this.options.gridPattern,t.gridOptions):null,this.markerManager_=new Ve.MarkerManager(this),this.toolboxCategoryCallbacks_=Object.create(null),this.flyoutButtonCallbacks_=Object.create(null),(t=l.module$exports$Blockly$Variables)&&t.flyoutCategory&&this.registerToolboxCategoryCallback(t.CATEGORY_NAME,t.flyoutCategory),(t=Rn)&&t.flyoutCategory&&this.registerToolboxCategoryCallback(t.CATEGORY_NAME,t.flyoutCategory),(t=l.module$exports$Blockly$Procedures)&&t.flyoutCategory&&(this.registerToolboxCategoryCallback(t.CATEGORY_NAME,t.flyoutCategory),this.addChangeListener(t.mutatorOpenListener)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new Qo.ThemeManager(this,this.options.theme||Vn.Classic),this.themeManager_.subscribeWorkspace(this),this.renderer_=(0,xt.init)(this.options.renderer||"geras",this.getTheme(),this.options.rendererOverrides),this.cachedParentSvg_=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements_=[],this.dragTargetAreas_=[],this.cachedParentSvgSize_=new et.Size(0,0)}};(0,l.module$exports$Blockly$utils$object.inherits)(A.WorkspaceSvg,Q.Workspace),A.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,A.WorkspaceSvg.prototype.rendered=!0,A.WorkspaceSvg.prototype.isVisible_=!0,A.WorkspaceSvg.prototype.isFlyout=!1,A.WorkspaceSvg.prototype.isMutator=!1,A.WorkspaceSvg.prototype.resizesEnabled_=!0,A.WorkspaceSvg.prototype.scrollX=0,A.WorkspaceSvg.prototype.scrollY=0,A.WorkspaceSvg.prototype.startScrollX=0,A.WorkspaceSvg.prototype.startScrollY=0,A.WorkspaceSvg.prototype.dragDeltaXY_=null,A.WorkspaceSvg.prototype.scale=1,A.WorkspaceSvg.prototype.oldScale_=1,A.WorkspaceSvg.prototype.oldTop_=0,A.WorkspaceSvg.prototype.oldLeft_=0,A.WorkspaceSvg.prototype.trashcan=null,A.WorkspaceSvg.prototype.scrollbar=null,A.WorkspaceSvg.prototype.flyout_=null,A.WorkspaceSvg.prototype.toolbox_=null,A.WorkspaceSvg.prototype.currentGesture_=null,A.WorkspaceSvg.prototype.blockDragSurface_=null,A.WorkspaceSvg.prototype.workspaceDragSurface_=null,A.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,A.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,A.WorkspaceSvg.prototype.injectionDiv_=null,A.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,A.WorkspaceSvg.prototype.targetWorkspace=null,A.WorkspaceSvg.prototype.inverseScreenCTM_=null,A.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0,A.WorkspaceSvg.prototype.getMarkerManager=function(){return this.markerManager_},A.WorkspaceSvg.prototype.getMetricsManager=function(){return this.metricsManager_},A.WorkspaceSvg.prototype.setMetricsManager=function(t){this.metricsManager_=t,this.getMetrics=this.metricsManager_.getMetrics.bind(this.metricsManager_)},A.WorkspaceSvg.prototype.getComponentManager=function(){return this.componentManager_},A.WorkspaceSvg.prototype.setCursorSvg=function(t){this.markerManager_.setCursorSvg(t)},A.WorkspaceSvg.prototype.setMarkerSvg=function(t){this.markerManager_.setMarkerSvg(t)},A.WorkspaceSvg.prototype.getMarker=function(t){return this.markerManager_?this.markerManager_.getMarker(t):null},A.WorkspaceSvg.prototype.getCursor=function(){return this.markerManager_?this.markerManager_.getCursor():null},A.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_},A.WorkspaceSvg.prototype.getThemeManager=function(){return this.themeManager_},A.WorkspaceSvg.prototype.getTheme=function(){return this.themeManager_.getTheme()},A.WorkspaceSvg.prototype.setTheme=function(t){t||(t=Vn.Classic),this.themeManager_.setTheme(t)},A.WorkspaceSvg.prototype.refreshTheme=function(){this.svgGroup_&&this.renderer_.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(e){return!!e.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);var t=new((0,f.get)(f.THEME_CHANGE))(this.getTheme().name,this.id);(0,f.fire)(t)},A.WorkspaceSvg.prototype.updateBlockStyles_=function(t){for(var o,e=0;o=t[e];e++){var r=o.getStyleName();r&&(o.setStyle(r),o.mutator&&o.mutator.updateBlockStyle())}},A.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var t=this.getParentSvg().getScreenCTM();t&&(this.inverseScreenCTM_=t.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_},A.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0},A.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_},A.WorkspaceSvg.prototype.getSvgXY=function(t){var e=0,o=0,r=1;((0,s.containsNode)(this.getCanvas(),t)||(0,s.containsNode)(this.getBubbleCanvas(),t))&&(r=this.scale);do{var c=(0,dt.getRelativeXY)(t);(t===this.getCanvas()||t===this.getBubbleCanvas())&&(r=1),e+=c.x*r,o+=c.y*r,t=t.parentNode}while(t&&t!==this.getParentSvg());return new N.Coordinate(e,o)},A.WorkspaceSvg.prototype.getCachedParentSvgSize=function(){var t=this.cachedParentSvgSize_;return new et.Size(t.width,t.height)},A.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return(0,dt.getInjectionDivXY)(this.getCanvas())},A.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var t=this.svgGroup_;t;){if(-1!==(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=t;break}t=t.parentNode}return this.injectionDiv_},A.WorkspaceSvg.prototype.getBlockCanvas=function(){return this.svgBlockCanvas_},A.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(t){this.resizeHandlerWrapper_=t},A.WorkspaceSvg.prototype.createDom=function(t){return this.svgGroup_=(0,s.createSvgElement)(B.Svg.G,{class:"blocklyWorkspace"},null),t&&(this.svgBackground_=(0,s.createSvgElement)(B.Svg.RECT,{height:"100%",width:"100%",class:t},this.svgGroup_),"blocklyMainBackground"===t&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=(0,s.createSvgElement)(B.Svg.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=(0,s.createSvgElement)(B.Svg.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||((0,g.conditionalBind)(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),document.body.addEventListener("wheel",function(){}),(0,g.conditionalBind)(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new((0,x.getClassFromOptions)(x.Type.TOOLBOX,this.options,!0))(this)),this.grid_&&this.grid_.update(this.scale),this.recordDragTargets(),(t=(0,x.getClassFromOptions)(x.Type.CURSOR,this.options))&&this.markerManager_.setCursor(new t),this.renderer_.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_},A.WorkspaceSvg.prototype.dispose=function(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&((0,s.removeNode)(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.renderer_.dispose(),this.markerManager_&&(this.markerManager_.dispose(),this.markerManager_=null),A.WorkspaceSvg.superClass_.dispose.call(this),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null)),this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null,!this.options.parentWorkspace){var t=this.getParentSvg();t&&t.parentNode&&(0,s.removeNode)(t.parentNode)}this.resizeHandlerWrapper_&&((0,g.unbind)(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},A.WorkspaceSvg.prototype.newBlock=function(t,e){return new U.BlockSvg(this,t,e)},A.WorkspaceSvg.prototype.addTrashcan=function(){var t=Ct.Trashcan;if(!t)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new t(this),t=this.trashcan.createDom(),this.svgGroup_.insertBefore(t,this.svgBlockCanvas_)},A.WorkspaceSvg.prototype.addZoomControls=function(){var t=ne.ZoomControls;if(!t)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new t(this),t=this.zoomControls_.createDom(),this.svgGroup_.appendChild(t)},A.WorkspaceSvg.prototype.addFlyout=function(t){var e=new Ae.Options({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return e.toolboxPosition=this.options.toolboxPosition,this.flyout_=this.horizontalLayout?new((0,x.getClassFromOptions)(x.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(e):new((0,x.getClassFromOptions)(x.Type.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(e),this.flyout_.autoClose=!1,this.flyout_.getWorkspace().setVisible(!0),this.flyout_.createDom(t)},A.WorkspaceSvg.prototype.getFlyout=function(t){return this.flyout_||t?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null},A.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},A.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDragTargets()},A.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},A.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position();for(var c,t=this.componentManager_.getComponents(At.ComponentManager.Capability.POSITIONABLE,!0),e=this.getMetricsManager().getUiMetrics(),o=[],r=0;c=t[r];r++)c.position(e,o),(c=c.getBoundingRectangle())&&o.push(c);this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},A.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var t=(0,dt.getDocumentScroll)();N.Coordinate.equals(this.lastRecordedPageScroll_,t)||(this.lastRecordedPageScroll_=t,this.updateScreenCalculations_())},A.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},A.WorkspaceSvg.prototype.setCachedParentSvgSize=function(t,e){var o=this.getParentSvg();t&&(this.cachedParentSvgSize_.width=t,o.cachedWidth_=t),e&&(this.cachedParentSvgSize_.height=e,o.cachedHeight_=e)},A.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},A.WorkspaceSvg.prototype.getParentSvg=function(){if(!this.cachedParentSvg_)for(var t=this.svgGroup_;t;){if("svg"===t.tagName){this.cachedParentSvg_=t;break}t=t.parentNode}return this.cachedParentSvg_},A.WorkspaceSvg.prototype.maybeFireViewportChangeEvent=function(){if((0,f.isEnabled)()){var t=this.scale,e=-this.scrollY,o=-this.scrollX;if(!(t===this.oldScale_&&1>Math.abs(e-this.oldTop_)&&1>Math.abs(o-this.oldLeft_))){var r=new((0,f.get)(f.VIEWPORT_CHANGE))(e,o,t,this.id,this.oldScale_);this.oldScale_=t,this.oldTop_=e,this.oldLeft_=o,(0,f.fire)(r)}}},A.WorkspaceSvg.prototype.translate=function(t,e){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(t,e);else{var o="translate("+t+","+e+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",o),this.svgBubbleCanvas_.setAttribute("transform",o)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(t,e,this.scale),this.grid_&&this.grid_.moveTo(t,e),this.maybeFireViewportChangeEvent()},A.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var t=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),this.svgBlockCanvas_.setAttribute("transform",t="translate("+t.x+","+t.y+") scale("+this.scale+")"),this.svgBubbleCanvas_.setAttribute("transform",t)}},A.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var t=this.svgBlockCanvas_.previousSibling,e=parseInt(this.getParentSvg().getAttribute("width"),10),o=parseInt(this.getParentSvg().getAttribute("height"),10),r=(0,dt.getRelativeXY)(this.getCanvas());this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),t,e,o,this.scale),this.workspaceDragSurface_.translateSurface(r.x,r.y)}},A.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},A.WorkspaceSvg.prototype.getWidth=function(){var t=this.getMetrics();return t?t.viewWidth/this.scale:0},A.WorkspaceSvg.prototype.setVisible=function(t){if(this.isVisible_=t,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(t),this.getFlyout()&&this.getFlyout().setContainerVisible(t),this.getParentSvg().style.display=t?"block":"none",this.toolbox_&&this.toolbox_.setVisible(t),t){for(var e=(t=this.getAllBlocks(!1)).length-1;0<=e;e--)t[e].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else this.hideChaff(!0)},A.WorkspaceSvg.prototype.render=function(){for(var t=this.getAllBlocks(!1),e=t.length-1;0<=e;e--)t[e].render(!1);if(this.currentGesture_)for(t=this.currentGesture_.getInsertionMarkers(),e=0;e<t.length;e++)t[e].render(!1);this.markerManager_.updateMarkers()},A.WorkspaceSvg.prototype.highlightBlock=function(t,e){if(void 0===e){for(var r,o=0;r=this.highlightedBlocks_[o];o++)r.setHighlighted(!1);this.highlightedBlocks_.length=0}(t=t?this.getBlockById(t):null)&&((e=void 0===e||e)?-1===this.highlightedBlocks_.indexOf(t)&&this.highlightedBlocks_.push(t):Je_removeElem(this.highlightedBlocks_,t),t.setHighlighted(e))},A.WorkspaceSvg.prototype.paste=function(t){this.rendered&&(t.type||t.tagName)&&(this.currentGesture_&&this.currentGesture_.cancel(),t.type?this.pasteBlock_(null,t):"comment"===t.tagName.toLowerCase()?this.pasteWorkspaceComment_(t):this.pasteBlock_(t,null))},A.WorkspaceSvg.prototype.pasteBlock_=function(t,e){(0,f.disable)();try{var o=0,r=0;if(t){var c=(0,l.module$exports$Blockly$Xml.domToBlock)(t,this);o=parseInt(t.getAttribute("x"),10),this.RTL&&(o=-o),r=parseInt(t.getAttribute("y"),10)}else e&&(c=(0,ye.append)(e,this),o=e.x||10,this.RTL&&(o=this.getWidth()-o),r=e.y||10);if(!isNaN(o)&&!isNaN(r)){do{var h=!1,k=this.getAllBlocks(!1);for(t=0,e=void 0;e=k[t];t++){var C=e.getRelativeToSurfaceXY();if(1>=Math.abs(o-C.x)&&1>=Math.abs(r-C.y)){h=!0;break}}if(!h){var G=c.getConnections_(!1);for(t=0,e=void 0;e=G[t];t++)if(e.closest(l.module$exports$Blockly$internalConstants.SNAP_RADIUS,new N.Coordinate(o,r)).connection){h=!0;break}}h&&(o=this.RTL?o-l.module$exports$Blockly$internalConstants.SNAP_RADIUS:o+l.module$exports$Blockly$internalConstants.SNAP_RADIUS,r+=2*l.module$exports$Blockly$internalConstants.SNAP_RADIUS)}while(h);c.moveTo(new N.Coordinate(o,r))}}finally{(0,f.enable)()}(0,f.isEnabled)()&&!c.isShadow()&&(0,f.fire)(new((0,f.get)(f.CREATE))(c)),c.select()},A.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(t){(0,f.disable)();try{var e=it.fromXml(t,this),o=parseInt(t.getAttribute("x"),10),r=parseInt(t.getAttribute("y"),10);isNaN(o)||isNaN(r)||(this.RTL&&(o=-o),e.moveBy(o+50,r+50))}finally{(0,f.enable)()}(0,f.isEnabled)()&&Nt.fireCreateEvent(e),e.select()},A.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var t=this.isFlyout?this.targetWorkspace:this;t&&!t.currentGesture_&&t.toolbox_&&t.toolbox_.getFlyout()&&t.toolbox_.refreshSelection()},A.WorkspaceSvg.prototype.renameVariableById=function(t,e){A.WorkspaceSvg.superClass_.renameVariableById.call(this,t,e),this.refreshToolboxSelection()},A.WorkspaceSvg.prototype.deleteVariableById=function(t){A.WorkspaceSvg.superClass_.deleteVariableById.call(this,t),this.refreshToolboxSelection()},A.WorkspaceSvg.prototype.createVariable=function(t,e,o){return t=A.WorkspaceSvg.superClass_.createVariable.call(this,t,e,o),this.refreshToolboxSelection(),t},A.WorkspaceSvg.prototype.recordDeleteAreas=function(){mt.deprecation.warn("WorkspaceSvg.prototype.recordDeleteAreas","June 2021","June 2022","WorkspaceSvg.prototype.recordDragTargets"),this.recordDragTargets()},A.WorkspaceSvg.prototype.recordDragTargets=function(){var t=this.componentManager_.getComponents(At.ComponentManager.Capability.DRAG_TARGET,!0);this.dragTargetAreas_=[];for(var o,e=0;o=t[e];e++){var r=o.getClientRect();r&&this.dragTargetAreas_.push({component:o,clientRect:r})}},A.WorkspaceSvg.prototype.getDragTarget=function(t){for(var o,e=0;o=this.dragTargetAreas_[e];e++)if(o.clientRect.contains(t.clientX,t.clientY))return o.component;return null},A.WorkspaceSvg.prototype.onMouseDown_=function(t){var e=this.getGesture(t);e&&e.handleWsStart(t,this)},A.WorkspaceSvg.prototype.startDrag=function(t,e){(t=(0,g.mouseToSvg)(t,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,t.y/=this.scale,this.dragDeltaXY_=N.Coordinate.difference(e,t)},A.WorkspaceSvg.prototype.moveDrag=function(t){return(t=(0,g.mouseToSvg)(t,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,t.y/=this.scale,N.Coordinate.sum(this.dragDeltaXY_,t)},A.WorkspaceSvg.prototype.isDragging=function(){return null!==this.currentGesture_&&this.currentGesture_.isDragging()},A.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag},A.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},A.WorkspaceSvg.prototype.isMovableHorizontally=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollHorizontally())},A.WorkspaceSvg.prototype.isMovableVertically=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollVertically())},A.WorkspaceSvg.prototype.onMouseWheel_=function(t){if(gt.Gesture.inProgress())t.preventDefault(),t.stopPropagation();else{var e=this.options.zoomOptions&&this.options.zoomOptions.wheel,o=this.options.moveOptions&&this.options.moveOptions.wheel;if(e||o){var r=(0,g.getScrollDeltaPixels)(t);if(ot.MAC)var c=t.metaKey;e&&(t.ctrlKey||c||!o)?(r=-r.y/50,e=(0,g.mouseToSvg)(t,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(e.x,e.y,r)):(e=this.scrollX-r.x,o=this.scrollY-r.y,t.shiftKey&&!r.x&&(e=this.scrollX-r.y,o=this.scrollY),this.scroll(e,o)),t.preventDefault()}}},A.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var t=this.getTopBoundedElements();if(!t.length)return new yt.Rect(0,0,0,0);for(var e=t[0].getBoundingRectangle(),o=1;o<t.length;o++){var r=t[o];r.isInsertionMarker&&r.isInsertionMarker()||((r=r.getBoundingRectangle()).top<e.top&&(e.top=r.top),r.bottom>e.bottom&&(e.bottom=r.bottom),r.left<e.left&&(e.left=r.left),r.right>e.right&&(e.right=r.right))}return e},A.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),(0,f.setGroup)(!0);for(var r,t=this.getTopBlocks(!0),e=0,o=0;r=t[o];o++)if(r.isMovable()){var c=r.getRelativeToSurfaceXY();r.moveBy(-c.x,e-c.y),r.snapToGrid(),e=r.getRelativeToSurfaceXY().y+r.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT}(0,f.setGroup)(!1),this.setResizesEnabled(!0)},A.WorkspaceSvg.prototype.showContextMenu=function(t){if(!this.options.readOnly&&!this.isFlyout){var e=bt.ContextMenuRegistry.registry.getContextMenuOptions(bt.ContextMenuRegistry.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(e,t),(0,l.module$exports$Blockly$ContextMenu.show)(t,e,this.RTL)}},A.WorkspaceSvg.prototype.updateToolbox=function(t){if(t=(0,st.convertToolboxDefToJson)(t)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if((0,st.hasCategories)(t)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=t,this.toolbox_.render(t)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=t,this.flyout_.show(t)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")},A.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():((0,l.module$exports$Blockly$common.setMainWorkspace)(this),this.setBrowserFocus())},A.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch{try{this.getParentSvg().parentNode.setActive()}catch{this.getParentSvg().parentNode.focus({preventScroll:!0})}}},A.WorkspaceSvg.prototype.zoom=function(t,e,o){o=Math.pow(this.options.zoomOptions.scaleSpeed,o);var r=this.scale*o;if(this.scale!==r){r>this.options.zoomOptions.maxScale?o=this.options.zoomOptions.maxScale/this.scale:r<this.options.zoomOptions.minScale&&(o=this.options.zoomOptions.minScale/this.scale);var c=this.getCanvas().getCTM(),h=this.getParentSvg().createSVGPoint();h.x=t,h.y=e,h=h.matrixTransform(c.inverse()),c=c.translate((t=h.x)*(1-o),(e=h.y)*(1-o)).scale(o),this.scrollX=c.e,this.scrollY=c.f,this.setScale(r)}},A.WorkspaceSvg.prototype.zoomCenter=function(t){var e=this.getMetrics();if(this.flyout_){var o=e.svgWidth?e.svgWidth/2:0;e=e.svgHeight?e.svgHeight/2:0}else o=e.viewWidth/2+e.absoluteLeft,e=e.viewHeight/2+e.absoluteTop;this.zoom(o,e,t)},A.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var t=this.getMetrics(),e=t.viewWidth;t=t.viewHeight;var o=this.getBlocksBoundingBox(),r=o.right-o.left;if(o=o.bottom-o.top,r){this.flyout_&&(this.horizontalLayout?(t+=this.flyout_.getHeight(),o+=this.flyout_.getHeight()/this.scale):(e+=this.flyout_.getWidth(),r+=this.flyout_.getWidth()/this.scale)),e/=r,t/=o,(0,f.disable)();try{this.setScale(Math.min(e,t)),this.scrollCenter()}finally{(0,f.enable)()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},A.WorkspaceSvg.prototype.beginCanvasTransition=function(){(0,s.addClass)(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),(0,s.addClass)(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},A.WorkspaceSvg.prototype.endCanvasTransition=function(){(0,s.removeClass)(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),(0,s.removeClass)(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},A.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var t=this.getMetrics(),e=(t.scrollWidth-t.viewWidth)/2,o=(t.scrollHeight-t.viewHeight)/2;this.scroll(e=-e-t.scrollLeft,o=-o-t.scrollTop)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},A.WorkspaceSvg.prototype.centerOnBlock=function(t){if(this.isMovable()){if(t=t?this.getBlockById(t):null){var e=t.getRelativeToSurfaceXY(),o=t.getHeightWidth(),r=this.scale;t=(e.x+(this.RTL?-1:1)*o.width/2)*r,e=(e.y+o.height/2)*r,o=this.getMetrics(),this.scroll(-(t-o.viewWidth/2),-(e-o.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},A.WorkspaceSvg.prototype.setScale=function(t){this.options.zoomOptions.maxScale&&t>this.options.zoomOptions.maxScale?t=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&t<this.options.zoomOptions.minScale&&(t=this.options.zoomOptions.minScale),this.scale=t,this.hideChaff(!1),(t=this.getFlyout(!1))&&t.isVisible()&&(t.reflow(),this.recordDragTargets()),this.grid_&&this.grid_.update(this.scale),t=this.getMetrics(),this.scrollX-=t.absoluteLeft,this.scrollY-=t.absoluteTop,t.viewLeft+=t.absoluteLeft,t.viewTop+=t.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?this.scrollbar.resizeView(t):this.scrollbar.resizeContent(t))},A.WorkspaceSvg.prototype.getScale=function(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale},A.WorkspaceSvg.prototype.scroll=function(t,e){this.hideChaff(!0);var o=this.getMetrics();t=Math.min(t,-o.scrollLeft),e=Math.min(e,-o.scrollTop);var r=o.scrollTop+Math.max(0,o.scrollHeight-o.viewHeight);t=Math.max(t,-(o.scrollLeft+Math.max(0,o.scrollWidth-o.viewWidth))),e=Math.max(e,-r),this.scrollX=t,this.scrollY=e,this.scrollbar&&this.scrollbar.set(-(t+o.scrollLeft),-(e+o.scrollTop),!1),this.translate(t+=o.absoluteLeft,e+=o.absoluteTop)},A.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(t){var e=this.getMetrics();"number"==typeof t.x&&(this.scrollX=-(e.scrollLeft+(e.scrollWidth-e.viewWidth)*t.x)),"number"==typeof t.y&&(this.scrollY=-(e.scrollTop+(e.scrollHeight-e.viewHeight)*t.y)),this.translate(this.scrollX+e.absoluteLeft,this.scrollY+e.absoluteTop)},A.WorkspaceSvg.prototype.getBlockById=function(t){return A.WorkspaceSvg.superClass_.getBlockById.call(this,t)},A.WorkspaceSvg.prototype.getTopBlocks=function(t){return A.WorkspaceSvg.superClass_.getTopBlocks.call(this,t)},A.WorkspaceSvg.prototype.addTopBlock=function(t){this.addTopBoundedElement(t),A.WorkspaceSvg.superClass_.addTopBlock.call(this,t)},A.WorkspaceSvg.prototype.removeTopBlock=function(t){this.removeTopBoundedElement(t),A.WorkspaceSvg.superClass_.removeTopBlock.call(this,t)},A.WorkspaceSvg.prototype.addTopComment=function(t){this.addTopBoundedElement(t),A.WorkspaceSvg.superClass_.addTopComment.call(this,t)},A.WorkspaceSvg.prototype.removeTopComment=function(t){this.removeTopBoundedElement(t),A.WorkspaceSvg.superClass_.removeTopComment.call(this,t)},A.WorkspaceSvg.prototype.addTopBoundedElement=function(t){this.topBoundedElements_.push(t)},A.WorkspaceSvg.prototype.removeTopBoundedElement=function(t){Je_removeElem(this.topBoundedElements_,t)},A.WorkspaceSvg.prototype.getTopBoundedElements=function(){return[].concat(this.topBoundedElements_)},A.WorkspaceSvg.prototype.setResizesEnabled=function(t){var e=!this.resizesEnabled_&&t;this.resizesEnabled_=t,e&&this.resizeContents()},A.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),A.WorkspaceSvg.superClass_.clear.call(this),this.topBoundedElements_=[],this.setResizesEnabled(!0)},A.WorkspaceSvg.prototype.registerButtonCallback=function(t,e){if("function"!=typeof e)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[t]=e},A.WorkspaceSvg.prototype.getButtonCallback=function(t){return(t=this.flyoutButtonCallbacks_[t])?t:null},A.WorkspaceSvg.prototype.removeButtonCallback=function(t){this.flyoutButtonCallbacks_[t]=null},A.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(t,e){if("function"!=typeof e)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[t]=e},A.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(t){return this.toolboxCategoryCallbacks_[t]||null},A.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(t){this.toolboxCategoryCallbacks_[t]=null},A.WorkspaceSvg.prototype.getGesture=function(t){var e="mousedown"===t.type||"touchstart"===t.type||"pointerdown"===t.type,o=this.currentGesture_;return o?e&&o.hasStarted()?(console.warn("Tried to start the same gesture twice."),o.cancel(),null):o:e?this.currentGesture_=new Gt.TouchGesture(t,this):null},A.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},A.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},A.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},A.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},A.WorkspaceSvg.prototype.hideChaff=function(t){(0,at.hide)(),(0,m.hide)(),D.DropDownDiv.hideWithoutAnimation();var e=!!t;this.getComponentManager().getComponents(At.ComponentManager.Capability.AUTOHIDEABLE,!0).forEach(function(o){return o.autoHide(e)})},A.resizeSvgContents=function(t){t.resizeContents()};var xs=function(t,e){t.setAttribute("dir","LTR"),(0,Vt.inject)(e.hasCss,e.pathToMedia),t=(0,s.createSvgElement)(B.Svg.SVG,{xmlns:s.SVG_NS,"xmlns:html":s.HTML_NS,"xmlns:xlink":s.XLINK_NS,version:"1.1",class:"blocklySvg",tabindex:"0"},t);var o=(0,s.createSvgElement)(B.Svg.DEFS,{},t),r=String(Math.random()).substring(2);return e.gridPattern=re.Grid.createDom(r,e.gridOptions,o),t},ws=function(t,e,o,r){return e.parentWorkspace=null,(e=new A.WorkspaceSvg(e,o,r)).scale=(o=e.options).zoomOptions.startScale,t.appendChild(e.createDom("blocklyMainBackground")),(0,s.addClass)(e.getInjectionDiv(),e.getRenderer().getClassName()),(0,s.addClass)(e.getInjectionDiv(),e.getTheme().getClassName()),!o.hasCategories&&o.languageTree&&(r=e.addFlyout(B.Svg.SVG),(0,s.insertAfter)(r,t)),o.hasTrashcan&&e.addTrashcan(),o.zoomOptions&&o.zoomOptions.controls&&e.addZoomControls(),e.getThemeManager().subscribe(t,"workspaceBackgroundColour","background-color"),e.translate(0,0),e.addChangeListener((0,rt.bumpIntoBoundsHandler)(e)),(0,l.module$exports$Blockly$common.svgResize)(e),(0,m.createDom)(),D.DropDownDiv.createDom(),(0,at.createDom)(),e},Ms=function(t){var e=t.options,o=t.getParentSvg();if((0,g.conditionalBind)(o.parentNode,"contextmenu",null,function(c){(0,g.isTargetInput)(c)||c.preventDefault()}),o=(0,g.conditionalBind)(window,"resize",null,function(){t.hideChaff(!0),(0,l.module$exports$Blockly$common.svgResize)(t),rt.bumpTopObjectsIntoBounds(t)}),t.setResizeHandlerWrapper(o),As(),e.languageTree){o=t.getToolbox();var r=t.getFlyout(!0);o?o.init():r&&(r.init(t),r.show(e.languageTree),"function"==typeof r.scrollToStart&&r.scrollToStart())}e.hasTrashcan&&t.trashcan.init(),e.zoomOptions&&e.zoomOptions.controls&&t.zoomControls_.init(),e.moveOptions&&e.moveOptions.scrollbars?(t.scrollbar=new De.ScrollbarPair(t,!0===e.moveOptions.scrollbars||!!e.moveOptions.scrollbars.horizontal,!0===e.moveOptions.scrollbars||!!e.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),t.scrollbar.resize()):t.setMetrics({x:.5,y:.5}),e.hasSounds&&Ds(e.pathToMedia,t)},Os=function(t){var e=(0,l.module$exports$Blockly$common.getMainWorkspace)();e&&!((0,g.isTargetInput)(t)||e.rendered&&!e.isVisible())&&nt.ShortcutRegistry.registry.onKeyDown(e,t)},lr=!1,As=function(){lr||((0,g.conditionalBind)(document,"scroll",null,function(){for(var o,t=Q.Workspace.getAll(),e=0;o=t[e];e++)o.updateInverseScreenCTM&&o.updateInverseScreenCTM()}),(0,g.conditionalBind)(document,"keydown",null,Os),(0,g.bind)(document,"touchend",null,tt.longStop),(0,g.bind)(document,"touchcancel",null,tt.longStop),ot.IPAD&&(0,g.conditionalBind)(window,"orientationchange",document,function(){(0,l.module$exports$Blockly$common.svgResize)((0,l.module$exports$Blockly$common.getMainWorkspace)())})),lr=!0},Ds=function(t,e){var o=e.getAudioManager();o.load([t+"click.mp3",t+"click.wav",t+"click.ogg"],"click"),o.load([t+"disconnect.wav",t+"disconnect.mp3",t+"disconnect.ogg"],"disconnect"),o.load([t+"delete.mp3",t+"delete.ogg",t+"delete.wav"],"delete");var r=[];t=function(){for(;r.length;)(0,g.unbind)(r.pop());o.preload()},r.push((0,g.conditionalBind)(document,"mousemove",null,t,!0)),r.push((0,g.conditionalBind)(document,"touchstart",null,t,!0))},$n={DragTarget:function(){}};$n.DragTarget.prototype.onDragEnter=function(t){},$n.DragTarget.prototype.onDragOver=function(t){},$n.DragTarget.prototype.onDragExit=function(t){},$n.DragTarget.prototype.onDrop=function(t){},$n.DragTarget.prototype.shouldPreventMove=function(t){return!1};var hn={DeleteArea:function(){hn.DeleteArea.superClass_.constructor.call(this),this.wouldDelete_=!1}};(0,l.module$exports$Blockly$utils$object.inherits)(hn.DeleteArea,$n.DragTarget),hn.DeleteArea.prototype.wouldDelete=function(t,e){return t instanceof U.BlockSvg?(t=!t.getParent()&&t.isDeletable(),this.updateWouldDelete_(t&&!e)):this.updateWouldDelete_(t.isDeletable()),this.wouldDelete_},hn.DeleteArea.prototype.updateWouldDelete_=function(t){this.wouldDelete_=t};var Sn={FlyoutMetricsManager:function(t,e){this.flyout_=e,Sn.FlyoutMetricsManager.superClass_.constructor.call(this,t)}};(0,l.module$exports$Blockly$utils$object.inherits)(Sn.FlyoutMetricsManager,Ie.MetricsManager),Sn.FlyoutMetricsManager.prototype.getBoundingBox_=function(){try{var t=this.workspace_.getCanvas().getBBox()}catch{t={height:0,y:0,width:0,x:0}}return t},Sn.FlyoutMetricsManager.prototype.getContentMetrics=function(t){var e=this.getBoundingBox_();return{height:e.height*(t=t?1:this.workspace_.scale),width:e.width*t,top:e.y*t,left:e.x*t}},Sn.FlyoutMetricsManager.prototype.getScrollMetrics=function(t,e,o){return{height:((e=o||this.getContentMetrics()).height+2*(o=this.flyout_.MARGIN*this.workspace_.scale))/(t=t?this.workspace_.scale:1),width:(e.width+e.left+o)/t,top:0,left:0}};var ut={Flyout:function(t){ut.Flyout.superClass_.constructor.call(this),t.setMetrics=this.setMetrics_.bind(this),this.workspace_=new A.WorkspaceSvg(t),this.workspace_.setMetricsManager(new Sn.FlyoutMetricsManager(this.workspace_,this)),this.workspace_.isFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=(0,_t.genUid)(),this.RTL=!!t.RTL,this.horizontalLayout=!1,this.toolboxPosition_=t.toolboxPosition,this.eventWrappers_=[],this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.targetWorkspace=null,this.recycledBlocks_=[]}};(0,l.module$exports$Blockly$utils$object.inherits)(ut.Flyout,hn.DeleteArea),ut.Flyout.prototype.autoClose=!0,ut.Flyout.prototype.isVisible_=!1,ut.Flyout.prototype.containerVisible_=!0,ut.Flyout.prototype.CORNER_RADIUS=8,ut.Flyout.prototype.MARGIN=ut.Flyout.prototype.CORNER_RADIUS,ut.Flyout.prototype.GAP_X=3*ut.Flyout.prototype.MARGIN,ut.Flyout.prototype.GAP_Y=3*ut.Flyout.prototype.MARGIN,ut.Flyout.prototype.SCROLLBAR_MARGIN=2.5,ut.Flyout.prototype.width_=0,ut.Flyout.prototype.height_=0,ut.Flyout.prototype.dragAngleRange_=70,ut.Flyout.prototype.createDom=function(t){return this.svgGroup_=(0,s.createSvgElement)(t,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=(0,s.createSvgElement)(B.Svg.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_},ut.Flyout.prototype.init=function(t){this.targetWorkspace=t,this.workspace_.targetWorkspace=t,this.workspace_.scrollbar=new De.ScrollbarPair(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,(0,g.conditionalBind)(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,(0,g.conditionalBind)(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),t.getComponentManager().addComponent({component:this,weight:1,capabilities:[At.ComponentManager.Capability.DELETE_AREA,At.ComponentManager.Capability.DRAG_TARGET]})},ut.Flyout.prototype.dispose=function(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),(0,g.unbind)(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&((0,s.removeNode)(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace=this.svgBackground_=null},ut.Flyout.prototype.getWidth=function(){return this.width_},ut.Flyout.prototype.getHeight=function(){return this.height_},ut.Flyout.prototype.getFlyoutScale=function(){return this.targetWorkspace.scale},ut.Flyout.prototype.getWorkspace=function(){return this.workspace_},ut.Flyout.prototype.isVisible=function(){return this.isVisible_},ut.Flyout.prototype.setVisible=function(t){var e=t!==this.isVisible();this.isVisible_=t,e&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())},ut.Flyout.prototype.setContainerVisible=function(t){var e=t!==this.containerVisible_;this.containerVisible_=t,e&&this.updateDisplay_()},ut.Flyout.prototype.updateDisplay_=function(){var t=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=t?"block":"none",this.workspace_.scrollbar.setContainerVisible(t)},ut.Flyout.prototype.positionAt_=function(t,e,o,r){this.svgGroup_.setAttribute("width",t),this.svgGroup_.setAttribute("height",e),this.workspace_.setCachedParentSvgSize(t,e),"svg"===this.svgGroup_.tagName?(0,s.setCssTransform)(this.svgGroup_,"translate("+o+"px,"+r+"px)"):this.svgGroup_.setAttribute("transform","translate("+o+","+r+")"),(t=this.workspace_.scrollbar)&&(t.setOrigin(o,r),t.resize(),t.hScroll&&t.hScroll.setPosition(t.hScroll.position.x,t.hScroll.position.y),t.vScroll&&t.vScroll.setPosition(t.vScroll.position.x,t.vScroll.position.y))},ut.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var e,t=0;e=this.listeners_[t];t++)(0,g.unbind)(e);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}},ut.Flyout.prototype.show=function(t){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),"string"==typeof t&&(t=this.getDynamicCategoryContents_(t)),this.setVisible(!0),t=(0,st.convertFlyoutDefToJsonArray)(t),t=this.createFlyoutInfo_(t),this.layout_(t.contents,t.gaps),this.listeners_.push((0,g.conditionalBind)(this.svgBackground_,"mouseover",this,function(){for(var r,e=this.workspace_.getTopBlocks(!1),o=0;r=e[o];o++)r.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_),this.emptyRecycledBlocks_()},ut.Flyout.prototype.createFlyoutInfo_=function(t){var e=[],o=[];this.permanentlyDisabled_.length=0;for(var h,r=this.horizontalLayout?this.GAP_X:this.GAP_Y,c=0;h=t[c];c++)switch(h.custom&&(h=this.getDynamicCategoryContents_(h.custom),h=(0,st.convertFlyoutDefToJsonArray)(h),t.splice.apply(t,[c,1].concat(h)),h=t[c]),h.kind.toUpperCase()){case"BLOCK":var k=this.createFlyoutBlock_(h);e.push({type:"block",block:k}),this.addBlockGap_(h,o,r);break;case"SEP":this.addSeparatorGap_(h,o,r);break;case"LABEL":h=this.createButton_(h,!0),e.push({type:"button",button:h}),o.push(r);break;case"BUTTON":h=this.createButton_(h,!1),e.push({type:"button",button:h}),o.push(r)}return{contents:e,gaps:o}},ut.Flyout.prototype.getDynamicCategoryContents_=function(t){if("function"!=typeof(t=this.workspace_.targetWorkspace.getToolboxCategoryCallback(t)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");return t(this.workspace_.targetWorkspace)},ut.Flyout.prototype.createButton_=function(t,e){var o=Ee.FlyoutButton;if(!o)throw Error("Missing require for Blockly.FlyoutButton");return new o(this.workspace_,this.targetWorkspace,t,e)},ut.Flyout.prototype.createFlyoutBlock_=function(t){var e;return t.blockxml?(t="string"==typeof t.blockxml?(0,l.module$exports$Blockly$Xml.textToDom)(t.blockxml):t.blockxml,(e=this.getRecycledBlock_(t.getAttribute("type")))||(e=(0,l.module$exports$Blockly$Xml.domToBlock)(t,this.workspace_))):(e=this.getRecycledBlock_(t.type))||(void 0===t.enabled&&(t.enabled="true"!==t.disabled&&!0!==t.disabled),e=(0,ye.append)(t,this.workspace_)),e.isEnabled()||this.permanentlyDisabled_.push(e),e},ut.Flyout.prototype.getRecycledBlock_=function(t){for(var e=-1,o=0;o<this.recycledBlocks_.length;o++)if(this.recycledBlocks_[o].type===t){e=o;break}return-1===e?void 0:this.recycledBlocks_.splice(e,1)[0]},ut.Flyout.prototype.addBlockGap_=function(t,e,o){if(t.gap)var r=parseInt(t.gap,10);else t.blockxml&&(t="string"==typeof t.blockxml?(0,l.module$exports$Blockly$Xml.textToDom)(t.blockxml):t.blockxml,r=parseInt(t.getAttribute("gap"),10));e.push(isNaN(r)?o:r)},ut.Flyout.prototype.addSeparatorGap_=function(t,e,o){t=parseInt(t.gap,10),!isNaN(t)&&0<e.length?e[e.length-1]=t:e.push(o)},ut.Flyout.prototype.clearOldBlocks_=function(){for(var o,t=this.workspace_.getTopBlocks(!1),e=0;o=t[e];e++)this.blockIsRecyclable_(o)?this.recycleBlock_(o):o.dispose(!1,!1);for(t=0;t<this.mats_.length;t++)(e=this.mats_[t])&&((0,at.unbindMouseEvents)(e),(0,s.removeNode)(e));for(t=this.mats_.length=0;e=this.buttons_[t];t++)e.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},ut.Flyout.prototype.emptyRecycledBlocks_=function(){for(var t=0;t<this.recycledBlocks_.length;t++)this.recycledBlocks_[t].dispose();this.recycledBlocks_=[]},ut.Flyout.prototype.blockIsRecyclable_=function(t){return!1},ut.Flyout.prototype.recycleBlock_=function(t){var e=t.getRelativeToSurfaceXY();t.moveBy(-e.x,-e.y),this.recycledBlocks_.push(t)},ut.Flyout.prototype.addBlockListeners_=function(t,e,o){this.listeners_.push((0,g.conditionalBind)(t,"mousedown",null,this.blockMouseDown_(e))),this.listeners_.push((0,g.conditionalBind)(o,"mousedown",null,this.blockMouseDown_(e))),this.listeners_.push((0,g.bind)(t,"mouseenter",e,e.addSelect)),this.listeners_.push((0,g.bind)(t,"mouseleave",e,e.removeSelect)),this.listeners_.push((0,g.bind)(o,"mouseenter",e,e.addSelect)),this.listeners_.push((0,g.bind)(o,"mouseleave",e,e.removeSelect))},ut.Flyout.prototype.blockMouseDown_=function(t){var e=this;return function(o){var r=e.targetWorkspace.getGesture(o);r&&(r.setStartBlock(t),r.handleFlyoutStart(o,e))}},ut.Flyout.prototype.onMouseDown_=function(t){var e=this.targetWorkspace.getGesture(t);e&&e.handleFlyoutStart(t,this)},ut.Flyout.prototype.isBlockCreatable_=function(t){return t.isEnabled()},ut.Flyout.prototype.createBlock=function(t){var e=null;(0,f.disable)();var o=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{e=this.placeNewBlock_(t)}finally{(0,f.enable)()}if(this.targetWorkspace.hideChaff(),t=(0,l.module$exports$Blockly$Variables.getAddedVariables)(this.targetWorkspace,o),(0,f.isEnabled)()){for((0,f.setGroup)(!0),o=0;o<t.length;o++){var r=t[o];(0,f.fire)(new((0,f.get)(f.VAR_CREATE))(r))}(0,f.fire)(new((0,f.get)(f.CREATE))(e))}return this.autoClose?this.hide():this.filterForCapacity_(),e},ut.Flyout.prototype.initFlyoutButton_=function(t,e,o){var r=t.createDom();t.moveTo(e,o),t.show(),this.listeners_.push((0,g.conditionalBind)(r,"mousedown",this,this.onMouseDown_)),this.buttons_.push(t)},ut.Flyout.prototype.createRect_=function(t,e,o,r,c){return(e=(0,s.createSvgElement)(B.Svg.RECT,{"fill-opacity":0,x:e,y:o,height:r.height,width:r.width},null)).tooltip=t,(0,at.bindMouseEvents)(e),this.workspace_.getCanvas().insertBefore(e,t.getSvgRoot()),t.flyoutRect_=e,this.mats_[c]=e},ut.Flyout.prototype.moveRectToBlock_=function(t,e){var o=e.getHeightWidth();t.setAttribute("width",o.width),t.setAttribute("height",o.height),e=e.getRelativeToSurfaceXY(),t.setAttribute("y",e.y),t.setAttribute("x",this.RTL?e.x-o.width:e.x)},ut.Flyout.prototype.filterForCapacity_=function(){for(var o,t=this.workspace_.getTopBlocks(!1),e=0;o=t[e];e++)if(-1===this.permanentlyDisabled_.indexOf(o))for(var r=this.targetWorkspace.isCapacityAvailable((0,l.module$exports$Blockly$common.getBlockTypeCounts)(o));o;)o.setEnabled(r),o=o.getNextBlock()},ut.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},ut.Flyout.prototype.isScrollable=function(){return!!this.workspace_.scrollbar&&this.workspace_.scrollbar.isVisible()},ut.Flyout.prototype.placeNewBlock_=function(t){var e=this.targetWorkspace;if(!t.getSvgRoot())throw Error("oldBlock is not rendered.");var o=(0,ye.save)(t);return e.setResizesEnabled(!1),e=(0,ye.append)(o,e),this.positionNewBlock_(t,e),e},ut.Flyout.prototype.positionNewBlock_=function(t,e){var o=this.targetWorkspace,r=o.getOriginOffsetInPixels(),c=this.workspace_.getOriginOffsetInPixels();(t=t.getRelativeToSurfaceXY()).scale(this.workspace_.scale),c=N.Coordinate.sum(c,t),(r=N.Coordinate.difference(c,r)).scale(1/o.scale),e.moveTo(new N.Coordinate(r.x,r.y))};var Re={VerticalFlyout:function(t){Re.VerticalFlyout.superClass_.constructor.call(this,t)}};(0,l.module$exports$Blockly$utils$object.inherits)(Re.VerticalFlyout,ut.Flyout),Re.VerticalFlyout.registryName="verticalFlyout",Re.VerticalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var e=this.workspace_.getMetricsManager(),o=e.getScrollMetrics(),r=e.getViewMetrics();e=e.getAbsoluteMetrics(),"number"==typeof t.y&&(this.workspace_.scrollY=-(o.top+(o.height-r.height)*t.y)),this.workspace_.translate(this.workspace_.scrollX+e.left,this.workspace_.scrollY+e.top)}},Re.VerticalFlyout.prototype.getX=function(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager(),e=t.getAbsoluteMetrics(),o=t.getViewMetrics();return t=t.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===st.Position.LEFT?t.width:o.width-this.width_:this.toolboxPosition_===st.Position.LEFT?0:o.width:this.toolboxPosition_===st.Position.LEFT?0:o.width+e.left-this.width_},Re.VerticalFlyout.prototype.getY=function(){return 0},Re.VerticalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=t.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,t.height-2*this.CORNER_RADIUS),t=this.getX();var e=this.getY();this.positionAt_(this.width_,this.height_,t,e)}},Re.VerticalFlyout.prototype.setBackgroundPath_=function(t,e){var o=this.toolboxPosition_===st.Position.RIGHT,r=t+this.CORNER_RADIUS;(r=["M "+(o?r:0)+",0"]).push("h",o?-t:t),r.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),r.push("v",Math.max(0,e)),r.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),r.push("h",o?t:-t),r.push("z"),this.svgBackground_.setAttribute("d",r.join(" "))},Re.VerticalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setY(0)},Re.VerticalFlyout.prototype.wheel_=function(t){var e=(0,g.getScrollDeltaPixels)(t);if(e.y){var o=this.workspace_.getMetricsManager(),r=o.getScrollMetrics();e=o.getViewMetrics().top-r.top+e.y,this.workspace_.scrollbar.setY(e),(0,m.hide)(),D.DropDownDiv.hideWithoutAnimation()}t.preventDefault(),t.stopPropagation()},Re.VerticalFlyout.prototype.layout_=function(t,e){this.workspace_.scale=this.targetWorkspace.scale;for(var h,o=this.MARGIN,r=this.RTL?o:o+this.tabWidth_,c=0;h=t[c];c++)if("block"===h.type){for(var G,k=(h=h.block).getDescendants(!1),C=0;G=k[C];C++)G.isInFlyout=!0;h.render(),k=h.getSvgRoot(),C=h.getHeightWidth(),h.moveBy(G=h.outputConnection?r-this.tabWidth_:r,o),G=this.createRect_(h,this.RTL?G-C.width:G,o,C,c),this.addBlockListeners_(k,h,G),o+=C.height+e[c]}else"button"===h.type&&(this.initFlyoutButton_(h.button,r,o),o+=h.button.height+e[c])},Re.VerticalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var e=this.dragAngleRange_;return t<e&&t>-e||t<-180+e||t>180-e},Re.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var t=this.svgGroup_.getBoundingClientRect(),e=t.left;return this.toolboxPosition_===st.Position.LEFT?new yt.Rect(-1e9,1e9,-1e9,e+t.width):new yt.Rect(-1e9,1e9,e,1e9)},Re.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var r,t=0,e=this.workspace_.getTopBlocks(!1),o=0;r=e[o];o++){var c=r.getHeightWidth().width;r.outputConnection&&(c-=this.tabWidth_),t=Math.max(t,c)}for(o=0;r=this.buttons_[o];o++)t=Math.max(t,r.width);if(t+=1.5*this.MARGIN+this.tabWidth_,t*=this.workspace_.scale,this.width_!==(t+=J.Scrollbar.scrollbarThickness)){for(o=0;r=e[o];o++){if(this.RTL){c=r.getRelativeToSurfaceXY().x;var h=t/this.workspace_.scale-this.MARGIN;r.outputConnection||(h-=this.tabWidth_),r.moveBy(h-c,0)}r.flyoutRect_&&this.moveRectToBlock_(r.flyoutRect_,r)}if(this.RTL)for(e=0;o=this.buttons_[e];e++)r=o.getPosition().y,o.moveTo(t/this.workspace_.scale-o.width-this.MARGIN-this.tabWidth_,r);this.targetWorkspace.toolboxPosition!==this.toolboxPosition_||this.toolboxPosition_!==st.Position.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+t,this.targetWorkspace.scrollY),this.width_=t,this.position(),this.targetWorkspace.recordDragTargets()}},(0,x.register)(x.Type.FLYOUTS_VERTICAL_TOOLBOX,x.DEFAULT,Re.VerticalFlyout);var uo={ToolboxItem:function(t,e,o){this.id_=t.toolboxitemid||(0,_t.getNextUniqueId)(),this.level_=(this.parent_=o||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=t,this.parentToolbox_=e,this.workspace_=this.parentToolbox_.getWorkspace()}};uo.ToolboxItem.prototype.init=function(){},uo.ToolboxItem.prototype.getDiv=function(){return null},uo.ToolboxItem.prototype.getId=function(){return this.id_},uo.ToolboxItem.prototype.getParent=function(){return null},uo.ToolboxItem.prototype.getLevel=function(){return this.level_},uo.ToolboxItem.prototype.isSelectable=function(){return!1},uo.ToolboxItem.prototype.isCollapsible=function(){return!1},uo.ToolboxItem.prototype.dispose=function(){};var kt={ToolboxCategory:function(t,e,o){kt.ToolboxCategory.superClass_.constructor.call(this,t,e,o),this.name_=(0,It.replaceMessageReferences)(t.name),this.colour_=this.getColour_(t),this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.cssConfig_=this.makeDefaultCssConfig_(),(0,l.module$exports$Blockly$utils$object.mixin)(this.cssConfig_,t.cssconfig||t.cssConfig),this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.parseContents_(t)}};(0,l.module$exports$Blockly$utils$object.inherits)(kt.ToolboxCategory,uo.ToolboxItem),kt.ToolboxCategory.registrationName="category",kt.ToolboxCategory.nestedPadding=19,kt.ToolboxCategory.borderWidth=8,kt.ToolboxCategory.defaultBackgroundColour="#57e",kt.ToolboxCategory.prototype.makeDefaultCssConfig_=function(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}},kt.ToolboxCategory.prototype.parseContents_=function(t){var e=t.contents;if(t.custom)this.flyoutItems_=t.custom;else if(e)for(t=0;t<e.length;t++)this.flyoutItems_.push(e[t])},kt.ToolboxCategory.prototype.init=function(){this.createDom_(),"true"===this.toolboxItemDef_.hidden&&this.hide()},kt.ToolboxCategory.prototype.createDom_=function(){return this.htmlDiv_=this.createContainer_(),(0,F.setRole)(this.htmlDiv_,F.Role.TREEITEM),(0,F.setState)(this.htmlDiv_,F.State.SELECTED,!1),(0,F.setState)(this.htmlDiv_,F.State.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),(0,F.setRole)(this.iconDom_,F.Role.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_),(0,F.setState)(this.htmlDiv_,F.State.LABELLEDBY,this.labelDom_.getAttribute("id")),this.addColourBorder_(this.colour_),this.htmlDiv_},kt.ToolboxCategory.prototype.createContainer_=function(){var t=document.createElement("div");return(0,s.addClass)(t,this.cssConfig_.container),t},kt.ToolboxCategory.prototype.createRowContainer_=function(){var t=document.createElement("div");(0,s.addClass)(t,this.cssConfig_.row);var e=kt.ToolboxCategory.nestedPadding*this.getLevel();return e=e.toString()+"px",this.workspace_.RTL?t.style.paddingRight=e:t.style.paddingLeft=e,t},kt.ToolboxCategory.prototype.createRowContentsContainer_=function(){var t=document.createElement("div");return(0,s.addClass)(t,this.cssConfig_.rowcontentcontainer),t},kt.ToolboxCategory.prototype.createIconDom_=function(){var t=document.createElement("span");return this.parentToolbox_.isHorizontal()||(0,s.addClass)(t,this.cssConfig_.icon),t.style.display="inline-block",t},kt.ToolboxCategory.prototype.createLabelDom_=function(t){var e=document.createElement("span");return e.setAttribute("id",this.getId()+".label"),e.textContent=t,(0,s.addClass)(e,this.cssConfig_.label),e},kt.ToolboxCategory.prototype.refreshTheme=function(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)},kt.ToolboxCategory.prototype.addColourBorder_=function(t){t&&(t=kt.ToolboxCategory.borderWidth+"px solid "+(t||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=t:this.rowDiv_.style.borderLeft=t)},kt.ToolboxCategory.prototype.getColour_=function(t){var e=t.categorystyle||t.categoryStyle;return(t=t.colour)&&e?(console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour'),""):e?this.getColourfromStyle_(e):this.parseColour_(t)},kt.ToolboxCategory.prototype.getColourfromStyle_=function(t){var e=this.workspace_.getTheme();if(t&&e){if((e=e.categoryStyles[t])&&e.colour)return this.parseColour_(e.colour);console.warn('Style "'+t+'" must exist and contain a colour value')}return""},kt.ToolboxCategory.prototype.getClickTarget=function(){return this.rowDiv_},kt.ToolboxCategory.prototype.parseColour_=function(t){if(null==(t=(0,It.replaceMessageReferences)(t))||""===t)return"";var e=Number(t);return isNaN(e)?(e=(0,wt.parse)(t))?e:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+t),""):(0,wt.hueToHex)(e)},kt.ToolboxCategory.prototype.openIcon_=function(t){t&&((0,s.removeClasses)(t,this.cssConfig_.closedicon),(0,s.addClass)(t,this.cssConfig_.openicon))},kt.ToolboxCategory.prototype.closeIcon_=function(t){t&&((0,s.removeClasses)(t,this.cssConfig_.openicon),(0,s.addClass)(t,this.cssConfig_.closedicon))},kt.ToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none",this.isHidden_=!t,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()},kt.ToolboxCategory.prototype.hide=function(){this.setVisible_(!1)},kt.ToolboxCategory.prototype.show=function(){this.setVisible_(!0)},kt.ToolboxCategory.prototype.isVisible=function(){return!this.isHidden_&&this.allAncestorsExpanded_()},kt.ToolboxCategory.prototype.allAncestorsExpanded_=function(){for(var t=this;t.getParent();)if(!(t=t.getParent()).isExpanded())return!1;return!0},kt.ToolboxCategory.prototype.isSelectable=function(){return this.isVisible()&&!this.isDisabled_},kt.ToolboxCategory.prototype.onClick=function(t){},kt.ToolboxCategory.prototype.setSelected=function(t){if(t){var e=this.parseColour_(kt.ToolboxCategory.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||e,(0,s.addClass)(this.rowDiv_,this.cssConfig_.selected)}else this.rowDiv_.style.backgroundColor="",(0,s.removeClass)(this.rowDiv_,this.cssConfig_.selected);(0,F.setState)(this.htmlDiv_,F.State.SELECTED,t)},kt.ToolboxCategory.prototype.setDisabled=function(t){this.isDisabled_=t,this.getDiv().setAttribute("disabled",t),t?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")},kt.ToolboxCategory.prototype.getName=function(){return this.name_},kt.ToolboxCategory.prototype.getParent=function(){return this.parent_},kt.ToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},kt.ToolboxCategory.prototype.getContents=function(){return this.flyoutItems_},kt.ToolboxCategory.prototype.updateFlyoutContents=function(t){this.flyoutItems_=[],"string"==typeof t?this.toolboxItemDef_.custom=t:(delete this.toolboxItemDef_.custom,this.toolboxItemDef_.contents=(0,st.convertFlyoutDefToJsonArray)(t)),this.parseContents_(this.toolboxItemDef_)},kt.ToolboxCategory.prototype.dispose=function(){(0,s.removeNode)(this.htmlDiv_)},(0,Vt.register)('\n  .blocklyTreeRow:not(.blocklyTreeSelected):hover {\n    background-color: rgba(255, 255, 255, 0.2);\n  }\n\n  .blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {\n    margin: 1px 5px 1px 0;\n  }\n\n  .blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {\n    margin: 1px 0 1px 5px;\n  }\n\n  .blocklyTreeRow {\n    height: 22px;\n    line-height: 22px;\n    margin-bottom: 3px;\n    padding-right: 8px;\n    white-space: nowrap;\n  }\n\n  .blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {\n    margin-left: 8px;\n    padding-right: 0;\n  }\n\n  .blocklyTreeIcon {\n    background-image: url(<<<PATH>>>/sprites.png);\n    height: 16px;\n    vertical-align: middle;\n    visibility: hidden;\n    width: 16px;\n  }\n\n  .blocklyTreeIconClosed {\n    background-position: -32px -1px;\n  }\n\n  .blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {\n    background-position: 0 -1px;\n  }\n\n  .blocklyTreeSelected>.blocklyTreeIconClosed {\n    background-position: -32px -17px;\n  }\n\n  .blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {\n    background-position: 0 -17px;\n  }\n\n  .blocklyTreeIconOpen {\n    background-position: -16px -1px;\n  }\n\n  .blocklyTreeSelected>.blocklyTreeIconOpen {\n    background-position: -16px -17px;\n  }\n\n  .blocklyTreeLabel {\n    cursor: default;\n    font: 16px sans-serif;\n    padding: 0 3px;\n    vertical-align: middle;\n  }\n\n  .blocklyToolboxDelete .blocklyTreeLabel {\n    cursor: url("<<<PATH>>>/handdelete.cur"), auto;\n  }\n\n  .blocklyTreeSelected .blocklyTreeLabel {\n    color: #fff;\n  }\n'),(0,x.register)(x.Type.TOOLBOX_ITEM,kt.ToolboxCategory.registrationName,kt.ToolboxCategory);var ho={ToolboxSeparator:function(t,e){ho.ToolboxSeparator.superClass_.constructor.call(this,t,e),this.cssConfig_={container:"blocklyTreeSeparator"},(0,l.module$exports$Blockly$utils$object.mixin)(this.cssConfig_,t.cssconfig||t.cssConfig)}};(0,l.module$exports$Blockly$utils$object.inherits)(ho.ToolboxSeparator,uo.ToolboxItem),ho.ToolboxSeparator.registrationName="sep",ho.ToolboxSeparator.prototype.init=function(){this.createDom_()},ho.ToolboxSeparator.prototype.createDom_=function(){var t=document.createElement("div");return(0,s.addClass)(t,this.cssConfig_.container),this.htmlDiv_=t},ho.ToolboxSeparator.prototype.getDiv=function(){return this.htmlDiv_},ho.ToolboxSeparator.prototype.dispose=function(){(0,s.removeNode)(this.htmlDiv_)},(0,Vt.register)('\n  .blocklyTreeSeparator {\n    border-bottom: solid #e5e5e5 1px;\n    height: 0;\n    margin: 5px 0;\n  }\n\n  .blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {\n    border-right: solid #e5e5e5 1px;\n    border-bottom: none;\n    height: auto;\n    margin: 0 5px 0 5px;\n    padding: 5px 0;\n    width: 0;\n  }\n'),(0,x.register)(x.Type.TOOLBOX_ITEM,ho.ToolboxSeparator.registrationName,ho.ToolboxSeparator);var Ut={CollapsibleToolboxCategory:function(t,e,o){this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[],Ut.CollapsibleToolboxCategory.superClass_.constructor.call(this,t,e,o)}};(0,l.module$exports$Blockly$utils$object.inherits)(Ut.CollapsibleToolboxCategory,kt.ToolboxCategory),Ut.CollapsibleToolboxCategory.registrationName="collapsibleCategory",Ut.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_=function(){var t=Ut.CollapsibleToolboxCategory.superClass_.makeDefaultCssConfig_.call(this);return t.contents="blocklyToolboxContents",t},Ut.CollapsibleToolboxCategory.prototype.parseContents_=function(t){var e=t.contents,o=!0;if(t.custom)this.flyoutItems_=t.custom;else if(e)for(t=0;t<e.length;t++){var r=e[t];!(0,x.hasItem)(x.Type.TOOLBOX_ITEM,r.kind)||r.kind.toLowerCase()===ho.ToolboxSeparator.registrationName&&o?(this.flyoutItems_.push(r),o=!0):(this.createToolboxItem_(r),o=!1)}},Ut.CollapsibleToolboxCategory.prototype.createToolboxItem_=function(t){var e=t.kind;"CATEGORY"==e.toUpperCase()&&(0,st.isCategoryCollapsible)(t)&&(e=Ut.CollapsibleToolboxCategory.registrationName),t=new((0,x.getClass)(x.Type.TOOLBOX_ITEM,e))(t,this.parentToolbox_,this),this.toolboxItems_.push(t)},Ut.CollapsibleToolboxCategory.prototype.init=function(){Ut.CollapsibleToolboxCategory.superClass_.init.call(this),this.setExpanded("true"===this.toolboxItemDef_.expanded||this.toolboxItemDef_.expanded)},Ut.CollapsibleToolboxCategory.prototype.createDom_=function(){Ut.CollapsibleToolboxCategory.superClass_.createDom_.call(this);var t=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(t),(0,F.setRole)(this.subcategoriesDiv_,F.Role.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_},Ut.CollapsibleToolboxCategory.prototype.createIconDom_=function(){var t=document.createElement("span");return this.parentToolbox_.isHorizontal()||((0,s.addClass)(t,this.cssConfig_.icon),t.style.visibility="visible"),t.style.display="inline-block",t},Ut.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_=function(t){var e=document.createElement("div");(0,s.addClass)(e,this.cssConfig_.contents);for(var o=0;o<t.length;o++){var r=t[o];r.init();var c=r.getDiv();e.appendChild(c),r.getClickTarget&&r.getClickTarget().setAttribute("id",r.getId())}return e},Ut.CollapsibleToolboxCategory.prototype.setExpanded=function(t){this.expanded_!==t&&((this.expanded_=t)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),(0,F.setState)(this.htmlDiv_,F.State.EXPANDED,t),this.parentToolbox_.handleToolboxItemResize())},Ut.CollapsibleToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none";for(var e=this.getChildToolboxItems(),o=0;o<e.length;o++)e[o].setVisible_(t);this.isHidden_=!t,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()},Ut.CollapsibleToolboxCategory.prototype.isExpanded=function(){return this.expanded_},Ut.CollapsibleToolboxCategory.prototype.isCollapsible=function(){return!0},Ut.CollapsibleToolboxCategory.prototype.onClick=function(t){this.toggleExpanded()},Ut.CollapsibleToolboxCategory.prototype.toggleExpanded=function(){this.setExpanded(!this.expanded_)},Ut.CollapsibleToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},Ut.CollapsibleToolboxCategory.prototype.getChildToolboxItems=function(){return this.toolboxItems_},(0,x.register)(x.Type.TOOLBOX_ITEM,Ut.CollapsibleToolboxCategory.registrationName,Ut.CollapsibleToolboxCategory);var on={ToolboxItemSelect:function(t,e,o){on.ToolboxItemSelect.superClass_.constructor.call(this,o),this.oldItem=t,this.newItem=e}};(0,l.module$exports$Blockly$utils$object.inherits)(on.ToolboxItemSelect,We.UiBase),on.ToolboxItemSelect.prototype.type=f.TOOLBOX_ITEM_SELECT,on.ToolboxItemSelect.prototype.toJson=function(){var t=on.ToolboxItemSelect.superClass_.toJson.call(this);return t.oldItem=this.oldItem,t.newItem=this.newItem,t},on.ToolboxItemSelect.prototype.fromJson=function(t){on.ToolboxItemSelect.superClass_.fromJson.call(this,t),this.oldItem=t.oldItem,this.newItem=t.newItem},(0,x.register)(x.Type.EVENT,f.TOOLBOX_ITEM_SELECT,on.ToolboxItemSelect);var pt={Toolbox:function(t){pt.Toolbox.superClass_.constructor.call(this),this.workspace_=t,this.id="toolbox",this.toolboxDef_=t.options.languageTree||{contents:[]},this.horizontalLayout_=t.options.horizontalLayout,this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.RTL=t.options.RTL,this.flyout_=null,this.contentMap_=Object.create(null),this.toolboxPosition=t.options.toolboxPosition,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[]}};(0,l.module$exports$Blockly$utils$object.inherits)(pt.Toolbox,hn.DeleteArea),pt.Toolbox.prototype.onShortcut=function(t){return!1},pt.Toolbox.prototype.init=function(){var t=this.workspace_,e=t.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),(0,s.insertAfter)(this.flyout_.createDom("svg"),e),this.setVisible(!0),this.flyout_.init(t),this.render(this.toolboxDef_),(t=t.getThemeManager()).subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),t.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[At.ComponentManager.Capability.AUTOHIDEABLE,At.ComponentManager.Capability.DELETE_AREA,At.ComponentManager.Capability.DRAG_TARGET]})},pt.Toolbox.prototype.createDom_=function(t){t=t.getParentSvg();var e=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,(0,F.setRole)(this.contentsDiv_,F.Role.TREE),e.appendChild(this.contentsDiv_),t.parentNode.insertBefore(e,t),this.attachEvents_(e,this.contentsDiv_),e},pt.Toolbox.prototype.createContainer_=function(){var t=document.createElement("div");return t.setAttribute("layout",this.isHorizontal()?"h":"v"),(0,s.addClass)(t,"blocklyToolboxDiv"),(0,s.addClass)(t,"blocklyNonSelectable"),t.setAttribute("dir",this.RTL?"RTL":"LTR"),t},pt.Toolbox.prototype.createContentsContainer_=function(){var t=document.createElement("div");return(0,s.addClass)(t,"blocklyToolboxContents"),this.isHorizontal()&&(t.style.flexDirection="row"),t},pt.Toolbox.prototype.attachEvents_=function(t,e){t=(0,g.conditionalBind)(t,"click",this,this.onClick_,!1,!0),this.boundEvents_.push(t),e=(0,g.conditionalBind)(e,"keydown",this,this.onKeyDown_,!1,!0),this.boundEvents_.push(e)},pt.Toolbox.prototype.onClick_=function(t){if((0,g.isRightButton)(t)||t.target===this.HtmlDiv)(0,l.module$exports$Blockly$common.getMainWorkspace)().hideChaff(!1);else{var e=t.target.getAttribute("id");e&&(e=this.getToolboxItemById(e)).isSelectable()&&(this.setSelectedItem(e),e.onClick(t)),(0,l.module$exports$Blockly$common.getMainWorkspace)().hideChaff(!0)}(0,tt.clearTouchIdentifier)()},pt.Toolbox.prototype.onKeyDown_=function(t){var e=!1;switch(t.keyCode){case Z_KeyCodes.DOWN:e=this.selectNext_();break;case Z_KeyCodes.UP:e=this.selectPrevious_();break;case Z_KeyCodes.LEFT:e=this.selectParent_();break;case Z_KeyCodes.RIGHT:e=this.selectChild_();break;case Z_KeyCodes.ENTER:case Z_KeyCodes.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),e=!0);break;default:e=!1}!e&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(e=this.selectedItem_.onKeyDown(t)),e&&t.preventDefault()},pt.Toolbox.prototype.createFlyout_=function(){var t=this.workspace_,e=new Ae.Options({parentWorkspace:t,rtl:t.RTL,oneBasedIndex:t.options.oneBasedIndex,horizontalLayout:t.horizontalLayout,renderer:t.options.renderer,rendererOverrides:t.options.rendererOverrides,move:{scrollbars:!0}});return e.toolboxPosition=t.options.toolboxPosition,new((0,x.getClassFromOptions)(t.horizontalLayout?x.Type.FLYOUTS_HORIZONTAL_TOOLBOX:x.Type.FLYOUTS_VERTICAL_TOOLBOX,t.options,!0))(e)},pt.Toolbox.prototype.render=function(t){this.toolboxDef_=t;for(var e=0;e<this.contents_.length;e++){var o=this.contents_[e];o&&o.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(t.contents),this.position(),this.handleToolboxItemResize()},pt.Toolbox.prototype.renderContents_=function(t){for(var e=document.createDocumentFragment(),o=0;o<t.length;o++)this.createToolboxItem_(t[o],e);this.contentsDiv_.appendChild(e)},pt.Toolbox.prototype.createToolboxItem_=function(t,e){var o=t.kind;"CATEGORY"===o.toUpperCase()&&(0,st.isCategoryCollapsible)(t)&&(o=Ut.CollapsibleToolboxCategory.registrationName),(o=(0,x.getClass)(x.Type.TOOLBOX_ITEM,o.toLowerCase()))&&(t=new o(t,this),this.addToolboxItem_(t),t.init(),(o=t.getDiv())&&e.appendChild(o),t.getClickTarget&&t.getClickTarget().setAttribute("id",t.getId()))},pt.Toolbox.prototype.addToolboxItem_=function(t){if(this.contents_.push(t),this.contentMap_[t.getId()]=t,t.isCollapsible()){t=t.getChildToolboxItems();for(var e=0;e<t.length;e++)this.addToolboxItem_(t[e])}},pt.Toolbox.prototype.getToolboxItems=function(){return this.contents_},pt.Toolbox.prototype.addStyle=function(t){(0,s.addClass)(this.HtmlDiv,t)},pt.Toolbox.prototype.removeStyle=function(t){(0,s.removeClass)(this.HtmlDiv,t)},pt.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv||!this.isVisible_)return null;var t=this.HtmlDiv.getBoundingClientRect(),e=t.top,o=e+t.height,r=t.left;return t=r+t.width,this.toolboxPosition===st.Position.TOP?new yt.Rect(-1e7,o,-1e7,1e7):this.toolboxPosition===st.Position.BOTTOM?new yt.Rect(e,1e7,-1e7,1e7):this.toolboxPosition===st.Position.LEFT?new yt.Rect(-1e7,1e7,-1e7,t):new yt.Rect(-1e7,1e7,r,1e7)},pt.Toolbox.prototype.wouldDelete=function(t,e){return this.updateWouldDelete_(t instanceof U.BlockSvg?!t.getParent()&&t.isDeletable():t.isDeletable()),this.wouldDelete_},pt.Toolbox.prototype.onDragEnter=function(t){this.updateCursorDeleteStyle_(!0)},pt.Toolbox.prototype.onDragExit=function(t){this.updateCursorDeleteStyle_(!1)},pt.Toolbox.prototype.onDrop=function(t){this.updateCursorDeleteStyle_(!1)},pt.Toolbox.prototype.updateWouldDelete_=function(t){t!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=t,this.updateCursorDeleteStyle_(!0))},pt.Toolbox.prototype.updateCursorDeleteStyle_=function(t){var e=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";t?this.addStyle(e):this.removeStyle(e)},pt.Toolbox.prototype.getToolboxItemById=function(t){return this.contentMap_[t]||null},pt.Toolbox.prototype.getWidth=function(){return this.width_},pt.Toolbox.prototype.getHeight=function(){return this.height_},pt.Toolbox.prototype.getFlyout=function(){return this.flyout_},pt.Toolbox.prototype.getWorkspace=function(){return this.workspace_},pt.Toolbox.prototype.getSelectedItem=function(){return this.selectedItem_},pt.Toolbox.prototype.getPreviouslySelectedItem=function(){return this.previouslySelectedItem_},pt.Toolbox.prototype.isHorizontal=function(){return this.horizontalLayout_},pt.Toolbox.prototype.position=function(){var t=this.workspace_.getMetrics(),e=this.HtmlDiv;e&&(this.horizontalLayout_?(e.style.left="0",e.style.height="auto",e.style.width="100%",this.height_=e.offsetHeight,this.width_=t.viewWidth,this.toolboxPosition===st.Position.TOP?e.style.top="0":e.style.bottom="0"):(this.toolboxPosition===st.Position.RIGHT?e.style.right="0":e.style.left="0",e.style.height="100%",this.width_=e.offsetWidth,this.height_=t.viewHeight),this.flyout_.position())},pt.Toolbox.prototype.handleToolboxItemResize=function(){var t=this.workspace_,e=this.HtmlDiv.getBoundingClientRect();t.translate(this.toolboxPosition===st.Position.LEFT?t.scrollX+e.width:t.scrollX,this.toolboxPosition===st.Position.TOP?t.scrollY+e.height:t.scrollY),(0,l.module$exports$Blockly$common.svgResize)(t)},pt.Toolbox.prototype.clearSelection=function(){this.setSelectedItem(null)},pt.Toolbox.prototype.refreshTheme=function(){for(var t=0;t<this.contents_.length;t++){var e=this.contents_[t];e.refreshTheme&&e.refreshTheme()}},pt.Toolbox.prototype.refreshSelection=function(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())},pt.Toolbox.prototype.setVisible=function(t){this.isVisible_!==t&&(this.HtmlDiv.style.display=t?"block":"none",this.isVisible_=t,this.workspace_.recordDragTargets())},pt.Toolbox.prototype.autoHide=function(t){!t&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()},pt.Toolbox.prototype.setSelectedItem=function(t){var e=this.selectedItem_;!t&&!e||t&&!t.isSelectable()||(this.shouldDeselectItem_(e,t)&&null!==e&&this.deselectItem_(e),this.shouldSelectItem_(e,t)&&null!==t&&this.selectItem_(e,t),this.updateFlyout_(e,t),this.fireSelectEvent_(e,t))},pt.Toolbox.prototype.shouldDeselectItem_=function(t,e){return null!==t&&(!t.isCollapsible()||t!==e)},pt.Toolbox.prototype.shouldSelectItem_=function(t,e){return null!==e&&e!==t},pt.Toolbox.prototype.deselectItem_=function(t){this.selectedItem_=null,this.previouslySelectedItem_=t,t.setSelected(!1),(0,F.setState)(this.contentsDiv_,F.State.ACTIVEDESCENDANT,"")},pt.Toolbox.prototype.selectItem_=function(t,e){this.selectedItem_=e,this.previouslySelectedItem_=t,e.setSelected(!0),(0,F.setState)(this.contentsDiv_,F.State.ACTIVEDESCENDANT,e.getId())},pt.Toolbox.prototype.selectItemByPosition=function(t){-1<t&&t<this.contents_.length&&(t=this.contents_[t]).isSelectable()&&this.setSelectedItem(t)},pt.Toolbox.prototype.updateFlyout_=function(t,e){e&&(t!==e||e.isCollapsible())&&e.getContents().length?(this.flyout_.show(e.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()},pt.Toolbox.prototype.fireSelectEvent_=function(t,e){var o=t&&t.getName(),r=e&&e.getName();t===e&&(r=null),t=new((0,f.get)(f.TOOLBOX_ITEM_SELECT))(o,r,this.workspace_.id),(0,f.fire)(t)},pt.Toolbox.prototype.selectParent_=function(){return!(!this.selectedItem_||(this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.setExpanded(!1),0):!this.selectedItem_.getParent()||!this.selectedItem_.getParent().isSelectable()||(this.setSelectedItem(this.selectedItem_.getParent()),0)))},pt.Toolbox.prototype.selectChild_=function(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;var t=this.selectedItem_;return t.isExpanded()?this.selectNext_():t.setExpanded(!0),!0},pt.Toolbox.prototype.selectNext_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)+1;if(-1<t&&t<this.contents_.length){for(var e=this.contents_[t];e&&!e.isSelectable();)e=this.contents_[++t];if(e&&e.isSelectable())return this.setSelectedItem(e),!0}return!1},pt.Toolbox.prototype.selectPrevious_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)-1;if(-1<t&&t<this.contents_.length){for(var e=this.contents_[t];e&&!e.isSelectable();)e=this.contents_[--t];if(e&&e.isSelectable())return this.setSelectedItem(e),!0}return!1},pt.Toolbox.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var t=0;t<this.contents_.length;t++)this.contents_[t].dispose();for(t=0;t<this.boundEvents_.length;t++)(0,g.unbind)(this.boundEvents_[t]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),(0,s.removeNode)(this.HtmlDiv)},(0,Vt.register)('\n  .blocklyToolboxDelete {\n    cursor: url("<<<PATH>>>/handdelete.cur"), auto;\n  }\n\n  .blocklyToolboxGrab {\n    cursor: url("<<<PATH>>>/handclosed.cur"), auto;\n    cursor: grabbing;\n    cursor: -webkit-grabbing;\n  }\n\n  /* Category tree in Toolbox. */\n  .blocklyToolboxDiv {\n    background-color: #ddd;\n    overflow-x: visible;\n    overflow-y: auto;\n    padding: 4px 0 4px 0;\n    position: absolute;\n    z-index: 70;  /* so blocks go under toolbox when dragging */\n    -webkit-tap-highlight-color: transparent;  /* issue #1345 */\n  }\n\n  .blocklyToolboxContents {\n    display: flex;\n    flex-wrap: wrap;\n    flex-direction: column;\n  }\n\n  .blocklyToolboxContents:focus {\n    outline: none;\n  }\n'),(0,x.register)(x.Type.TOOLBOX,x.DEFAULT,pt.Toolbox);var Ne={HorizontalFlyout:function(t){Ne.HorizontalFlyout.superClass_.constructor.call(this,t),this.horizontalLayout=!0}};(0,l.module$exports$Blockly$utils$object.inherits)(Ne.HorizontalFlyout,ut.Flyout),Ne.HorizontalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var e=this.workspace_.getMetricsManager(),o=e.getScrollMetrics(),r=e.getViewMetrics();e=e.getAbsoluteMetrics(),"number"==typeof t.x&&(this.workspace_.scrollX=-(o.left+(o.width-r.width)*t.x)),this.workspace_.translate(this.workspace_.scrollX+e.left,this.workspace_.scrollY+e.top)}},Ne.HorizontalFlyout.prototype.getX=function(){return 0},Ne.HorizontalFlyout.prototype.getY=function(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager(),e=t.getAbsoluteMetrics(),o=t.getViewMetrics();t=t.getToolboxMetrics();var r=this.toolboxPosition_===st.Position.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?r?t.height:o.height-this.height_:r?0:o.height:r?0:o.height+e.top-this.height_},Ne.HorizontalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=t.width,this.setBackgroundPath_(t.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),t=this.getX();var e=this.getY();this.positionAt_(this.width_,this.height_,t,e)}},Ne.HorizontalFlyout.prototype.setBackgroundPath_=function(t,e){var o=this.toolboxPosition_===st.Position.TOP,r=["M 0,"+(o?0:this.CORNER_RADIUS)];o?(r.push("h",t+2*this.CORNER_RADIUS),r.push("v",e),r.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),r.push("h",-t),r.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(r.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),r.push("h",t),r.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),r.push("v",e),r.push("h",-t-2*this.CORNER_RADIUS)),r.push("z"),this.svgBackground_.setAttribute("d",r.join(" "))},Ne.HorizontalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setX(this.RTL?1/0:0)},Ne.HorizontalFlyout.prototype.wheel_=function(t){var e=(0,g.getScrollDeltaPixels)(t);if(e=e.x||e.y){var o=this.workspace_.getMetricsManager(),r=o.getScrollMetrics();e=o.getViewMetrics().left-r.left+e,this.workspace_.scrollbar.setX(e),(0,m.hide)(),D.DropDownDiv.hideWithoutAnimation()}t.preventDefault(),t.stopPropagation()},Ne.HorizontalFlyout.prototype.layout_=function(t,e){this.workspace_.scale=this.targetWorkspace.scale;var o=this.MARGIN,r=o+this.tabWidth_;this.RTL&&(t=t.reverse());for(var h,c=0;h=t[c];c++)if("block"===h.type){for(var G,k=(h=h.block).getDescendants(!1),C=0;G=k[C];C++)G.isInFlyout=!0;h.render(),k=h.getSvgRoot(),C=h.getHeightWidth(),G=h.outputConnection?this.tabWidth_:0,h.moveBy(G=this.RTL?r+C.width:r-G,o),G=this.createRect_(h,G,o,C,c),r+=C.width+e[c],this.addBlockListeners_(k,h,G)}else"button"===h.type&&(this.initFlyoutButton_(h.button,r,o),r+=h.button.width+e[c])},Ne.HorizontalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var e=this.dragAngleRange_;return t<90+e&&t>90-e||t>-90-e&&t<-90+e},Ne.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var t=this.svgGroup_.getBoundingClientRect(),e=t.top;return this.toolboxPosition_===st.Position.TOP?new yt.Rect(-1e9,e+t.height,-1e9,1e9):new yt.Rect(e,1e9,-1e9,1e9)},Ne.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var r,t=0,e=this.workspace_.getTopBlocks(!1),o=0;r=e[o];o++)t=Math.max(t,r.getHeightWidth().height);o=this.buttons_,r=0;for(var c;c=o[r];r++)t=Math.max(t,c.height);if(t+=1.5*this.MARGIN,t*=this.workspace_.scale,this.height_!==(t+=J.Scrollbar.scrollbarThickness)){for(o=0;r=e[o];o++)r.flyoutRect_&&this.moveRectToBlock_(r.flyoutRect_,r);this.targetWorkspace.toolboxPosition!==this.toolboxPosition_||this.toolboxPosition_!==st.Position.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+t),this.height_=t,this.position(),this.targetWorkspace.recordDragTargets()}},(0,x.register)(x.Type.FLYOUTS_HORIZONTAL_TOOLBOX,x.DEFAULT,Ne.HorizontalFlyout),l.module$exports$Blockly$Generator={Generator:function(t){this.name_=t,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}},l.module$exports$Blockly$Generator.Generator.prototype.INFINITE_LOOP_TRAP=null,l.module$exports$Blockly$Generator.Generator.prototype.STATEMENT_PREFIX=null,l.module$exports$Blockly$Generator.Generator.prototype.STATEMENT_SUFFIX=null,l.module$exports$Blockly$Generator.Generator.prototype.INDENT="  ",l.module$exports$Blockly$Generator.Generator.prototype.COMMENT_WRAP=60,l.module$exports$Blockly$Generator.Generator.prototype.ORDER_OVERRIDES=[],l.module$exports$Blockly$Generator.Generator.prototype.isInitialized=null,l.module$exports$Blockly$Generator.Generator.prototype.workspaceToCode=function(t){t||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),t=(0,l.module$exports$Blockly$common.getMainWorkspace)());var e=[];this.init(t),t=t.getTopBlocks(!0);for(var r,o=0;r=t[o];o++){var c=this.blockToCode(r);Array.isArray(c)&&(c=c[0]),c&&(r.outputConnection&&(c=this.scrubNakedValue(c),this.STATEMENT_PREFIX&&!r.suppressPrefixSuffix&&(c=this.injectId(this.STATEMENT_PREFIX,r)+c),this.STATEMENT_SUFFIX&&!r.suppressPrefixSuffix&&(c+=this.injectId(this.STATEMENT_SUFFIX,r))),e.push(c))}return e=e.join("\n"),(e=(e=(e=this.finish(e)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},l.module$exports$Blockly$Generator.Generator.prototype.prefixLines=function(t,e){return e+t.replace(/(?!\n$)\n/g,"\n"+e)},l.module$exports$Blockly$Generator.Generator.prototype.allNestedComments=function(t){var e=[];t=t.getDescendants(!0);for(var o=0;o<t.length;o++){var r=t[o].getCommentText();r&&e.push(r)}return e.length&&e.push(""),e.join("\n")},l.module$exports$Blockly$Generator.Generator.prototype.blockToCode=function(t,e){if(!1===this.isInitialized&&console.warn("Generator init was not called before blockToCode was called."),!t)return"";if(!t.isEnabled())return e?"":this.blockToCode(t.getNextBlock());if(t.isInsertionMarker())return e?"":this.blockToCode(t.getChildren(!1)[0]);var o=this[t.type];if("function"!=typeof o)throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+t.type+'".');if(o=o.call(t,t),Array.isArray(o)){if(!t.outputConnection)throw TypeError("Expecting string from statement block: "+t.type);return[this.scrub_(t,o[0],e),o[1]]}if("string"==typeof o)return this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(o=this.injectId(this.STATEMENT_PREFIX,t)+o),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(o+=this.injectId(this.STATEMENT_SUFFIX,t)),this.scrub_(t,o,e);if(null===o)return"";throw SyntaxError("Invalid code generated: "+o)},l.module$exports$Blockly$Generator.Generator.prototype.valueToCode=function(t,e,o){if(isNaN(o))throw TypeError("Expecting valid order from block: "+t.type);var r=t.getInputTargetBlock(e);if(!r||""===(e=this.blockToCode(r)))return"";if(!Array.isArray(e))throw TypeError("Expecting tuple from value block: "+r.type);if(t=e[0],e=e[1],isNaN(e))throw TypeError("Expecting valid order from value block: "+r.type);if(!t)return"";r=!1;var c=Math.floor(o),h=Math.floor(e);if(c<=h&&(c!==h||0!==c&&99!==c))for(r=!0,c=0;c<this.ORDER_OVERRIDES.length;c++)if(this.ORDER_OVERRIDES[c][0]===o&&this.ORDER_OVERRIDES[c][1]===e){r=!1;break}return r&&(t="("+t+")"),t},l.module$exports$Blockly$Generator.Generator.prototype.statementToCode=function(t,e){if(t=t.getInputTargetBlock(e),"string"!=typeof(e=this.blockToCode(t)))throw TypeError("Expecting code from statement block: "+(t&&t.type));return e&&(e=this.prefixLines(e,this.INDENT)),e},l.module$exports$Blockly$Generator.Generator.prototype.addLoopTrap=function(t,e){return this.INFINITE_LOOP_TRAP&&(t=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,e),this.INDENT)+t),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(t=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,e),this.INDENT)+t),this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(t+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,e),this.INDENT)),t},l.module$exports$Blockly$Generator.Generator.prototype.injectId=function(t,e){return e=e.id.replace(/\$/g,"$$$$"),t.replace(/%1/g,"'"+e+"'")},l.module$exports$Blockly$Generator.Generator.prototype.RESERVED_WORDS_="",l.module$exports$Blockly$Generator.Generator.prototype.addReservedWords=function(t){this.RESERVED_WORDS_+=t+","},l.module$exports$Blockly$Generator.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",Object.defineProperties(l.module$exports$Blockly$Generator.Generator.prototype,{variableDB_:{get:function(){return(0,ht.warn)("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_},set:function(t){(0,ht.warn)("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_=t}}}),l.module$exports$Blockly$Generator.Generator.prototype.provideFunction_=function(t,e){if(!this.definitions_[t]){var r,o=this.nameDB_.getDistinctName(t,l.module$exports$Blockly$Names.NameType.PROCEDURE);for(this.functionNames_[t]=o,e=e.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,o);r!==e;)r=e,e=e.replace(/^(( {2})*) {2}/gm,"$1\0");e=e.replace(/\0/g,this.INDENT),this.definitions_[t]=e}return this.functionNames_[t]},l.module$exports$Blockly$Generator.Generator.prototype.init=function(t){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)},l.module$exports$Blockly$Generator.Generator.prototype.scrub_=function(t,e,o){return e},l.module$exports$Blockly$Generator.Generator.prototype.finish=function(t){return delete this.definitions_,delete this.functionNames_,t},l.module$exports$Blockly$Generator.Generator.prototype.scrubNakedValue=function(t){return t},l.module$exports$Blockly$FieldDropdown={FieldDropdown:function(t,e,o){"function"!=typeof t&&cr(t),this.menuGenerator_=t,this.suffixField=this.prefixField=this.generatedOptions_=null,this.trimOptions_(),this.selectedOption_=this.getOptions(!1)[0],l.module$exports$Blockly$FieldDropdown.FieldDropdown.superClass_.constructor.call(this,this.selectedOption_[1],e,o),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null}},(0,l.module$exports$Blockly$utils$object.inherits)(l.module$exports$Blockly$FieldDropdown.FieldDropdown,z.Field),l.module$exports$Blockly$FieldDropdown.FieldDropdown.fromJson=function(t){return new this(t.options,void 0,t)},l.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.fromXml=function(t){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(t.textContent)},l.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.loadState=function(t){this.loadLegacyState(l.module$exports$Blockly$FieldDropdown.FieldDropdown,t)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(t))},l.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.SERIALIZABLE=!0,l.module$exports$Blockly$FieldDropdown.FieldDropdown.CHECKMARK_OVERHANG=25,l.module$exports$Blockly$FieldDropdown.FieldDropdown.MAX_MENU_HEIGHT_VH=.45,l.module$exports$Blockly$FieldDropdown.FieldDropdown.ARROW_CHAR=ot.ANDROID?"\u25bc":"\u25be",l.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.CURSOR="default",l.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.initView=function(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=(0,s.createSvgElement)(B.Svg.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&(0,s.addClass)(this.borderRect_,"blocklyDropdownRect")},l.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.shouldAddBorderRect_=function(){return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.sourceBlock_.isShadow()},l.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.createTextArrow_=function(){this.arrow_=(0,s.createSvgElement)(B.Svg.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?l.module$exports$Blockly$FieldDropdown.FieldDropdown.ARROW_CHAR+" ":" "+l.module$exports$Blockly$FieldDropdown.FieldDropdown.ARROW_CHAR)),this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)},l.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.createSVGArrow_=function(){this.svgArrow_=(0,s.createSvgElement)(B.Svg.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(s.XLINK_NS,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)},l.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.showEditor_=function(t){if(this.dropdownCreate_(),this.menu_.openingCoords=t&&"number"==typeof t.clientX?new N.Coordinate(t.clientX,t.clientY):null,D.DropDownDiv.clearContent(),this.menu_.render(D.DropDownDiv.getContentDiv()),t=this.menu_.getElement(),(0,s.addClass)(t,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV){t=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().getColour():this.sourceBlock_.getColour();var e=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;D.DropDownDiv.setColour(t,e)}D.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()},l.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.dropdownCreate_=function(){var t=new ee.Menu;t.setRole(F.Role.LISTBOX),this.menu_=t;var e=this.getOptions(!1);this.selectedMenuItem_=null;for(var o=0;o<e.length;o++){var r=e[o][0],c=e[o][1];if("object"==typeof r){var h=new Image(r.width,r.height);h.src=r.src,h.alt=r.alt||"",r=h}(r=new $e.MenuItem(r,c)).setRole(F.Role.OPTION),r.setRightToLeft(this.sourceBlock_.RTL),r.setCheckable(!0),t.addChild(r),r.setChecked(c===this.value_),c===this.value_&&(this.selectedMenuItem_=r),r.onAction(this.handleMenuActionEvent_,this)}},l.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()},l.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.handleMenuActionEvent_=function(t){D.DropDownDiv.hideIfOwner(this,!0),this.onItemSelected_(this.menu_,t)},l.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.onItemSelected_=function(t,e){this.setValue(e.getValue())},l.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.trimOptions_=function(){var t=this.menuGenerator_;if(Array.isArray(t)){for(var e=!1,o=0;o<t.length;o++){var r=t[o][0];"string"==typeof r?t[o][0]=(0,It.replaceMessageReferences)(r):(null!==r.alt&&(t[o][0].alt=(0,It.replaceMessageReferences)(r.alt)),e=!0)}if(!(e||2>t.length)){for(e=[],o=0;o<t.length;o++)e.push(t[o][0]);o=(0,l.module$exports$Blockly$utils$string.shortestStringLength)(e),r=(0,l.module$exports$Blockly$utils$string.commonWordPrefix)(e,o);var c=(0,l.module$exports$Blockly$utils$string.commonWordSuffix)(e,o);!r&&!c||o<=r+c||(r&&(this.prefixField=e[0].substring(0,r-1)),c&&(this.suffixField=e[0].substr(1-c)),this.menuGenerator_=l.module$exports$Blockly$FieldDropdown.FieldDropdown.applyTrim_(t,r,c))}}},l.module$exports$Blockly$FieldDropdown.FieldDropdown.applyTrim_=function(t,e,o){for(var r=[],c=0;c<t.length;c++){var h=t[c][0],k=t[c][1];h=h.substring(e,h.length-o),r[c]=[h,k]}return r},l.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.isOptionListDynamic=function(){return"function"==typeof this.menuGenerator_},l.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.getOptions=function(t){return this.isOptionListDynamic()?(this.generatedOptions_&&t||(this.generatedOptions_=this.menuGenerator_.call(this),cr(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_},l.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.doClassValidation_=function(t){for(var c,e=!1,o=this.getOptions(!0),r=0;c=o[r];r++)if(c[1]===t){e=!0;break}return e?t:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+t),null)},l.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.doValueUpdate_=function(t){l.module$exports$Blockly$FieldDropdown.FieldDropdown.superClass_.doValueUpdate_.call(this,t),t=this.getOptions(!0);for(var o,e=0;o=t[e];e++)o[1]===this.value_&&(this.selectedOption_=o)},l.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.applyColour=function(){this.borderRect_&&(this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary),this.borderRect_.setAttribute("fill",this.menu_?this.sourceBlock_.style.colourTertiary:"transparent")),this.sourceBlock_&&this.arrow_&&(this.arrow_.style.fill=this.sourceBlock_.isShadow()?this.sourceBlock_.style.colourSecondary:this.sourceBlock_.style.colourPrimary)},l.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="",this.imageElement_.style.display="none";var t=this.selectedOption_&&this.selectedOption_[0];t&&"object"==typeof t?this.renderSelectedImage_(t):this.renderSelectedText_(),this.positionBorderRect_()},l.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.renderSelectedImage_=function(t){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(s.XLINK_NS,"xlink:href",t.src),this.imageElement_.setAttribute("height",t.height),this.imageElement_.setAttribute("width",t.width);var e=Number(t.height);t=Number(t.width);var o=!!this.borderRect_,r=Math.max(o?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,e+10);o=o?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var c=this.svgArrow_?this.positionSVGArrow_(t+o,r/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):(0,s.getFastTextWidth)(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);this.size_.width=t+c+2*o,this.size_.height=r;var h=0;this.sourceBlock_.RTL?this.imageElement_.setAttribute("x",o+c):(h=t+c,this.textElement_.setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",o)),this.imageElement_.setAttribute("y",r/2-e/2),this.positionTextElement_(h+o,t+c)},l.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_(),(0,s.addClass)(this.textElement_,"blocklyDropdownText"),this.textElement_.setAttribute("text-anchor","start");var t=!!this.borderRect_,e=Math.max(t?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT),o=(0,s.getFastTextWidth)(this.textElement_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);t=t?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var r=0;this.svgArrow_&&(r=this.positionSVGArrow_(o+t,e/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=o+r+2*t,this.size_.height=e,this.positionTextElement_(t,o)},l.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.positionSVGArrow_=function(t,e){if(!this.svgArrow_)return 0;var o=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,r=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,c=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(this.sourceBlock_.RTL?o:t+r)+","+e+")"),c+r},l.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.getText_=function(){if(!this.selectedOption_)return null;var t=this.selectedOption_[0];return"object"==typeof t?t.alt:t};var cr=function(t){if(!Array.isArray(t))throw TypeError("FieldDropdown options must be an array.");if(!t.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var e=!1,o=0;o<t.length;o++){var r=t[o];Array.isArray(r)?"string"!=typeof r[1]?(e=!0,console.error("Invalid option["+o+"]: Each FieldDropdown option id must be a string. Found "+r[1]+" in: ",r)):r[0]&&"string"!=typeof r[0]&&"string"!=typeof r[0].src&&(e=!0,console.error("Invalid option["+o+"]: Each FieldDropdown option must have a string label or image description. Found"+r[0]+" in: ",r)):(e=!0,console.error("Invalid option["+o+"]: Each FieldDropdown option must be an array. Found: ",r))}if(e)throw TypeError("Found invalid FieldDropdown options.")};(0,He.register)("field_dropdown",l.module$exports$Blockly$FieldDropdown.FieldDropdown);var Lt={FieldVariable:function(t,e,o,r,c){this.menuGenerator_=Lt.FieldVariable.dropdownCreate,this.defaultVariableName="string"==typeof t?t:"",this.size_=new et.Size(0,0),c&&this.configure_(c),e&&this.setValidator(e),c||this.setTypes_(o,r)}};(0,l.module$exports$Blockly$utils$object.inherits)(Lt.FieldVariable,l.module$exports$Blockly$FieldDropdown.FieldDropdown),Lt.FieldVariable.fromJson=function(t){return new this((0,It.replaceMessageReferences)(t.variable),void 0,void 0,void 0,t)},Lt.FieldVariable.prototype.SERIALIZABLE=!0,Lt.FieldVariable.prototype.configure_=function(t){Lt.FieldVariable.superClass_.configure_.call(this,t),this.setTypes_(t.variableTypes,t.defaultType)},Lt.FieldVariable.prototype.initModel=function(){if(!this.variable_){var t=(0,l.module$exports$Blockly$Variables.getOrCreateVariablePackage)(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_(t.getId())}},Lt.FieldVariable.prototype.shouldAddBorderRect_=function(){return Lt.FieldVariable.superClass_.shouldAddBorderRect_.call(this)&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||"variables_get"!==this.sourceBlock_.type)},Lt.FieldVariable.prototype.fromXml=function(t){var e=t.getAttribute("id"),o=t.textContent,r=t.getAttribute("variabletype")||t.getAttribute("variableType")||"";if(e=(0,l.module$exports$Blockly$Variables.getOrCreateVariablePackage)(this.sourceBlock_.workspace,e,o,r),null!==r&&r!==e.type)throw Error("Serialized variable type with id '"+e.getId()+"' had type "+e.type+", and does not match variable field that references it: "+(0,l.module$exports$Blockly$Xml.domToText)(t)+".");this.setValue(e.getId())},Lt.FieldVariable.prototype.toXml=function(t){return this.initModel(),t.id=this.variable_.getId(),t.textContent=this.variable_.name,this.variable_.type&&t.setAttribute("variabletype",this.variable_.type),t},Lt.FieldVariable.prototype.saveState=function(t){var e=this.saveLegacyState(Lt.FieldVariable);return null!==e||(this.initModel(),e={id:this.variable_.getId()},t&&(e.name=this.variable_.name,e.type=this.variable_.type)),e},Lt.FieldVariable.prototype.loadState=function(t){this.loadLegacyState(Lt.FieldVariable,t)||(t=(0,l.module$exports$Blockly$Variables.getOrCreateVariablePackage)(this.sourceBlock_.workspace,t.id||null,t.name,t.type||""),this.setValue(t.getId()))},Lt.FieldVariable.prototype.setSourceBlock=function(t){if(t.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");Lt.FieldVariable.superClass_.setSourceBlock.call(this,t)},Lt.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},Lt.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},Lt.FieldVariable.prototype.getVariable=function(){return this.variable_},Lt.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null},Lt.FieldVariable.prototype.doClassValidation_=function(t){if(null===t)return null;var e=(0,l.module$exports$Blockly$Variables.getVariable)(this.sourceBlock_.workspace,t);return e?this.typeIsAllowed_(e=e.type)?t:(console.warn("Variable type doesn't match this field!  Type was "+e),null):(console.warn("Variable id doesn't point to a real variable! ID was "+t),null)},Lt.FieldVariable.prototype.doValueUpdate_=function(t){this.variable_=(0,l.module$exports$Blockly$Variables.getVariable)(this.sourceBlock_.workspace,t),Lt.FieldVariable.superClass_.doValueUpdate_.call(this,t)},Lt.FieldVariable.prototype.typeIsAllowed_=function(t){var e=this.getVariableTypes_();if(!e)return!0;for(var o=0;o<e.length;o++)if(t===e[o])return!0;return!1},Lt.FieldVariable.prototype.getVariableTypes_=function(){var t=this.variableTypes;if(null===t&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(0===(t=t||[""]).length)throw t=this.getText(),Error("'variableTypes' of field variable "+t+" was an empty list");return t},Lt.FieldVariable.prototype.setTypes_=function(t,e){if(e=e||"",null==t)t=null;else{if(!Array.isArray(t))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");for(var o=!1,r=0;r<t.length;r++)t[r]===e&&(o=!0);if(!o)throw Error("Invalid default type '"+e+"' in the definition of a FieldVariable")}this.defaultType_=e,this.variableTypes=t},Lt.FieldVariable.prototype.refreshVariableName=function(){this.forceRerender()},Lt.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var t=this.getText(),e=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var o=this.getVariableTypes_(),r=0;r<o.length;r++){var c=this.sourceBlock_.workspace.getVariablesOfType(o[r]);e=e.concat(c)}for(e.sort(yn.VariableModel.compareByName),o=[],r=0;r<e.length;r++)o[r]=[e[r].name,e[r].getId()];return o.push([l.module$exports$Blockly$Msg.Msg.RENAME_VARIABLE,l.module$exports$Blockly$internalConstants.RENAME_VARIABLE_ID]),l.module$exports$Blockly$Msg.Msg.DELETE_VARIABLE&&o.push([l.module$exports$Blockly$Msg.Msg.DELETE_VARIABLE.replace("%1",t),l.module$exports$Blockly$internalConstants.DELETE_VARIABLE_ID]),o},Lt.FieldVariable.prototype.onItemSelected_=function(t,e){if(t=e.getValue(),this.sourceBlock_&&this.sourceBlock_.workspace){if(t===l.module$exports$Blockly$internalConstants.RENAME_VARIABLE_ID)return void(0,l.module$exports$Blockly$Variables.renameVariable)(this.sourceBlock_.workspace,this.variable_);if(t===l.module$exports$Blockly$internalConstants.DELETE_VARIABLE_ID)return void this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId())}this.setValue(t)},Lt.FieldVariable.prototype.referencesVariables=function(){return!0},(0,He.register)("field_variable",Lt.FieldVariable),l.module$exports$Blockly$FieldTextInput={FieldTextInput:function(t,e,o){this.spellcheck_=!0,l.module$exports$Blockly$FieldTextInput.FieldTextInput.superClass_.constructor.call(this,t,e,o),this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.htmlInput_=null,this.fullBlockClickTarget_=!1,this.workspace_=null}},(0,l.module$exports$Blockly$utils$object.inherits)(l.module$exports$Blockly$FieldTextInput.FieldTextInput,z.Field),l.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.DEFAULT_VALUE="",l.module$exports$Blockly$FieldTextInput.FieldTextInput.fromJson=function(t){return new this((0,It.replaceMessageReferences)(t.text),void 0,t)},l.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.SERIALIZABLE=!0,l.module$exports$Blockly$FieldTextInput.FieldTextInput.BORDERRADIUS=4,l.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.CURSOR="text",l.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.configure_=function(t){l.module$exports$Blockly$FieldTextInput.FieldTextInput.superClass_.configure_.call(this,t),"boolean"==typeof t.spellcheck&&(this.spellcheck_=t.spellcheck)},l.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.initView=function(){if(this.getConstants().FULL_BLOCK_FIELDS){for(var r,t=0,e=0,o=0;r=this.sourceBlock_.inputList[o];o++){for(var c=0;r.fieldRow[c];c++)t++;r.connection&&e++}this.fullBlockClickTarget_=1>=t&&this.sourceBlock_.outputConnection&&!e}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()},l.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.doClassValidation_=function(t){return null==t?null:String(t)},l.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.doValueInvalid_=function(t){this.isBeingEdited_&&(this.isTextValid_=!1,t=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&(0,f.isEnabled)()&&(0,f.fire)(new((0,f.get)(f.CHANGE))(this.sourceBlock_,"field",this.name||null,t,this.value_)))},l.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.doValueUpdate_=function(t){this.isTextValid_=!0,this.value_=t,this.isBeingEdited_||(this.isDirty_=!0)},l.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.applyColour=function(){this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS&&(this.borderRect_?this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR))},l.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.render_=function(){if(l.module$exports$Blockly$FieldTextInput.FieldTextInput.superClass_.render_.call(this),this.isBeingEdited_){this.resizeEditor_();var t=this.htmlInput_;this.isTextValid_?((0,s.removeClass)(t,"blocklyInvalidInput"),(0,F.setState)(t,F.State.INVALID,!1)):((0,s.addClass)(t,"blocklyInvalidInput"),(0,F.setState)(t,F.State.INVALID,!0))}},l.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.setSpellcheck=function(t){t!==this.spellcheck_&&(this.spellcheck_=t,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))},l.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.showEditor_=function(t,e){this.workspace_=this.sourceBlock_.workspace,!(t=e||!1)&&(ot.MOBILE||ot.ANDROID||ot.IPAD)?this.showPromptEditor_():this.showInlineEditor_(t)},l.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.showPromptEditor_=function(){(0,_e.prompt)(l.module$exports$Blockly$Msg.Msg.CHANGE_VALUE_TITLE,this.getText(),function(t){null!==t&&this.setValue(this.getValueFromEditorText_(t))}.bind(this))},l.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.showInlineEditor_=function(t){(0,m.show)(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,t||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())},l.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.widgetCreate_=function(){(0,f.setGroup)(!0);var t=(0,m.getDiv)();(0,s.addClass)(this.getClickTarget_(),"editing");var e=document.createElement("input");e.className="blocklyHtmlInput",e.setAttribute("spellcheck",this.spellcheck_);var o=this.workspace_.getScale(),r=this.getConstants().FIELD_TEXT_FONTSIZE*o+"pt";if(t.style.fontSize=r,e.style.fontSize=r,r=l.module$exports$Blockly$FieldTextInput.FieldTextInput.BORDERRADIUS*o+"px",this.fullBlockClickTarget_){r=((r=this.getScaledBBox()).bottom-r.top)/2+"px";var c=this.sourceBlock_.getParent()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;e.style.border=1*o+"px solid "+c,t.style.borderRadius=r,t.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(t.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*o+"px")}return e.style.borderRadius=r,t.appendChild(e),e.value=e.defaultValue=this.getEditorText_(this.value_),e.untypedDefaultValue_=this.value_,e.oldValue_=null,this.resizeEditor_(),this.bindInputEvents_(e),e},l.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_&&this.onFinishEditing_(this.value_),(0,f.setGroup)(!1),this.unbindInputEvents_();var t=(0,m.getDiv)().style;t.width="auto",t.height="auto",t.fontSize="",t.transition="",t.boxShadow="",this.htmlInput_=null,(0,s.removeClass)(this.getClickTarget_(),"editing")},l.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.bindInputEvents_=function(t){this.onKeyDownWrapper_=(0,g.conditionalBind)(t,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=(0,g.conditionalBind)(t,"input",this,this.onHtmlInputChange_)},l.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.unbindInputEvents_=function(){this.onKeyDownWrapper_&&((0,g.unbind)(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&((0,g.unbind)(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)},l.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode===Z_KeyCodes.ENTER?((0,m.hide)(),D.DropDownDiv.hideWithoutAnimation()):t.keyCode===Z_KeyCodes.ESC?(this.setValue(this.htmlInput_.untypedDefaultValue_),(0,m.hide)(),D.DropDownDiv.hideWithoutAnimation()):t.keyCode===Z_KeyCodes.TAB&&((0,m.hide)(),D.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!t.shiftKey),t.preventDefault())},l.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.onHtmlInputChange_=function(t){(t=this.htmlInput_.value)!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=t,t=this.getValueFromEditorText_(t),this.setValue(t),this.forceRerender(),this.resizeEditor_())},l.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.setEditorValue_=function(t){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(t)),this.setValue(t)},l.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.resizeEditor_=function(){var t=(0,m.getDiv)(),e=this.getScaledBBox();t.style.width=e.right-e.left+"px",t.style.height=e.bottom-e.top+"px",e=new N.Coordinate(this.sourceBlock_.RTL?e.right-t.offsetWidth:e.left,e.top),t.style.left=e.x+"px",t.style.top=e.y+"px"},l.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.isTabNavigable=function(){return!0},l.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null},l.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.getEditorText_=function(t){return String(t)},l.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.getValueFromEditorText_=function(t){return t},(0,He.register)("field_input",l.module$exports$Blockly$FieldTextInput.FieldTextInput);var se={FieldNumber:function(t,e,o,r,c,h){this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,se.FieldNumber.superClass_.constructor.call(this,t,c,h),h||this.setConstraints(e,o,r)}};(0,l.module$exports$Blockly$utils$object.inherits)(se.FieldNumber,l.module$exports$Blockly$FieldTextInput.FieldTextInput),se.FieldNumber.prototype.DEFAULT_VALUE=0,se.FieldNumber.fromJson=function(t){return new this(t.value,void 0,void 0,void 0,void 0,t)},se.FieldNumber.prototype.SERIALIZABLE=!0,se.FieldNumber.prototype.configure_=function(t){se.FieldNumber.superClass_.configure_.call(this,t),this.setMinInternal_(t.min),this.setMaxInternal_(t.max),this.setPrecisionInternal_(t.precision)},se.FieldNumber.prototype.setConstraints=function(t,e,o){this.setMinInternal_(t),this.setMaxInternal_(e),this.setPrecisionInternal_(o),this.setValue(this.getValue())},se.FieldNumber.prototype.setMin=function(t){this.setMinInternal_(t),this.setValue(this.getValue())},se.FieldNumber.prototype.setMinInternal_=function(t){null==t?this.min_=-1/0:(t=Number(t),isNaN(t)||(this.min_=t))},se.FieldNumber.prototype.getMin=function(){return this.min_},se.FieldNumber.prototype.setMax=function(t){this.setMaxInternal_(t),this.setValue(this.getValue())},se.FieldNumber.prototype.setMaxInternal_=function(t){null==t?this.max_=1/0:(t=Number(t),isNaN(t)||(this.max_=t))},se.FieldNumber.prototype.getMax=function(){return this.max_},se.FieldNumber.prototype.setPrecision=function(t){this.setPrecisionInternal_(t),this.setValue(this.getValue())},se.FieldNumber.prototype.setPrecisionInternal_=function(t){this.precision_=Number(t)||0;var e=String(this.precision_);-1!==e.indexOf("e")&&(e=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));var o=e.indexOf(".");this.decimalPlaces_=-1===o?t?0:null:e.length-o-1},se.FieldNumber.prototype.getPrecision=function(){return this.precision_},se.FieldNumber.prototype.doClassValidation_=function(t){return null===t||(t=(t=(t=(t=String(t)).replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),t=Number(t||0),isNaN(t))?null:(t=Math.min(Math.max(t,this.min_),this.max_),this.precision_&&isFinite(t)&&(t=Math.round(t/this.precision_)*this.precision_),null!==this.decimalPlaces_&&(t=Number(t.toFixed(this.decimalPlaces_))),t)},se.FieldNumber.prototype.widgetCreate_=function(){var t=se.FieldNumber.superClass_.widgetCreate_.call(this);return-1/0<this.min_&&(0,F.setState)(t,F.State.VALUEMIN,this.min_),1/0>this.max_&&(0,F.setState)(t,F.State.VALUEMAX,this.max_),t},(0,He.register)("field_number",se.FieldNumber);var Xt={FieldMultilineInput:function(t,e,o){Xt.FieldMultilineInput.superClass_.constructor.call(this,t,e,o),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1}};(0,l.module$exports$Blockly$utils$object.inherits)(Xt.FieldMultilineInput,l.module$exports$Blockly$FieldTextInput.FieldTextInput),Xt.FieldMultilineInput.prototype.configure_=function(t){Xt.FieldMultilineInput.superClass_.configure_.call(this,t),t.maxLines&&this.setMaxLines(t.maxLines)},Xt.FieldMultilineInput.fromJson=function(t){return new this((0,It.replaceMessageReferences)(t.text),void 0,t)},Xt.FieldMultilineInput.prototype.toXml=function(t){return t.textContent=this.getValue().replace(/\n/g,"&#10;"),t},Xt.FieldMultilineInput.prototype.fromXml=function(t){this.setValue(t.textContent.replace(/&#10;/g,"\n"))},Xt.FieldMultilineInput.prototype.saveState=function(){var t=this.saveLegacyState(Xt.FieldMultilineInput);return null!==t?t:this.getValue()},Xt.FieldMultilineInput.prototype.loadState=function(t){this.loadLegacyState(z.Field,t)||this.setValue(t)},Xt.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_(),this.textGroup_=(0,s.createSvgElement)(B.Svg.G,{class:"blocklyEditableText"},this.fieldGroup_)},Xt.FieldMultilineInput.prototype.getDisplayText_=function(){var t=this.getText();if(!t)return z.Field.NBSP;var e=t.split("\n");t="";for(var o=this.isOverflowedY_?this.maxLines_:e.length,r=0;r<o;r++){var c=e[r];c.length>this.maxDisplayLength?c=c.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&r===o-1&&(c=c.substring(0,c.length-3)+"..."),t+=c=c.replace(/\s/g,z.Field.NBSP),r!==o-1&&(t+="\n")}return this.sourceBlock_.RTL&&(t+="\u200f"),t},Xt.FieldMultilineInput.prototype.doValueUpdate_=function(t){Xt.FieldMultilineInput.superClass_.doValueUpdate_.call(this,t),this.isOverflowedY_=this.value_.split("\n").length>this.maxLines_},Xt.FieldMultilineInput.prototype.render_=function(){for(var t;t=this.textGroup_.firstChild;)this.textGroup_.removeChild(t);t=this.getDisplayText_().split("\n");for(var e=0,o=0;o<t.length;o++){var r=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;(0,s.createSvgElement)(B.Svg.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:e+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(t[o])),e+=r}this.isBeingEdited_&&(t=this.htmlInput_,this.isOverflowedY_?(0,s.addClass)(t,"blocklyHtmlTextAreaInputOverflowedY"):(0,s.removeClass)(t,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),t=this.htmlInput_,this.isTextValid_?((0,s.removeClass)(t,"blocklyInvalidInput"),(0,F.setState)(t,F.State.INVALID,!1)):((0,s.addClass)(t,"blocklyInvalidInput"),(0,F.setState)(t,F.State.INVALID,!0)))},Xt.FieldMultilineInput.prototype.updateSize_=function(){for(var t=this.textGroup_.childNodes,e=0,o=0,r=0;r<t.length;r++){var c=(0,s.getTextWidth)(t[r]);c>e&&(e=c),o+=this.getConstants().FIELD_TEXT_HEIGHT+(0<r?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){t=this.value_.split("\n"),r=(0,s.createSvgElement)(B.Svg.TEXT,{class:"blocklyText blocklyMultilineText"}),c=this.getConstants().FIELD_TEXT_FONTSIZE;for(var h=this.getConstants().FIELD_TEXT_FONTWEIGHT,k=this.getConstants().FIELD_TEXT_FONTFAMILY,C=0;C<t.length;C++){t[C].length>this.maxDisplayLength&&(t[C]=t[C].substring(0,this.maxDisplayLength)),r.textContent=t[C];var G=(0,s.getFastTextWidth)(r,c,h,k);G>e&&(e=G)}e+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(o+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,e+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",e),this.borderRect_.setAttribute("height",o)),this.size_.width=e,this.size_.height=o,this.positionBorderRect_()},Xt.FieldMultilineInput.prototype.showEditor_=function(t,e){Xt.FieldMultilineInput.superClass_.showEditor_.call(this,t,e),this.forceRerender()},Xt.FieldMultilineInput.prototype.widgetCreate_=function(){var t=(0,m.getDiv)(),e=this.workspace_.getScale(),o=document.createElement("textarea");o.className="blocklyHtmlInput blocklyHtmlTextAreaInput",o.setAttribute("spellcheck",this.spellcheck_);var r=this.getConstants().FIELD_TEXT_FONTSIZE*e+"pt";t.style.fontSize=r,o.style.fontSize=r,o.style.borderRadius=l.module$exports$Blockly$FieldTextInput.FieldTextInput.BORDERRADIUS*e+"px",r=this.getConstants().FIELD_BORDER_RECT_X_PADDING*e;var c=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*e/2;return o.style.padding=c+"px "+r+"px "+c+"px "+r+"px",r=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,o.style.lineHeight=r*e+"px",t.appendChild(o),o.value=o.defaultValue=this.getEditorText_(this.value_),o.untypedDefaultValue_=this.value_,o.oldValue_=null,ot.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(o),o},Xt.FieldMultilineInput.prototype.setMaxLines=function(t){"number"==typeof t&&0<t&&t!==this.maxLines_&&(this.maxLines_=t,this.forceRerender())},Xt.FieldMultilineInput.prototype.getMaxLines=function(){return this.maxLines_},Xt.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode!==Z_KeyCodes.ENTER&&Xt.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,t)},(0,Vt.register)("\n  .blocklyHtmlTextAreaInput {\n    font-family: monospace;\n    resize: none;\n    overflow: hidden;\n    height: 100%;\n    text-align: left;\n  }\n\n  .blocklyHtmlTextAreaInputOverflowedY {\n    overflow-y: scroll;\n  }\n"),(0,He.register)("field_multilinetext",Xt.FieldMultilineInput);var Cn={FieldLabelSerializable:function(t,e,o){Cn.FieldLabelSerializable.superClass_.constructor.call(this,t,e,o)}};(0,l.module$exports$Blockly$utils$object.inherits)(Cn.FieldLabelSerializable,l.module$exports$Blockly$FieldLabel.FieldLabel),Cn.FieldLabelSerializable.fromJson=function(t){return new this((0,It.replaceMessageReferences)(t.text),void 0,t)},Cn.FieldLabelSerializable.prototype.EDITABLE=!1,Cn.FieldLabelSerializable.prototype.SERIALIZABLE=!0,(0,He.register)("field_label_serializable",Cn.FieldLabelSerializable);var St={FieldColour:function(t,e,o){St.FieldColour.superClass_.constructor.call(this,t,e,o),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null}};(0,l.module$exports$Blockly$utils$object.inherits)(St.FieldColour,z.Field),St.FieldColour.fromJson=function(t){return new this(t.colour,void 0,t)},St.FieldColour.prototype.SERIALIZABLE=!0,St.FieldColour.prototype.CURSOR="default",St.FieldColour.prototype.isDirty_=!1,St.FieldColour.prototype.colours_=null,St.FieldColour.prototype.titles_=null,St.FieldColour.prototype.columns_=0,St.FieldColour.prototype.configure_=function(t){St.FieldColour.superClass_.configure_.call(this,t),t.colourOptions&&(this.colours_=t.colourOptions,this.titles_=t.colourTitles),t.columns&&(this.columns_=t.columns)},St.FieldColour.prototype.initView=function(){this.size_=new et.Size(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity="1")},St.FieldColour.prototype.applyColour=function(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())},St.FieldColour.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:(0,wt.parse)(t)},St.FieldColour.prototype.doValueUpdate_=function(t){this.value_=t,this.borderRect_?this.borderRect_.style.fill=t:this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",t),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))},St.FieldColour.prototype.getText=function(){var t=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(t)&&(t="#"+t[1]+t[3]+t[5]),t},St.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),St.FieldColour.prototype.DEFAULT_VALUE=St.FieldColour.COLOURS[0],St.FieldColour.TITLES=[],St.FieldColour.COLUMNS=7,St.FieldColour.prototype.setColours=function(t,e){return this.colours_=t,e&&(this.titles_=e),this},St.FieldColour.prototype.setColumns=function(t){return this.columns_=t,this},St.FieldColour.prototype.showEditor_=function(){this.dropdownCreate_(),D.DropDownDiv.getContentDiv().appendChild(this.picker_),D.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})},St.FieldColour.prototype.onClick_=function(t){null!==(t=(t=t.target)&&t.label)&&(this.setValue(t),D.DropDownDiv.hideIfOwner(this))},St.FieldColour.prototype.onKeyDown_=function(t){var e=!1;t.keyCode===Z_KeyCodes.UP?(this.moveHighlightBy_(0,-1),e=!0):t.keyCode===Z_KeyCodes.DOWN?(this.moveHighlightBy_(0,1),e=!0):t.keyCode===Z_KeyCodes.LEFT?(this.moveHighlightBy_(-1,0),e=!0):t.keyCode===Z_KeyCodes.RIGHT?(this.moveHighlightBy_(1,0),e=!0):t.keyCode===Z_KeyCodes.ENTER&&((e=this.getHighlighted_())&&null!==(e=e&&e.label)&&this.setValue(e),D.DropDownDiv.hideWithoutAnimation(),e=!0),e&&t.stopPropagation()},St.FieldColour.prototype.moveHighlightBy_=function(t,e){var o=this.colours_||St.FieldColour.COLOURS,r=this.columns_||St.FieldColour.COLUMNS,c=this.highlightedIndex_%r,h=Math.floor(this.highlightedIndex_/r);c+=t,h+=e,0>t?0>c&&0<h?(c=r-1,h--):0>c&&(c=0):0<t?c>r-1&&h<Math.floor(o.length/r)-1?(c=0,h++):c>r-1&&c--:0>e?0>h&&(h=0):0<e&&h>Math.floor(o.length/r)-1&&(h=Math.floor(o.length/r)-1),this.setHighlightedCell_(this.picker_.childNodes[h].childNodes[c],h*r+c)},St.FieldColour.prototype.onMouseMove_=function(t){var e=(t=t.target)&&Number(t.getAttribute("data-index"));null!==e&&e!==this.highlightedIndex_&&this.setHighlightedCell_(t,e)},St.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus({preventScroll:!0})},St.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var t=this.getHighlighted_();t&&(0,s.removeClass)(t,"blocklyColourHighlighted")},St.FieldColour.prototype.getHighlighted_=function(){var t=this.columns_||St.FieldColour.COLUMNS,e=this.picker_.childNodes[Math.floor(this.highlightedIndex_/t)];return e?e.childNodes[this.highlightedIndex_%t]:null},St.FieldColour.prototype.setHighlightedCell_=function(t,e){var o=this.getHighlighted_();o&&(0,s.removeClass)(o,"blocklyColourHighlighted"),(0,s.addClass)(t,"blocklyColourHighlighted"),this.highlightedIndex_=e,(0,F.setState)(this.picker_,F.State.ACTIVEDESCENDANT,t.getAttribute("id"))},St.FieldColour.prototype.dropdownCreate_=function(){var t=this.columns_||St.FieldColour.COLUMNS,e=this.colours_||St.FieldColour.COLOURS,o=this.titles_||St.FieldColour.TITLES,r=this.getValue(),c=document.createElement("table");c.className="blocklyColourTable",c.tabIndex=0,c.dir="ltr",(0,F.setRole)(c,F.Role.GRID),(0,F.setState)(c,F.State.EXPANDED,!0),(0,F.setState)(c,F.State.ROWCOUNT,Math.floor(e.length/t)),(0,F.setState)(c,F.State.COLCOUNT,t);for(var h,k=0;k<e.length;k++){k%t==0&&(h=document.createElement("tr"),(0,F.setRole)(h,F.Role.ROW),c.appendChild(h));var C=document.createElement("td");h.appendChild(C),C.label=e[k],C.title=o[k]||e[k],C.id=(0,_t.getNextUniqueId)(),C.setAttribute("data-index",k),(0,F.setRole)(C,F.Role.GRIDCELL),(0,F.setState)(C,F.State.LABEL,e[k]),(0,F.setState)(C,F.State.SELECTED,e[k]===r),C.style.backgroundColor=e[k],e[k]===r&&(C.className="blocklyColourSelected",this.highlightedIndex_=k)}this.onClickWrapper_=(0,g.conditionalBind)(c,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=(0,g.conditionalBind)(c,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=(0,g.conditionalBind)(c,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=(0,g.conditionalBind)(c,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=(0,g.conditionalBind)(c,"keydown",this,this.onKeyDown_),this.picker_=c},St.FieldColour.prototype.dropdownDispose_=function(){this.onClickWrapper_&&((0,g.unbind)(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&((0,g.unbind)(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&((0,g.unbind)(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&((0,g.unbind)(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&((0,g.unbind)(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null},(0,Vt.register)("\n  .blocklyColourTable {\n    border-collapse: collapse;\n    display: block;\n    outline: none;\n    padding: 1px;\n  }\n\n  .blocklyColourTable>tr>td {\n    border: .5px solid #888;\n    box-sizing: border-box;\n    cursor: pointer;\n    display: inline-block;\n    height: 20px;\n    padding: 0;\n    width: 20px;\n  }\n\n  .blocklyColourTable>tr>td.blocklyColourHighlighted {\n    border-color: #eee;\n    box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);\n    position: relative;\n  }\n\n  .blocklyColourSelected, .blocklyColourSelected:hover {\n    border-color: #eee !important;\n    outline: 1px solid #333;\n    position: relative;\n  }\n"),(0,He.register)("field_colour",St.FieldColour),l.module$exports$Blockly$FieldCheckbox={FieldCheckbox:function(t,e,o){this.checkChar_=null,l.module$exports$Blockly$FieldCheckbox.FieldCheckbox.superClass_.constructor.call(this,t,e,o)}},(0,l.module$exports$Blockly$utils$object.inherits)(l.module$exports$Blockly$FieldCheckbox.FieldCheckbox,z.Field),l.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.DEFAULT_VALUE=!1,l.module$exports$Blockly$FieldCheckbox.FieldCheckbox.fromJson=function(t){return new this(t.checked,void 0,t)},l.module$exports$Blockly$FieldCheckbox.FieldCheckbox.CHECK_CHAR="\u2713",l.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.SERIALIZABLE=!0,l.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.CURSOR="default",l.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.configure_=function(t){l.module$exports$Blockly$FieldCheckbox.FieldCheckbox.superClass_.configure_.call(this,t),t.checkCharacter&&(this.checkChar_=t.checkCharacter)},l.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.saveState=function(){var t=this.saveLegacyState(l.module$exports$Blockly$FieldCheckbox.FieldCheckbox);return null!==t?t:this.getValueBoolean()},l.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.initView=function(){l.module$exports$Blockly$FieldCheckbox.FieldCheckbox.superClass_.initView.call(this),(0,s.addClass)(this.textElement_,"blocklyCheckbox"),this.textElement_.style.display=this.value_?"block":"none"},l.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)},l.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.getDisplayText_=function(){return this.checkChar_||l.module$exports$Blockly$FieldCheckbox.FieldCheckbox.CHECK_CHAR},l.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.setCheckCharacter=function(t){this.checkChar_=t,this.forceRerender()},l.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)},l.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.doClassValidation_=function(t){return!0===t||"TRUE"===t?"TRUE":!1===t||"FALSE"===t?"FALSE":null},l.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.doValueUpdate_=function(t){this.value_=this.convertValueToBool_(t),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")},l.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"},l.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_},l.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))},l.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.convertValueToBool_=function(t){return"string"==typeof t?"TRUE"===t:!!t},(0,He.register)("field_checkbox",l.module$exports$Blockly$FieldCheckbox.FieldCheckbox);var ct={FieldAngle:function(t,e,o){this.clockwise_=ct.FieldAngle.CLOCKWISE,this.offset_=ct.FieldAngle.OFFSET,this.wrap_=ct.FieldAngle.WRAP,this.round_=ct.FieldAngle.ROUND,ct.FieldAngle.superClass_.constructor.call(this,t,e,o),this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.line_=this.gauge_=this.editor_=null}};(0,l.module$exports$Blockly$utils$object.inherits)(ct.FieldAngle,l.module$exports$Blockly$FieldTextInput.FieldTextInput),ct.FieldAngle.prototype.DEFAULT_VALUE=0,ct.FieldAngle.fromJson=function(t){return new this(t.angle,void 0,t)},ct.FieldAngle.prototype.SERIALIZABLE=!0,ct.FieldAngle.ROUND=15,ct.FieldAngle.HALF=50,ct.FieldAngle.CLOCKWISE=!1,ct.FieldAngle.OFFSET=0,ct.FieldAngle.WRAP=360,ct.FieldAngle.RADIUS=ct.FieldAngle.HALF-1,ct.FieldAngle.prototype.configure_=function(t){switch(ct.FieldAngle.superClass_.configure_.call(this,t),t.mode){case"compass":this.clockwise_=!0,this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var e=t.clockwise;"boolean"==typeof e&&(this.clockwise_=e),null!==(e=t.offset)&&(e=Number(e),isNaN(e)||(this.offset_=e)),null!==(e=t.wrap)&&(e=Number(e),isNaN(e)||(this.wrap_=e)),null!==(t=t.round)&&(t=Number(t),isNaN(t)||(this.round_=t))},ct.FieldAngle.prototype.initView=function(){ct.FieldAngle.superClass_.initView.call(this),this.symbol_=(0,s.createSvgElement)(B.Svg.TSPAN,{},null),this.symbol_.appendChild(document.createTextNode("\xb0")),this.textElement_.appendChild(this.symbol_)},ct.FieldAngle.prototype.render_=function(){ct.FieldAngle.superClass_.render_.call(this),this.updateGraph_()},ct.FieldAngle.prototype.showEditor_=function(t){ct.FieldAngle.superClass_.showEditor_.call(this,t,ot.MOBILE||ot.ANDROID||ot.IPAD),this.dropdownCreate_(),D.DropDownDiv.getContentDiv().appendChild(this.editor_),D.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),D.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.updateGraph_()},ct.FieldAngle.prototype.dropdownCreate_=function(){var t=(0,s.createSvgElement)(B.Svg.SVG,{xmlns:s.SVG_NS,"xmlns:html":s.HTML_NS,"xmlns:xlink":s.XLINK_NS,version:"1.1",height:2*ct.FieldAngle.HALF+"px",width:2*ct.FieldAngle.HALF+"px",style:"touch-action: none"},null),e=(0,s.createSvgElement)(B.Svg.CIRCLE,{cx:ct.FieldAngle.HALF,cy:ct.FieldAngle.HALF,r:ct.FieldAngle.RADIUS,class:"blocklyAngleCircle"},t);this.gauge_=(0,s.createSvgElement)(B.Svg.PATH,{class:"blocklyAngleGauge"},t),this.line_=(0,s.createSvgElement)(B.Svg.LINE,{x1:ct.FieldAngle.HALF,y1:ct.FieldAngle.HALF,class:"blocklyAngleLine"},t);for(var o=0;360>o;o+=15)(0,s.createSvgElement)(B.Svg.LINE,{x1:ct.FieldAngle.HALF+ct.FieldAngle.RADIUS,y1:ct.FieldAngle.HALF,x2:ct.FieldAngle.HALF+ct.FieldAngle.RADIUS-(o%45==0?10:5),y2:ct.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+o+","+ct.FieldAngle.HALF+","+ct.FieldAngle.HALF+")"},t);this.clickWrapper_=(0,g.conditionalBind)(t,"click",this,this.hide_),this.clickSurfaceWrapper_=(0,g.conditionalBind)(e,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=(0,g.conditionalBind)(e,"mousemove",this,this.onMouseMove_,!0,!0),this.editor_=t},ct.FieldAngle.prototype.dropdownDispose_=function(){this.clickWrapper_&&((0,g.unbind)(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&((0,g.unbind)(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&((0,g.unbind)(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null},ct.FieldAngle.prototype.hide_=function(){D.DropDownDiv.hideIfOwner(this),(0,m.hide)()},ct.FieldAngle.prototype.onMouseMove_=function(t){var e=this.gauge_.ownerSVGElement.getBoundingClientRect(),o=t.clientX-e.left-ct.FieldAngle.HALF;t=t.clientY-e.top-ct.FieldAngle.HALF,e=Math.atan(-t/o),isNaN(e)||(e=(0,V.toDegrees)(e),0>o?e+=180:0<t&&(e+=360),this.displayMouseOrKeyboardValue_(e=this.clockwise_?this.offset_+360-e:360-(this.offset_-e)))},ct.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(t){this.round_&&(t=Math.round(t/this.round_)*this.round_),(t=this.wrapValue_(t))!==this.value_&&this.setEditorValue_(t)},ct.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var t=Number(this.getText())+this.offset_,e=(0,V.toRadians)(t%360);t=["M ",ct.FieldAngle.HALF,",",ct.FieldAngle.HALF];var o=ct.FieldAngle.HALF,r=ct.FieldAngle.HALF;if(!isNaN(e)){var c=Number(this.clockwise_),h=(0,V.toRadians)(this.offset_),k=Math.cos(h)*ct.FieldAngle.RADIUS,C=Math.sin(h)*-ct.FieldAngle.RADIUS;c&&(e=2*h-e),o+=Math.cos(e)*ct.FieldAngle.RADIUS,r-=Math.sin(e)*ct.FieldAngle.RADIUS,e=Math.abs(Math.floor((e-h)/Math.PI)%2),c&&(e=1-e),t.push(" l ",k,",",C," A ",ct.FieldAngle.RADIUS,",",ct.FieldAngle.RADIUS," 0 ",e," ",c," ",o,",",r," z")}this.gauge_.setAttribute("d",t.join("")),this.line_.setAttribute("x2",o),this.line_.setAttribute("y2",r)}},ct.FieldAngle.prototype.onHtmlInputKeyDown_=function(t){var e;if(ct.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,t),t.keyCode===Z_KeyCodes.LEFT?e=this.sourceBlock_.RTL?1:-1:t.keyCode===Z_KeyCodes.RIGHT?e=this.sourceBlock_.RTL?-1:1:t.keyCode===Z_KeyCodes.DOWN?e=-1:t.keyCode===Z_KeyCodes.UP&&(e=1),e){var o=this.getValue();this.displayMouseOrKeyboardValue_(o+e*this.round_),t.preventDefault(),t.stopPropagation()}},ct.FieldAngle.prototype.doClassValidation_=function(t){return t=Number(t),isNaN(t)||!isFinite(t)?null:this.wrapValue_(t)},ct.FieldAngle.prototype.wrapValue_=function(t){return 0>(t%=360)&&(t+=360),t>this.wrap_&&(t-=360),t},(0,Vt.register)("\n  .blocklyAngleCircle {\n    stroke: #444;\n    stroke-width: 1;\n    fill: #ddd;\n    fill-opacity: .8;\n  }\n\n  .blocklyAngleMarks {\n    stroke: #444;\n    stroke-width: 1;\n  }\n\n  .blocklyAngleGauge {\n    fill: #f88;\n    fill-opacity: .8;\n    pointer-events: none;\n  }\n\n  .blocklyAngleLine {\n    stroke: #f00;\n    stroke-width: 2;\n    stroke-linecap: round;\n    pointer-events: none;\n  }\n"),(0,He.register)("field_angle",ct.FieldAngle);var bn={TopRow:function(t){bn.TopRow.superClass_.constructor.call(this,t)}};(0,l.module$exports$Blockly$utils$object.inherits)(bn.TopRow,xo.TopRow),bn.TopRow.prototype.endsWithElemSpacer=function(){return!1},bn.TopRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection},bn.TopRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection};var _i={StatementInput:function(t,e){if(_i.StatementInput.superClass_.constructor.call(this,t,e),this.connectedBlock){for(t=this.connectedBlock;e=t.getNextBlock();)t=e;t.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}};(0,l.module$exports$Blockly$utils$object.inherits)(_i.StatementInput,Ln.StatementInput);var gi={RightConnectionShape:function(t){gi.RightConnectionShape.superClass_.constructor.call(this,t),this.type|=S.Types.getType("RIGHT_CONNECTION"),this.width=this.height=0}};(0,l.module$exports$Blockly$utils$object.inherits)(gi.RightConnectionShape,Co_Measurable);var Pe={MarkerSvg:function(t,e,o){Pe.MarkerSvg.superClass_.constructor.call(this,t,e,o)}};(0,l.module$exports$Blockly$utils$object.inherits)(Pe.MarkerSvg,Dt.MarkerSvg),Pe.MarkerSvg.prototype.showWithInputOutput_=function(t){var e=t.getSourceBlock();t=t.getLocation().getOffsetInBlock(),this.positionCircle_(t.x,t.y),this.setParent_(e),this.showCurrent_()},Pe.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithInputOutput_(t)},Pe.MarkerSvg.prototype.showWithInput_=function(t){this.showWithInputOutput_(t)},Pe.MarkerSvg.prototype.showWithBlock_=function(t){var e=(t=t.getLocation()).getHeightWidth();this.positionRect_(0,0,e.width,e.height),this.setParent_(t),this.showCurrent_()},Pe.MarkerSvg.prototype.positionCircle_=function(t,e){this.markerCircle_.setAttribute("cx",t),this.markerCircle_.setAttribute("cy",e),this.currentMarkerSvg=this.markerCircle_},Pe.MarkerSvg.prototype.hide=function(){Pe.MarkerSvg.superClass_.hide.call(this),this.markerCircle_.style.display="none"},Pe.MarkerSvg.prototype.createDomInternal_=function(){if(Pe.MarkerSvg.superClass_.createDomInternal_.call(this),this.markerCircle_=(0,s.createSvgElement)(B.Svg.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var t=this.getBlinkProperties_();(0,s.createSvgElement)(B.Svg.ANIMATE,t,this.markerCircle_)}return this.markerSvg_},Pe.MarkerSvg.prototype.applyColour_=function(t){Pe.MarkerSvg.superClass_.applyColour_.call(this,t),this.markerCircle_.setAttribute("fill",this.colour_),this.markerCircle_.setAttribute("stroke",this.colour_),this.isCursor()&&this.markerCircle_.firstChild.setAttribute("values",this.colour_+";transparent;transparent;")};var Jt={ConstantProvider:function(){Jt.ConstantProvider.superClass_.constructor.call(this),this.SMALL_PADDING=this.GRID_UNIT=4,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TAB_OFFSET_FROM_TOP=0,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!0,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.replacementGlowFilter_=null}};(0,l.module$exports$Blockly$utils$object.inherits)(Jt.ConstantProvider,Pt.ConstantProvider),Jt.ConstantProvider.prototype.setFontConstants_=function(t){Jt.ConstantProvider.superClass_.setFontConstants_.call(this,t),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING},Jt.ConstantProvider.prototype.init=function(){Jt.ConstantProvider.superClass_.init.call(this),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth},Jt.ConstantProvider.prototype.setDynamicProperties_=function(t){Jt.ConstantProvider.superClass_.setDynamicProperties_.call(this,t),this.SELECTED_GLOW_COLOUR=t.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;var e=Number(t.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=e&&!isNaN(e)?e:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=t.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(t=Number(t.getComponentStyle("replacementGlowSize")))&&!isNaN(t)?t:this.REPLACEMENT_GLOW_SIZE},Jt.ConstantProvider.prototype.dispose=function(){Jt.ConstantProvider.superClass_.dispose.call(this),this.selectedGlowFilter_&&(0,s.removeNode)(this.selectedGlowFilter_),this.replacementGlowFilter_&&(0,s.removeNode)(this.replacementGlowFilter_)},Jt.ConstantProvider.prototype.makeStartHat=function(){var t=this.START_HAT_HEIGHT,e=this.START_HAT_WIDTH;return{height:t,width:e,path:(0,b.curve)("c",[(0,b.point)(25,-t),(0,b.point)(71,-t),(0,b.point)(e,0)])}},Jt.ConstantProvider.prototype.makeHexagonal=function(){function t(o,r,c){var h=o/2;return(0,b.lineTo)(-(c=c?-1:1)*(h=h>e?e:h),o=(r?-1:1)*o/2)+(0,b.lineTo)(c*h,o)}var e=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:function(o){return(o/=2)>e?e:o},height:function(o){return o},connectionOffsetY:function(o){return o/2},connectionOffsetX:function(o){return-o},pathDown:function(o){return t(o,!1,!1)},pathUp:function(o){return t(o,!0,!1)},pathRightDown:function(o){return t(o,!1,!0)},pathRightUp:function(o){return t(o,!1,!0)}}},Jt.ConstantProvider.prototype.makeRounded=function(){function t(r,c,h){var k=r>o?r-o:0;return(0,b.arc)("a","0 0,1",r=(r>o?o:r)/2,(0,b.point)((c?-1:1)*r,(c?-1:1)*r))+(0,b.lineOnAxis)("v",(h?1:-1)*k)+(0,b.arc)("a","0 0,1",r,(0,b.point)((c?1:-1)*r,(c?-1:1)*r))}var e=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,o=2*e;return{type:this.SHAPES.ROUND,isDynamic:!0,width:function(r){return(r/=2)>e?e:r},height:function(r){return r},connectionOffsetY:function(r){return r/2},connectionOffsetX:function(r){return-r},pathDown:function(r){return t(r,!1,!1)},pathUp:function(r){return t(r,!0,!1)},pathRightDown:function(r){return t(r,!1,!0)},pathRightUp:function(r){return t(r,!1,!0)}}},Jt.ConstantProvider.prototype.makeSquared=function(){function t(o,r,c){return o-=2*e,(0,b.arc)("a","0 0,1",e,(0,b.point)((r?-1:1)*e,(r?-1:1)*e))+(0,b.lineOnAxis)("v",(c?1:-1)*o)+(0,b.arc)("a","0 0,1",e,(0,b.point)((r?1:-1)*e,(r?-1:1)*e))}var e=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:function(o){return e},height:function(o){return o},connectionOffsetY:function(o){return o/2},connectionOffsetX:function(o){return-o},pathDown:function(o){return t(o,!1,!1)},pathUp:function(o){return t(o,!0,!1)},pathRightDown:function(o){return t(o,!1,!0)},pathRightUp:function(o){return t(o,!1,!0)}}},Jt.ConstantProvider.prototype.shapeFor=function(t){var e=t.getCheck();switch(!e&&t.targetConnection&&(e=t.targetConnection.getCheck()),t.type){case l.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE:case l.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE:if(null!==(t=t.getSourceBlock().getOutputShape()))switch(t){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return e&&-1!==e.indexOf("Boolean")?this.HEXAGONAL:(e&&-1!==e.indexOf("Number")||e&&e.indexOf("String"),this.ROUNDED);case l.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT:case l.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}},Jt.ConstantProvider.prototype.makeNotch=function(){function t(j){return(0,b.curve)("c",[(0,b.point)(j*c/2,0),(0,b.point)(j*c*3/4,k/2),(0,b.point)(j*c,k)])+(0,b.line)([(0,b.point)(j*c,h)])+(0,b.curve)("c",[(0,b.point)(j*c/4,k/2),(0,b.point)(j*c/2,k),(0,b.point)(j*c,k)])+(0,b.lineOnAxis)("h",j*r)+(0,b.curve)("c",[(0,b.point)(j*c/2,0),(0,b.point)(j*c*3/4,-k/2),(0,b.point)(j*c,-k)])+(0,b.line)([(0,b.point)(j*c,-h)])+(0,b.curve)("c",[(0,b.point)(j*c/4,-k/2),(0,b.point)(j*c/2,-k),(0,b.point)(j*c,-k)])}var e=this.NOTCH_WIDTH,o=this.NOTCH_HEIGHT,r=e/3,c=r/3,h=o/2,k=h/2,C=t(1),G=t(-1);return{type:this.SHAPES.NOTCH,width:e,height:o,pathLeft:C,pathRight:G}},Jt.ConstantProvider.prototype.makeInsideCorners=function(){var t=this.CORNER_RADIUS,e=(0,b.arc)("a","0 0,0",t,(0,b.point)(-t,t)),o=(0,b.arc)("a","0 0,1",t,(0,b.point)(-t,t));return{width:t,height:t,pathTop:e,pathBottom:(0,b.arc)("a","0 0,0",t,(0,b.point)(t,t)),rightWidth:t,rightHeight:t,pathTopRight:o,pathBottomRight:(0,b.arc)("a","0 0,1",t,(0,b.point)(t,t))}},Jt.ConstantProvider.prototype.generateSecondaryColour_=function(t){return(0,wt.blend)("#000",t,.15)||t},Jt.ConstantProvider.prototype.generateTertiaryColour_=function(t){return(0,wt.blend)("#000",t,.25)||t},Jt.ConstantProvider.prototype.createDom=function(t,e,o){Jt.ConstantProvider.superClass_.createDom.call(this,t,e,o),t=(0,s.createSvgElement)(B.Svg.DEFS,{},t),e=(0,s.createSvgElement)(B.Svg.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),(0,s.createSvgElement)(B.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},e),o=(0,s.createSvgElement)(B.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},e),(0,s.createSvgElement)(B.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},o),(0,s.createSvgElement)(B.Svg.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},e),(0,s.createSvgElement)(B.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),this.selectedGlowFilterId=e.id,this.selectedGlowFilter_=e,t=(0,s.createSvgElement)(B.Svg.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),(0,s.createSvgElement)(B.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},t),e=(0,s.createSvgElement)(B.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},t),(0,s.createSvgElement)(B.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},e),(0,s.createSvgElement)(B.Svg.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},t),(0,s.createSvgElement)(B.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),(0,s.createSvgElement)(B.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},t),this.replacementGlowFilterId=t.id,this.replacementGlowFilter_=t},Jt.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText,",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect:not(.blocklyDropdownRect),",t+" .blocklyEditableText>rect:not(.blocklyDropdownRect) {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text,",t+" .blocklyNonEditableText>g>text,",t+" .blocklyEditableText>g>text {","fill: #575E75;","}",t+" .blocklyFlyoutLabelText {","fill: #575E75;","}",t+" .blocklyText.blocklyBubbleText {","fill: #575E75;","}",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>rect,",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","color: #575E75;","}",t+" .blocklyDropdownText {","fill: #fff !important;","}",t+".blocklyWidgetDiv .goog-menuitem,",t+".blocklyDropDownDiv .goog-menuitem {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","}",t+".blocklyDropDownDiv .goog-menuitem-content {","color: #fff;","}",t+" .blocklyHighlightedConnectionPath {","stroke: "+this.SELECTED_GLOW_COLOUR+";","}",t+" .blocklyDisabled > .blocklyOutlinePath {","fill: url(#blocklyDisabledPattern"+this.randomIdentifier+")","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]};var xe={Drawer:function(t,e){xe.Drawer.superClass_.constructor.call(this,t,e)}};(0,l.module$exports$Blockly$utils$object.inherits)(xe.Drawer,zt.Drawer),xe.Drawer.prototype.draw=function(){var t=this.block_.pathObject;t.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),t.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&t.flipRTL(),(0,so.isDebuggerEnabled)()&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_(),this.info_.outputConnection&&(t.outputShapeType=this.info_.outputConnection.shape.type),t.endDrawing()},xe.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):xe.Drawer.superClass_.drawOutline_.call(this)},xe.Drawer.prototype.drawLeft_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():xe.Drawer.superClass_.drawLeft_.call(this)},xe.Drawer.prototype.drawRightSideRow_=function(t){if(!(0>=t.height))if(t.precedesStatement||t.followsStatement){var e=this.constants_.INSIDE_CORNERS.rightHeight;this.outlinePath_+=(t.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<(e=t.height-(t.precedesStatement?e:0))?(0,b.lineOnAxis)("V",t.yPos+e):"")+(t.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=(0,b.lineOnAxis)("V",t.yPos+t.height)},xe.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)},xe.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"},xe.Drawer.prototype.drawFlatTop_=function(){var t=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=(0,b.moveBy)(t.xPos,this.info_.startY),this.outlinePath_+=(0,b.lineOnAxis)("h",t.width)},xe.Drawer.prototype.drawFlatBottom_=function(){var t=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=(0,b.lineOnAxis)("V",t.baseline),this.outlinePath_+=(0,b.lineOnAxis)("h",-t.width)},xe.Drawer.prototype.drawInlineInput_=function(t){this.positionInlineInputConnection_(t);var e=t.input.name;if(!t.connectedBlock&&!this.info_.isInsertionMarker){var o=t.width-2*t.connectionWidth;t=(0,b.moveTo)(t.xPos+t.connectionWidth,t.centerline-t.height/2)+(0,b.lineOnAxis)("h",o)+t.shape.pathRightDown(t.height)+(0,b.lineOnAxis)("h",-o)+t.shape.pathUp(t.height)+"z",this.block_.pathObject.setOutlinePath(e,t)}},xe.Drawer.prototype.drawStatementInput_=function(t){var e=t.getLastInput(),o=e.xPos+e.notchOffset+e.shape.width,r=e.shape.pathRight+(0,b.lineOnAxis)("h",-(e.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,c=t.height-2*this.constants_.INSIDE_CORNERS.height;e=this.constants_.INSIDE_CORNERS.pathBottom+(0,b.lineOnAxis)("h",e.notchOffset-this.constants_.INSIDE_CORNERS.width)+(e.connectedBottomNextConnection?"":e.shape.pathLeft),this.outlinePath_+=(0,b.lineOnAxis)("H",o)+r+(0,b.lineOnAxis)("v",c)+e+(0,b.lineOnAxis)("H",t.xPos+t.width),this.positionStatementInputConnection_(t)};var ke={PathObject:function(t,e,o){ke.PathObject.superClass_.constructor.call(this,t,e,o),this.constants=o,this.svgPathSelected_=null,this.outlines_=Object.create(null),this.outputShapeType=this.remainingOutlines_=null}};(0,l.module$exports$Blockly$utils$object.inherits)(ke.PathObject,ge.PathObject),ke.PathObject.prototype.setPath=function(t){ke.PathObject.superClass_.setPath.call(this,t),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",t)},ke.PathObject.prototype.applyColour=function(t){for(var e in ke.PathObject.superClass_.applyColour.call(this,t),t.isShadow()&&t.getParent()&&this.svgPath.setAttribute("stroke",t.getParent().style.colourTertiary),this.outlines_)this.outlines_[e].setAttribute("fill",this.style.colourTertiary)},ke.PathObject.prototype.flipRTL=function(){for(var t in ke.PathObject.superClass_.flipRTL.call(this),this.outlines_)this.outlines_[t].setAttribute("transform","scale(-1 1)")},ke.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t),t?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)},ke.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t),t?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")},ke.PathObject.prototype.updateShapeForInputHighlight=function(t,e){t=t.getParentInput().name,(t=this.getOutlinePath_(t))&&(e?t.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):t.removeAttribute("filter"))},ke.PathObject.prototype.beginDrawing=function(){for(var t in this.remainingOutlines_=Object.create(null),this.outlines_)this.remainingOutlines_[t]=1},ke.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var t in this.remainingOutlines_)this.removeOutlinePath_(t);this.remainingOutlines_=null},ke.PathObject.prototype.setOutlinePath=function(t,e){(t=this.getOutlinePath_(t)).setAttribute("d",e),t.setAttribute("fill",this.style.colourTertiary)},ke.PathObject.prototype.getOutlinePath_=function(t){return this.outlines_[t]||(this.outlines_[t]=(0,s.createSvgElement)(B.Svg.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines_&&delete this.remainingOutlines_[t],this.outlines_[t]},ke.PathObject.prototype.removeOutlinePath_=function(t){this.outlines_[t].parentNode.removeChild(this.outlines_[t]),delete this.outlines_[t]};var Bn={BottomRow:function(t){Bn.BottomRow.superClass_.constructor.call(this,t)}};(0,l.module$exports$Blockly$utils$object.inherits)(Bn.BottomRow,So.BottomRow),Bn.BottomRow.prototype.endsWithElemSpacer=function(){return!1},Bn.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection},Bn.BottomRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},l.module$exports$Blockly$FieldImage={FieldImage:function(t,e,o,r,c,h,k){if(!t)throw Error("Src value of an image field is required");if(t=(0,It.replaceMessageReferences)(t),o=Number((0,It.replaceMessageReferences)(o)),e=Number((0,It.replaceMessageReferences)(e)),isNaN(o)||isNaN(e))throw Error("Height and width values of an image field must cast to numbers.");if(0>=o||0>=e)throw Error("Height and width values of an image field must be greater than 0.");this.flipRtl_=!1,this.altText_="",l.module$exports$Blockly$FieldImage.FieldImage.superClass_.constructor.call(this,t,null,k),k||(this.flipRtl_=!!h,this.altText_=(0,It.replaceMessageReferences)(r)||""),this.size_=new et.Size(e,o+l.module$exports$Blockly$FieldImage.FieldImage.Y_PADDING),this.imageHeight_=o,this.clickHandler_=null,"function"==typeof c&&(this.clickHandler_=c),this.imageElement_=null}},(0,l.module$exports$Blockly$utils$object.inherits)(l.module$exports$Blockly$FieldImage.FieldImage,z.Field),l.module$exports$Blockly$FieldImage.FieldImage.prototype.DEFAULT_VALUE="",l.module$exports$Blockly$FieldImage.FieldImage.fromJson=function(t){return new this(t.src,t.width,t.height,void 0,void 0,void 0,t)},l.module$exports$Blockly$FieldImage.FieldImage.Y_PADDING=1,l.module$exports$Blockly$FieldImage.FieldImage.prototype.EDITABLE=!1,l.module$exports$Blockly$FieldImage.FieldImage.prototype.isDirty_=!1,l.module$exports$Blockly$FieldImage.FieldImage.prototype.configure_=function(t){l.module$exports$Blockly$FieldImage.FieldImage.superClass_.configure_.call(this,t),this.flipRtl_=!!t.flipRtl,this.altText_=(0,It.replaceMessageReferences)(t.alt)||""},l.module$exports$Blockly$FieldImage.FieldImage.prototype.initView=function(){this.imageElement_=(0,s.createSvgElement)(B.Svg.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(s.XLINK_NS,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")},l.module$exports$Blockly$FieldImage.FieldImage.prototype.updateSize_=function(){},l.module$exports$Blockly$FieldImage.FieldImage.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:t},l.module$exports$Blockly$FieldImage.FieldImage.prototype.doValueUpdate_=function(t){this.value_=t,this.imageElement_&&this.imageElement_.setAttributeNS(s.XLINK_NS,"xlink:href",String(this.value_))},l.module$exports$Blockly$FieldImage.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},l.module$exports$Blockly$FieldImage.FieldImage.prototype.setAlt=function(t){t!==this.altText_&&(this.altText_=t||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))},l.module$exports$Blockly$FieldImage.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},l.module$exports$Blockly$FieldImage.FieldImage.prototype.setOnClickHandler=function(t){this.clickHandler_=t},l.module$exports$Blockly$FieldImage.FieldImage.prototype.getText_=function(){return this.altText_},(0,He.register)("field_image",l.module$exports$Blockly$FieldImage.FieldImage);var Yt={RenderInfo:function(t,e){Yt.RenderInfo.superClass_.constructor.call(this,t,e),this.topRow=new bn.TopRow(this.constants_),this.bottomRow=new Bn.BottomRow(this.constants_),this.isInline=!0,this.isMultiRow=!e.getInputsInline()||e.isCollapsed(),this.hasStatementInput=0<e.statementInputCount,this.rightSide=this.outputConnection?new gi.RightConnectionShape(this.constants_):null}};(0,l.module$exports$Blockly$utils$object.inherits)(Yt.RenderInfo,Ft.RenderInfo),Yt.RenderInfo.prototype.getRenderer=function(){return this.renderer_},Yt.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},Yt.RenderInfo.prototype.shouldStartNewRow_=function(t,e){return!!e&&(t.type===l.module$exports$Blockly$inputTypes.inputTypes.STATEMENT||e.type===l.module$exports$Blockly$inputTypes.inputTypes.STATEMENT||(t.type===l.module$exports$Blockly$inputTypes.inputTypes.VALUE||t.type===l.module$exports$Blockly$inputTypes.inputTypes.DUMMY)&&(!this.isInline||this.isMultiRow))},Yt.RenderInfo.prototype.getDesiredRowWidth_=function(t){return t.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):Yt.RenderInfo.superClass_.getDesiredRowWidth_.call(this,t)},Yt.RenderInfo.prototype.getInRowSpacing_=function(t,e){return t&&e||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!t&&e&&S.Types.isStatementInput(e)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:t&&S.Types.isLeftRoundedCorner(t)&&e&&(S.Types.isPreviousConnection(e)||S.Types.isNextConnection(e))?e.notchOffset-this.constants_.CORNER_RADIUS:t&&S.Types.isLeftSquareCorner(t)&&e&&S.Types.isHat(e)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING},Yt.RenderInfo.prototype.getSpacerRowHeight_=function(t,e){if(S.Types.isTopRow(t)&&S.Types.isBottomRow(e))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;var o=S.Types.isInputRow(t)&&t.hasStatement,r=S.Types.isInputRow(e)&&e.hasStatement;return r||o?(t=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),r&&o?Math.max(t,this.constants_.DUMMY_INPUT_MIN_HEIGHT):t):S.Types.isTopRow(t)?t.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):S.Types.isBottomRow(e)?this.outputConnection?!e.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},Yt.RenderInfo.prototype.getSpacerRowWidth_=function(t,e){var o=this.width-this.startX;return S.Types.isInputRow(t)&&t.hasStatement||S.Types.isInputRow(e)&&e.hasStatement?Math.max(o,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):o},Yt.RenderInfo.prototype.getElemCenterline_=function(t,e){if(t.hasStatement&&!S.Types.isSpacer(e)&&!S.Types.isStatementInput(e))return t.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(S.Types.isInlineInput(e)){var o=e.connectedBlock;if(o&&o.outputConnection&&o.nextConnection)return t.yPos+o.height/2}return Yt.RenderInfo.superClass_.getElemCenterline_.call(this,t,e)},Yt.RenderInfo.prototype.addInput_=function(t,e){if(t.type===l.module$exports$Blockly$inputTypes.inputTypes.DUMMY&&e.hasDummyInput&&e.align===l.module$exports$Blockly$Input.Align.LEFT&&t.align===l.module$exports$Blockly$Input.Align.RIGHT)e.rightAlignedDummyInput=t;else if(t.type===l.module$exports$Blockly$inputTypes.inputTypes.STATEMENT)return e.elements.push(new _i.StatementInput(this.constants_,t)),e.hasStatement=!0,void(null===e.align&&(e.align=t.align));Yt.RenderInfo.superClass_.addInput_.call(this,t,e)},Yt.RenderInfo.prototype.addAlignmentPadding_=function(t,e){if(t.rightAlignedDummyInput){for(var o,r=0;r<t.elements.length;r++){var c=t.elements[r];if(S.Types.isSpacer(c)&&(o=c),S.Types.isField(c)&&c.parentInput===t.rightAlignedDummyInput)break}if(o)return o.width+=e,void(t.width+=e)}Yt.RenderInfo.superClass_.addAlignmentPadding_.call(this,t,e)},Yt.RenderInfo.prototype.adjustXPosition_=function(){for(var t=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH,e=t,o=2;o<this.rows.length-1;o+=2){var r=this.rows[o-1],c=this.rows[o],h=this.rows[o+1];if(r=2===o?!!this.topRow.hasPreviousConnection:!!r.followsStatement,h=o+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!h.precedesStatement,S.Types.isInputRow(c)&&c.hasStatement)c.measure(),e=c.width-c.getLastInput().width+t;else if(r&&(2===o||h)&&S.Types.isInputRow(c)&&!c.hasStatement){h=c.xPos,r=null;for(var k=0;k<c.elements.length;k++){var C=c.elements[k];S.Types.isSpacer(C)&&(r=C),!(r&&(S.Types.isField(C)||S.Types.isInput(C))&&h<e)||S.Types.isField(C)&&(C.field instanceof l.module$exports$Blockly$FieldLabel.FieldLabel||C.field instanceof l.module$exports$Blockly$FieldImage.FieldImage)||(r.width+=e-h),h+=C.width}}}},Yt.RenderInfo.prototype.finalizeOutputConnection_=function(){if(this.outputConnection&&this.outputConnection.isDynamicShape){for(var t=0,e=0;e<this.rows.length;e++){var o=this.rows[e];o.yPos=t,t+=o.height}this.height=t,t=this.outputConnection.shape.height(e=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height),e=this.outputConnection.shape.width(e),this.outputConnection.height=t,this.outputConnection.width=e,this.outputConnection.startX=e,this.outputConnection.connectionOffsetY=this.outputConnection.shape.connectionOffsetY(t),this.outputConnection.connectionOffsetX=this.outputConnection.shape.connectionOffsetX(e),o=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(o=e,this.rightSide.height=t,this.rightSide.width=o,this.rightSide.centerline=t/2,this.rightSide.xPos=this.width+o),this.startX=e,this.width+=e+o,this.widthWithChildren+=e+o}},Yt.RenderInfo.prototype.finalizeHorizontalAlignment_=function(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var t=0,e=0;e<this.rows.length;e++){var o=this.rows[e];if(S.Types.isInputRow(o)){t=o.elements[o.elements.length-2];var r=this.getNegativeSpacing_(o.elements[1]),c=this.getNegativeSpacing_(t),h=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-(t=r+c)<h&&(r=(t=this.width-h)/2,c=t/2),o.elements.unshift(new Le.InRowSpacer(this.constants_,-r)),o.elements.push(new Le.InRowSpacer(this.constants_,-c))}}if(t)for(this.width-=t,this.widthWithChildren-=t,this.rightSide.xPos-=t,e=0;e<this.rows.length;e++)S.Types.isTopOrBottomRow(o=this.rows[e])&&(o.elements[1].width-=t,o.elements[1].widthWithConnectedBlocks-=t),o.width-=t,o.widthWithConnectedBlocks-=t}},Yt.RenderInfo.prototype.getNegativeSpacing_=function(t){if(!t)return 0;var e=this.outputConnection.width,o=this.outputConnection.shape.type,r=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)return o===r.SHAPES.ROUND?e-(o=this.height/2>(o=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH)?o:this.height/2)*(1-Math.sin(Math.acos((o-this.constants_.SMALL_PADDING)/o))):0;if(S.Types.isInlineInput(t)){var c=t.connectedBlock;return t=c?c.pathObject.outputShapeType:t.shape.type,c&&c.outputConnection&&(c.statementInputCount||c.nextConnection)||o===r.SHAPES.HEXAGONAL&&o!==t?0:e-this.constants_.SHAPE_IN_SHAPE_PADDING[o][t]}return S.Types.isField(t)?o===r.SHAPES.ROUND&&t.field instanceof l.module$exports$Blockly$FieldTextInput.FieldTextInput?e-2.75*r.GRID_UNIT:e-this.constants_.SHAPE_IN_SHAPE_PADDING[o][0]:S.Types.isIcon(t)?this.constants_.SMALL_PADDING:0},Yt.RenderInfo.prototype.finalizeVerticalAlignment_=function(){if(!this.outputConnection)for(var t=2;t<this.rows.length-1;t+=2){var e=this.rows[t-1],o=this.rows[t],r=this.rows[t+1],c=2===t,h=t+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!r.precedesStatement;if(c?this.topRow.hasPreviousConnection:e.followsStatement){var k=3===o.elements.length&&(o.elements[1].field instanceof l.module$exports$Blockly$FieldLabel.FieldLabel||o.elements[1].field instanceof l.module$exports$Blockly$FieldImage.FieldImage);if(!c&&k)e.height-=this.constants_.SMALL_PADDING,r.height-=this.constants_.SMALL_PADDING,o.height-=this.constants_.MEDIUM_PADDING;else if(c||h){if(h){for(c=!1,h=0;h<o.elements.length;h++)if(S.Types.isInlineInput(k=o.elements[h])&&k.connectedBlock&&!k.connectedBlock.isShadow()&&40<=k.connectedBlock.getHeightWidth().height){c=!0;break}c&&(e.height-=this.constants_.SMALL_PADDING,r.height-=this.constants_.SMALL_PADDING)}}else e.height+=this.constants_.SMALL_PADDING}}},Yt.RenderInfo.prototype.finalize_=function(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),Yt.RenderInfo.superClass_.finalize_.call(this),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)};var oo={Renderer:function(t){oo.Renderer.superClass_.constructor.call(this,t)}};(0,l.module$exports$Blockly$utils$object.inherits)(oo.Renderer,ae.Renderer),oo.Renderer.prototype.makeConstants_=function(){return new Jt.ConstantProvider},oo.Renderer.prototype.makeRenderInfo_=function(t){return new Yt.RenderInfo(this,t)},oo.Renderer.prototype.makeDrawer_=function(t,e){return new xe.Drawer(t,e)},oo.Renderer.prototype.makeMarkerDrawer=function(t,e){return new Pe.MarkerSvg(t,this.getConstants(),e)},oo.Renderer.prototype.makePathObject=function(t,e){return new ke.PathObject(t,e,this.getConstants())},oo.Renderer.prototype.shouldHighlightConnection=function(t){return t.type!==l.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE&&t.type!==l.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE},oo.Renderer.prototype.getConnectionPreviewMethod=function(t,e,o){return e.type===l.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE?t.isConnected()?Rt.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:Rt.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:oo.Renderer.superClass_.getConnectionPreviewMethod(t,e,o)},(0,xt.register)("zelos",oo.Renderer);var po={};po.BottomRow=Bn.BottomRow,po.ConstantProvider=Jt.ConstantProvider,po.Drawer=xe.Drawer,po.MarkerSvg=Pe.MarkerSvg,po.PathObject=ke.PathObject,po.RenderInfo=Yt.RenderInfo,po.Renderer=oo.Renderer,po.RightConnectionShape=gi.RightConnectionShape,po.StatementInput=_i.StatementInput,po.TopRow=bn.TopRow;var Mo={RenderInfo:function(t,e){Mo.RenderInfo.superClass_.constructor.call(this,t,e)}};(0,l.module$exports$Blockly$utils$object.inherits)(Mo.RenderInfo,Ft.RenderInfo),Mo.RenderInfo.prototype.getRenderer=function(){return this.renderer_},Mo.RenderInfo.prototype.addElemSpacing_=function(){for(var t=!1,e=0;e<this.rows.length;e++)if(this.rows[e].hasExternalInput){t=!0;break}for(e=0;e<this.rows.length;e++){var o=this.rows[e],r=o.elements;o.elements=[],o.startsWithElemSpacer()&&o.elements.push(new Le.InRowSpacer(this.constants_,this.getInRowSpacing_(null,r[0])));for(var c=0;c<r.length-1;c++){o.elements.push(r[c]);var h=this.getInRowSpacing_(r[c],r[c+1]);o.elements.push(new Le.InRowSpacer(this.constants_,h))}o.elements.push(r[r.length-1]),o.endsWithElemSpacer()&&(r=this.getInRowSpacing_(r[r.length-1],null),t&&o.hasDummyInput&&(r+=this.constants_.TAB_WIDTH),o.elements.push(new Le.InRowSpacer(this.constants_,r)))}},Mo.RenderInfo.prototype.getInRowSpacing_=function(t,e){if(!t)return e&&S.Types.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:e&&S.Types.isInlineInput(e)?this.constants_.MEDIUM_LARGE_PADDING:e&&S.Types.isStatementInput(e)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!S.Types.isInput(t)&&!e)return S.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:S.Types.isIcon(t)?2*this.constants_.LARGE_PADDING+1:S.Types.isHat(t)?this.constants_.NO_PADDING:S.Types.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:S.Types.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:S.Types.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(S.Types.isInput(t)&&!e){if(S.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(S.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(S.Types.isStatementInput(t))return this.constants_.NO_PADDING}if(!S.Types.isInput(t)&&e&&S.Types.isInput(e)){if(S.Types.isField(t)&&t.isEditable){if(S.Types.isInlineInput(e)||S.Types.isExternalInput(e))return this.constants_.SMALL_PADDING}else{if(S.Types.isInlineInput(e)||S.Types.isExternalInput(e))return this.constants_.MEDIUM_LARGE_PADDING;if(S.Types.isStatementInput(e))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(S.Types.isIcon(t)&&e&&!S.Types.isInput(e))return this.constants_.LARGE_PADDING;if(S.Types.isInlineInput(t)&&e&&S.Types.isField(e))return e.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(S.Types.isLeftSquareCorner(t)&&e){if(S.Types.isHat(e))return this.constants_.NO_PADDING;if(S.Types.isPreviousConnection(e)||S.Types.isNextConnection(e))return e.notchOffset}return S.Types.isLeftRoundedCorner(t)&&e?e.notchOffset-this.constants_.CORNER_RADIUS:S.Types.isField(t)&&e&&S.Types.isField(e)&&t.isEditable===e.isEditable||e&&S.Types.isJaggedEdge(e)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},Mo.RenderInfo.prototype.getSpacerRowHeight_=function(t,e){return S.Types.isTopRow(t)&&S.Types.isBottomRow(e)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:S.Types.isTopRow(t)||S.Types.isBottomRow(e)?this.constants_.NO_PADDING:t.hasExternalInput&&e.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&e.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&e.hasStatement||t.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},Mo.RenderInfo.prototype.getElemCenterline_=function(t,e){if(S.Types.isSpacer(e))return t.yPos+e.height/2;if(S.Types.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,S.Types.isNextConnection(e)?t+e.height/2:t-e.height/2;if(S.Types.isTopRow(t))return S.Types.isHat(e)?t.capline-e.height/2:t.capline+e.height/2;var o=t.yPos;return S.Types.isField(e)&&t.hasStatement?o+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+e.height/2):o+t.height/2},Mo.RenderInfo.prototype.finalize_=function(){for(var t=0,e=0,o=0;o<this.rows.length;o++){var r=this.rows[o];r.yPos=e,r.xPos=this.startX,e+=r.height,t=Math.max(t,r.widthWithConnectedBlocks);var c=e-this.topRow.ascenderHeight;r===this.bottomRow&&c<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=c=this.constants_.MIN_BLOCK_HEIGHT-c,e+=c),this.recordElemPositions_(r)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.bottomRow.baseline=e-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX,this.height=e,this.startY=this.topRow.capline};var Jn={Renderer:function(t){Jn.Renderer.superClass_.constructor.call(this,t)}};(0,l.module$exports$Blockly$utils$object.inherits)(Jn.Renderer,ae.Renderer),Jn.Renderer.prototype.makeRenderInfo_=function(t){return new Mo.RenderInfo(this,t)},(0,xt.register)("thrasos",Jn.Renderer);var Gi={};Gi.RenderInfo=Mo.RenderInfo,Gi.Renderer=Jn.Renderer;var js={save:function(t){var r,e=Object.create(null),o=(0,x.getAllItems)(x.Type.SERIALIZER,!0);for(r in o){var c=o[r].save(t);c&&(e[r]=c)}return e},load:function(t,e,o){var r=void 0!==(o=void 0===o?{}:o).recordUndo&&o.recordUndo;if(o=(0,x.getAllItems)(x.Type.SERIALIZER,!0)){var c=Object.entries(o).sort(function(C,G){return G[1].priority-C[1].priority});o=(0,f.getRecordUndo)(),(0,f.setRecordUndo)(r),(r=(0,f.getGroup)())||(0,f.setGroup)(!0),(0,s.startTextWidthCache)(),e.setResizesEnabled&&e.setResizesEnabled(!1);for(var h=_.makeIterator(c.reverse()),k=h.next();!k.done;k=h.next())(k=_.makeIterator(k.value)).next(),k.next().value.clear(e);for(h=(c=_.makeIterator(c.reverse())).next();!h.done;h=c.next())h=(k=_.makeIterator(h.value)).next().value,k=k.next().value,t[h]&&k.load(t[h],e);e.setResizesEnabled&&e.setResizesEnabled(!0),(0,s.stopTextWidthCache)(),(0,f.fire)(new((0,f.get)(f.FINISHED_LOADING))(e)),(0,f.setGroup)(r),(0,f.setRecordUndo)(o)}}},fi=function(){this.priority=xi.VARIABLES};fi.prototype.save=function(t){for(var e=[],o=(t=_.makeIterator(t.getAllVariables())).next();!o.done;o=t.next()){var r={name:(o=o.value).name,id:o.getId()};o.type&&(r.type=o.type),e.push(r)}return e.length?e:null},fi.prototype.load=function(t,e){for(var o=(t=_.makeIterator(t)).next();!o.done;o=t.next())e.createVariable((o=o.value).name,o.type,o.id)},fi.prototype.clear=function(t){t.getVariableMap().clear()},(0,wi.register)("variables",new fi);var yi={ConstantProvider:function(){yi.ConstantProvider.superClass_.constructor.call(this)}};(0,l.module$exports$Blockly$utils$object.inherits)(yi.ConstantProvider,Pt.ConstantProvider);var mi={Drawer:function(t,e){mi.Drawer.superClass_.constructor.call(this,t,e)}};(0,l.module$exports$Blockly$utils$object.inherits)(mi.Drawer,zt.Drawer);var Zn={RenderInfo:function(t,e){Zn.RenderInfo.superClass_.constructor.call(this,t,e)}};(0,l.module$exports$Blockly$utils$object.inherits)(Zn.RenderInfo,Ft.RenderInfo),Zn.RenderInfo.prototype.getRenderer=function(){return this.renderer_};var In={Renderer:function(t){In.Renderer.superClass_.constructor.call(this,t)}};(0,l.module$exports$Blockly$utils$object.inherits)(In.Renderer,ae.Renderer),In.Renderer.prototype.makeConstants_=function(){return new yi.ConstantProvider},In.Renderer.prototype.makeRenderInfo_=function(t){return new Zn.RenderInfo(this,t)},In.Renderer.prototype.makeDrawer_=function(t,e){return new mi.Drawer(t,e)},(0,xt.register)("minimalist",In.Renderer);var qn={};qn.ConstantProvider=yi.ConstantProvider,qn.Drawer=mi.Drawer,qn.RenderInfo=Zn.RenderInfo,qn.Renderer=In.Renderer;var Ti={StatementInput:function(t,e){Ti.StatementInput.superClass_.constructor.call(this,t,e),this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}};(0,l.module$exports$Blockly$utils$object.inherits)(Ti.StatementInput,Ln.StatementInput);var to={PathObject:function(t,e,o){this.constants=o,this.svgRoot=t,this.svgPathDark=(0,s.createSvgElement)(B.Svg.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot),this.svgPath=(0,s.createSvgElement)(B.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.svgPathLight=(0,s.createSvgElement)(B.Svg.PATH,{class:"blocklyPathLight"},this.svgRoot),this.colourDark="#000000",this.style=e}};(0,l.module$exports$Blockly$utils$object.inherits)(to.PathObject,ge.PathObject),to.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t),this.svgPathDark.setAttribute("d",t)},to.PathObject.prototype.setHighlightPath=function(t){this.svgPathLight.setAttribute("d",t)},to.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")},to.PathObject.prototype.applyColour=function(t){this.svgPathLight.style.display="",this.svgPathDark.style.display="",this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),to.PathObject.superClass_.applyColour.call(this,t),this.svgPath.setAttribute("stroke","none")},to.PathObject.prototype.setStyle=function(t){this.style=t,this.colourDark=(0,wt.blend)("#000",this.style.colourPrimary,.2)||this.colourDark},to.PathObject.prototype.updateHighlighted=function(t){t?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")},to.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPathLight.style.display="none",this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},to.PathObject.prototype.updateDisabled_=function(t){to.PathObject.superClass_.updateDisabled_.call(this,t),t&&this.svgPath.setAttribute("stroke","none")};var Nn={ConstantProvider:function(){Nn.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}};(0,l.module$exports$Blockly$utils$object.inherits)(Nn.ConstantProvider,Pt.ConstantProvider),Nn.ConstantProvider.prototype.getCSS_=function(t){return Nn.ConstantProvider.superClass_.getCSS_.call(this,t).concat([t+" .blocklyInsertionMarker>.blocklyPathLight,",t+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"])};var _o={Highlighter:function(t){this.info_=t,this.inlineSteps_=this.steps_="",this.RTL_=this.info_.RTL,t=t.getRenderer(),this.constants_=t.getConstants(),this.highlightConstants_=t.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}};_o.Highlighter.prototype.getPath=function(){return this.steps_+"\n"+this.inlineSteps_},_o.Highlighter.prototype.drawTopCorner=function(t){this.steps_+=(0,b.moveBy)(t.xPos,this.info_.startY);for(var o,e=0;o=t.elements[e];e++)S.Types.isLeftSquareCorner(o)?this.steps_+=this.highlightConstants_.START_POINT:S.Types.isLeftRoundedCorner(o)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):S.Types.isPreviousConnection(o)?this.steps_+=this.notchPaths_.pathLeft:S.Types.isHat(o)?this.steps_+=this.startPaths_.path(this.RTL_):S.Types.isSpacer(o)&&0!==o.width&&(this.steps_+=(0,b.lineOnAxis)("H",o.xPos+o.width-this.highlightOffset_));this.steps_+=(0,b.lineOnAxis)("H",t.xPos+t.width-this.highlightOffset_)},_o.Highlighter.prototype.drawJaggedEdge_=function(t){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+(0,b.lineOnAxis)("v",t.height-this.jaggedTeethPaths_.height-this.highlightOffset_))},_o.Highlighter.prototype.drawValueInput=function(t){var e=t.getLastInput();if(this.RTL_){var o=t.height-e.connectionHeight;this.steps_+=(0,b.moveTo)(e.xPos+e.width-this.highlightOffset_,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+(0,b.lineOnAxis)("v",o)}else this.steps_+=(0,b.moveTo)(e.xPos+e.width,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)},_o.Highlighter.prototype.drawStatementInput=function(t){var e=t.getLastInput();if(this.RTL_){var o=t.height-2*this.insideCornerPaths_.height;this.steps_+=(0,b.moveTo)(e.xPos,t.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+(0,b.lineOnAxis)("v",o)+this.insideCornerPaths_.pathBottom(this.RTL_)+(0,b.lineTo)(t.width-e.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=(0,b.moveTo)(e.xPos,t.yPos+t.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+(0,b.lineTo)(t.width-e.xPos-this.insideCornerPaths_.width,0)},_o.Highlighter.prototype.drawRightSideRow=function(t){var e=t.xPos+t.width-this.highlightOffset_;t.followsStatement&&(this.steps_+=(0,b.lineOnAxis)("H",e)),this.RTL_&&(this.steps_+=(0,b.lineOnAxis)("H",e),t.height>this.highlightOffset_&&(this.steps_+=(0,b.lineOnAxis)("V",t.yPos+t.height-this.highlightOffset_)))},_o.Highlighter.prototype.drawBottomRow=function(t){if(this.RTL_)this.steps_+=(0,b.lineOnAxis)("V",t.baseline-this.highlightOffset_);else{var e=this.info_.bottomRow.elements[0];S.Types.isLeftSquareCorner(e)?this.steps_+=(0,b.moveTo)(t.xPos+this.highlightOffset_,t.baseline-this.highlightOffset_):S.Types.isLeftRoundedCorner(e)&&(this.steps_+=(0,b.moveTo)(t.xPos,t.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}},_o.Highlighter.prototype.drawLeft=function(){var t=this.info_.outputConnection;t&&(t=t.connectionOffsetY+t.height,this.RTL_?this.steps_+=(0,b.moveTo)(this.info_.startX,t):(this.steps_+=(0,b.moveTo)(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=(0,b.lineOnAxis)("V",t)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(S.Types.isLeftRoundedCorner((t=this.info_.topRow).elements[0])?this.steps_+=(0,b.lineOnAxis)("V",this.outsideCornerPaths_.height):this.steps_+=(0,b.lineOnAxis)("V",t.capline+this.highlightOffset_))},_o.Highlighter.prototype.drawInlineInput=function(t){var e=this.highlightOffset_,o=t.xPos+t.connectionWidth,r=t.centerline-t.height/2,c=t.width-t.connectionWidth,h=r+e;this.RTL_?(r=t.connectionOffsetY-e,t=t.height-(t.connectionOffsetY+t.connectionHeight)+e,this.inlineSteps_+=(0,b.moveTo)(o-e,h)+(0,b.lineOnAxis)("v",r)+this.puzzleTabPaths_.pathDown(this.RTL_)+(0,b.lineOnAxis)("v",t)+(0,b.lineOnAxis)("h",c)):this.inlineSteps_+=(0,b.moveTo)(t.xPos+t.width+e,h)+(0,b.lineOnAxis)("v",t.height)+(0,b.lineOnAxis)("h",-c)+(0,b.moveTo)(o,r+t.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)};var Zt={Drawer:function(t,e){Zt.Drawer.superClass_.constructor.call(this,t,e),this.highlighter_=new _o.Highlighter(e)}};(0,l.module$exports$Blockly$utils$object.inherits)(Zt.Drawer,zt.Drawer),Zt.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();var t=this.block_.pathObject;t.setPath(this.outlinePath_+"\n"+this.inlinePath_),t.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&t.flipRTL(),(0,so.isDebuggerEnabled)()&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},Zt.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),Zt.Drawer.superClass_.drawTop_.call(this)},Zt.Drawer.prototype.drawJaggedEdge_=function(t){this.highlighter_.drawJaggedEdge_(t),Zt.Drawer.superClass_.drawJaggedEdge_.call(this,t)},Zt.Drawer.prototype.drawValueInput_=function(t){this.highlighter_.drawValueInput(t),Zt.Drawer.superClass_.drawValueInput_.call(this,t)},Zt.Drawer.prototype.drawStatementInput_=function(t){this.highlighter_.drawStatementInput(t),Zt.Drawer.superClass_.drawStatementInput_.call(this,t)},Zt.Drawer.prototype.drawRightSideRow_=function(t){this.highlighter_.drawRightSideRow(t),this.outlinePath_+=(0,b.lineOnAxis)("H",t.xPos+t.width)+(0,b.lineOnAxis)("V",t.yPos+t.height)},Zt.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),Zt.Drawer.superClass_.drawBottom_.call(this)},Zt.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),Zt.Drawer.superClass_.drawLeft_.call(this)},Zt.Drawer.prototype.drawInlineInput_=function(t){this.highlighter_.drawInlineInput(t),Zt.Drawer.superClass_.drawInlineInput_.call(this,t)},Zt.Drawer.prototype.positionInlineInputConnection_=function(t){if(t.connectionModel){var o=t.xPos+t.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(o*=-1),t.connectionModel.setOffsetInBlock(o,t.centerline-t.height/2+t.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}},Zt.Drawer.prototype.positionStatementInputConnection_=function(t){var e=t.getLastInput();if(e.connectionModel){var o=t.xPos+t.statementEdge+e.notchOffset;e.connectionModel.setOffsetInBlock(o=this.info_.RTL?-1*o:o+this.constants_.DARK_PATH_OFFSET,t.yPos+this.constants_.DARK_PATH_OFFSET)}},Zt.Drawer.prototype.positionExternalValueConnection_=function(t){var e=t.getLastInput();if(e.connectionModel){var o=t.xPos+t.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(o*=-1),e.connectionModel.setOffsetInBlock(o,t.yPos)}},Zt.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var e=t.connection,o=e.xPos;e.connectionModel.setOffsetInBlock((this.info_.RTL?-o:o)+this.constants_.DARK_PATH_OFFSET/2,t.baseline+this.constants_.DARK_PATH_OFFSET)}};var nn={HighlightConstantProvider:function(t){this.constantProvider=t,this.OFFSET=.5,this.START_POINT=(0,b.moveBy)(this.OFFSET,this.OFFSET)}};nn.HighlightConstantProvider.prototype.init=function(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()},nn.HighlightConstantProvider.prototype.makeInsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,e=this.OFFSET,o=(1-Math.SQRT1_2)*(t+e)-e,r=(0,b.moveBy)(o,o)+(0,b.arc)("a","0 0,0",t,(0,b.point)(-o-e,t-o)),c=(0,b.arc)("a","0 0,0",t+e,(0,b.point)(t+e,t+e)),h=(0,b.moveBy)(o,-o)+(0,b.arc)("a","0 0,0",t+e,(0,b.point)(t-o,o+e));return{width:t+e,height:t,pathTop:function(k){return k?r:""},pathBottom:function(k){return k?c:h}}},nn.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,e=this.OFFSET,o=(1-Math.SQRT1_2)*(t-e)+e,r=(0,b.moveBy)(o,o)+(0,b.arc)("a","0 0,1",t-e,(0,b.point)(t-o,-o+e)),c=(0,b.moveBy)(e,t)+(0,b.arc)("a","0 0,1",t-e,(0,b.point)(t,-t+e)),h=-o,k=(0,b.moveBy)(o,h)+(0,b.arc)("a","0 0,1",t-e,(0,b.point)(-o+e,-h-t));return{height:t,topLeft:function(C){return C?r:c},bottomLeft:function(){return k}}},nn.HighlightConstantProvider.prototype.makePuzzleTab=function(){var t=this.constantProvider.TAB_WIDTH,e=this.constantProvider.TAB_HEIGHT,o=(0,b.moveBy)(-2,3.4-e)+(0,b.lineTo)(-.45*t,-2.1),r=(0,b.lineOnAxis)("v",2.5)+(0,b.moveBy)(.97*-t,2.5)+(0,b.curve)("q",[(0,b.point)(.05*-t,10),(0,b.point)(.3*t,9.5)])+(0,b.moveBy)(.67*t,-1.9)+(0,b.lineOnAxis)("v",2.5),c=(0,b.lineOnAxis)("v",-1.5)+(0,b.moveBy)(-.92*t,-.5)+(0,b.curve)("q",[(0,b.point)(-.19*t,-5.5),(0,b.point)(0,-11)])+(0,b.moveBy)(.92*t,1),h=(0,b.moveBy)(-5,e-.7)+(0,b.lineTo)(.46*t,-2.1);return{width:t,height:e,pathUp:function(k){return k?o:c},pathDown:function(k){return k?r:h}}},nn.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:(0,b.lineOnAxis)("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}},nn.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:(0,b.lineTo)(5.1,2.6)+(0,b.moveBy)(-10.2,6.8)+(0,b.lineTo)(5.1,2.6),height:12,width:10.2}},nn.HighlightConstantProvider.prototype.makeStartHat=function(){var t=this.constantProvider.START_HAT.height,e=(0,b.moveBy)(25,-8.7)+(0,b.curve)("c",[(0,b.point)(29.7,-6.2),(0,b.point)(57.2,-.5),(0,b.point)(75,8.7)]),o=(0,b.curve)("c",[(0,b.point)(17.8,-9.2),(0,b.point)(45.3,-14.9),(0,b.point)(75,-8.7)])+(0,b.moveTo)(100.5,t+.5);return{path:function(r){return r?e:o}}};var ki={InlineInput:function(t,e){ki.InlineInput.superClass_.constructor.call(this,t,e),this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}};(0,l.module$exports$Blockly$utils$object.inherits)(ki.InlineInput,Yn.InlineInput);var Se={RenderInfo:function(t,e){Se.RenderInfo.superClass_.constructor.call(this,t,e)}};(0,l.module$exports$Blockly$utils$object.inherits)(Se.RenderInfo,Ft.RenderInfo),Se.RenderInfo.prototype.getRenderer=function(){return this.renderer_},Se.RenderInfo.prototype.populateBottomRow_=function(){Se.RenderInfo.superClass_.populateBottomRow_.call(this),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type===l.module$exports$Blockly$inputTypes.inputTypes.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)},Se.RenderInfo.prototype.addInput_=function(t,e){this.isInline&&t.type===l.module$exports$Blockly$inputTypes.inputTypes.VALUE?(e.elements.push(new ki.InlineInput(this.constants_,t)),e.hasInlineInput=!0):t.type===l.module$exports$Blockly$inputTypes.inputTypes.STATEMENT?(e.elements.push(new Ti.StatementInput(this.constants_,t)),e.hasStatement=!0):t.type===l.module$exports$Blockly$inputTypes.inputTypes.VALUE?(e.elements.push(new Xn.ExternalValueInput(this.constants_,t)),e.hasExternalInput=!0):t.type===l.module$exports$Blockly$inputTypes.inputTypes.DUMMY&&(e.minHeight=Math.max(e.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),e.hasDummyInput=!0),this.isInline||null!==e.align||(e.align=t.align)},Se.RenderInfo.prototype.addElemSpacing_=function(){for(var o,t=!1,e=0;o=this.rows[e];e++)o.hasExternalInput&&(t=!0);for(e=0;o=this.rows[e];e++){var r=o.elements;if(o.elements=[],o.startsWithElemSpacer()&&o.elements.push(new Le.InRowSpacer(this.constants_,this.getInRowSpacing_(null,r[0]))),r.length){for(var c=0;c<r.length-1;c++){o.elements.push(r[c]);var h=this.getInRowSpacing_(r[c],r[c+1]);o.elements.push(new Le.InRowSpacer(this.constants_,h))}o.elements.push(r[r.length-1]),o.endsWithElemSpacer()&&(r=this.getInRowSpacing_(r[r.length-1],null),t&&o.hasDummyInput&&(r+=this.constants_.TAB_WIDTH),o.elements.push(new Le.InRowSpacer(this.constants_,r)))}}},Se.RenderInfo.prototype.getInRowSpacing_=function(t,e){if(!t)return e&&S.Types.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:e&&S.Types.isInlineInput(e)?this.constants_.MEDIUM_LARGE_PADDING:e&&S.Types.isStatementInput(e)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!S.Types.isInput(t)&&(!e||S.Types.isStatementInput(e)))return S.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:S.Types.isIcon(t)?2*this.constants_.LARGE_PADDING+1:S.Types.isHat(t)?this.constants_.NO_PADDING:S.Types.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:S.Types.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:S.Types.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(S.Types.isInput(t)&&!e){if(S.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(S.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(S.Types.isStatementInput(t))return this.constants_.NO_PADDING}if(!S.Types.isInput(t)&&e&&S.Types.isInput(e)){if(S.Types.isField(t)&&t.isEditable){if(S.Types.isInlineInput(e)||S.Types.isExternalInput(e))return this.constants_.SMALL_PADDING}else{if(S.Types.isInlineInput(e)||S.Types.isExternalInput(e))return this.constants_.MEDIUM_LARGE_PADDING;if(S.Types.isStatementInput(e))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(S.Types.isIcon(t)&&e&&!S.Types.isInput(e))return this.constants_.LARGE_PADDING;if(S.Types.isInlineInput(t)&&e&&S.Types.isField(e))return e.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(S.Types.isLeftSquareCorner(t)&&e){if(S.Types.isHat(e))return this.constants_.NO_PADDING;if(S.Types.isPreviousConnection(e))return e.notchOffset;if(S.Types.isNextConnection(e))return e.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(S.Types.isLeftRoundedCorner(t)&&e){if(S.Types.isPreviousConnection(e))return e.notchOffset-this.constants_.CORNER_RADIUS;if(S.Types.isNextConnection(e))return e.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return S.Types.isField(t)&&e&&S.Types.isField(e)&&t.isEditable===e.isEditable||e&&S.Types.isJaggedEdge(e)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},Se.RenderInfo.prototype.getSpacerRowHeight_=function(t,e){return S.Types.isTopRow(t)&&S.Types.isBottomRow(e)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:S.Types.isTopRow(t)||S.Types.isBottomRow(e)?this.constants_.NO_PADDING:t.hasExternalInput&&e.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&e.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&e.hasStatement||!t.hasStatement&&e.hasDummyInput||t.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},Se.RenderInfo.prototype.getElemCenterline_=function(t,e){if(S.Types.isSpacer(e))return t.yPos+e.height/2;if(S.Types.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,S.Types.isNextConnection(e)?t+e.height/2:t-e.height/2;if(S.Types.isTopRow(t))return S.Types.isHat(e)?t.capline-e.height/2:t.capline+e.height/2;var o=t.yPos;return S.Types.isField(e)||S.Types.isIcon(e)?(o+=e.height/2,(t.hasInlineInput||t.hasStatement)&&e.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=t.height&&(o+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):o=S.Types.isInlineInput(e)?o+e.height/2:o+t.height/2,o},Se.RenderInfo.prototype.alignRowElements_=function(){if(this.isInline){for(var r,t=0,e=null,o=this.rows.length-1;r=this.rows[o];o--)r.nextRightEdge=t,S.Types.isInputRow(r)&&(r.hasStatement&&this.alignStatementRow_(r),e&&e.hasStatement&&r.width<e.width?r.nextRightEdge=e.width:t=r.width,e=r);for(t=o=0;e=this.rows[t];t++)e.hasStatement?o=this.getDesiredRowWidth_(e):S.Types.isSpacer(e)?e.width=Math.max(o,e.nextRightEdge):(0<(o=Math.max(o,e.nextRightEdge)-e.width)&&this.addAlignmentPadding_(e,o),o=e.width)}else Se.RenderInfo.superClass_.alignRowElements_.call(this)},Se.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.isInline&&t.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:Se.RenderInfo.superClass_.getDesiredRowWidth_.call(this,t)},Se.RenderInfo.prototype.finalize_=function(){for(var r,t=0,e=0,o=0;r=this.rows[o];o++){r.yPos=e,r.xPos=this.startX,e+=r.height,t=Math.max(t,r.widthWithConnectedBlocks);var c=e-this.topRow.ascenderHeight;r===this.bottomRow&&c<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=c=this.constants_.MIN_BLOCK_HEIGHT-c,e+=c),this.recordElemPositions_(r)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=e-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=e+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline};var Xe={Renderer:function(t){Xe.Renderer.superClass_.constructor.call(this,t),this.highlightConstants_=null}};(0,l.module$exports$Blockly$utils$object.inherits)(Xe.Renderer,ae.Renderer),Xe.Renderer.prototype.init=function(t,e){Xe.Renderer.superClass_.init.call(this,t,e),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()},Xe.Renderer.prototype.refreshDom=function(t,e){Xe.Renderer.superClass_.refreshDom.call(this,t,e),this.getHighlightConstants().init()},Xe.Renderer.prototype.makeConstants_=function(){return new Nn.ConstantProvider},Xe.Renderer.prototype.makeRenderInfo_=function(t){return new Se.RenderInfo(this,t)},Xe.Renderer.prototype.makeDrawer_=function(t,e){return new Zt.Drawer(t,e)},Xe.Renderer.prototype.makePathObject=function(t,e){return new to.PathObject(t,e,this.getConstants())},Xe.Renderer.prototype.makeHighlightConstants_=function(){return new nn.HighlightConstantProvider(this.getConstants())},Xe.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_},(0,xt.register)("geras",Xe.Renderer);var Oo={};Oo.ConstantProvider=Nn.ConstantProvider,Oo.Drawer=Zt.Drawer,Oo.HighlightConstantProvider=nn.HighlightConstantProvider,Oo.Highlighter=_o.Highlighter,Oo.InlineInput=ki.InlineInput,Oo.PathObject=to.PathObject,Oo.RenderInfo=Se.RenderInfo,Oo.Renderer=Xe.Renderer,Oo.StatementInput=Ti.StatementInput;var ar={};ar.Zelos=new Oe.Theme("zelos",{colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},{colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}});var Ui={};Ui.Classic=Vn.Classic,Ui.Zelos=ar.Zelos;var we={names:{ESCAPE:"escape",DELETE:"delete",COPY:"copy",CUT:"cut",PASTE:"paste",UNDO:"undo",REDO:"redo"},registerEscape:function(){var t={name:we.names.ESCAPE,preconditionFn:function(e){return!e.options.readOnly},callback:function(e){return e.hideChaff(),!0}};nt.ShortcutRegistry.registry.register(t),nt.ShortcutRegistry.registry.addKeyMapping(Z_KeyCodes.ESC,t.name)},registerDelete:function(){var t={name:we.names.DELETE,preconditionFn:function(e){var o=(0,l.module$exports$Blockly$common.getSelected)();return!e.options.readOnly&&o&&o.isDeletable()},callback:function(e,o){return o.preventDefault(),!gt.Gesture.inProgress()&&((0,l.module$exports$Blockly$common.getSelected)().checkAndDelete(),!0)}};nt.ShortcutRegistry.registry.register(t),nt.ShortcutRegistry.registry.addKeyMapping(Z_KeyCodes.DELETE,t.name),nt.ShortcutRegistry.registry.addKeyMapping(Z_KeyCodes.BACKSPACE,t.name)},registerCopy:function(){var t={name:we.names.COPY,preconditionFn:function(o){var r=(0,l.module$exports$Blockly$common.getSelected)();return!o.options.readOnly&&!gt.Gesture.inProgress()&&r&&r.isDeletable()&&r.isMovable()},callback:function(o,r){return r.preventDefault(),o.hideChaff(),(0,Ke.copy)((0,l.module$exports$Blockly$common.getSelected)()),!0}};nt.ShortcutRegistry.registry.register(t);var e=nt.ShortcutRegistry.registry.createSerializedKey(Z_KeyCodes.C,[Z_KeyCodes.CTRL]);nt.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=nt.ShortcutRegistry.registry.createSerializedKey(Z_KeyCodes.C,[Z_KeyCodes.ALT]),nt.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=nt.ShortcutRegistry.registry.createSerializedKey(Z_KeyCodes.C,[Z_KeyCodes.META]),nt.ShortcutRegistry.registry.addKeyMapping(e,t.name)},registerCut:function(){var t={name:we.names.CUT,preconditionFn:function(o){var r=(0,l.module$exports$Blockly$common.getSelected)();return!o.options.readOnly&&!gt.Gesture.inProgress()&&r&&r.isDeletable()&&r.isMovable()&&!r.workspace.isFlyout},callback:function(){var o=(0,l.module$exports$Blockly$common.getSelected)();return!!o&&((0,Ke.copy)(o),o.checkAndDelete(),!0)}};nt.ShortcutRegistry.registry.register(t);var e=nt.ShortcutRegistry.registry.createSerializedKey(Z_KeyCodes.X,[Z_KeyCodes.CTRL]);nt.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=nt.ShortcutRegistry.registry.createSerializedKey(Z_KeyCodes.X,[Z_KeyCodes.ALT]),nt.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=nt.ShortcutRegistry.registry.createSerializedKey(Z_KeyCodes.X,[Z_KeyCodes.META]),nt.ShortcutRegistry.registry.addKeyMapping(e,t.name)},registerPaste:function(){var t={name:we.names.PASTE,preconditionFn:function(o){return!o.options.readOnly&&!gt.Gesture.inProgress()},callback:function(){return(0,Ke.paste)()}};nt.ShortcutRegistry.registry.register(t);var e=nt.ShortcutRegistry.registry.createSerializedKey(Z_KeyCodes.V,[Z_KeyCodes.CTRL]);nt.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=nt.ShortcutRegistry.registry.createSerializedKey(Z_KeyCodes.V,[Z_KeyCodes.ALT]),nt.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=nt.ShortcutRegistry.registry.createSerializedKey(Z_KeyCodes.V,[Z_KeyCodes.META]),nt.ShortcutRegistry.registry.addKeyMapping(e,t.name)},registerUndo:function(){var t={name:we.names.UNDO,preconditionFn:function(o){return!o.options.readOnly&&!gt.Gesture.inProgress()},callback:function(o){return o.hideChaff(),o.undo(!1),!0}};nt.ShortcutRegistry.registry.register(t);var e=nt.ShortcutRegistry.registry.createSerializedKey(Z_KeyCodes.Z,[Z_KeyCodes.CTRL]);nt.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=nt.ShortcutRegistry.registry.createSerializedKey(Z_KeyCodes.Z,[Z_KeyCodes.ALT]),nt.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=nt.ShortcutRegistry.registry.createSerializedKey(Z_KeyCodes.Z,[Z_KeyCodes.META]),nt.ShortcutRegistry.registry.addKeyMapping(e,t.name)},registerRedo:function(){var t={name:we.names.REDO,preconditionFn:function(o){return!gt.Gesture.inProgress()&&!o.options.readOnly},callback:function(o){return o.hideChaff(),o.undo(!0),!0}};nt.ShortcutRegistry.registry.register(t);var e=nt.ShortcutRegistry.registry.createSerializedKey(Z_KeyCodes.Z,[Z_KeyCodes.SHIFT,Z_KeyCodes.CTRL]);nt.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=nt.ShortcutRegistry.registry.createSerializedKey(Z_KeyCodes.Z,[Z_KeyCodes.SHIFT,Z_KeyCodes.ALT]),nt.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=nt.ShortcutRegistry.registry.createSerializedKey(Z_KeyCodes.Z,[Z_KeyCodes.SHIFT,Z_KeyCodes.META]),nt.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=nt.ShortcutRegistry.registry.createSerializedKey(Z_KeyCodes.Y,[Z_KeyCodes.CTRL]),nt.ShortcutRegistry.registry.addKeyMapping(e,t.name)},registerDefaultShortcuts:function(){(0,we.registerEscape)(),(0,we.registerDelete)(),(0,we.registerCopy)(),(0,we.registerCut)(),(0,we.registerPaste)(),(0,we.registerUndo)(),(0,we.registerRedo)()}};(0,we.registerDefaultShortcuts)();var Pn={FinishedLoading:function(t){this.isBlank=typeof t>"u",this.workspaceId=t?t.id:"",this.group=(0,f.getGroup)(),this.recordUndo=!1}};(0,l.module$exports$Blockly$utils$object.inherits)(Pn.FinishedLoading,eo),Pn.FinishedLoading.prototype.type=f.FINISHED_LOADING,Pn.FinishedLoading.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),this.workspaceId&&(t.workspaceId=this.workspaceId),t},Pn.FinishedLoading.prototype.fromJson=function(t){this.isBlank=!1,this.workspaceId=t.workspaceId,this.group=t.group},(0,x.register)(x.Type.EVENT,f.FINISHED_LOADING,Pn.FinishedLoading);var rn={Ui:function(t,e,o,r){rn.Ui.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.element=typeof e>"u"?"":e,this.oldValue=typeof o>"u"?"":o,this.newValue=typeof r>"u"?"":r}};(0,l.module$exports$Blockly$utils$object.inherits)(rn.Ui,We.UiBase),rn.Ui.prototype.type=f.UI,rn.Ui.prototype.toJson=function(){var t=rn.Ui.superClass_.toJson.call(this);return t.element=this.element,void 0!==this.newValue&&(t.newValue=this.newValue),this.blockId&&(t.blockId=this.blockId),t},rn.Ui.prototype.fromJson=function(t){rn.Ui.superClass_.fromJson.call(this,t),this.element=t.element,this.newValue=t.newValue,this.blockId=t.blockId},(0,x.register)(x.Type.EVENT,f.UI,rn.Ui);var sn={BubbleOpen:function(t,e,o){sn.BubbleOpen.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.isOpen=e,this.bubbleType=o}};(0,l.module$exports$Blockly$utils$object.inherits)(sn.BubbleOpen,We.UiBase),sn.BubbleOpen.prototype.type=f.BUBBLE_OPEN,sn.BubbleOpen.prototype.toJson=function(){var t=sn.BubbleOpen.superClass_.toJson.call(this);return t.isOpen=this.isOpen,t.bubbleType=this.bubbleType,t.blockId=this.blockId,t},sn.BubbleOpen.prototype.fromJson=function(t){sn.BubbleOpen.superClass_.fromJson.call(this,t),this.isOpen=t.isOpen,this.bubbleType=t.bubbleType,this.blockId=t.blockId},(0,x.register)(x.Type.EVENT,f.BUBBLE_OPEN,sn.BubbleOpen);var go={CommentChange:function(t,e,o){go.CommentChange.superClass_.constructor.call(this,t),t&&(this.oldContents_=typeof e>"u"?"":e,this.newContents_=typeof o>"u"?"":o)}};(0,l.module$exports$Blockly$utils$object.inherits)(go.CommentChange,qe.CommentBase),go.CommentChange.prototype.type=f.COMMENT_CHANGE,go.CommentChange.prototype.toJson=function(){var t=go.CommentChange.superClass_.toJson.call(this);return t.oldContents=this.oldContents_,t.newContents=this.newContents_,t},go.CommentChange.prototype.fromJson=function(t){go.CommentChange.superClass_.fromJson.call(this,t),this.oldContents_=t.oldContents,this.newContents_=t.newContents},go.CommentChange.prototype.isNull=function(){return this.oldContents_===this.newContents_},go.CommentChange.prototype.run=function(t){var e=this.getEventWorkspace_().getCommentById(this.commentId);e?e.setContent(t?this.newContents_:this.oldContents_):console.warn("Can't change non-existent comment: "+this.commentId)},(0,x.register)(x.Type.EVENT,f.COMMENT_CHANGE,go.CommentChange);var Ao={CommentCreate:function(t){Ao.CommentCreate.superClass_.constructor.call(this,t),t&&(this.xml=t.toXmlWithXY())}};(0,l.module$exports$Blockly$utils$object.inherits)(Ao.CommentCreate,qe.CommentBase),Ao.CommentCreate.prototype.type=f.COMMENT_CREATE,Ao.CommentCreate.prototype.toJson=function(){var t=Ao.CommentCreate.superClass_.toJson.call(this);return t.xml=(0,l.module$exports$Blockly$Xml.domToText)(this.xml),t},Ao.CommentCreate.prototype.fromJson=function(t){Ao.CommentCreate.superClass_.fromJson.call(this,t),this.xml=(0,l.module$exports$Blockly$Xml.textToDom)(t.xml)},Ao.CommentCreate.prototype.run=function(t){qe.CommentBase.CommentCreateDeleteHelper(this,t)},(0,x.register)(x.Type.EVENT,f.COMMENT_CREATE,Ao.CommentCreate);var Do={CommentDelete:function(t){Do.CommentDelete.superClass_.constructor.call(this,t),t&&(this.xml=t.toXmlWithXY())}};(0,l.module$exports$Blockly$utils$object.inherits)(Do.CommentDelete,qe.CommentBase),Do.CommentDelete.prototype.type=f.COMMENT_DELETE,Do.CommentDelete.prototype.toJson=function(){return Do.CommentDelete.superClass_.toJson.call(this)},Do.CommentDelete.prototype.fromJson=function(t){Do.CommentDelete.superClass_.fromJson.call(this,t)},Do.CommentDelete.prototype.run=function(t){qe.CommentBase.CommentCreateDeleteHelper(this,!t)},(0,x.register)(x.Type.EVENT,f.COMMENT_DELETE,Do.CommentDelete);var ln={TrashcanOpen:function(t,e){ln.TrashcanOpen.superClass_.constructor.call(this,e),this.isOpen=t}};(0,l.module$exports$Blockly$utils$object.inherits)(ln.TrashcanOpen,We.UiBase),ln.TrashcanOpen.prototype.type=f.TRASHCAN_OPEN,ln.TrashcanOpen.prototype.toJson=function(){var t=ln.TrashcanOpen.superClass_.toJson.call(this);return t.isOpen=this.isOpen,t},ln.TrashcanOpen.prototype.fromJson=function(t){ln.TrashcanOpen.superClass_.fromJson.call(this,t),this.isOpen=t.isOpen},(0,x.register)(x.Type.EVENT,f.TRASHCAN_OPEN,ln.TrashcanOpen),l.module$exports$Blockly$Events={Abstract:eo},l.module$exports$Blockly$Events.BubbleOpen=sn.BubbleOpen,l.module$exports$Blockly$Events.BlockBase=ro.BlockBase,l.module$exports$Blockly$Events.BlockChange=be.BlockChange,l.module$exports$Blockly$Events.BlockCreate=$o.BlockCreate,l.module$exports$Blockly$Events.BlockDelete=wo.BlockDelete,l.module$exports$Blockly$Events.BlockDrag=Yo.BlockDrag,l.module$exports$Blockly$Events.BlockMove=Ze.BlockMove,l.module$exports$Blockly$Events.Click=jo.Click,l.module$exports$Blockly$Events.CommentBase=qe.CommentBase,l.module$exports$Blockly$Events.CommentChange=go.CommentChange,l.module$exports$Blockly$Events.CommentCreate=Ao.CommentCreate,l.module$exports$Blockly$Events.CommentDelete=Do.CommentDelete,l.module$exports$Blockly$Events.CommentMove=Qe.CommentMove,l.module$exports$Blockly$Events.FinishedLoading=Pn.FinishedLoading,l.module$exports$Blockly$Events.MarkerMove=Ko.MarkerMove,l.module$exports$Blockly$Events.Selected=qo.Selected,l.module$exports$Blockly$Events.ThemeChange=tn.ThemeChange,l.module$exports$Blockly$Events.ToolboxItemSelect=on.ToolboxItemSelect,l.module$exports$Blockly$Events.TrashcanOpen=ln.TrashcanOpen,l.module$exports$Blockly$Events.Ui=rn.Ui,l.module$exports$Blockly$Events.UiBase=We.UiBase,l.module$exports$Blockly$Events.VarBase=bo.VarBase,l.module$exports$Blockly$Events.VarCreate=Bo.VarCreate,l.module$exports$Blockly$Events.VarDelete=Io.VarDelete,l.module$exports$Blockly$Events.VarRename=Ro.VarRename,l.module$exports$Blockly$Events.ViewportChange=en.ViewportChange,l.module$exports$Blockly$Events.BLOCK_CHANGE=f.CHANGE,l.module$exports$Blockly$Events.BLOCK_CREATE=f.CREATE,l.module$exports$Blockly$Events.BLOCK_DELETE=f.DELETE,l.module$exports$Blockly$Events.BLOCK_DRAG=f.BLOCK_DRAG,l.module$exports$Blockly$Events.BLOCK_MOVE=f.MOVE,l.module$exports$Blockly$Events.BUBBLE_OPEN=f.BUBBLE_OPEN,l.module$exports$Blockly$Events.BumpEvent=f.BumpEvent,l.module$exports$Blockly$Events.BUMP_EVENTS=f.BUMP_EVENTS,l.module$exports$Blockly$Events.CHANGE=f.CHANGE,l.module$exports$Blockly$Events.CLICK=f.CLICK,l.module$exports$Blockly$Events.COMMENT_CHANGE=f.COMMENT_CHANGE,l.module$exports$Blockly$Events.COMMENT_CREATE=f.COMMENT_CREATE,l.module$exports$Blockly$Events.COMMENT_DELETE=f.COMMENT_DELETE,l.module$exports$Blockly$Events.COMMENT_MOVE=f.COMMENT_MOVE,l.module$exports$Blockly$Events.CREATE=f.CREATE,l.module$exports$Blockly$Events.DELETE=f.DELETE,l.module$exports$Blockly$Events.FINISHED_LOADING=f.FINISHED_LOADING,l.module$exports$Blockly$Events.MARKER_MOVE=f.MARKER_MOVE,l.module$exports$Blockly$Events.MOVE=f.MOVE,l.module$exports$Blockly$Events.SELECTED=f.SELECTED,l.module$exports$Blockly$Events.THEME_CHANGE=f.THEME_CHANGE,l.module$exports$Blockly$Events.TOOLBOX_ITEM_SELECT=f.TOOLBOX_ITEM_SELECT,l.module$exports$Blockly$Events.TRASHCAN_OPEN=f.TRASHCAN_OPEN,l.module$exports$Blockly$Events.UI=f.UI,l.module$exports$Blockly$Events.VAR_CREATE=f.VAR_CREATE,l.module$exports$Blockly$Events.VAR_DELETE=f.VAR_DELETE,l.module$exports$Blockly$Events.VAR_RENAME=f.VAR_RENAME,l.module$exports$Blockly$Events.VIEWPORT_CHANGE=f.VIEWPORT_CHANGE,l.module$exports$Blockly$Events.clearPendingUndo=f.clearPendingUndo,l.module$exports$Blockly$Events.disable=f.disable,l.module$exports$Blockly$Events.enable=f.enable,l.module$exports$Blockly$Events.filter=f.filter,l.module$exports$Blockly$Events.fire=f.fire,l.module$exports$Blockly$Events.fromJson=f.fromJson,l.module$exports$Blockly$Events.getDescendantIds=f.getDescendantIds,l.module$exports$Blockly$Events.get=f.get,l.module$exports$Blockly$Events.getGroup=f.getGroup,l.module$exports$Blockly$Events.getRecordUndo=f.getRecordUndo,l.module$exports$Blockly$Events.isEnabled=f.isEnabled,l.module$exports$Blockly$Events.setGroup=f.setGroup,l.module$exports$Blockly$Events.setRecordUndo=f.setRecordUndo,l.module$exports$Blockly$Events.disableOrphans=f.disableOrphans,Object.defineProperties(l.module$exports$Blockly$Events,{recordUndo:{get:function(){return(0,ht.warn)("Blockly.Events.recordUndo","September 2021","September 2022","Blockly.Events.getRecordUndo()"),(0,f.getRecordUndo)()},set:function(t){(0,ht.warn)("Blockly.Events.recordUndo","September 2021","September 2022","Blockly.Events.setRecordUndo()"),(0,f.setRecordUndo)(t)}}});var Ht={registerUndo:function(){bt.ContextMenuRegistry.registry.register({displayText:function(){return l.module$exports$Blockly$Msg.Msg.UNDO},preconditionFn:function(t){return 0<t.workspace.getUndoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!1)},scopeType:bt.ContextMenuRegistry.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},registerRedo:function(){bt.ContextMenuRegistry.registry.register({displayText:function(){return l.module$exports$Blockly$Msg.Msg.REDO},preconditionFn:function(t){return 0<t.workspace.getRedoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!0)},scopeType:bt.ContextMenuRegistry.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},registerCleanup:function(){bt.ContextMenuRegistry.registry.register({displayText:function(){return l.module$exports$Blockly$Msg.Msg.CLEAN_UP},preconditionFn:function(t){return t.workspace.isMovable()?1<t.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback:function(t){t.workspace.cleanUp()},scopeType:bt.ContextMenuRegistry.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})}},ur=function(t,e){var o=0,r=0,c=function(C){r--,C.setCollapsed(t),0===r&&(0,l.module$exports$Blockly$Events.setGroup)(!1)};(0,l.module$exports$Blockly$Events.setGroup)(!0);for(var h=0;h<e.length;h++)for(var k=e[h];k;)r++,setTimeout(c.bind(null,k),o),k=k.getNextBlock(),o+=10};Ht.registerCollapse=function(){bt.ContextMenuRegistry.registry.register({displayText:function(){return l.module$exports$Blockly$Msg.Msg.COLLAPSE_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var e=0;e<t.length;e++)for(var o=t[e];o;){if(!o.isCollapsed())return"enabled";o=o.getNextBlock()}return"disabled"}return"hidden"},callback:function(t){ur(!0,t.workspace.getTopBlocks(!0))},scopeType:bt.ContextMenuRegistry.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},Ht.registerExpand=function(){bt.ContextMenuRegistry.registry.register({displayText:function(){return l.module$exports$Blockly$Msg.Msg.EXPAND_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var e=0;e<t.length;e++)for(var o=t[e];o;){if(o.isCollapsed())return"enabled";o=o.getNextBlock()}return"disabled"}return"hidden"},callback:function(t){ur(!1,t.workspace.getTopBlocks(!0))},scopeType:bt.ContextMenuRegistry.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})};var hr=function(t,e){if(t.isDeletable())Array.prototype.push.apply(e,t.getDescendants(!1));else{t=t.getChildren(!1);for(var o=0;o<t.length;o++)hr(t[o],e)}},Hi=function(t){var e=[];t=t.getTopBlocks(!0);for(var o=0;o<t.length;o++)hr(t[o],e);return e},Ei=function(t,e){(0,f.setGroup)(e);var o=t.shift();o&&(o.workspace?(o.dispose(!1,!0),setTimeout(Ei,10,t,e)):Ei(t,e)),(0,f.setGroup)(!1)};Ht.registerDeleteAll=function(){bt.ContextMenuRegistry.registry.register({displayText:function(t){if(t.workspace)return 1===(t=Hi(t.workspace).length)?l.module$exports$Blockly$Msg.Msg.DELETE_BLOCK:l.module$exports$Blockly$Msg.Msg.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn:function(t){if(t.workspace)return 0<Hi(t.workspace).length?"enabled":"disabled"},callback:function(t){if(t.workspace){t.workspace.cancelCurrentGesture();var e=Hi(t.workspace),o=(0,_t.genUid)();2>e.length?Ei(e,o):(0,_e.confirm)(l.module$exports$Blockly$Msg.Msg.DELETE_ALL_BLOCKS.replace("%1",String(e.length)),function(r){r&&Ei(e,o)})}},scopeType:bt.ContextMenuRegistry.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},Ht.registerDuplicate=function(){bt.ContextMenuRegistry.registry.register({displayText:function(){return l.module$exports$Blockly$Msg.Msg.DUPLICATE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isDeletable()&&t.isMovable()?t.isDuplicatable()?"enabled":"disabled":"hidden"},callback:function(t){t.block&&(0,Ke.duplicate)(t.block)},scopeType:bt.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},Ht.registerComment=function(){bt.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.getCommentIcon()?l.module$exports$Blockly$Msg.Msg.REMOVE_COMMENT:l.module$exports$Blockly$Msg.Msg.ADD_COMMENT},preconditionFn:function(t){return t=t.block,ot.IE||t.isInFlyout||!t.workspace.options.comments||t.isCollapsed()||!t.isEditable()?"hidden":"enabled"},callback:function(t){(t=t.block).getCommentIcon()?t.setCommentText(null):t.setCommentText("")},scopeType:bt.ContextMenuRegistry.ScopeType.BLOCK,id:"blockComment",weight:2})},Ht.registerInline=function(){bt.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.getInputsInline()?l.module$exports$Blockly$Msg.Msg.EXTERNAL_INPUTS:l.module$exports$Blockly$Msg.Msg.INLINE_INPUTS},preconditionFn:function(t){if(!(t=t.block).isInFlyout&&t.isMovable()&&!t.isCollapsed())for(var e=1;e<t.inputList.length;e++)if(t.inputList[e-1].type!==l.module$exports$Blockly$inputTypes.inputTypes.STATEMENT&&t.inputList[e].type!==l.module$exports$Blockly$inputTypes.inputTypes.STATEMENT)return"enabled";return"hidden"},callback:function(t){t.block.setInputsInline(!t.block.getInputsInline())},scopeType:bt.ContextMenuRegistry.ScopeType.BLOCK,id:"blockInline",weight:3})},Ht.registerCollapseExpandBlock=function(){bt.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.isCollapsed()?l.module$exports$Blockly$Msg.Msg.EXPAND_BLOCK:l.module$exports$Blockly$Msg.Msg.COLLAPSE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isMovable()&&t.workspace.options.collapse?"enabled":"hidden"},callback:function(t){t.block.setCollapsed(!t.block.isCollapsed())},scopeType:bt.ContextMenuRegistry.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},Ht.registerDisable=function(){bt.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.isEnabled()?l.module$exports$Blockly$Msg.Msg.DISABLE_BLOCK:l.module$exports$Blockly$Msg.Msg.ENABLE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.workspace.options.disable&&t.isEditable()?t.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback:function(t){t=t.block;var e=(0,f.getGroup)();e||(0,f.setGroup)(!0),t.setEnabled(!t.isEnabled()),e||(0,f.setGroup)(!1)},scopeType:bt.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDisable",weight:5})},Ht.registerDelete=function(){bt.ContextMenuRegistry.registry.register({displayText:function(t){var e=t.block;return t=e.getDescendants(!1).length,(e=e.getNextBlock())&&(t-=e.getDescendants(!1).length),1===t?l.module$exports$Blockly$Msg.Msg.DELETE_BLOCK:l.module$exports$Blockly$Msg.Msg.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn:function(t){return!t.block.isInFlyout&&t.block.isDeletable()?"enabled":"hidden"},callback:function(t){t.block&&t.block.checkAndDelete()},scopeType:bt.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDelete",weight:6})},Ht.registerHelp=function(){bt.ContextMenuRegistry.registry.register({displayText:function(){return l.module$exports$Blockly$Msg.Msg.HELP},preconditionFn:function(t){return("function"==typeof(t=t.block).helpUrl?t.helpUrl():t.helpUrl)?"enabled":"hidden"},callback:function(t){t.block.showHelp()},scopeType:bt.ContextMenuRegistry.ScopeType.BLOCK,id:"blockHelp",weight:7})},Ht.registerDefaultOptions=function(){(0,Ht.registerUndo)(),(0,Ht.registerRedo)(),(0,Ht.registerCleanup)(),(0,Ht.registerCollapse)(),(0,Ht.registerExpand)(),(0,Ht.registerDeleteAll)(),(0,Ht.registerDuplicate)(),(0,Ht.registerComment)(),(0,Ht.registerInline)(),(0,Ht.registerCollapseExpandBlock)(),(0,Ht.registerDisable)(),(0,Ht.registerDelete)(),(0,Ht.registerHelp)()},(0,Ht.registerDefaultOptions)();var qt={Icon:function(t){this.block_=t,this.iconGroup_=null}};qt.Icon.prototype.collapseHidden=!0,qt.Icon.prototype.SIZE=17,qt.Icon.prototype.bubble_=null,qt.Icon.prototype.iconXY_=null,qt.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=(0,s.createSvgElement)(B.Svg.G,{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&(0,s.addClass)(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),(0,g.conditionalBind)(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},qt.Icon.prototype.dispose=function(){(0,s.removeNode)(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},qt.Icon.prototype.updateEditable=function(){},qt.Icon.prototype.isVisible=function(){return!!this.bubble_},qt.Icon.prototype.iconClick_=function(t){this.block_.workspace.isDragging()||this.block_.isInFlyout||(0,g.isRightButton)(t)||this.setVisible(!this.isVisible())},qt.Icon.prototype.applyColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.style.colourPrimary)},qt.Icon.prototype.setIconLocation=function(t){this.iconXY_=t,this.isVisible()&&this.bubble_.setAnchorLocation(t)},qt.Icon.prototype.computeIconLocation=function(){var t=this.block_.getRelativeToSurfaceXY(),e=(0,dt.getRelativeXY)(this.iconGroup_);t=new N.Coordinate(t.x+e.x+this.SIZE/2,t.y+e.y+this.SIZE/2),N.Coordinate.equals(this.getIconLocation(),t)||this.setIconLocation(t)},qt.Icon.prototype.getIconLocation=function(){return this.iconXY_},qt.Icon.prototype.getCorrectedSize=function(){return new et.Size(qt.Icon.prototype.SIZE,qt.Icon.prototype.SIZE-2)};var no={Warning:function(t){no.Warning.superClass_.constructor.call(this,t),this.createIcon(),this.text_=Object.create(null)}};(0,l.module$exports$Blockly$utils$object.inherits)(no.Warning,qt.Icon),no.Warning.prototype.collapseHidden=!1,no.Warning.prototype.drawIcon_=function(t){(0,s.createSvgElement)(B.Svg.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},t),(0,s.createSvgElement)(B.Svg.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},t),(0,s.createSvgElement)(B.Svg.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},t)},no.Warning.prototype.setVisible=function(t){t!==this.isVisible()&&((0,f.fire)(new((0,f.get)(f.BUBBLE_OPEN))(this.block_,t,"warning")),t?this.createBubble_():this.disposeBubble_())},no.Warning.prototype.createBubble_=function(){this.paragraphElement_=W.Bubble.textToDom(this.getText()),this.bubble_=W.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},no.Warning.prototype.disposeBubble_=function(){this.bubble_.dispose(),this.paragraphElement_=this.bubble_=null},no.Warning.prototype.setText=function(t,e){this.text_[e]!==t&&(t?this.text_[e]=t:delete this.text_[e],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},no.Warning.prototype.getText=function(){var e,t=[];for(e in this.text_)t.push(this.text_[e]);return t.join("\n")},no.Warning.prototype.dispose=function(){this.block_.warning=null,qt.Icon.prototype.dispose.call(this)};var ue={Comment:function(t){ue.Comment.superClass_.constructor.call(this,t),this.model_=t.commentModel,this.model_.text=this.model_.text||"",this.cachedText_="",this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null,this.createIcon()}};(0,l.module$exports$Blockly$utils$object.inherits)(ue.Comment,qt.Icon),ue.Comment.prototype.drawIcon_=function(t){(0,s.createSvgElement)(B.Svg.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},t),(0,s.createSvgElement)(B.Svg.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},t),(0,s.createSvgElement)(B.Svg.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},t)},ue.Comment.prototype.createEditor_=function(){this.foreignObject_=(0,s.createSvgElement)(B.Svg.FOREIGNOBJECT,{x:W.Bubble.BORDER_WIDTH,y:W.Bubble.BORDER_WIDTH},null);var t=document.createElementNS(s.HTML_NS,"body");t.setAttribute("xmlns",s.HTML_NS),t.className="blocklyMinimalBody";var e=this.textarea_=document.createElementNS(s.HTML_NS,"textarea");return e.className="blocklyCommentTextarea",e.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),e.value=this.model_.text,this.resizeTextarea_(),t.appendChild(e),this.foreignObject_.appendChild(t),this.onMouseUpWrapper_=(0,g.conditionalBind)(e,"mouseup",this,this.startEdit_,!0,!0),this.onWheelWrapper_=(0,g.conditionalBind)(e,"wheel",this,function(o){o.stopPropagation()}),this.onChangeWrapper_=(0,g.conditionalBind)(e,"change",this,function(o){this.cachedText_!==this.model_.text&&(0,f.fire)(new((0,f.get)(f.CHANGE))(this.block_,"comment",null,this.cachedText_,this.model_.text))}),this.onInputWrapper_=(0,g.conditionalBind)(e,"input",this,function(o){this.model_.text=e.value}),setTimeout(e.focus.bind(e),0),this.foreignObject_},ue.Comment.prototype.updateEditable=function(){ue.Comment.superClass_.updateEditable.call(this),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())},ue.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())},ue.Comment.prototype.resizeTextarea_=function(){var t=this.model_.size,e=2*W.Bubble.BORDER_WIDTH,o=t.width-e;t=t.height-e,this.foreignObject_.setAttribute("width",o),this.foreignObject_.setAttribute("height",t),this.textarea_.style.width=o-4+"px",this.textarea_.style.height=t-4+"px"},ue.Comment.prototype.setVisible=function(t){t!==this.isVisible()&&((0,f.fire)(new((0,f.get)(f.BUBBLE_OPEN))(this.block_,t,"comment")),(this.model_.pinned=t)?this.createBubble_():this.disposeBubble_())},ue.Comment.prototype.createBubble_=function(){!this.block_.isEditable()||ot.IE?this.createNonEditableBubble_():this.createEditableBubble_()},ue.Comment.prototype.createEditableBubble_=function(){this.bubble_=new W.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.applyColour()},ue.Comment.prototype.createNonEditableBubble_=function(){this.paragraphElement_=W.Bubble.textToDom(this.block_.getCommentText()),this.bubble_=W.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},ue.Comment.prototype.disposeBubble_=function(){this.onMouseUpWrapper_&&((0,g.unbind)(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&((0,g.unbind)(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&((0,g.unbind)(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&((0,g.unbind)(this.onInputWrapper_),this.onInputWrapper_=null),this.bubble_.dispose(),this.paragraphElement_=this.foreignObject_=this.textarea_=this.bubble_=null},ue.Comment.prototype.startEdit_=function(t){this.bubble_.promote()&&this.textarea_.focus(),this.cachedText_=this.model_.text},ue.Comment.prototype.getBubbleSize=function(){return this.model_.size},ue.Comment.prototype.setBubbleSize=function(t,e){this.bubble_?this.bubble_.setBubbleSize(t,e):(this.model_.size.width=t,this.model_.size.height=e)},ue.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)},ue.Comment.prototype.dispose=function(){this.block_.comment=null,qt.Icon.prototype.dispose.call(this)},(0,Vt.register)("\n  .blocklyCommentTextarea {\n    background-color: #fef49c;\n    border: 0;\n    display: block;\n    margin: 0;\n    outline: 0;\n    padding: 3px;\n    resize: none;\n    text-overflow: hidden;\n  }\n");var he={verticalPosition:{TOP:0,BOTTOM:1},horizontalPosition:{LEFT:0,RIGHT:1},bumpDirection:{UP:0,DOWN:1},getStartPositionRect:function(t,e,o,r,c,h){var k=h.scrollbar&&h.scrollbar.canScrollVertically();return t.horizontal===he.horizontalPosition.LEFT?(o=c.absoluteMetrics.left+o,k&&h.RTL&&(o+=J.Scrollbar.scrollbarThickness)):(o=c.absoluteMetrics.left+c.viewMetrics.width-e.width-o,k&&!h.RTL&&(o-=J.Scrollbar.scrollbarThickness)),t.vertical===he.verticalPosition.TOP?t=c.absoluteMetrics.top+r:(t=c.absoluteMetrics.top+c.viewMetrics.height-e.height-r,h.scrollbar&&h.scrollbar.canScrollHorizontally()&&(t-=J.Scrollbar.scrollbarThickness)),new yt.Rect(t,t+e.height,o,o+e.width)},getCornerOppositeToolbox:function(t,e){return{horizontal:e.toolboxMetrics.position===st.Position.LEFT||t.horizontalLayout&&!t.RTL?he.horizontalPosition.RIGHT:he.horizontalPosition.LEFT,vertical:e.toolboxMetrics.position===st.Position.BOTTOM?he.verticalPosition.TOP:he.verticalPosition.BOTTOM}},bumpPositionRect:function(t,e,o,r){for(var c=t.left,h=t.right-t.left,k=t.bottom-t.top,C=0;C<r.length;C++){var G=r[C];t.intersects(G)&&(t=new yt.Rect(t=o===he.bumpDirection.UP?G.top-k-e:G.bottom+e,t+k,c,c+h),C=-1)}return t}},ne={ZoomControls:function(t){this.workspace_=t,this.id="zoomControls",this.zoomResetGroup_=this.zoomOutGroup_=this.zoomInGroup_=this.onZoomOutWrapper_=this.onZoomInWrapper_=this.onZoomResetWrapper_=null}};ne.ZoomControls.prototype.WIDTH_=32,ne.ZoomControls.prototype.HEIGHT_=32,ne.ZoomControls.prototype.SMALL_SPACING_=2,ne.ZoomControls.prototype.LARGE_SPACING_=11,ne.ZoomControls.prototype.MARGIN_VERTICAL_=20,ne.ZoomControls.prototype.MARGIN_HORIZONTAL_=20,ne.ZoomControls.prototype.svgGroup_=null,ne.ZoomControls.prototype.left_=0,ne.ZoomControls.prototype.top_=0,ne.ZoomControls.prototype.initialized_=!1,ne.ZoomControls.prototype.createDom=function(){this.svgGroup_=(0,s.createSvgElement)(B.Svg.G,{},null);var t=String(Math.random()).substring(2);return this.createZoomOutSvg_(t),this.createZoomInSvg_(t),this.workspace_.isMovable()&&this.createZoomResetSvg_(t),this.svgGroup_},ne.ZoomControls.prototype.init=function(){this.workspace_.getComponentManager().addComponent({component:this,weight:2,capabilities:[At.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0},ne.ZoomControls.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("zoomControls"),this.svgGroup_&&(0,s.removeNode)(this.svgGroup_),this.onZoomResetWrapper_&&(0,g.unbind)(this.onZoomResetWrapper_),this.onZoomInWrapper_&&(0,g.unbind)(this.onZoomInWrapper_),this.onZoomOutWrapper_&&(0,g.unbind)(this.onZoomOutWrapper_)},ne.ZoomControls.prototype.getBoundingRectangle=function(){var t=this.SMALL_SPACING_+2*this.HEIGHT_;return this.zoomResetGroup_&&(t+=this.LARGE_SPACING_+this.HEIGHT_),new yt.Rect(this.top_,this.top_+t,this.left_,this.left_+this.WIDTH_)},ne.ZoomControls.prototype.position=function(t,e){if(this.initialized_){var o=(0,he.getCornerOppositeToolbox)(this.workspace_,t),r=this.SMALL_SPACING_+2*this.HEIGHT_;this.zoomResetGroup_&&(r+=this.LARGE_SPACING_+this.HEIGHT_),t=(0,he.getStartPositionRect)(o,new et.Size(this.WIDTH_,r),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,t,this.workspace_),e=(0,he.bumpPositionRect)(t,this.MARGIN_VERTICAL_,(o=o.vertical)===he.verticalPosition.TOP?he.bumpDirection.DOWN:he.bumpDirection.UP,e),o===he.verticalPosition.TOP?(this.zoomInGroup_.setAttribute("transform","translate(0, "+(o=this.SMALL_SPACING_+this.HEIGHT_)+")"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, "+(o+this.LARGE_SPACING_+this.HEIGHT_)+")")):(this.zoomInGroup_.setAttribute("transform","translate(0, "+(o=this.zoomResetGroup_?this.LARGE_SPACING_+this.HEIGHT_:0)+")"),this.zoomOutGroup_.setAttribute("transform","translate(0, "+(o+this.SMALL_SPACING_+this.HEIGHT_)+")")),this.top_=e.top,this.left_=e.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},ne.ZoomControls.prototype.createZoomOutSvg_=function(t){this.zoomOutGroup_=(0,s.createSvgElement)(B.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var e=(0,s.createSvgElement)(B.Svg.CLIPPATH,{id:"blocklyZoomoutClipPath"+t},this.zoomOutGroup_);(0,s.createSvgElement)(B.Svg.RECT,{width:32,height:32},e),(0,s.createSvgElement)(B.Svg.IMAGE,{width:l.module$exports$Blockly$internalConstants.SPRITE.width,height:l.module$exports$Blockly$internalConstants.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+t+")"},this.zoomOutGroup_).setAttributeNS(s.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+l.module$exports$Blockly$internalConstants.SPRITE.url),this.onZoomOutWrapper_=(0,g.conditionalBind)(this.zoomOutGroup_,"mousedown",null,this.zoom_.bind(this,-1))},ne.ZoomControls.prototype.createZoomInSvg_=function(t){this.zoomInGroup_=(0,s.createSvgElement)(B.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var e=(0,s.createSvgElement)(B.Svg.CLIPPATH,{id:"blocklyZoominClipPath"+t},this.zoomInGroup_);(0,s.createSvgElement)(B.Svg.RECT,{width:32,height:32},e),(0,s.createSvgElement)(B.Svg.IMAGE,{width:l.module$exports$Blockly$internalConstants.SPRITE.width,height:l.module$exports$Blockly$internalConstants.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+t+")"},this.zoomInGroup_).setAttributeNS(s.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+l.module$exports$Blockly$internalConstants.SPRITE.url),this.onZoomInWrapper_=(0,g.conditionalBind)(this.zoomInGroup_,"mousedown",null,this.zoom_.bind(this,1))},ne.ZoomControls.prototype.zoom_=function(t,e){this.workspace_.markFocused(),this.workspace_.zoomCenter(t),this.fireZoomEvent_(),(0,tt.clearTouchIdentifier)(),e.stopPropagation(),e.preventDefault()},ne.ZoomControls.prototype.createZoomResetSvg_=function(t){this.zoomResetGroup_=(0,s.createSvgElement)(B.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var e=(0,s.createSvgElement)(B.Svg.CLIPPATH,{id:"blocklyZoomresetClipPath"+t},this.zoomResetGroup_);(0,s.createSvgElement)(B.Svg.RECT,{width:32,height:32},e),(0,s.createSvgElement)(B.Svg.IMAGE,{width:l.module$exports$Blockly$internalConstants.SPRITE.width,height:l.module$exports$Blockly$internalConstants.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+t+")"},this.zoomResetGroup_).setAttributeNS(s.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+l.module$exports$Blockly$internalConstants.SPRITE.url),this.onZoomResetWrapper_=(0,g.conditionalBind)(this.zoomResetGroup_,"mousedown",null,this.resetZoom_.bind(this))},ne.ZoomControls.prototype.resetZoom_=function(t){this.workspace_.markFocused();var e=Math.log(this.workspace_.options.zoomOptions.startScale/this.workspace_.scale)/Math.log(this.workspace_.options.zoomOptions.scaleSpeed);this.workspace_.beginCanvasTransition(),this.workspace_.zoomCenter(e),this.workspace_.scrollCenter(),setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_),500),this.fireZoomEvent_(),(0,tt.clearTouchIdentifier)(),t.stopPropagation(),t.preventDefault()},ne.ZoomControls.prototype.fireZoomEvent_=function(){var t=new((0,f.get)(f.CLICK))(null,this.workspace_.id,"zoom_controls");(0,f.fire)(t)},(0,Vt.register)("\n  .blocklyZoom>image, .blocklyZoom>svg>image {\n    opacity: .4;\n  }\n\n  .blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {\n    opacity: .6;\n  }\n\n  .blocklyZoom>image:active, .blocklyZoom>svg>image:active {\n    opacity: .8;\n  }\n");var Nt={WorkspaceComment:function(t,e,o,r,c){this.id=c&&!t.getCommentById(c)?c:(0,_t.genUid)(),t.addTopComment(this),this.xy_=new N.Coordinate(0,0),this.height_=o,this.width_=r,this.workspace=t,this.RTL=t.RTL,this.editable_=this.movable_=this.deletable_=!0,this.content_=e,this.disposed_=!1,this.isComment=!0,Nt.WorkspaceComment.fireCreateEvent(this)}};Nt.WorkspaceComment.prototype.dispose=function(){this.disposed_||((0,f.isEnabled)()&&(0,f.fire)(new((0,f.get)(f.COMMENT_DELETE))(this)),this.workspace.removeTopComment(this),this.disposed_=!0)},Nt.WorkspaceComment.prototype.getHeight=function(){return this.height_},Nt.WorkspaceComment.prototype.setHeight=function(t){this.height_=t},Nt.WorkspaceComment.prototype.getWidth=function(){return this.width_},Nt.WorkspaceComment.prototype.setWidth=function(t){this.width_=t},Nt.WorkspaceComment.prototype.getXY=function(){return new N.Coordinate(this.xy_.x,this.xy_.y)},Nt.WorkspaceComment.prototype.moveBy=function(t,e){var o=new((0,f.get)(f.COMMENT_MOVE))(this);this.xy_.translate(t,e),o.recordNew(),(0,f.fire)(o)},Nt.WorkspaceComment.prototype.isDeletable=function(){return this.deletable_&&!(this.workspace&&this.workspace.options.readOnly)},Nt.WorkspaceComment.prototype.setDeletable=function(t){this.deletable_=t},Nt.WorkspaceComment.prototype.isMovable=function(){return this.movable_&&!(this.workspace&&this.workspace.options.readOnly)},Nt.WorkspaceComment.prototype.setMovable=function(t){this.movable_=t},Nt.WorkspaceComment.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},Nt.WorkspaceComment.prototype.setEditable=function(t){this.editable_=t},Nt.WorkspaceComment.prototype.getContent=function(){return this.content_},Nt.WorkspaceComment.prototype.setContent=function(t){this.content_!==t&&((0,f.fire)(new((0,f.get)(f.COMMENT_CHANGE))(this,this.content_,t)),this.content_=t)},Nt.WorkspaceComment.prototype.toXmlWithXY=function(t){return(t=this.toXml(t)).setAttribute("x",Math.round(this.xy_.x)),t.setAttribute("y",Math.round(this.xy_.y)),t.setAttribute("h",this.height_),t.setAttribute("w",this.width_),t},Nt.WorkspaceComment.prototype.toXml=function(t){var e=(0,l.module$exports$Blockly$utils$xml.createElement)("comment");return t||(e.id=this.id),e.textContent=this.getContent(),e},Nt.WorkspaceComment.fireCreateEvent=function(t){if((0,f.isEnabled)()){var e=(0,f.getGroup)();e||(0,f.setGroup)(!0);try{(0,f.fire)(new((0,f.get)(f.COMMENT_CREATE))(t))}finally{e||(0,f.setGroup)(!1)}}},Nt.WorkspaceComment.fromXml=function(t,e){var o=Nt.WorkspaceComment.parseAttributes(t);return e=new Nt.WorkspaceComment(e,o.content,o.h,o.w,o.id),o=parseInt(t.getAttribute("x"),10),t=parseInt(t.getAttribute("y"),10),isNaN(o)||isNaN(t)||e.moveBy(o,t),Nt.WorkspaceComment.fireCreateEvent(e),e},Nt.WorkspaceComment.parseAttributes=function(t){var e=t.getAttribute("h"),o=t.getAttribute("w");return{id:t.getAttribute("id"),h:e?parseInt(e,10):100,w:o?parseInt(o,10):100,x:parseInt(t.getAttribute("x"),10),y:parseInt(t.getAttribute("y"),10),content:t.textContent}};var it={WorkspaceCommentSvg:function(t,e,o,r,c){this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.svgGroup_=(0,s.createSvgElement)(B.Svg.G,{class:"blocklyComment"},null),this.svgGroup_.translate_="",this.svgRect_=(0,s.createSvgElement)(B.Svg.RECT,{class:"blocklyCommentRect",x:0,y:0,rx:3,ry:3}),this.svgGroup_.appendChild(this.svgRect_),this.rendered_=!1,this.useDragSurface_=(0,dt.is3dSupported)()&&!!t.getBlockDragSurface(),it.WorkspaceCommentSvg.superClass_.constructor.call(this,t,e,o,r,c),this.render()}};(0,l.module$exports$Blockly$utils$object.inherits)(it.WorkspaceCommentSvg,Nt.WorkspaceComment),it.WorkspaceCommentSvg.DEFAULT_SIZE=100,it.WorkspaceCommentSvg.TOP_OFFSET=10,it.WorkspaceCommentSvg.prototype.dispose=function(){this.disposed_||((0,l.module$exports$Blockly$common.getSelected)()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),(0,f.isEnabled)()&&(0,f.fire)(new((0,f.get)(f.COMMENT_DELETE))(this)),(0,s.removeNode)(this.svgGroup_),this.disposeInternal_(),(0,f.disable)(),it.WorkspaceCommentSvg.superClass_.dispose.call(this),(0,f.enable)())},it.WorkspaceCommentSvg.prototype.initSvg=function(t){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");this.workspace.options.readOnly||this.eventsInit_||((0,g.conditionalBind)(this.svgRectTarget_,"mousedown",this,this.pathMouseDown_),(0,g.conditionalBind)(this.svgHandleTarget_,"mousedown",this,this.pathMouseDown_)),this.eventsInit_=!0,this.updateMovable(),this.getSvgRoot().parentNode||this.workspace.getBubbleCanvas().appendChild(this.getSvgRoot()),!t&&this.textarea_&&this.textarea_.select()},it.WorkspaceCommentSvg.prototype.pathMouseDown_=function(t){var e=this.workspace.getGesture(t);e&&e.handleBubbleStart(t,this)},it.WorkspaceCommentSvg.prototype.showContextMenu=function(t){if(!this.workspace.options.readOnly){var e=[];this.isDeletable()&&this.isMovable()&&(e.push((0,l.module$exports$Blockly$ContextMenu.commentDuplicateOption)(this)),e.push((0,l.module$exports$Blockly$ContextMenu.commentDeleteOption)(this))),(0,l.module$exports$Blockly$ContextMenu.show)(t,e,this.RTL)}},it.WorkspaceCommentSvg.prototype.select=function(){if((0,l.module$exports$Blockly$common.getSelected)()!==this){var t=null;if((0,l.module$exports$Blockly$common.getSelected)()){t=(0,l.module$exports$Blockly$common.getSelected)().id,(0,f.disable)();try{(0,l.module$exports$Blockly$common.getSelected)().unselect()}finally{(0,f.enable)()}}t=new((0,f.get)(f.SELECTED))(t,this.id,this.workspace.id),(0,f.fire)(t),(0,l.module$exports$Blockly$common.setSelected)(this),this.addSelect()}},it.WorkspaceCommentSvg.prototype.unselect=function(){if((0,l.module$exports$Blockly$common.getSelected)()===this){var t=new((0,f.get)(f.SELECTED))(this.id,null,this.workspace.id);(0,f.fire)(t),(0,l.module$exports$Blockly$common.setSelected)(null),this.removeSelect(),this.blurFocus()}},it.WorkspaceCommentSvg.prototype.addSelect=function(){(0,s.addClass)(this.svgGroup_,"blocklySelected"),this.setFocus()},it.WorkspaceCommentSvg.prototype.removeSelect=function(){(0,s.removeClass)(this.svgGroup_,"blocklySelected"),this.blurFocus()},it.WorkspaceCommentSvg.prototype.addFocus=function(){(0,s.addClass)(this.svgGroup_,"blocklyFocused")},it.WorkspaceCommentSvg.prototype.removeFocus=function(){(0,s.removeClass)(this.svgGroup_,"blocklyFocused")},it.WorkspaceCommentSvg.prototype.getRelativeToSurfaceXY=function(){var t=0,e=0,o=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,r=this.getSvgRoot();if(r)do{var c=(0,dt.getRelativeXY)(r);t+=c.x,e+=c.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()===r&&(t+=(c=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,e+=c.y),r=r.parentNode}while(r&&r!==this.workspace.getBubbleCanvas()&&r!==o);return this.xy_=new N.Coordinate(t,e)},it.WorkspaceCommentSvg.prototype.moveBy=function(t,e){var o=new((0,f.get)(f.COMMENT_MOVE))(this),r=this.getRelativeToSurfaceXY();this.translate(r.x+t,r.y+e),this.xy_=new N.Coordinate(r.x+t,r.y+e),o.recordNew(),(0,f.fire)(o),this.workspace.resizeContents()},it.WorkspaceCommentSvg.prototype.translate=function(t,e){this.xy_=new N.Coordinate(t,e),this.getSvgRoot().setAttribute("transform","translate("+t+","+e+")")},it.WorkspaceCommentSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var t=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(t.x,t.y),this.workspace.getBlockDragSurface().setBlocksAndShow(this.getSvgRoot())}},it.WorkspaceCommentSvg.prototype.moveDuringDrag=function(t,e){t?t.translateSurface(e.x,e.y):(this.svgGroup_.translate_="translate("+e.x+","+e.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},it.WorkspaceCommentSvg.prototype.moveTo=function(t,e){this.translate(t,e)},it.WorkspaceCommentSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},it.WorkspaceCommentSvg.prototype.getBoundingRectangle=function(){var t=this.getRelativeToSurfaceXY(),e=this.getHeightWidth(),o=t.y,r=t.y+e.height;if(this.RTL){var c=t.x-e.width;t=t.x}else c=t.x,t=t.x+e.width;return new yt.Rect(o,r,c,t)},it.WorkspaceCommentSvg.prototype.updateMovable=function(){this.isMovable()?(0,s.addClass)(this.svgGroup_,"blocklyDraggable"):(0,s.removeClass)(this.svgGroup_,"blocklyDraggable")},it.WorkspaceCommentSvg.prototype.setMovable=function(t){it.WorkspaceCommentSvg.superClass_.setMovable.call(this,t),this.updateMovable()},it.WorkspaceCommentSvg.prototype.setEditable=function(t){it.WorkspaceCommentSvg.superClass_.setEditable.call(this,t),this.textarea_&&(this.textarea_.readOnly=!t)},it.WorkspaceCommentSvg.prototype.setDragging=function(t){t?((t=this.getSvgRoot()).translate_="",t.skew_="",(0,s.addClass)(this.svgGroup_,"blocklyDragging")):(0,s.removeClass)(this.svgGroup_,"blocklyDragging")},it.WorkspaceCommentSvg.prototype.getSvgRoot=function(){return this.svgGroup_},it.WorkspaceCommentSvg.prototype.getContent=function(){return this.textarea_?this.textarea_.value:this.content_},it.WorkspaceCommentSvg.prototype.setContent=function(t){it.WorkspaceCommentSvg.superClass_.setContent.call(this,t),this.textarea_&&(this.textarea_.value=t)},it.WorkspaceCommentSvg.prototype.setDeleteStyle=function(t){t?(0,s.addClass)(this.svgGroup_,"blocklyDraggingDelete"):(0,s.removeClass)(this.svgGroup_,"blocklyDraggingDelete")},it.WorkspaceCommentSvg.prototype.setAutoLayout=function(t){},it.WorkspaceCommentSvg.fromXml=function(t,e,o){(0,f.disable)();try{var r=Nt.WorkspaceComment.parseAttributes(t),c=new it.WorkspaceCommentSvg(e,r.content,r.h,r.w,r.id);if(e.rendered&&(c.initSvg(!0),c.render()),!isNaN(r.x)&&!isNaN(r.y))if(e.RTL){var h=o||e.getWidth();c.moveBy(h-r.x,r.y)}else c.moveBy(r.x,r.y)}finally{(0,f.enable)()}return Nt.WorkspaceComment.fireCreateEvent(c),c},it.WorkspaceCommentSvg.prototype.toXmlWithXY=function(t){var e;this.workspace.RTL&&(e=this.workspace.getWidth()),t=this.toXml(t);var o=this.getRelativeToSurfaceXY();return t.setAttribute("x",Math.round(this.workspace.RTL?e-o.x:o.x)),t.setAttribute("y",Math.round(o.y)),t.setAttribute("h",this.getHeight()),t.setAttribute("w",this.getWidth()),t},it.WorkspaceCommentSvg.prototype.toCopyData=function(){return{saveInfo:this.toXmlWithXY(),source:this.workspace,typeCounts:null}},it.WorkspaceCommentSvg.prototype.getHeightWidth=function(){return{width:this.getWidth(),height:this.getHeight()}},it.WorkspaceCommentSvg.prototype.render=function(){if(!this.rendered_){var t=this.getHeightWidth();this.createEditor_(),this.svgGroup_.appendChild(this.foreignObject_),this.svgHandleTarget_=(0,s.createSvgElement)(B.Svg.RECT,{class:"blocklyCommentHandleTarget",x:0,y:0}),this.svgGroup_.appendChild(this.svgHandleTarget_),this.svgRectTarget_=(0,s.createSvgElement)(B.Svg.RECT,{class:"blocklyCommentTarget",x:0,y:0,rx:3,ry:3}),this.svgGroup_.appendChild(this.svgRectTarget_),this.addResizeDom_(),this.isDeletable()&&this.addDeleteDom_(),this.setSize_(t.width,t.height),this.textarea_.value=this.content_,this.rendered_=!0,this.resizeGroup_&&(0,g.conditionalBind)(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_),this.isDeletable()&&((0,g.conditionalBind)(this.deleteGroup_,"mousedown",this,this.deleteMouseDown_),(0,g.conditionalBind)(this.deleteGroup_,"mouseout",this,this.deleteMouseOut_),(0,g.conditionalBind)(this.deleteGroup_,"mouseup",this,this.deleteMouseUp_))}},it.WorkspaceCommentSvg.prototype.createEditor_=function(){this.foreignObject_=(0,s.createSvgElement)(B.Svg.FOREIGNOBJECT,{x:0,y:it.WorkspaceCommentSvg.TOP_OFFSET,class:"blocklyCommentForeignObject"},null);var t=document.createElementNS(s.HTML_NS,"body");t.setAttribute("xmlns",s.HTML_NS),t.className="blocklyMinimalBody";var e=document.createElementNS(s.HTML_NS,"textarea");return e.className="blocklyCommentTextarea",e.setAttribute("dir",this.RTL?"RTL":"LTR"),e.readOnly=!this.isEditable(),t.appendChild(e),this.textarea_=e,this.foreignObject_.appendChild(t),(0,g.conditionalBind)(e,"wheel",this,function(o){o.stopPropagation()}),(0,g.conditionalBind)(e,"change",this,function(o){this.setContent(e.value)}),this.foreignObject_},it.WorkspaceCommentSvg.prototype.addResizeDom_=function(){this.resizeGroup_=(0,s.createSvgElement)(B.Svg.G,{class:this.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.svgGroup_),(0,s.createSvgElement)(B.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,8..toString())},this.resizeGroup_),(0,s.createSvgElement)(B.Svg.LINE,{class:"blocklyResizeLine",x1:8/3,y1:7,x2:7,y2:8/3},this.resizeGroup_),(0,s.createSvgElement)(B.Svg.LINE,{class:"blocklyResizeLine",x1:16/3,y1:7,x2:7,y2:16/3},this.resizeGroup_)},it.WorkspaceCommentSvg.prototype.addDeleteDom_=function(){this.deleteGroup_=(0,s.createSvgElement)(B.Svg.G,{class:"blocklyCommentDeleteIcon"},this.svgGroup_),this.deleteIconBorder_=(0,s.createSvgElement)(B.Svg.CIRCLE,{class:"blocklyDeleteIconShape",r:"7",cx:"7.5",cy:"7.5"},this.deleteGroup_),(0,s.createSvgElement)(B.Svg.LINE,{x1:"5",y1:"10",x2:"10",y2:"5",stroke:"#fff","stroke-width":"2"},this.deleteGroup_),(0,s.createSvgElement)(B.Svg.LINE,{x1:"5",y1:"5",x2:"10",y2:"10",stroke:"#fff","stroke-width":"2"},this.deleteGroup_)},it.WorkspaceCommentSvg.prototype.resizeMouseDown_=function(t){this.unbindDragEvents_(),(0,g.isRightButton)(t)||(this.workspace.startDrag(t,new N.Coordinate(this.workspace.RTL?-this.width_:this.width_,this.height_)),this.onMouseUpWrapper_=(0,g.conditionalBind)(document,"mouseup",this,this.resizeMouseUp_),this.onMouseMoveWrapper_=(0,g.conditionalBind)(document,"mousemove",this,this.resizeMouseMove_),this.workspace.hideChaff()),t.stopPropagation()},it.WorkspaceCommentSvg.prototype.deleteMouseDown_=function(t){(0,s.addClass)(this.deleteIconBorder_,"blocklyDeleteIconHighlighted"),t.stopPropagation()},it.WorkspaceCommentSvg.prototype.deleteMouseOut_=function(t){(0,s.removeClass)(this.deleteIconBorder_,"blocklyDeleteIconHighlighted")},it.WorkspaceCommentSvg.prototype.deleteMouseUp_=function(t){this.dispose(),t.stopPropagation()},it.WorkspaceCommentSvg.prototype.unbindDragEvents_=function(){this.onMouseUpWrapper_&&((0,g.unbind)(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&((0,g.unbind)(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)},it.WorkspaceCommentSvg.prototype.resizeMouseUp_=function(t){(0,tt.clearTouchIdentifier)(),this.unbindDragEvents_()},it.WorkspaceCommentSvg.prototype.resizeMouseMove_=function(t){this.autoLayout_=!1,t=this.workspace.moveDrag(t),this.setSize_(this.RTL?-t.x:t.x,t.y)},it.WorkspaceCommentSvg.prototype.resizeComment_=function(){var t=this.getHeightWidth(),e=it.WorkspaceCommentSvg.TOP_OFFSET;this.foreignObject_.setAttribute("width",t.width),this.foreignObject_.setAttribute("height",t.height-e),this.RTL&&this.foreignObject_.setAttribute("x",-t.width),this.textarea_.style.width=t.width-4+"px",this.textarea_.style.height=t.height-4-e+"px"},it.WorkspaceCommentSvg.prototype.setSize_=function(t,e){t=Math.max(t,45),e=Math.max(e,20+it.WorkspaceCommentSvg.TOP_OFFSET),this.width_=t,this.height_=e,this.svgRect_.setAttribute("width",t),this.svgRect_.setAttribute("height",e),this.svgRectTarget_.setAttribute("width",t),this.svgRectTarget_.setAttribute("height",e),this.svgHandleTarget_.setAttribute("width",t),this.svgHandleTarget_.setAttribute("height",it.WorkspaceCommentSvg.TOP_OFFSET),this.RTL&&(this.svgRect_.setAttribute("transform","scale(-1 1)"),this.svgRectTarget_.setAttribute("transform","scale(-1 1)")),this.resizeGroup_&&(this.RTL?(this.resizeGroup_.setAttribute("transform","translate("+(8-t)+","+(e-8)+") scale(-1 1)"),this.deleteGroup_.setAttribute("transform","translate("+(8-t)+",-8) scale(-1 1)")):(this.resizeGroup_.setAttribute("transform","translate("+(t-8)+","+(e-8)+")"),this.deleteGroup_.setAttribute("transform","translate("+(t-8)+",-8)"))),this.resizeComment_()},it.WorkspaceCommentSvg.prototype.disposeInternal_=function(){this.svgHandleTarget_=this.svgRectTarget_=this.foreignObject_=this.textarea_=null,this.disposed_=!0},it.WorkspaceCommentSvg.prototype.setFocus=function(){var t=this;this.focused_=!0,setTimeout(function(){t.disposed_||(t.textarea_.focus(),t.addFocus(),(0,s.addClass)(t.svgRectTarget_,"blocklyCommentTargetFocused"),(0,s.addClass)(t.svgHandleTarget_,"blocklyCommentHandleTargetFocused"))},0)},it.WorkspaceCommentSvg.prototype.blurFocus=function(){var t=this;this.focused_=!1,setTimeout(function(){t.disposed_||(t.textarea_.blur(),t.removeFocus(),(0,s.removeClass)(t.svgRectTarget_,"blocklyCommentTargetFocused"),(0,s.removeClass)(t.svgHandleTarget_,"blocklyCommentHandleTargetFocused"))},0)},(0,Vt.register)("\n  .blocklyCommentForeignObject {\n    position: relative;\n    z-index: 0;\n  }\n\n  .blocklyCommentRect {\n    fill: #E7DE8E;\n    stroke: #bcA903;\n    stroke-width: 1px;\n  }\n\n  .blocklyCommentTarget {\n    fill: transparent;\n    stroke: #bcA903;\n  }\n\n  .blocklyCommentTargetFocused {\n    fill: none;\n  }\n\n  .blocklyCommentHandleTarget {\n    fill: none;\n  }\n\n  .blocklyCommentHandleTargetFocused {\n    fill: transparent;\n  }\n\n  .blocklyFocused>.blocklyCommentRect {\n    fill: #B9B272;\n    stroke: #B9B272;\n  }\n\n  .blocklySelected>.blocklyCommentTarget {\n    stroke: #fc3;\n    stroke-width: 3px;\n  }\n\n  .blocklyCommentDeleteIcon {\n    cursor: pointer;\n    fill: #000;\n    display: none;\n  }\n\n  .blocklySelected > .blocklyCommentDeleteIcon {\n    display: block;\n  }\n\n  .blocklyDeleteIconShape {\n    fill: #000;\n    stroke: #000;\n    stroke-width: 1px;\n  }\n\n  .blocklyDeleteIconShape.blocklyDeleteIconHighlighted {\n    stroke: #fc3;\n  }\n");var Ct={Trashcan:function(t){Ct.Trashcan.superClass_.constructor.call(this),this.workspace_=t,this.id="trashcan",this.contents_=[],this.flyout=null,0>=this.workspace_.options.maxTrashcanContents||(t=new Ae.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace_.horizontalLayout?(t.toolboxPosition=this.workspace_.toolboxPosition===st.Position.TOP?st.Position.BOTTOM:st.Position.TOP,this.flyout=new((0,x.getClassFromOptions)(x.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace_.options,!0))(t)):(t.toolboxPosition=this.workspace_.toolboxPosition===st.Position.RIGHT?st.Position.LEFT:st.Position.RIGHT,this.flyout=new((0,x.getClassFromOptions)(x.Type.FLYOUTS_VERTICAL_TOOLBOX,this.workspace_.options,!0))(t)),this.workspace_.addChangeListener(this.onDelete_.bind(this)))}};(0,l.module$exports$Blockly$utils$object.inherits)(Ct.Trashcan,hn.DeleteArea),Ct.Trashcan.prototype.isLidOpen=!1,Ct.Trashcan.prototype.minOpenness_=0,Ct.Trashcan.prototype.svgGroup_=null,Ct.Trashcan.prototype.svgLid_=null,Ct.Trashcan.prototype.lidTask_=0,Ct.Trashcan.prototype.lidOpen_=0,Ct.Trashcan.prototype.left_=0,Ct.Trashcan.prototype.top_=0,Ct.Trashcan.prototype.initialized_=!1,Ct.Trashcan.prototype.createDom=function(){this.svgGroup_=(0,s.createSvgElement)(B.Svg.G,{class:"blocklyTrash"},null);var t=String(Math.random()).substring(2),e=(0,s.createSvgElement)(B.Svg.CLIPPATH,{id:"blocklyTrashBodyClipPath"+t},this.svgGroup_);(0,s.createSvgElement)(B.Svg.RECT,{width:47,height:44,y:16},e);var o=(0,s.createSvgElement)(B.Svg.IMAGE,{width:l.module$exports$Blockly$internalConstants.SPRITE.width,x:-0,height:l.module$exports$Blockly$internalConstants.SPRITE.height,y:-32,"clip-path":"url(#blocklyTrashBodyClipPath"+t+")"},this.svgGroup_);return o.setAttributeNS(s.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+l.module$exports$Blockly$internalConstants.SPRITE.url),e=(0,s.createSvgElement)(B.Svg.CLIPPATH,{id:"blocklyTrashLidClipPath"+t},this.svgGroup_),(0,s.createSvgElement)(B.Svg.RECT,{width:47,height:16},e),this.svgLid_=(0,s.createSvgElement)(B.Svg.IMAGE,{width:l.module$exports$Blockly$internalConstants.SPRITE.width,x:-0,height:l.module$exports$Blockly$internalConstants.SPRITE.height,y:-32,"clip-path":"url(#blocklyTrashLidClipPath"+t+")"},this.svgGroup_),this.svgLid_.setAttributeNS(s.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+l.module$exports$Blockly$internalConstants.SPRITE.url),(0,g.bind)(this.svgGroup_,"mousedown",this,this.blockMouseDownWhenOpenable_),(0,g.bind)(this.svgGroup_,"mouseup",this,this.click),(0,g.bind)(o,"mouseover",this,this.mouseOver_),(0,g.bind)(o,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_},Ct.Trashcan.prototype.init=function(){0<this.workspace_.options.maxTrashcanContents&&((0,s.insertAfter)(this.flyout.createDom(B.Svg.SVG),this.workspace_.getParentSvg()),this.flyout.init(this.workspace_)),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[At.ComponentManager.Capability.AUTOHIDEABLE,At.ComponentManager.Capability.DELETE_AREA,At.ComponentManager.Capability.DRAG_TARGET,At.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)},Ct.Trashcan.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&((0,s.removeNode)(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},Ct.Trashcan.prototype.hasContents_=function(){return!!this.contents_.length},Ct.Trashcan.prototype.contentsIsOpen=function(){return!!this.flyout&&this.flyout.isVisible()},Ct.Trashcan.prototype.openFlyout=function(){if(!this.contentsIsOpen()){var t=this.contents_.map(function(e){return JSON.parse(e)});this.flyout.show(t),this.fireUiEvent_(!0)}},Ct.Trashcan.prototype.closeFlyout=function(){this.contentsIsOpen()&&(this.flyout.hide(),this.fireUiEvent_(!1),this.workspace_.recordDragTargets())},Ct.Trashcan.prototype.autoHide=function(t){!t&&this.flyout&&this.closeFlyout()},Ct.Trashcan.prototype.emptyContents=function(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())},Ct.Trashcan.prototype.position=function(t,e){if(this.initialized_){var o=(0,he.getCornerOppositeToolbox)(this.workspace_,t);t=(0,he.getStartPositionRect)(o,new et.Size(47,60),20,20,t,this.workspace_),e=(0,he.bumpPositionRect)(t,20,o.vertical===he.verticalPosition.TOP?he.bumpDirection.DOWN:he.bumpDirection.UP,e),this.top_=e.top,this.left_=e.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},Ct.Trashcan.prototype.getBoundingRectangle=function(){return new yt.Rect(this.top_,this.top_+44+16,this.left_,this.left_+47)},Ct.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var t=this.svgGroup_.getBoundingClientRect(),e=t.top+32-10;return new yt.Rect(e,e+16+44+20,t=t.left+0-10,t+47+20)},Ct.Trashcan.prototype.onDragOver=function(t){this.setLidOpen(this.wouldDelete_)},Ct.Trashcan.prototype.onDragExit=function(t){this.setLidOpen(!1)},Ct.Trashcan.prototype.onDrop=function(t){setTimeout(this.setLidOpen.bind(this,!1),100)},Ct.Trashcan.prototype.setLidOpen=function(t){this.isLidOpen!==t&&(clearTimeout(this.lidTask_),this.isLidOpen=t,this.animateLid_())},Ct.Trashcan.prototype.animateLid_=function(){this.lidOpen_+=this.isLidOpen?.2:-.2,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(45*this.lidOpen_),this.svgGroup_.style.opacity=.4+.4*this.lidOpen_,this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),20))},Ct.Trashcan.prototype.setLidAngle_=function(t){var e=this.workspace_.toolboxPosition===st.Position.RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(e?-t:t)+","+(e?4:43)+",14)")},Ct.Trashcan.prototype.setMinOpenness_=function(t){this.minOpenness_=t,this.isLidOpen||this.setLidAngle_(45*t)},Ct.Trashcan.prototype.closeLid=function(){this.setLidOpen(!1)},Ct.Trashcan.prototype.click=function(){this.hasContents_()&&this.openFlyout()},Ct.Trashcan.prototype.fireUiEvent_=function(t){t=new((0,f.get)(f.TRASHCAN_OPEN))(t,this.workspace_.id),(0,f.fire)(t)},Ct.Trashcan.prototype.blockMouseDownWhenOpenable_=function(t){!this.contentsIsOpen()&&this.hasContents_()&&t.stopPropagation()},Ct.Trashcan.prototype.mouseOver_=function(){this.hasContents_()&&this.setLidOpen(!0)},Ct.Trashcan.prototype.mouseOut_=function(){this.setLidOpen(!1)},Ct.Trashcan.prototype.onDelete_=function(t){if(!(0>=this.workspace_.options.maxTrashcanContents||t.type!==f.DELETE||t.wasShadow)&&(t=this.cleanBlockJson_(t.oldJson),-1===this.contents_.indexOf(t))){for(this.contents_.unshift(t);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(.1)}},Ct.Trashcan.prototype.cleanBlockJson_=function(t){return function e(o){if(o){if(delete o.id,delete o.x,delete o.y,delete o.enabled,o.icons&&o.icons.comment){var r=o.icons.comment;delete r.height,delete r.width,delete r.pinned}for(var c in r=o.inputs){var h=r[c];e(h.block),e(h.shadow)}o.next&&(e((o=o.next).block),e(o.shadow))}}(t=JSON.parse(JSON.stringify(t))),t.kind="BLOCK",JSON.stringify(t)};var Ee={FlyoutButton:function(t,e,o,r){this.workspace_=t,this.targetWorkspace_=e,this.text_=o.text,this.position_=new N.Coordinate(0,0),this.isLabel_=r,this.callbackKey_=o.callbackKey||o.callbackkey,this.cssClass_=o["web-class"]||null,this.onMouseUpWrapper_=null,this.info=o}};Ee.FlyoutButton.MARGIN_X=5,Ee.FlyoutButton.MARGIN_Y=2,Ee.FlyoutButton.prototype.width=0,Ee.FlyoutButton.prototype.height=0,Ee.FlyoutButton.prototype.createDom=function(){var e,t=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.cssClass_&&(t+=" "+this.cssClass_),this.svgGroup_=(0,s.createSvgElement)(B.Svg.G,{class:t},this.workspace_.getCanvas()),this.isLabel_||(e=(0,s.createSvgElement)(B.Svg.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_)),t=(0,s.createSvgElement)(B.Svg.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var o=(0,s.createSvgElement)(B.Svg.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_),r=(0,It.replaceMessageReferences)(this.text_);this.workspace_.RTL&&(r+="\u200f"),o.textContent=r,this.isLabel_&&(this.svgText_=o,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));var c=(0,q.getComputedStyle)(o,"fontSize"),h=(0,q.getComputedStyle)(o,"fontWeight"),k=(0,q.getComputedStyle)(o,"fontFamily");return this.width=(0,s.getFastTextWidthWithSizeString)(o,c,h,k),r=(0,s.measureFontMetrics)(r,c,h,k),this.height=r.height,this.isLabel_||(this.width+=2*Ee.FlyoutButton.MARGIN_X,this.height+=2*Ee.FlyoutButton.MARGIN_Y,e.setAttribute("width",this.width),e.setAttribute("height",this.height)),t.setAttribute("width",this.width),t.setAttribute("height",this.height),o.setAttribute("x",this.width/2),o.setAttribute("y",this.height/2-r.height/2+r.baseline),this.updateTransform_(),this.onMouseUpWrapper_=(0,g.conditionalBind)(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},Ee.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},Ee.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},Ee.FlyoutButton.prototype.moveTo=function(t,e){this.position_.x=t,this.position_.y=e,this.updateTransform_()},Ee.FlyoutButton.prototype.isLabel=function(){return this.isLabel_},Ee.FlyoutButton.prototype.getPosition=function(){return this.position_},Ee.FlyoutButton.prototype.getButtonText=function(){return this.text_},Ee.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},Ee.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&(0,g.unbind)(this.onMouseUpWrapper_),this.svgGroup_&&(0,s.removeNode)(this.svgGroup_),this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)},Ee.FlyoutButton.prototype.onMouseUp_=function(t){(t=this.targetWorkspace_.getGesture(t))&&t.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)},(0,Vt.register)("\n  .blocklyFlyoutButton {\n    fill: #888;\n    cursor: default;\n  }\n\n  .blocklyFlyoutButtonShadow {\n    fill: #666;\n  }\n\n  .blocklyFlyoutButton:hover {\n    fill: #aaa;\n  }\n\n  .blocklyFlyoutLabel {\n    cursor: default;\n  }\n\n  .blocklyFlyoutLabelBackground {\n    opacity: 0;\n  }\n");var zi,Rn={CATEGORY_NAME:"VARIABLE_DYNAMIC",onCreateVariableButtonClick_String:function(t){(0,l.module$exports$Blockly$Variables.createVariableButtonHandler)(t.getTargetWorkspace(),void 0,"String")},onCreateVariableButtonClick_Number:function(t){(0,l.module$exports$Blockly$Variables.createVariableButtonHandler)(t.getTargetWorkspace(),void 0,"Number")},onCreateVariableButtonClick_Colour:function(t){(0,l.module$exports$Blockly$Variables.createVariableButtonHandler)(t.getTargetWorkspace(),void 0,"Colour")},flyoutCategory:function(t){var e=[],o=document.createElement("button");return o.setAttribute("text",l.module$exports$Blockly$Msg.Msg.NEW_STRING_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),e.push(o),(o=document.createElement("button")).setAttribute("text",l.module$exports$Blockly$Msg.Msg.NEW_NUMBER_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),e.push(o),(o=document.createElement("button")).setAttribute("text",l.module$exports$Blockly$Msg.Msg.NEW_COLOUR_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),e.push(o),t.registerButtonCallback("CREATE_VARIABLE_STRING",Rn.onCreateVariableButtonClick_String),t.registerButtonCallback("CREATE_VARIABLE_NUMBER",Rn.onCreateVariableButtonClick_Number),t.registerButtonCallback("CREATE_VARIABLE_COLOUR",Rn.onCreateVariableButtonClick_Colour),t=(0,Rn.flyoutCategoryBlocks)(t),e.concat(t)},flyoutCategoryBlocks:function(t){var e=[];if(0<(t=t.getAllVariables()).length){if(l.module$exports$Blockly$blocks.Blocks.variables_set_dynamic){var o=t[t.length-1],r=(0,l.module$exports$Blockly$utils$xml.createElement)("block");r.setAttribute("type","variables_set_dynamic"),r.setAttribute("gap",24),r.appendChild((0,l.module$exports$Blockly$Variables.generateVariableFieldDom)(o)),e.push(r)}if(l.module$exports$Blockly$blocks.Blocks.variables_get_dynamic)for(t.sort(yn.VariableModel.compareByName),o=0;r=t[o];o++){var c=(0,l.module$exports$Blockly$utils$xml.createElement)("block");c.setAttribute("type","variables_get_dynamic"),c.setAttribute("gap",8),c.appendChild((0,l.module$exports$Blockly$Variables.generateVariableFieldDom)(r)),e.push(c)}}return e}};l.module$exports$Blockly$Procedures={CATEGORY_NAME:"PROCEDURE",DEFAULT_ARG:"x",allProcedures:function(t){var e=t.getBlocksByType("procedures_defnoreturn",!1).map(function(o){return o.getProcedureDef()});return t=t.getBlocksByType("procedures_defreturn",!1).map(function(o){return o.getProcedureDef()}),e.sort(zi),t.sort(zi),[e,t]}},zi=function(t,e){return t[0].localeCompare(e[0],void 0,{sensitivity:"base"})},l.module$exports$Blockly$Procedures.findLegalName=function(t,e){if(e.isInFlyout)return t;for(t=t||l.module$exports$Blockly$Msg.Msg.UNNAMED_KEY||"unnamed";!al(t,e.workspace,e);){var o=t.match(/^(.*?)(\d+)$/);t=o?o[1]+(parseInt(o[2],10)+1):t+"2"}return t};var al=function(t,e,o){return!(0,l.module$exports$Blockly$Procedures.isNameUsed)(t,e,o)};l.module$exports$Blockly$Procedures.isNameUsed=function(t,e,o){e=e.getAllBlocks(!1);for(var r=0;r<e.length;r++)if(e[r]!==o&&e[r].getProcedureDef){var c=e[r].getProcedureDef();if(l.module$exports$Blockly$Names.Names.equals(c[0],t))return!0}return!1},l.module$exports$Blockly$Procedures.rename=function(t){t=t.trim();var e=(0,l.module$exports$Blockly$Procedures.findLegalName)(t,this.getSourceBlock()),o=this.getValue();if(o!==t&&o!==e){t=this.getSourceBlock().workspace.getAllBlocks(!1);for(var r=0;r<t.length;r++)t[r].renameProcedure&&t[r].renameProcedure(o,e)}return e},l.module$exports$Blockly$Procedures.flyoutCategory=function(t){function e(h,k){for(var C=0;C<h.length;C++){var G=h[C][0],j=h[C][1],Et=(0,l.module$exports$Blockly$utils$xml.createElement)("block");Et.setAttribute("type",k),Et.setAttribute("gap",16);var le=(0,l.module$exports$Blockly$utils$xml.createElement)("mutation");for(le.setAttribute("name",G),Et.appendChild(le),G=0;G<j.length;G++){var fe=(0,l.module$exports$Blockly$utils$xml.createElement)("arg");fe.setAttribute("name",j[G]),le.appendChild(fe)}o.push(Et)}}var o=[];if(l.module$exports$Blockly$blocks.Blocks.procedures_defnoreturn){var r=(0,l.module$exports$Blockly$utils$xml.createElement)("block");r.setAttribute("type","procedures_defnoreturn"),r.setAttribute("gap",16);var c=(0,l.module$exports$Blockly$utils$xml.createElement)("field");c.setAttribute("name","NAME"),c.appendChild((0,l.module$exports$Blockly$utils$xml.createTextNode)(l.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFNORETURN_PROCEDURE)),r.appendChild(c),o.push(r)}return l.module$exports$Blockly$blocks.Blocks.procedures_defreturn&&((r=(0,l.module$exports$Blockly$utils$xml.createElement)("block")).setAttribute("type","procedures_defreturn"),r.setAttribute("gap",16),(c=(0,l.module$exports$Blockly$utils$xml.createElement)("field")).setAttribute("name","NAME"),c.appendChild((0,l.module$exports$Blockly$utils$xml.createTextNode)(l.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),r.appendChild(c),o.push(r)),l.module$exports$Blockly$blocks.Blocks.procedures_ifreturn&&((r=(0,l.module$exports$Blockly$utils$xml.createElement)("block")).setAttribute("type","procedures_ifreturn"),r.setAttribute("gap",16),o.push(r)),o.length&&o[o.length-1].setAttribute("gap",24),e((t=(0,l.module$exports$Blockly$Procedures.allProcedures)(t))[0],"procedures_callnoreturn"),e(t[1],"procedures_callreturn"),o};var gr=function(t){for(var c,e=[],o=t.getBlocksByType("procedures_mutatorarg",!1),r=0;c=o[r];r++)e.push(c.getFieldValue("NAME"));o=(0,l.module$exports$Blockly$utils$xml.createElement)("xml"),(r=(0,l.module$exports$Blockly$utils$xml.createElement)("block")).setAttribute("type","procedures_mutatorarg"),(c=(0,l.module$exports$Blockly$utils$xml.createElement)("field")).setAttribute("name","NAME"),e=(0,l.module$exports$Blockly$Variables.generateUniqueNameFromOptions)(l.module$exports$Blockly$Procedures.DEFAULT_ARG,e),e=(0,l.module$exports$Blockly$utils$xml.createTextNode)(e),c.appendChild(e),r.appendChild(c),o.appendChild(r),t.updateToolbox(o)};l.module$exports$Blockly$Procedures.mutatorOpenListener=function(t){if(t.type===f.BUBBLE_OPEN&&"mutator"===t.bubbleType&&t.isOpen){var e=(t=Q.Workspace.getById(t.workspaceId).getBlockById(t.blockId)).type;("procedures_defnoreturn"===e||"procedures_defreturn"===e)&&(t=t.mutator.getWorkspace(),gr(t),t.addChangeListener(ul))}};var ul=function(t){(t.type===f.CREATE||t.type===f.DELETE||t.type===f.CHANGE)&&(t=Q.Workspace.getById(t.workspaceId),gr(t))};return l.module$exports$Blockly$Procedures.getCallers=function(t,e){var o=[];e=e.getAllBlocks(!1);for(var r=0;r<e.length;r++)if(e[r].getProcedureCall){var c=e[r].getProcedureCall();c&&l.module$exports$Blockly$Names.Names.equals(c,t)&&o.push(e[r])}return o},l.module$exports$Blockly$Procedures.mutateCallers=function(t){var c,e=(0,f.getRecordUndo)(),o=t.getProcedureDef()[0],r=t.mutationToDom(!0);for(t=(0,l.module$exports$Blockly$Procedures.getCallers)(o,t.workspace),o=0;c=t[o];o++){var h=c.mutationToDom();h=h&&(0,l.module$exports$Blockly$Xml.domToText)(h),c.domToMutation(r);var k=c.mutationToDom();h!==(k=k&&(0,l.module$exports$Blockly$Xml.domToText)(k))&&((0,f.setRecordUndo)(!1),(0,f.fire)(new((0,f.get)(f.CHANGE))(c,"mutation",null,h,k)),(0,f.setRecordUndo)(e))}},l.module$exports$Blockly$Procedures.getDefinition=function(t,e){e=e.getAllBlocks(!1);for(var o=0;o<e.length;o++)if(e[o].getProcedureDef){var r=e[o].getProcedureDef();if(r&&l.module$exports$Blockly$Names.Names.equals(r[0],t))return e[o]}return null},l.module$exports$Blockly$Mutator={Mutator:function(t){l.module$exports$Blockly$Mutator.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=t}},(0,l.module$exports$Blockly$utils$object.inherits)(l.module$exports$Blockly$Mutator.Mutator,qt.Icon),l.module$exports$Blockly$Mutator.Mutator.prototype.workspace_=null,l.module$exports$Blockly$Mutator.Mutator.prototype.workspaceWidth_=0,l.module$exports$Blockly$Mutator.Mutator.prototype.workspaceHeight_=0,l.module$exports$Blockly$Mutator.Mutator.prototype.setBlock=function(t){this.block_=t},l.module$exports$Blockly$Mutator.Mutator.prototype.getWorkspace=function(){return this.workspace_},l.module$exports$Blockly$Mutator.Mutator.prototype.drawIcon_=function(t){(0,s.createSvgElement)(B.Svg.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},t),(0,s.createSvgElement)(B.Svg.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},t),(0,s.createSvgElement)(B.Svg.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},t)},l.module$exports$Blockly$Mutator.Mutator.prototype.iconClick_=function(t){this.block_.isEditable()&&qt.Icon.prototype.iconClick_.call(this,t)},l.module$exports$Blockly$Mutator.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=(0,s.createSvgElement)(B.Svg.SVG,{x:W.Bubble.BORDER_WIDTH,y:W.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var o,t=(0,l.module$exports$Blockly$utils$xml.createElement)("xml"),e=0;o=this.quarkNames_[e];e++){var r=(0,l.module$exports$Blockly$utils$xml.createElement)("block");r.setAttribute("type",o),t.appendChild(r)}else t=null;return(e=new Ae.Options({disable:!1,parentWorkspace:this.block_.workspace,media:this.block_.workspace.options.pathToMedia,rtl:this.block_.RTL,horizontalLayout:!1,renderer:this.block_.workspace.options.renderer,rendererOverrides:this.block_.workspace.options.rendererOverrides})).toolboxPosition=this.block_.RTL?st.Position.RIGHT:st.Position.LEFT,(o=!!t)&&(e.languageTree=(0,st.convertToolboxDefToJson)(t)),this.workspace_=new A.WorkspaceSvg(e),this.workspace_.isMutator=!0,this.workspace_.addChangeListener(f.disableOrphans),t=o?this.workspace_.addFlyout(B.Svg.G):null,e=this.workspace_.createDom("blocklyMutatorBackground"),t&&e.insertBefore(t,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(e),this.svgDialog_},l.module$exports$Blockly$Mutator.Mutator.prototype.updateEditable=function(){l.module$exports$Blockly$Mutator.Mutator.superClass_.updateEditable.call(this),this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&(0,s.removeClass)(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&(0,s.addClass)(this.iconGroup_,"blocklyIconGroupReadonly")))},l.module$exports$Blockly$Mutator.Mutator.prototype.resizeBubble_=function(){var t=2*W.Bubble.BORDER_WIDTH,e=this.workspace_.getCanvas().getBBox(),o=e.width+e.x,r=e.height+3*t,c=this.workspace_.getFlyout();if(c){var h=c.getWorkspace().getMetricsManager().getScrollMetrics();r=Math.max(r,h.height+20),o+=c.getWidth()}this.block_.RTL&&(o=-e.x),o+=3*t,(Math.abs(this.workspaceWidth_-o)>t||Math.abs(this.workspaceHeight_-r)>t)&&(this.workspaceWidth_=o,this.workspaceHeight_=r,this.bubble_.setBubbleSize(o+t,r+t),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_),this.workspace_.setCachedParentSvgSize(this.workspaceWidth_,this.workspaceHeight_)),this.block_.RTL&&(t="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",t)),this.workspace_.resize()},l.module$exports$Blockly$Mutator.Mutator.prototype.onBubbleMove_=function(){this.workspace_&&this.workspace_.recordDragTargets()},l.module$exports$Blockly$Mutator.Mutator.prototype.setVisible=function(t){if(t!==this.isVisible())if((0,f.fire)(new((0,f.get)(f.BUBBLE_OPEN))(this.block_,t,"mutator")),t){this.bubble_=new W.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var e=this.workspace_.options.languageTree;t=this.workspace_.getFlyout(),e&&(t.init(this.workspace_),t.show(e)),this.rootBlock_=this.block_.decompose(this.workspace_),e=this.rootBlock_.getDescendants(!1);for(var o=0,r=void 0;r=e[o];o++)r.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),t?(e=2*t.CORNER_RADIUS,t=this.rootBlock_.RTL?t.getWidth()+e:e):t=e=16,this.block_.RTL&&(t=-t),this.rootBlock_.moveBy(t,e),this.block_.saveConnections){var c=this,h=this.block_;h.saveConnections(this.rootBlock_),this.sourceListener_=function(){h.saveConnections(c.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.updateWorkspace_(),this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},l.module$exports$Blockly$Mutator.Mutator.prototype.workspaceChanged_=function(t){t.isUiEvent||t.type===f.CHANGE&&"disabled"===t.element||t.type===f.CREATE||this.updateWorkspace_()},l.module$exports$Blockly$Mutator.Mutator.prototype.updateWorkspace_=function(){if(!this.workspace_.isDragging())for(var t=this.workspace_.getTopBlocks(!1),e=0,o=void 0;o=t[e];e++){var r=o.getRelativeToSurfaceXY();if(20>r.y&&o.moveBy(0,20-r.y),o.RTL){var c=-20,h=this.workspace_.getFlyout();h&&(c-=h.getWidth()),r.x>c&&o.moveBy(c-r.x,0)}else 20>r.x&&o.moveBy(20-r.x,0)}if(this.rootBlock_.workspace===this.workspace_){(0,f.setGroup)(!0);var k=this.block_;if(t=be.BlockChange.getExtraBlockState_(k),e=k.rendered,k.rendered=!1,k.compose(this.rootBlock_),k.rendered=e,k.initSvg(),k.rendered&&k.render(),t!==(e=be.BlockChange.getExtraBlockState_(k))){(0,f.fire)(new((0,f.get)(f.CHANGE))(k,"mutation",null,t,e));var C=(0,f.getGroup)();setTimeout(function(){(0,f.setGroup)(C),k.bumpNeighbours(),(0,f.setGroup)(!1)},l.module$exports$Blockly$internalConstants.BUMP_DELAY)}this.workspace_.isDragging()||this.resizeBubble_(),(0,f.setGroup)(!1)}},l.module$exports$Blockly$Mutator.Mutator.prototype.dispose=function(){this.block_.mutator=null,qt.Icon.prototype.dispose.call(this)},l.module$exports$Blockly$Mutator.Mutator.prototype.updateBlockStyle=function(){var t=this.workspace_;if(t&&t.getAllBlocks(!1)){for(var r,e=t.getAllBlocks(!1),o=0;r=e[o];o++)r.setStyle(r.getStyleName());if(t=t.getFlyout())for(t=t.workspace_.getAllBlocks(!1),e=0;o=t[e];e++)o.setStyle(o.getStyleName())}},l.module$exports$Blockly$Mutator.Mutator.reconnect=function(t,e,o){if(!t||!t.getSourceBlock().workspace)return!1;o=e.getInput(o).connection;var r=t.targetBlock();return!(r&&r!==e||o.targetConnection===t||(o.isConnected()&&o.disconnect(),o.connect(t),0))},l.module$exports$Blockly$Mutator.Mutator.findParentWs=function(t){var e=null;if(t&&t.options){var o=t.options.parentWorkspace;t.isFlyout?o&&o.options&&(e=o.options.parentWorkspace):o&&(e=o)}return e},l.Blockly={VERSION:"7.20211209.2"},l.Blockly.ALIGN_LEFT=l.module$exports$Blockly$Input.Align.LEFT,l.Blockly.ALIGN_CENTRE=l.module$exports$Blockly$Input.Align.CENTRE,l.Blockly.ALIGN_RIGHT=l.module$exports$Blockly$Input.Align.RIGHT,l.Blockly.INPUT_VALUE=l.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE,l.Blockly.OUTPUT_VALUE=l.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE,l.Blockly.NEXT_STATEMENT=l.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT,l.Blockly.PREVIOUS_STATEMENT=l.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT,l.Blockly.DUMMY_INPUT=l.module$exports$Blockly$inputTypes.inputTypes.DUMMY,l.Blockly.TOOLBOX_AT_TOP=st.Position.TOP,l.Blockly.TOOLBOX_AT_BOTTOM=st.Position.BOTTOM,l.Blockly.TOOLBOX_AT_LEFT=st.Position.LEFT,l.Blockly.TOOLBOX_AT_RIGHT=st.Position.RIGHT,l.Blockly.svgResize=l.module$exports$Blockly$common.svgResize,l.Blockly.hideChaff=function(t){(0,l.module$exports$Blockly$common.getMainWorkspace)().hideChaff(t)},l.Blockly.getMainWorkspace=l.module$exports$Blockly$common.getMainWorkspace,l.Blockly.defineBlocksWithJsonArray=l.module$exports$Blockly$common.defineBlocksWithJsonArray,l.Blockly.setParentContainer=l.module$exports$Blockly$common.setParentContainer,Object.defineProperties(l.Blockly,{alert:{set:function(t){(0,ht.warn)("Blockly.alert","December 2021","December 2022"),(0,_e.setAlert)(t)},get:function(){return(0,ht.warn)("Blockly.alert","December 2021","December 2022","Blockly.dialog.alert()"),_e.alert}},confirm:{set:function(t){(0,ht.warn)("Blockly.confirm","December 2021","December 2022"),(0,_e.setConfirm)(t)},get:function(){return(0,ht.warn)("Blockly.confirm","December 2021","December 2022","Blockly.dialog.confirm()"),_e.confirm}},mainWorkspace:{set:function(t){(0,l.module$exports$Blockly$common.setMainWorkspace)(t)},get:function(){return(0,l.module$exports$Blockly$common.getMainWorkspace)()}},prompt:{set:function(t){(0,ht.warn)("Blockly.prompt","December 2021","December 2022"),(0,_e.setPrompt)(t)},get:function(){return(0,ht.warn)("Blockly.prompt","December 2021","December 2022","Blockly.dialog.prompt()"),_e.prompt}},selected:{get:function(){return(0,l.module$exports$Blockly$common.getSelected)()},set:function(t){(0,l.module$exports$Blockly$common.setSelected)(t)}},HSV_SATURATION:{get:function(){return mt.colour.getHsvSaturation()},set:function(t){mt.colour.setHsvSaturation(t)}},HSV_VALUE:{get:function(){return mt.colour.getHsvValue()},set:function(t){mt.colour.setHsvValue(t)}}}),l.Blockly.svgSize=dt.svgSize,l.Blockly.resizeSvgContents=function(t){(0,ht.warn)("Blockly.resizeSvgContents","December 2021","December 2022","Blockly.WorkspaceSvg.resizeSvgContents"),(0,A.resizeSvgContents)(t)},l.Blockly.copy=function(t){(0,ht.warn)("Blockly.copy","December 2021","December 2022","Blockly.clipboard.copy"),(0,Ke.copy)(t)},l.Blockly.paste=function(){return(0,ht.warn)("Blockly.paste","December 2021","December 2022","Blockly.clipboard.paste"),(0,Ke.paste)()},l.Blockly.duplicate=function(t){(0,ht.warn)("Blockly.duplicate","December 2021","December 2022","Blockly.clipboard.duplicate"),(0,Ke.duplicate)(t)},l.Blockly.isNumber=function(t){return(0,ht.warn)("Blockly.isNumber","December 2021","December 2022","Blockly.utils.string.isNumber"),mt.string.isNumber(t)},l.Blockly.hueToHex=function(t){return(0,ht.warn)("Blockly.hueToHex","December 2021","December 2022","Blockly.utils.colour.hueToHex"),(0,wt.hueToHex)(t)},l.Blockly.bindEvent_=function(t,e,o,r){return(0,ht.warn)("Blockly.bindEvent_","December 2021","December 2022","Blockly.browserEvents.bind"),(0,g.bind)(t,e,o,r)},l.Blockly.unbindEvent_=function(t){return(0,ht.warn)("Blockly.unbindEvent_","December 2021","December 2022","Blockly.browserEvents.unbind"),(0,g.unbind)(t)},l.Blockly.bindEventWithChecks_=function(t,e,o,r,c,h){return(0,ht.warn)("Blockly.bindEventWithChecks_","December 2021","December 2022","Blockly.browserEvents.conditionalBind"),(0,g.conditionalBind)(t,e,o,r,c,h)},l.Blockly.LINE_MODE_MULTIPLIER=l.module$exports$Blockly$internalConstants.LINE_MODE_MULTIPLIER,l.Blockly.PAGE_MODE_MULTIPLIER=l.module$exports$Blockly$internalConstants.PAGE_MODE_MULTIPLIER,l.Blockly.DRAG_RADIUS=l.module$exports$Blockly$internalConstants.DRAG_RADIUS,l.Blockly.FLYOUT_DRAG_RADIUS=l.module$exports$Blockly$internalConstants.FLYOUT_DRAG_RADIUS,l.Blockly.SNAP_RADIUS=l.module$exports$Blockly$internalConstants.SNAP_RADIUS,l.Blockly.CONNECTING_SNAP_RADIUS=l.module$exports$Blockly$internalConstants.SNAP_RADIUS,l.Blockly.CURRENT_CONNECTION_PREFERENCE=l.module$exports$Blockly$internalConstants.CURRENT_CONNECTION_PREFERENCE,l.Blockly.BUMP_DELAY=l.module$exports$Blockly$internalConstants.BUMP_DELAY,l.Blockly.BUMP_RANDOMNESS=l.module$exports$Blockly$internalConstants.BUMP_RANDOMNESS,l.Blockly.COLLAPSE_CHARS=l.module$exports$Blockly$internalConstants.COLLAPSE_CHARS,l.Blockly.LONGPRESS=l.module$exports$Blockly$internalConstants.LONGPRESS,l.Blockly.SOUND_LIMIT=l.module$exports$Blockly$internalConstants.SOUND_LIMIT,l.Blockly.DRAG_STACK=l.module$exports$Blockly$internalConstants.DRAG_STACK,l.Blockly.SPRITE=l.module$exports$Blockly$internalConstants.SPRITE,l.Blockly.DRAG_NONE=l.module$exports$Blockly$internalConstants.DRAG_NONE,l.Blockly.DRAG_STICKY=l.module$exports$Blockly$internalConstants.DRAG_STICKY,l.Blockly.DRAG_BEGIN=l.module$exports$Blockly$internalConstants.DRAG_BEGIN,l.Blockly.DRAG_FREE=l.module$exports$Blockly$internalConstants.DRAG_FREE,l.Blockly.OPPOSITE_TYPE=l.module$exports$Blockly$internalConstants.OPPOSITE_TYPE,l.Blockly.RENAME_VARIABLE_ID=l.module$exports$Blockly$internalConstants.RENAME_VARIABLE_ID,l.Blockly.DELETE_VARIABLE_ID=l.module$exports$Blockly$internalConstants.DELETE_VARIABLE_ID,l.Blockly.COLLAPSED_INPUT_NAME=zo.COLLAPSED_INPUT_NAME,l.Blockly.COLLAPSED_FIELD_NAME=zo.COLLAPSED_FIELD_NAME,l.Blockly.VARIABLE_CATEGORY_NAME=l.module$exports$Blockly$Variables.CATEGORY_NAME,l.Blockly.VARIABLE_DYNAMIC_CATEGORY_NAME=Rn.CATEGORY_NAME,l.Blockly.PROCEDURE_CATEGORY_NAME=l.module$exports$Blockly$Procedures.CATEGORY_NAME,l.Blockly.ASTNode=L.ASTNode,l.Blockly.BasicCursor=Be.BasicCursor,l.Blockly.Block=H.Block,l.Blockly.BlocklyOptions=function(){},l.Blockly.BlockDragger=Te.BlockDragger,l.Blockly.BlockDragSurfaceSvg=Ot.BlockDragSurfaceSvg,l.Blockly.BlockSvg=U.BlockSvg,l.Blockly.Blocks=l.module$exports$Blockly$blocks.Blocks,l.Blockly.Bubble=W.Bubble,l.Blockly.BubbleDragger=ao.BubbleDragger,l.Blockly.CollapsibleToolboxCategory=Ut.CollapsibleToolboxCategory,l.Blockly.Comment=ue.Comment,l.Blockly.ComponentManager=At.ComponentManager,l.Blockly.Connection=K.Connection,l.Blockly.ConnectionType=l.module$exports$Blockly$ConnectionType.ConnectionType,l.Blockly.ConnectionChecker=Xo.ConnectionChecker,l.Blockly.ConnectionDB=ze.ConnectionDB,l.Blockly.ContextMenu=l.module$exports$Blockly$ContextMenu,l.Blockly.ContextMenuItems=Ht,l.Blockly.ContextMenuRegistry=bt.ContextMenuRegistry,l.Blockly.Css=Vt,l.Blockly.Cursor=Zo.Cursor,l.Blockly.DeleteArea=hn.DeleteArea,l.Blockly.DragTarget=$n.DragTarget,l.Blockly.DropDownDiv=D.DropDownDiv,l.Blockly.Events=l.module$exports$Blockly$Events,l.Blockly.Extensions=l.module$exports$Blockly$Extensions,l.Blockly.Field=z.Field,l.Blockly.FieldAngle=ct.FieldAngle,l.Blockly.FieldCheckbox=l.module$exports$Blockly$FieldCheckbox.FieldCheckbox,l.Blockly.FieldColour=St.FieldColour,l.Blockly.FieldDropdown=l.module$exports$Blockly$FieldDropdown.FieldDropdown,l.Blockly.FieldImage=l.module$exports$Blockly$FieldImage.FieldImage,l.Blockly.FieldLabel=l.module$exports$Blockly$FieldLabel.FieldLabel,l.Blockly.FieldLabelSerializable=Cn.FieldLabelSerializable,l.Blockly.FieldMultilineInput=Xt.FieldMultilineInput,l.Blockly.FieldNumber=se.FieldNumber,l.Blockly.FieldTextInput=l.module$exports$Blockly$FieldTextInput.FieldTextInput,l.Blockly.FieldVariable=Lt.FieldVariable,l.Blockly.Flyout=ut.Flyout,l.Blockly.FlyoutButton=Ee.FlyoutButton,l.Blockly.FlyoutMetricsManager=Sn.FlyoutMetricsManager,l.Blockly.Generator=l.module$exports$Blockly$Generator.Generator,l.Blockly.Gesture=gt.Gesture,l.Blockly.Grid=re.Grid,l.Blockly.HorizontalFlyout=Ne.HorizontalFlyout,l.Blockly.IASTNodeLocation=function(){},l.Blockly.IASTNodeLocationSvg=function(){},l.Blockly.IASTNodeLocationWithBlock=function(){},l.Blockly.IAutoHideable=function(){},l.Blockly.IBlockDragger=function(){},l.Blockly.IBoundedElement=function(){},l.Blockly.IBubble=function(){},l.Blockly.ICollapsibleToolboxItem=function(){},l.Blockly.IComponent=function(){},l.Blockly.IConnectionChecker=function(){},l.Blockly.IContextMenu=function(){},l.Blockly.Icon=qt.Icon,l.Blockly.ICopyable=function(){},l.Blockly.IDeletable=function(){},l.Blockly.IDeleteArea=function(){},l.Blockly.IDragTarget=function(){},l.Blockly.IDraggable=function(){},l.Blockly.IFlyout=function(){},l.Blockly.IKeyboardAccessible=function(){},l.Blockly.IMetricsManager=function(){},l.Blockly.IMovable=function(){},l.Blockly.Input=l.module$exports$Blockly$Input.Input,l.Blockly.InsertionMarkerManager=Rt.InsertionMarkerManager,l.Blockly.IPositionable=function(){},l.Blockly.IRegistrable=function(){},l.Blockly.IRegistrableField={},l.Blockly.ISelectable=function(){},l.Blockly.ISelectableToolboxItem=function(){},l.Blockly.IStyleable=function(){},l.Blockly.IToolbox=function(){},l.Blockly.IToolboxItem=function(){},l.Blockly.Marker=Jo.Marker,l.Blockly.MarkerManager=Ve.MarkerManager,l.Blockly.Menu=ee.Menu,l.Blockly.MenuItem=$e.MenuItem,l.Blockly.MetricsManager=Ie.MetricsManager,l.Blockly.Mutator=l.module$exports$Blockly$Mutator.Mutator,l.Blockly.Msg=l.module$exports$Blockly$Msg.Msg,l.Blockly.Names=l.module$exports$Blockly$Names.Names,l.Blockly.Options=Ae.Options,l.Blockly.Procedures=l.module$exports$Blockly$Procedures,l.Blockly.RenderedConnection=vt.RenderedConnection,l.Blockly.Scrollbar=J.Scrollbar,l.Blockly.ScrollbarPair=De.ScrollbarPair,l.Blockly.ShortcutItems=we,l.Blockly.ShortcutRegistry=nt.ShortcutRegistry,l.Blockly.TabNavigateCursor=Kn.TabNavigateCursor,l.Blockly.Theme=Oe.Theme,l.Blockly.Themes=Ui,l.Blockly.ThemeManager=Qo.ThemeManager,l.Blockly.Toolbox=pt.Toolbox,l.Blockly.ToolboxCategory=kt.ToolboxCategory,l.Blockly.ToolboxItem=uo.ToolboxItem,l.Blockly.ToolboxSeparator=ho.ToolboxSeparator,l.Blockly.Tooltip=at,l.Blockly.Touch=tt,l.Blockly.TouchGesture=Gt.TouchGesture,l.Blockly.Trashcan=Ct.Trashcan,l.Blockly.VariableMap=me.VariableMap,l.Blockly.VariableModel=yn.VariableModel,l.Blockly.Variables=l.module$exports$Blockly$Variables,l.Blockly.VariablesDynamic=Rn,l.Blockly.VerticalFlyout=Re.VerticalFlyout,l.Blockly.Warning=no.Warning,l.Blockly.WidgetDiv=m,l.Blockly.Workspace=Q.Workspace,l.Blockly.WorkspaceAudio=vn.WorkspaceAudio,l.Blockly.WorkspaceComment=Nt.WorkspaceComment,l.Blockly.WorkspaceCommentSvg=it.WorkspaceCommentSvg,l.Blockly.WorkspaceDragSurfaceSvg=Vo.WorkspaceDragSurfaceSvg,l.Blockly.WorkspaceDragger=An.WorkspaceDragger,l.Blockly.WorkspaceSvg=A.WorkspaceSvg,l.Blockly.Xml=l.module$exports$Blockly$Xml,l.Blockly.ZoomControls=ne.ZoomControls,l.Blockly.blockAnimations=co,l.Blockly.blockRendering=xt,l.Blockly.browserEvents=g,l.Blockly.bumpObjects=rt,l.Blockly.clipboard=Ke,l.Blockly.common=l.module$exports$Blockly$common,l.Blockly.connectionTypes=l.module$exports$Blockly$ConnectionType.ConnectionType,l.Blockly.constants=zo,l.Blockly.dialog=_e,l.Blockly.fieldRegistry=He,l.Blockly.geras=Oo,l.Blockly.inject=function(t,e){if("string"==typeof t&&(t=document.getElementById(t)||document.querySelector(t)),!t||!(0,s.containsNode)(document,t))throw Error("Error: container is not in current document.");e=new Ae.Options(e||{});var o=document.createElement("div");o.className="injectionDiv",o.tabIndex=0,(0,F.setState)(o,F.State.LABEL,l.module$exports$Blockly$Msg.Msg.WORKSPACE_ARIA_LABEL),t.appendChild(o),t=xs(o,e);var r=new Ot.BlockDragSurfaceSvg(o),c=new Vo.WorkspaceDragSurfaceSvg(o),h=ws(t,e,r,c);return Ms(h),(0,l.module$exports$Blockly$common.setMainWorkspace)(h),(0,l.module$exports$Blockly$common.svgResize)(h),o.addEventListener("focusin",function(){(0,l.module$exports$Blockly$common.setMainWorkspace)(h)}),h},l.Blockly.inputTypes=l.module$exports$Blockly$inputTypes.inputTypes,l.Blockly.minimalist=qn,l.Blockly.registry=x,l.Blockly.serialization={blocks:ye,exceptions:Wt,priorities:xi,registry:wi,variables:{},workspaces:js,ISerializer:oi.ISerializer},l.Blockly.thrasos=Gi,l.Blockly.uiPosition=he,l.Blockly.utils=mt,l.Blockly.zelos=po,"Blockly"in l.module$exports$Blockly$utils$global.globalThis||(l.module$exports$Blockly$utils$global.globalThis.Blockly={Msg:l.module$exports$Blockly$Msg.Msg}),l.Blockly.internal_=l,l.Blockly}),function(l,_){"function"==typeof define&&define.amd?define(["./blockly_compressed.js"],_):"object"==typeof exports?module.exports=_(require("./blockly_compressed.js")):l.Blockly.Blocks=_(l.Blockly)}(this,function(l){const _=l.internal_;(0,_.module$exports$Blockly$common.defineBlocksWithJsonArray)([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]);var Ye={customContextMenu:function(d){if(this.isInFlyout)("variables_get_dynamic"===this.type||"variables_get_reporter_dynamic"===this.type)&&(T={text:_.module$exports$Blockly$Msg.Msg.RENAME_VARIABLE,enabled:!0,callback:P(this)},M=this.getField("VAR").getText(),M={text:_.module$exports$Blockly$Msg.Msg.DELETE_VARIABLE.replace("%1",M),enabled:!0,callback:ht(this)},d.unshift(T),d.unshift(M));else{var T=this.getFieldValue("VAR"),E=this.workspace.getVariableById(T).type;if("variables_get_dynamic"===this.type){T="variables_set_dynamic";var I=_.module$exports$Blockly$Msg.Msg.VARIABLES_GET_CREATE_SET}else T="variables_get_dynamic",I=_.module$exports$Blockly$Msg.Msg.VARIABLES_SET_CREATE_GET;var M={enabled:0<this.workspace.remainingCapacity()},X=this.getField("VAR").getText();M.text=I.replace("%1",X),(I=(0,_.module$exports$Blockly$utils$xml.createElement)("field")).setAttribute("name","VAR"),I.setAttribute("variabletype",E),I.appendChild((0,_.module$exports$Blockly$utils$xml.createTextNode)(X)),(E=(0,_.module$exports$Blockly$utils$xml.createElement)("block")).setAttribute("type",T),E.appendChild(I),M.callback=(0,_.module$exports$Blockly$ContextMenu.callbackFactory)(this,E),d.push(M)}},onchange:function(d){d=this.getFieldValue("VAR"),d=(0,_.module$exports$Blockly$Variables.getVariable)(this.workspace,d),"variables_get_dynamic"===this.type?this.outputConnection.setCheck(d.type):this.getInput("VALUE").connection.setCheck(d.type)}},P=function(d){return function(){var T=d.workspace,E=d.getField("VAR").getVariable();(0,_.module$exports$Blockly$Variables.renameVariable)(T,E)}},ht=function(d){return function(){var T=d.workspace,E=d.getField("VAR").getVariable();T.deleteVariableById(E.getId()),T.refreshToolboxSelection()}};(0,_.module$exports$Blockly$Extensions.registerMixin)("contextMenu_variableDynamicSetterGetter",Ye),(0,_.module$exports$Blockly$common.defineBlocksWithJsonArray)([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]);var je={customContextMenu:function(d){if(this.isInFlyout)("variables_get"===this.type||"variables_get_reporter"===this.type)&&(T={text:_.module$exports$Blockly$Msg.Msg.RENAME_VARIABLE,enabled:!0,callback:pn(this)},I=this.getField("VAR").getText(),I={text:_.module$exports$Blockly$Msg.Msg.DELETE_VARIABLE.replace("%1",I),enabled:!0,callback:u(this)},d.unshift(T),d.unshift(I));else{if("variables_get"===this.type)var T="variables_set",E=_.module$exports$Blockly$Msg.Msg.VARIABLES_GET_CREATE_SET;else T="variables_get",E=_.module$exports$Blockly$Msg.Msg.VARIABLES_SET_CREATE_GET;var I={enabled:0<this.workspace.remainingCapacity()},M=this.getField("VAR").getText();I.text=E.replace("%1",M),(E=(0,_.module$exports$Blockly$utils$xml.createElement)("field")).setAttribute("name","VAR"),E.appendChild((0,_.module$exports$Blockly$utils$xml.createTextNode)(M)),(M=(0,_.module$exports$Blockly$utils$xml.createElement)("block")).setAttribute("type",T),M.appendChild(E),I.callback=(0,_.module$exports$Blockly$ContextMenu.callbackFactory)(this,M),d.push(I)}}},pn=function(d){return function(){var T=d.workspace,E=d.getField("VAR").getVariable();(0,_.module$exports$Blockly$Variables.renameVariable)(T,E)}},u=function(d){return function(){var T=d.workspace,E=d.getField("VAR").getVariable();T.deleteVariableById(E.getId()),T.refreshToolboxSelection()}};(0,_.module$exports$Blockly$Extensions.registerMixin)("contextMenu_variableSetterGetter",je),(0,_.module$exports$Blockly$common.defineBlocksWithJsonArray)([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"\xb6"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),_.module$exports$Blockly$blocks.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[_.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[_.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[_.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[_.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[_.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[_.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(_.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(_.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),_.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(_.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(_.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var d=(0,_.module$exports$Blockly$utils$xml.createElement)("mutation"),T=this.getInput("AT1").type===_.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE;return d.setAttribute("at1",T),T=this.getInput("AT2").type===_.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE,d.setAttribute("at2",T),d},domToMutation:function(d){var T="true"===d.getAttribute("at1");d="true"===d.getAttribute("at2"),this.updateAt_(1,T),this.updateAt_(2,d)},updateAt_:function(d,T){this.removeInput("AT"+d),this.removeInput("ORDINAL"+d,!0),T?(this.appendValueInput("AT"+d).setCheck("Number"),_.module$exports$Blockly$Msg.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+d).appendField(_.module$exports$Blockly$Msg.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+d),2===d&&_.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(_.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_TAIL));var E=new _.module$exports$Blockly$FieldDropdown.FieldDropdown(this["WHERE_OPTIONS_"+d],function(I){var M="FROM_START"===I||"FROM_END"===I;if(M!==T){var X=this.getSourceBlock();return X.updateAt_(d,M),X.setFieldValue(I,"WHERE"+d),null}});this.getInput("AT"+d).appendField(E,"WHERE"+d),1===d&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},_.module$exports$Blockly$blocks.Blocks.text_changeCase={init:function(){var d=[[_.module$exports$Blockly$Msg.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[_.module$exports$Blockly$Msg.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[_.module$exports$Blockly$Msg.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(_.module$exports$Blockly$Msg.Msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new _.module$exports$Blockly$FieldDropdown.FieldDropdown(d),"CASE"),this.setOutput(!0,"String"),this.setTooltip(_.module$exports$Blockly$Msg.Msg.TEXT_CHANGECASE_TOOLTIP)}},_.module$exports$Blockly$blocks.Blocks.text_trim={init:function(){var d=[[_.module$exports$Blockly$Msg.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[_.module$exports$Blockly$Msg.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[_.module$exports$Blockly$Msg.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(_.module$exports$Blockly$Msg.Msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new _.module$exports$Blockly$FieldDropdown.FieldDropdown(d),"MODE"),this.setOutput(!0,"String"),this.setTooltip(_.module$exports$Blockly$Msg.Msg.TEXT_TRIM_TOOLTIP)}},_.module$exports$Blockly$blocks.Blocks.text_print={init:function(){this.jsonInit({message0:_.module$exports$Blockly$Msg.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:_.module$exports$Blockly$Msg.Msg.TEXT_PRINT_TOOLTIP,helpUrl:_.module$exports$Blockly$Msg.Msg.TEXT_PRINT_HELPURL})}};var cn={updateType_:function(d){this.outputConnection.setCheck("NUMBER"===d?"Number":"String")},mutationToDom:function(){var d=(0,_.module$exports$Blockly$utils$xml.createElement)("mutation");return d.setAttribute("type",this.getFieldValue("TYPE")),d},domToMutation:function(d){this.updateType_(d.getAttribute("type"))}};_.module$exports$Blockly$blocks.Blocks.text_prompt_ext=Object.assign({},cn,{init:function(){var d=[[_.module$exports$Blockly$Msg.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[_.module$exports$Blockly$Msg.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(_.module$exports$Blockly$Msg.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");var T=this;d=new _.module$exports$Blockly$FieldDropdown.FieldDropdown(d,function(E){T.updateType_(E)}),this.appendValueInput("TEXT").appendField(d,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"===T.getFieldValue("TYPE")?_.module$exports$Blockly$Msg.Msg.TEXT_PROMPT_TOOLTIP_TEXT:_.module$exports$Blockly$Msg.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})}}),_.module$exports$Blockly$blocks.Blocks.text_prompt=Object.assign({},cn,{init:function(){this.mixin(tt);var d=[[_.module$exports$Blockly$Msg.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[_.module$exports$Blockly$Msg.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],T=this;this.setHelpUrl(_.module$exports$Blockly$Msg.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),d=new _.module$exports$Blockly$FieldDropdown.FieldDropdown(d,function(E){T.updateType_(E)}),this.appendDummyInput().appendField(d,"TYPE").appendField(this.newQuote_(!0)).appendField(new _.module$exports$Blockly$FieldTextInput.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"===T.getFieldValue("TYPE")?_.module$exports$Blockly$Msg.Msg.TEXT_PROMPT_TOOLTIP_TEXT:_.module$exports$Blockly$Msg.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})}}),_.module$exports$Blockly$blocks.Blocks.text_count={init:function(){this.jsonInit({message0:_.module$exports$Blockly$Msg.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:_.module$exports$Blockly$Msg.Msg.TEXT_COUNT_TOOLTIP,helpUrl:_.module$exports$Blockly$Msg.Msg.TEXT_COUNT_HELPURL})}},_.module$exports$Blockly$blocks.Blocks.text_replace={init:function(){this.jsonInit({message0:_.module$exports$Blockly$Msg.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:_.module$exports$Blockly$Msg.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:_.module$exports$Blockly$Msg.Msg.TEXT_REPLACE_HELPURL})}},_.module$exports$Blockly$blocks.Blocks.text_reverse={init:function(){this.jsonInit({message0:_.module$exports$Blockly$Msg.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:_.module$exports$Blockly$Msg.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:_.module$exports$Blockly$Msg.Msg.TEXT_REVERSE_HELPURL})}};var tt={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(d){for(var E,T=0;E=this.inputList[T];T++)for(var M,I=0;M=E.fieldRow[I];I++)if(d===M.name)return E.insertFieldAt(I,this.newQuote_(!0)),void E.insertFieldAt(I+2,this.newQuote_(!1));console.warn('field named "'+d+'" not found in '+this.toDevString())},newQuote_:function(d){return new _.module$exports$Blockly$FieldImage.FieldImage((d=this.RTL?!d:d)?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,d?"\u201c":"\u201d")}},Po={mutationToDom:function(){var d=(0,_.module$exports$Blockly$utils$xml.createElement)("mutation");return d.setAttribute("items",this.itemCount_),d},domToMutation:function(d){this.itemCount_=parseInt(d.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(d){this.itemCount_=d.itemCount,this.updateShape_()},decompose:function(d){var T=d.newBlock("text_create_join_container");T.initSvg();for(var E=T.getInput("STACK").connection,I=0;I<this.itemCount_;I++){var M=d.newBlock("text_create_join_item");M.initSvg(),E.connect(M.previousConnection),E=M.nextConnection}return T},compose:function(d){var T=d.getInputTargetBlock("STACK");for(d=[];T&&!T.isInsertionMarker();)d.push(T.valueConnection_),T=T.nextConnection&&T.nextConnection.targetBlock();for(T=0;T<this.itemCount_;T++){var E=this.getInput("ADD"+T).connection.targetConnection;E&&-1===d.indexOf(E)&&E.disconnect()}for(this.itemCount_=d.length,this.updateShape_(),T=0;T<this.itemCount_;T++)_.module$exports$Blockly$Mutator.Mutator.reconnect(d[T],this,"ADD"+T)},saveConnections:function(d){d=d.getInputTargetBlock("STACK");for(var T=0;d;){var E=this.getInput("ADD"+T);d.valueConnection_=E&&E.connection.targetConnection,d=d.nextConnection&&d.nextConnection.targetBlock(),T++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var d=0;d<this.itemCount_;d++)if(!this.getInput("ADD"+d)){var T=this.appendValueInput("ADD"+d).setAlign(_.module$exports$Blockly$Input.Align.RIGHT);0===d&&T.appendField(_.module$exports$Blockly$Msg.Msg.TEXT_JOIN_TITLE_CREATEWITH)}for(d=this.itemCount_;this.getInput("ADD"+d);d++)this.removeInput("ADD"+d)}};(0,_.module$exports$Blockly$Extensions.register)("text_append_tooltip",(0,_.module$exports$Blockly$Extensions.buildTooltipWithFieldText)("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var dn={mutationToDom:function(){var d=(0,_.module$exports$Blockly$utils$xml.createElement)("mutation");return d.setAttribute("at",!!this.isAt_),d},domToMutation:function(d){d="false"!==d.getAttribute("at"),this.updateAt_(d)},updateAt_:function(d){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),d&&(this.appendValueInput("AT").setCheck("Number"),_.module$exports$Blockly$Msg.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(_.module$exports$Blockly$Msg.Msg.ORDINAL_NUMBER_SUFFIX)),_.module$exports$Blockly$Msg.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(_.module$exports$Blockly$Msg.Msg.TEXT_CHARAT_TAIL)),this.isAt_=d}};(0,_.module$exports$Blockly$Extensions.register)("text_indexOf_tooltip",function(){var d=this;this.setTooltip(function(){return _.module$exports$Blockly$Msg.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",d.workspace.options.oneBasedIndex?"0":"-1")})}),(0,_.module$exports$Blockly$Extensions.register)("text_quotes",function(){this.mixin(tt),this.quoteField_("TEXT")}),(0,_.module$exports$Blockly$Extensions.registerMutator)("text_join_mutator",Po,function(){this.mixin(tt),this.itemCount_=2,this.updateShape_(),this.setMutator(new _.module$exports$Blockly$Mutator.Mutator(["text_create_join_item"]))}),(0,_.module$exports$Blockly$Extensions.registerMutator)("text_charAt_mutator",dn,function(){this.getField("WHERE").setValidator(function(T){(T="FROM_START"===T||"FROM_END"===T)!==this.isAt_&&this.getSourceBlock().updateAt_(T)}),this.updateAt_(!0);var d=this;this.setTooltip(function(){var T=d.getFieldValue("WHERE"),E=_.module$exports$Blockly$Msg.Msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"===T||"FROM_END"===T)&&(T="FROM_START"===T?_.module$exports$Blockly$Msg.Msg.LISTS_INDEX_FROM_START_TOOLTIP:_.module$exports$Blockly$Msg.Msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(E+="  "+T.replace("%1",d.workspace.options.oneBasedIndex?"#1":"#0")),E})});var gn={setStatements_:function(d){this.hasStatements_!==d&&(d?(this.appendStatementInput("STACK").appendField(_.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=d)},updateParams_:function(){var d="";this.arguments_.length&&(d=_.module$exports$Blockly$Msg.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),(0,_.module$exports$Blockly$Events.disable)();try{this.setFieldValue(d,"PARAMS")}finally{(0,_.module$exports$Blockly$Events.enable)()}},mutationToDom:function(d){var T=(0,_.module$exports$Blockly$utils$xml.createElement)("mutation");d&&T.setAttribute("name",this.getFieldValue("NAME"));for(var E=0;E<this.argumentVarModels_.length;E++){var I=(0,_.module$exports$Blockly$utils$xml.createElement)("arg"),M=this.argumentVarModels_[E];I.setAttribute("name",M.name),I.setAttribute("varid",M.getId()),d&&this.paramIds_&&I.setAttribute("paramId",this.paramIds_[E]),T.appendChild(I)}return this.hasStatements_||T.setAttribute("statements","false"),T},domToMutation:function(d){this.arguments_=[],this.argumentVarModels_=[];for(var E,T=0;E=d.childNodes[T];T++)if("arg"===E.nodeName.toLowerCase()){var I=E.getAttribute("name");E=E.getAttribute("varid")||E.getAttribute("varId"),this.arguments_.push(I),null!==(E=(0,_.module$exports$Blockly$Variables.getOrCreateVariablePackage)(this.workspace,E,I,""))?this.argumentVarModels_.push(E):console.log("Failed to create a variable with name "+I+", ignoring.")}this.updateParams_(),(0,_.module$exports$Blockly$Procedures.mutateCallers)(this),this.setStatements_("false"!==d.getAttribute("statements"))},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;var d=Object.create(null);if(this.argumentVarModels_.length){d.params=[];for(var T=0;T<this.argumentVarModels_.length;T++)d.params.push({name:this.argumentVarModels_[T].name,id:this.argumentVarModels_[T].getId()})}return this.hasStatements_||(d.hasStatements=!1),d},loadExtraState:function(d){if(this.arguments_=[],this.argumentVarModels_=[],d.params)for(var T=0;T<d.params.length;T++){var E=d.params[T];E=(0,_.module$exports$Blockly$Variables.getOrCreateVariablePackage)(this.workspace,E.id,E.name,""),this.arguments_.push(E.name),this.argumentVarModels_.push(E)}this.updateParams_(),(0,_.module$exports$Blockly$Procedures.mutateCallers)(this),this.setStatements_(!1!==d.hasStatements)},decompose:function(d){var T=(0,_.module$exports$Blockly$utils$xml.createElement)("block");T.setAttribute("type","procedures_mutatorcontainer");var E=(0,_.module$exports$Blockly$utils$xml.createElement)("statement");E.setAttribute("name","STACK"),T.appendChild(E);for(var I=0;I<this.arguments_.length;I++){var M=(0,_.module$exports$Blockly$utils$xml.createElement)("block");M.setAttribute("type","procedures_mutatorarg");var X=(0,_.module$exports$Blockly$utils$xml.createElement)("field");X.setAttribute("name","NAME");var F=(0,_.module$exports$Blockly$utils$xml.createTextNode)(this.arguments_[I]);X.appendChild(F),M.appendChild(X),X=(0,_.module$exports$Blockly$utils$xml.createElement)("next"),M.appendChild(X),E.appendChild(M),E=X}return d=(0,_.module$exports$Blockly$Xml.domToBlock)(T,d),"procedures_defreturn"===this.type?d.setFieldValue(this.hasStatements_,"STATEMENTS"):d.removeInput("STATEMENT_INPUT"),(0,_.module$exports$Blockly$Procedures.mutateCallers)(this),d},compose:function(d){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];for(var T=d.getInputTargetBlock("STACK");T&&!T.isInsertionMarker();){var E=T.getFieldValue("NAME");this.arguments_.push(E),E=this.workspace.getVariable(E,""),this.argumentVarModels_.push(E),this.paramIds_.push(T.id),T=T.nextConnection&&T.nextConnection.targetBlock()}this.updateParams_(),(0,_.module$exports$Blockly$Procedures.mutateCallers)(this),null!==(d=d.getFieldValue("STATEMENTS"))&&this.hasStatements_!==(d="TRUE"===d)&&(d?(this.setStatements_(!0),_.module$exports$Blockly$Mutator.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(d=this.getInput("STACK").connection,(this.statementConnection_=d.targetConnection)&&((d=d.targetBlock()).unplug(),d.bumpNeighbours()),this.setStatements_(!1)))},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(d,T){var E=this.workspace.getVariableById(d);if(""===E.type){E=E.name,T=this.workspace.getVariableById(T);for(var I=!1,M=0;M<this.argumentVarModels_.length;M++)this.argumentVarModels_[M].getId()===d&&(this.arguments_[M]=T.name,this.argumentVarModels_[M]=T,I=!0);I&&(this.displayRenamedVar_(E,T.name),(0,_.module$exports$Blockly$Procedures.mutateCallers)(this))}},updateVarName:function(d){for(var I,T=d.name,E=!1,M=0;M<this.argumentVarModels_.length;M++)this.argumentVarModels_[M].getId()===d.getId()&&(I=this.arguments_[M],this.arguments_[M]=T,E=!0);E&&(this.displayRenamedVar_(I,T),(0,_.module$exports$Blockly$Procedures.mutateCallers)(this))},displayRenamedVar_:function(d,T){if(this.updateParams_(),this.mutator&&this.mutator.isVisible())for(var M,E=this.mutator.workspace_.getAllBlocks(!1),I=0;M=E[I];I++)"procedures_mutatorarg"===M.type&&_.module$exports$Blockly$Names.Names.equals(d,M.getFieldValue("NAME"))&&M.setFieldValue(T,"NAME")},customContextMenu:function(d){if(!this.isInFlyout){var T={enabled:!0},E=this.getFieldValue("NAME");T.text=_.module$exports$Blockly$Msg.Msg.PROCEDURES_CREATE_DO.replace("%1",E);var I=(0,_.module$exports$Blockly$utils$xml.createElement)("mutation");for(I.setAttribute("name",E),E=0;E<this.arguments_.length;E++){var M=(0,_.module$exports$Blockly$utils$xml.createElement)("arg");M.setAttribute("name",this.arguments_[E]),I.appendChild(M)}if((E=(0,_.module$exports$Blockly$utils$xml.createElement)("block")).setAttribute("type",this.callType_),E.appendChild(I),T.callback=(0,_.module$exports$Blockly$ContextMenu.callbackFactory)(this,E),d.push(T),!this.isCollapsed())for(T=0;T<this.argumentVarModels_.length;T++)(I={enabled:!0}).text=_.module$exports$Blockly$Msg.Msg.VARIABLES_SET_CREATE_GET.replace("%1",(E=this.argumentVarModels_[T]).name),E=(0,_.module$exports$Blockly$Variables.generateVariableFieldDom)(E),(M=(0,_.module$exports$Blockly$utils$xml.createElement)("block")).setAttribute("type","variables_get"),M.appendChild(E),I.callback=(0,_.module$exports$Blockly$ContextMenu.callbackFactory)(this,M),d.push(I)}},callType_:"procedures_callnoreturn"};_.module$exports$Blockly$blocks.Blocks.procedures_defnoreturn=Object.assign({},gn,{init:function(){var d=(0,_.module$exports$Blockly$Procedures.findLegalName)("",this);(d=new _.module$exports$Blockly$FieldTextInput.FieldTextInput(d,_.module$exports$Blockly$Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(_.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(d,"NAME").appendField("","PARAMS"),this.setMutator(new _.module$exports$Blockly$Mutator.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&_.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(_.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(_.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(_.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]}}),_.module$exports$Blockly$blocks.Blocks.procedures_defreturn=Object.assign({},gn,{init:function(){var d=(0,_.module$exports$Blockly$Procedures.findLegalName)("",this);(d=new _.module$exports$Blockly$FieldTextInput.FieldTextInput(d,_.module$exports$Blockly$Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(_.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(d,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(_.module$exports$Blockly$Input.Align.RIGHT).appendField(_.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new _.module$exports$Blockly$Mutator.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&_.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(_.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(_.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(_.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]}}),_.module$exports$Blockly$blocks.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(_.module$exports$Blockly$Msg.Msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(_.module$exports$Blockly$Msg.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new _.module$exports$Blockly$FieldCheckbox.FieldCheckbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(_.module$exports$Blockly$Msg.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},_.module$exports$Blockly$blocks.Blocks.procedures_mutatorarg={init:function(){var d=new _.module$exports$Blockly$FieldTextInput.FieldTextInput(_.module$exports$Blockly$Procedures.DEFAULT_ARG,this.validator_);d.oldShowEditorFn_=d.showEditor_,d.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(_.module$exports$Blockly$Msg.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(d,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(_.module$exports$Blockly$Msg.Msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,d.onFinishEditing_=this.deleteIntermediateVars_,d.createdVariables_=[],d.onFinishEditing_("x")},validator_:function(d){var T=this.getSourceBlock(),E=_.module$exports$Blockly$Mutator.Mutator.findParentWs(T.workspace);if(!(d=d.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;for(var I=(T.workspace.targetWorkspace||T.workspace).getAllBlocks(!1),M=d.toLowerCase(),X=0;X<I.length;X++)if(I[X].id!==this.getSourceBlock().id){var F=I[X].getFieldValue("NAME");if(F&&F.toLowerCase()===M)return null}return T.isInFlyout||((T=E.getVariable(d,""))&&T.name!==d&&E.renameVariableById(T.getId(),d),T||(T=E.createVariable(d,""))&&this.createdVariables_&&this.createdVariables_.push(T)),d},deleteIntermediateVars_:function(d){var T=_.module$exports$Blockly$Mutator.Mutator.findParentWs(this.getSourceBlock().workspace);if(T)for(var E=0;E<this.createdVariables_.length;E++){var I=this.createdVariables_[E];I.name!==d&&T.deleteVariableById(I.getId())}}};var at={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(d,T){_.module$exports$Blockly$Names.Names.equals(d,this.getProcedureCall())&&(this.setFieldValue(T,"NAME"),this.setTooltip((this.outputConnection?_.module$exports$Blockly$Msg.Msg.PROCEDURES_CALLRETURN_TOOLTIP:_.module$exports$Blockly$Msg.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",T)))},setProcedureParameters_:function(d,T){var E=(0,_.module$exports$Blockly$Procedures.getDefinition)(this.getProcedureCall(),this.workspace),I=E&&E.mutator&&E.mutator.isVisible();if(I||(this.quarkConnections_={},this.quarkIds_=null),T)if(d.join("\n")===this.arguments_.join("\n"))this.quarkIds_=T;else{if(T.length!==d.length)throw RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),E=this.rendered,this.rendered=!1;for(var M=0;M<this.arguments_.length;M++){var X=this.getInput("ARG"+M);X&&(this.quarkConnections_[this.quarkIds_[M]]=X=X.connection.targetConnection,I&&X&&-1===T.indexOf(this.quarkIds_[M])&&(X.disconnect(),X.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(d),this.argumentVarModels_=[],d=0;d<this.arguments_.length;d++)I=(0,_.module$exports$Blockly$Variables.getOrCreateVariablePackage)(this.workspace,null,this.arguments_[d],""),this.argumentVarModels_.push(I);if(this.updateShape_(),this.quarkIds_=T)for(T=0;T<this.arguments_.length;T++)(d=this.quarkIds_[T])in this.quarkConnections_&&(_.module$exports$Blockly$Mutator.Mutator.reconnect(this.quarkConnections_[d],this,"ARG"+T)||delete this.quarkConnections_[d]);(this.rendered=E)&&this.render()}},updateShape_:function(){for(var d=0;d<this.arguments_.length;d++){var T=this.getField("ARGNAME"+d);if(T){(0,_.module$exports$Blockly$Events.disable)();try{T.setValue(this.arguments_[d])}finally{(0,_.module$exports$Blockly$Events.enable)()}}else T=new _.module$exports$Blockly$FieldLabel.FieldLabel(this.arguments_[d]),this.appendValueInput("ARG"+d).setAlign(_.module$exports$Blockly$Input.Align.RIGHT).appendField(T,"ARGNAME"+d).init()}for(d=this.arguments_.length;this.getInput("ARG"+d);d++)this.removeInput("ARG"+d);(d=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(d.appendField(_.module$exports$Blockly$Msg.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),d.init()):this.getField("WITH")&&d.removeField("WITH"))},mutationToDom:function(){var d=(0,_.module$exports$Blockly$utils$xml.createElement)("mutation");d.setAttribute("name",this.getProcedureCall());for(var T=0;T<this.arguments_.length;T++){var E=(0,_.module$exports$Blockly$utils$xml.createElement)("arg");E.setAttribute("name",this.arguments_[T]),d.appendChild(E)}return d},domToMutation:function(d){var T=d.getAttribute("name");this.renameProcedure(this.getProcedureCall(),T),T=[];for(var M,E=[],I=0;M=d.childNodes[I];I++)"arg"===M.nodeName.toLowerCase()&&(T.push(M.getAttribute("name")),E.push(M.getAttribute("paramId")));this.setProcedureParameters_(T,E)},saveExtraState:function(){var d=Object.create(null);return d.name=this.getProcedureCall(),this.arguments_.length&&(d.params=this.arguments_),d},loadExtraState:function(d){if(this.renameProcedure(this.getProcedureCall(),d.name),d=d.params){var T=[];T.length=d.length,T.fill(null),this.setProcedureParameters_(d,T)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(d){if(this.workspace&&!this.workspace.isFlyout&&d.recordUndo)if(d.type===_.module$exports$Blockly$Events.BLOCK_CREATE&&-1!==d.ids.indexOf(this.id)){var T=this.getProcedureCall();if(!(T=(0,_.module$exports$Blockly$Procedures.getDefinition)(T,this.workspace))||T.type===this.defType_&&JSON.stringify(T.getVars())===JSON.stringify(this.arguments_)||(T=null),!T){(0,_.module$exports$Blockly$Events.setGroup)(d.group),d=(0,_.module$exports$Blockly$utils$xml.createElement)("xml"),(T=(0,_.module$exports$Blockly$utils$xml.createElement)("block")).setAttribute("type",this.defType_);var E=this.getRelativeToSurfaceXY(),I=E.y+2*_.module$exports$Blockly$internalConstants.SNAP_RADIUS;T.setAttribute("x",E.x+_.module$exports$Blockly$internalConstants.SNAP_RADIUS*(this.RTL?-1:1)),T.setAttribute("y",I),E=this.mutationToDom(),T.appendChild(E),(E=(0,_.module$exports$Blockly$utils$xml.createElement)("field")).setAttribute("name","NAME"),(I=this.getProcedureCall())||(I=(0,_.module$exports$Blockly$Procedures.findLegalName)("",this),this.renameProcedure("",I)),E.appendChild((0,_.module$exports$Blockly$utils$xml.createTextNode)(I)),T.appendChild(E),d.appendChild(T),(0,_.module$exports$Blockly$Xml.domToWorkspace)(d,this.workspace),(0,_.module$exports$Blockly$Events.setGroup)(!1)}}else d.type===_.module$exports$Blockly$Events.BLOCK_DELETE?(T=this.getProcedureCall(),(0,_.module$exports$Blockly$Procedures.getDefinition)(T,this.workspace)||((0,_.module$exports$Blockly$Events.setGroup)(d.group),this.dispose(!0),(0,_.module$exports$Blockly$Events.setGroup)(!1))):d.type===_.module$exports$Blockly$Events.CHANGE&&"disabled"===d.element&&(T=this.getProcedureCall(),(T=(0,_.module$exports$Blockly$Procedures.getDefinition)(T,this.workspace))&&T.id===d.blockId&&((T=(0,_.module$exports$Blockly$Events.getGroup)())&&console.log("Saw an existing group while responding to a definition change"),(0,_.module$exports$Blockly$Events.setGroup)(d.group),d.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),(0,_.module$exports$Blockly$Events.setGroup)(T)))},customContextMenu:function(d){if(this.workspace.isMovable()){var T={enabled:!0};T.text=_.module$exports$Blockly$Msg.Msg.PROCEDURES_HIGHLIGHT_DEF;var E=this.getProcedureCall(),I=this.workspace;T.callback=function(){var M=(0,_.module$exports$Blockly$Procedures.getDefinition)(E,I);M&&(I.centerOnBlock(M.id),M.select())},d.push(T)}}};_.module$exports$Blockly$blocks.Blocks.procedures_callnoreturn=Object.assign({},at,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(_.module$exports$Blockly$Msg.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defnoreturn"}),_.module$exports$Blockly$blocks.Blocks.procedures_callreturn=Object.assign({},at,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(_.module$exports$Blockly$Msg.Msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defreturn"}),_.module$exports$Blockly$blocks.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(_.module$exports$Blockly$Msg.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(_.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(_.module$exports$Blockly$Msg.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(_.module$exports$Blockly$Msg.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var d=(0,_.module$exports$Blockly$utils$xml.createElement)("mutation");return d.setAttribute("value",Number(this.hasReturnValue_)),d},domToMutation:function(d){this.hasReturnValue_="1"===d.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(_.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(d){if(!this.workspace.isDragging||!this.workspace.isDragging()){d=!1;var T=this;do{if(-1!==this.FUNCTION_TYPES.indexOf(T.type)){d=!0;break}T=T.getSurroundParent()}while(T);d?("procedures_defnoreturn"===T.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(_.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!==T.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(_.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(_.module$exports$Blockly$Msg.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},(0,_.module$exports$Blockly$common.defineBlocksWithJsonArray)([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["\u03c0","PI"],["e","E"],["\u03c6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xbd)","SQRT1_2"],["\u221e","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),(0,_.module$exports$Blockly$Extensions.register)("math_op_tooltip",(0,_.module$exports$Blockly$Extensions.buildTooltipForDropdown)("OP",{ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"})),(0,_.module$exports$Blockly$Extensions.registerMutator)("math_is_divisibleby_mutator",{mutationToDom:function(){var d=(0,_.module$exports$Blockly$utils$xml.createElement)("mutation"),T="DIVISIBLE_BY"===this.getFieldValue("PROPERTY");return d.setAttribute("divisor_input",T),d},domToMutation:function(d){d="true"===d.getAttribute("divisor_input"),this.updateShape_(d)},updateShape_:function(d){var T=this.getInput("DIVISOR");d?T||this.appendValueInput("DIVISOR").setCheck("Number"):T&&this.removeInput("DIVISOR")}},function(){this.getField("PROPERTY").setValidator(function(d){d="DIVISIBLE_BY"===d,this.getSourceBlock().updateShape_(d)})}),(0,_.module$exports$Blockly$Extensions.register)("math_change_tooltip",(0,_.module$exports$Blockly$Extensions.buildTooltipWithFieldText)("%{BKY_MATH_CHANGE_TOOLTIP}","VAR")),(0,_.module$exports$Blockly$Extensions.registerMutator)("math_modes_of_list_mutator",{updateType_:function(d){this.outputConnection.setCheck("MODE"===d?"Array":"Number")},mutationToDom:function(){var d=(0,_.module$exports$Blockly$utils$xml.createElement)("mutation");return d.setAttribute("op",this.getFieldValue("OP")),d},domToMutation:function(d){this.updateType_(d.getAttribute("op"))}},function(){this.getField("OP").setValidator(function(d){this.updateType_(d)}.bind(this))});var Me={};(0,_.module$exports$Blockly$common.defineBlocksWithJsonArray)([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),(0,_.module$exports$Blockly$Extensions.register)("controls_whileUntil_tooltip",(0,_.module$exports$Blockly$Extensions.buildTooltipForDropdown)("MODE",{WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"})),(0,_.module$exports$Blockly$Extensions.register)("controls_flow_tooltip",(0,_.module$exports$Blockly$Extensions.buildTooltipForDropdown)("FLOW",{BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"}));var Mt={customContextMenu:function(d){if(!this.isInFlyout){var T=this.getField("VAR").getVariable(),E=T.name;if(!this.isCollapsed()&&null!==E){var I={enabled:!0};I.text=_.module$exports$Blockly$Msg.Msg.VARIABLES_SET_CREATE_GET.replace("%1",E),T=(0,_.module$exports$Blockly$Variables.generateVariableFieldDom)(T),(E=(0,_.module$exports$Blockly$utils$xml.createElement)("block")).setAttribute("type","variables_get"),E.appendChild(T),I.callback=(0,_.module$exports$Blockly$ContextMenu.callbackFactory)(this,E),d.push(I)}}}};(0,_.module$exports$Blockly$Extensions.registerMixin)("contextMenu_newGetVariableBlock",Mt),(0,_.module$exports$Blockly$Extensions.register)("controls_for_tooltip",(0,_.module$exports$Blockly$Extensions.buildTooltipWithFieldText)("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),(0,_.module$exports$Blockly$Extensions.register)("controls_forEach_tooltip",(0,_.module$exports$Blockly$Extensions.buildTooltipWithFieldText)("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),Me.loopTypes=["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"],(0,_.module$exports$Blockly$Extensions.registerMixin)("controls_flow_in_loop_check",{getSurroundLoop:function(){var d=this;do{if(Me.loopTypes.includes(d.type))return d;d=d.getSurroundParent()}while(d);return null},onchange:function(d){if(this.workspace.isDragging&&!this.workspace.isDragging()&&d.type===_.module$exports$Blockly$Events.BLOCK_MOVE){var T=this.getSurroundLoop(this);if(this.setWarningText(T?null:_.module$exports$Blockly$Msg.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){var E=(0,_.module$exports$Blockly$Events.getGroup)();(0,_.module$exports$Blockly$Events.setGroup)(d.group),this.setEnabled(T),(0,_.module$exports$Blockly$Events.setGroup)(E)}}}}),(0,_.module$exports$Blockly$common.defineBlocksWithJsonArray)([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["\u2260","NEQ"],["\u200f<","LT"],["\u200f\u2264","LTE"],["\u200f>","GT"],["\u200f\u2265","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),(0,_.module$exports$Blockly$Extensions.register)("logic_op_tooltip",(0,_.module$exports$Blockly$Extensions.buildTooltipForDropdown)("OP",{EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"}));var i={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var d=(0,_.module$exports$Blockly$utils$xml.createElement)("mutation");return this.elseifCount_&&d.setAttribute("elseif",this.elseifCount_),this.elseCount_&&d.setAttribute("else",1),d},domToMutation:function(d){this.elseifCount_=parseInt(d.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(d.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var d=Object.create(null);return this.elseifCount_&&(d.elseIfCount=this.elseifCount_),this.elseCount_&&(d.hasElse=!0),d},loadExtraState:function(d){this.elseifCount_=d.elseIfCount||0,this.elseCount_=d.hasElse?1:0,this.updateShape_()},decompose:function(d){var T=d.newBlock("controls_if_if");T.initSvg();for(var E=T.nextConnection,I=1;I<=this.elseifCount_;I++){var M=d.newBlock("controls_if_elseif");M.initSvg(),E.connect(M.previousConnection),E=M.nextConnection}return this.elseCount_&&((d=d.newBlock("controls_if_else")).initSvg(),E.connect(d.previousConnection)),T},compose:function(d){d=d.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;for(var T=[null],E=[null],I=null;d&&!d.isInsertionMarker();){switch(d.type){case"controls_if_elseif":this.elseifCount_++,T.push(d.valueConnection_),E.push(d.statementConnection_);break;case"controls_if_else":this.elseCount_++,I=d.statementConnection_;break;default:throw TypeError("Unknown block type: "+d.type)}d=d.nextConnection&&d.nextConnection.targetBlock()}this.updateShape_(),this.reconnectChildBlocks_(T,E,I)},saveConnections:function(d){d=d.nextConnection.targetBlock();for(var T=1;d;){switch(d.type){case"controls_if_elseif":var E=this.getInput("IF"+T),I=this.getInput("DO"+T);d.valueConnection_=E&&E.connection.targetConnection,d.statementConnection_=I&&I.connection.targetConnection,T++;break;case"controls_if_else":E=this.getInput("ELSE"),d.statementConnection_=E&&E.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+d.type)}d=d.nextConnection&&d.nextConnection.targetBlock()}},rebuildShape_:function(){var d=[null],T=[null],E=null;this.getInput("ELSE")&&(E=this.getInput("ELSE").connection.targetConnection);for(var I=1;this.getInput("IF"+I);I++){var M=this.getInput("IF"+I),X=this.getInput("DO"+I);d.push(M.connection.targetConnection),T.push(X.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(d,T,E)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var d=1;this.getInput("IF"+d);d++)this.removeInput("IF"+d),this.removeInput("DO"+d);for(d=1;d<=this.elseifCount_;d++)this.appendValueInput("IF"+d).setCheck("Boolean").appendField(_.module$exports$Blockly$Msg.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+d).appendField(_.module$exports$Blockly$Msg.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(_.module$exports$Blockly$Msg.Msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(d,T,E){for(var I=1;I<=this.elseifCount_;I++)_.module$exports$Blockly$Mutator.Mutator.reconnect(d[I],this,"IF"+I),_.module$exports$Blockly$Mutator.Mutator.reconnect(T[I],this,"DO"+I);_.module$exports$Blockly$Mutator.Mutator.reconnect(E,this,"ELSE")}};(0,_.module$exports$Blockly$Extensions.registerMutator)("controls_if_mutator",i,null,["controls_if_elseif","controls_if_else"]),(0,_.module$exports$Blockly$Extensions.register)("controls_if_tooltip",function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?_.module$exports$Blockly$Msg.Msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?_.module$exports$Blockly$Msg.Msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?_.module$exports$Blockly$Msg.Msg.CONTROLS_IF_TOOLTIP_4:"":_.module$exports$Blockly$Msg.Msg.CONTROLS_IF_TOOLTIP_1}.bind(this))});var a={onchange:function(d){this.prevBlocks_||(this.prevBlocks_=[null,null]);var T=this.getInputTargetBlock("A"),E=this.getInputTargetBlock("B");T&&E&&!this.workspace.connectionChecker.doTypeChecks(T.outputConnection,E.outputConnection)&&((0,_.module$exports$Blockly$Events.setGroup)(d.group),(d=this.prevBlocks_[0])!==T&&(T.unplug(),!d||d.isDisposed()||d.isShadow()||this.getInput("A").connection.connect(d.outputConnection)),(T=this.prevBlocks_[1])!==E&&(E.unplug(),!T||T.isDisposed()||T.isShadow()||this.getInput("B").connection.connect(T.outputConnection)),this.bumpNeighbours(),(0,_.module$exports$Blockly$Events.setGroup)(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}};return(0,_.module$exports$Blockly$Extensions.register)("logic_compare",function(){this.mixin(a)}),(0,_.module$exports$Blockly$Extensions.registerMixin)("logic_ternary",{prevParentConnection_:null,onchange:function(d){var T=this.getInputTargetBlock("THEN"),E=this.getInputTargetBlock("ELSE"),I=this.outputConnection.targetConnection;if((T||E)&&I)for(var M=0;2>M;M++){var X=1===M?T:E;X&&!X.workspace.connectionChecker.doTypeChecks(X.outputConnection,I)&&((0,_.module$exports$Blockly$Events.setGroup)(d.group),I===this.prevParentConnection_?(this.unplug(),I.getSourceBlock().bumpNeighbours()):(X.unplug(),X.bumpNeighbours()),(0,_.module$exports$Blockly$Events.setGroup)(!1))}this.prevParentConnection_=I}}),(0,_.module$exports$Blockly$common.defineBlocksWithJsonArray)([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),_.module$exports$Blockly$blocks.Blocks.lists_create_with={init:function(){this.setHelpUrl(_.module$exports$Blockly$Msg.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new _.module$exports$Blockly$Mutator.Mutator(["lists_create_with_item"])),this.setTooltip(_.module$exports$Blockly$Msg.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var d=(0,_.module$exports$Blockly$utils$xml.createElement)("mutation");return d.setAttribute("items",this.itemCount_),d},domToMutation:function(d){this.itemCount_=parseInt(d.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(d){this.itemCount_=d.itemCount,this.updateShape_()},decompose:function(d){var T=d.newBlock("lists_create_with_container");T.initSvg();for(var E=T.getInput("STACK").connection,I=0;I<this.itemCount_;I++){var M=d.newBlock("lists_create_with_item");M.initSvg(),E.connect(M.previousConnection),E=M.nextConnection}return T},compose:function(d){var T=d.getInputTargetBlock("STACK");for(d=[];T&&!T.isInsertionMarker();)d.push(T.valueConnection_),T=T.nextConnection&&T.nextConnection.targetBlock();for(T=0;T<this.itemCount_;T++){var E=this.getInput("ADD"+T).connection.targetConnection;E&&-1===d.indexOf(E)&&E.disconnect()}for(this.itemCount_=d.length,this.updateShape_(),T=0;T<this.itemCount_;T++)_.module$exports$Blockly$Mutator.Mutator.reconnect(d[T],this,"ADD"+T)},saveConnections:function(d){d=d.getInputTargetBlock("STACK");for(var T=0;d;){var E=this.getInput("ADD"+T);d.valueConnection_=E&&E.connection.targetConnection,d=d.nextConnection&&d.nextConnection.targetBlock(),T++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(_.module$exports$Blockly$Msg.Msg.LISTS_CREATE_EMPTY_TITLE);for(var d=0;d<this.itemCount_;d++)if(!this.getInput("ADD"+d)){var T=this.appendValueInput("ADD"+d).setAlign(_.module$exports$Blockly$Input.Align.RIGHT);0===d&&T.appendField(_.module$exports$Blockly$Msg.Msg.LISTS_CREATE_WITH_INPUT_WITH)}for(d=this.itemCount_;this.getInput("ADD"+d);d++)this.removeInput("ADD"+d)}},_.module$exports$Blockly$blocks.Blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(_.module$exports$Blockly$Msg.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(_.module$exports$Blockly$Msg.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},_.module$exports$Blockly$blocks.Blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(_.module$exports$Blockly$Msg.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(_.module$exports$Blockly$Msg.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},_.module$exports$Blockly$blocks.Blocks.lists_indexOf={init:function(){var d=[[_.module$exports$Blockly$Msg.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[_.module$exports$Blockly$Msg.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(_.module$exports$Blockly$Msg.Msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(_.module$exports$Blockly$Msg.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new _.module$exports$Blockly$FieldDropdown.FieldDropdown(d),"END"),this.setInputsInline(!0);var T=this;this.setTooltip(function(){return _.module$exports$Blockly$Msg.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",T.workspace.options.oneBasedIndex?"0":"-1")})}},_.module$exports$Blockly$blocks.Blocks.lists_getIndex={init:function(){var d=[[_.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_GET,"GET"],[_.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[_.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[_.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[_.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[_.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[_.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_LAST,"LAST"],[_.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(_.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),d=new _.module$exports$Blockly$FieldDropdown.FieldDropdown(d,function(E){E="REMOVE"===E,this.getSourceBlock().updateStatement_(E)}),this.appendValueInput("VALUE").setCheck("Array").appendField(_.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(d,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),_.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(_.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);var T=this;this.setTooltip(function(){var E=T.getFieldValue("MODE"),I=T.getFieldValue("WHERE"),M="";switch(E+" "+I){case"GET FROM_START":case"GET FROM_END":M=_.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":M=_.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":M=_.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":M=_.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":M=_.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":M=_.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":M=_.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":M=_.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":M=_.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":M=_.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":M=_.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":M=_.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return("FROM_START"===I||"FROM_END"===I)&&(M+="  "+("FROM_START"===I?_.module$exports$Blockly$Msg.Msg.LISTS_INDEX_FROM_START_TOOLTIP:_.module$exports$Blockly$Msg.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",T.workspace.options.oneBasedIndex?"#1":"#0")),M})},mutationToDom:function(){var d=(0,_.module$exports$Blockly$utils$xml.createElement)("mutation");d.setAttribute("statement",!this.outputConnection);var T=this.getInput("AT").type===_.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE;return d.setAttribute("at",T),d},domToMutation:function(d){var T="true"===d.getAttribute("statement");this.updateStatement_(T),d="false"!==d.getAttribute("at"),this.updateAt_(d)},updateStatement_:function(d){d!==!this.outputConnection&&(this.unplug(!0,!0),d?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(d){this.removeInput("AT"),this.removeInput("ORDINAL",!0),d?(this.appendValueInput("AT").setCheck("Number"),_.module$exports$Blockly$Msg.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(_.module$exports$Blockly$Msg.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var T=new _.module$exports$Blockly$FieldDropdown.FieldDropdown(this.WHERE_OPTIONS,function(E){var I="FROM_START"===E||"FROM_END"===E;if(I!==d){var M=this.getSourceBlock();return M.updateAt_(I),M.setFieldValue(E,"WHERE"),null}});this.getInput("AT").appendField(T,"WHERE"),_.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},_.module$exports$Blockly$blocks.Blocks.lists_setIndex={init:function(){var d=[[_.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_SET,"SET"],[_.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[_.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[_.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[_.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[_.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_LAST,"LAST"],[_.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(_.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(_.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new _.module$exports$Blockly$FieldDropdown.FieldDropdown(d),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(_.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(_.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);var T=this;this.setTooltip(function(){var E=T.getFieldValue("MODE"),I=T.getFieldValue("WHERE"),M="";switch(E+" "+I){case"SET FROM_START":case"SET FROM_END":M=_.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":M=_.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":M=_.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":M=_.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":M=_.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":M=_.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":M=_.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":M=_.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return("FROM_START"===I||"FROM_END"===I)&&(M+="  "+_.module$exports$Blockly$Msg.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",T.workspace.options.oneBasedIndex?"#1":"#0")),M})},mutationToDom:function(){var d=(0,_.module$exports$Blockly$utils$xml.createElement)("mutation"),T=this.getInput("AT").type===_.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE;return d.setAttribute("at",T),d},domToMutation:function(d){d="false"!==d.getAttribute("at"),this.updateAt_(d)},updateAt_:function(d){this.removeInput("AT"),this.removeInput("ORDINAL",!0),d?(this.appendValueInput("AT").setCheck("Number"),_.module$exports$Blockly$Msg.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(_.module$exports$Blockly$Msg.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var T=new _.module$exports$Blockly$FieldDropdown.FieldDropdown(this.WHERE_OPTIONS,function(E){var I="FROM_START"===E||"FROM_END"===E;if(I!==d){var M=this.getSourceBlock();return M.updateAt_(I),M.setFieldValue(E,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(T,"WHERE")}},_.module$exports$Blockly$blocks.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[_.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[_.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[_.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[_.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[_.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[_.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(_.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(_.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),_.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(_.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(_.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var d=(0,_.module$exports$Blockly$utils$xml.createElement)("mutation"),T=this.getInput("AT1").type===_.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE;return d.setAttribute("at1",T),T=this.getInput("AT2").type===_.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE,d.setAttribute("at2",T),d},domToMutation:function(d){var T="true"===d.getAttribute("at1");d="true"===d.getAttribute("at2"),this.updateAt_(1,T),this.updateAt_(2,d)},updateAt_:function(d,T){this.removeInput("AT"+d),this.removeInput("ORDINAL"+d,!0),T?(this.appendValueInput("AT"+d).setCheck("Number"),_.module$exports$Blockly$Msg.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+d).appendField(_.module$exports$Blockly$Msg.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+d);var E=new _.module$exports$Blockly$FieldDropdown.FieldDropdown(this["WHERE_OPTIONS_"+d],function(I){var M="FROM_START"===I||"FROM_END"===I;if(M!==T){var X=this.getSourceBlock();return X.updateAt_(d,M),X.setFieldValue(I,"WHERE"+d),null}});this.getInput("AT"+d).appendField(E,"WHERE"+d),1===d&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),_.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},_.module$exports$Blockly$blocks.Blocks.lists_sort={init:function(){this.jsonInit({message0:_.module$exports$Blockly$Msg.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[_.module$exports$Blockly$Msg.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[_.module$exports$Blockly$Msg.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[_.module$exports$Blockly$Msg.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[_.module$exports$Blockly$Msg.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[_.module$exports$Blockly$Msg.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:_.module$exports$Blockly$Msg.Msg.LISTS_SORT_TOOLTIP,helpUrl:_.module$exports$Blockly$Msg.Msg.LISTS_SORT_HELPURL})}},_.module$exports$Blockly$blocks.Blocks.lists_split={init:function(){var d=this,T=new _.module$exports$Blockly$FieldDropdown.FieldDropdown([[_.module$exports$Blockly$Msg.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[_.module$exports$Blockly$Msg.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(E){d.updateType_(E)});this.setHelpUrl(_.module$exports$Blockly$Msg.Msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(T,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(_.module$exports$Blockly$Msg.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){var E=d.getFieldValue("MODE");if("SPLIT"===E)return _.module$exports$Blockly$Msg.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"===E)return _.module$exports$Blockly$Msg.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+E)})},updateType_:function(d){if(this.getFieldValue("MODE")!==d){var T=this.getInput("INPUT").connection;T.setShadowDom(null);var E=T.targetBlock();E&&(T.disconnect(),E.isShadow()?E.dispose():this.bumpNeighbours())}"SPLIT"===d?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var d=(0,_.module$exports$Blockly$utils$xml.createElement)("mutation");return d.setAttribute("mode",this.getFieldValue("MODE")),d},domToMutation:function(d){this.updateType_(d.getAttribute("mode"))}},(0,_.module$exports$Blockly$common.defineBlocksWithJsonArray)([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),_.Blockly.Blocks}),Blockly.Msg.ADD_COMMENT="Add Comment",Blockly.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",Blockly.Msg.CHANGE_VALUE_TITLE="Change value:",Blockly.Msg.CLEAN_UP="Clean up Blocks",Blockly.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",Blockly.Msg.COLLAPSE_ALL="Collapse Blocks",Blockly.Msg.COLLAPSE_BLOCK="Collapse Block",Blockly.Msg.COLOUR_BLEND_COLOUR1="colour 1",Blockly.Msg.COLOUR_BLEND_COLOUR2="colour 2",Blockly.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",Blockly.Msg.COLOUR_BLEND_RATIO="ratio",Blockly.Msg.COLOUR_BLEND_TITLE="blend",Blockly.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",Blockly.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",Blockly.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",Blockly.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",Blockly.Msg.COLOUR_RANDOM_TITLE="random colour",Blockly.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",Blockly.Msg.COLOUR_RGB_BLUE="blue",Blockly.Msg.COLOUR_RGB_GREEN="green",Blockly.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",Blockly.Msg.COLOUR_RGB_RED="red",Blockly.Msg.COLOUR_RGB_TITLE="colour with",Blockly.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",Blockly.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",Blockly.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",Blockly.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",Blockly.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",Blockly.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",Blockly.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",Blockly.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",Blockly.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",Blockly.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",Blockly.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",Blockly.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",Blockly.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",Blockly.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",Blockly.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",Blockly.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",Blockly.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",Blockly.Msg.CONTROLS_IF_MSG_ELSE="else",Blockly.Msg.CONTROLS_IF_MSG_ELSEIF="else if",Blockly.Msg.CONTROLS_IF_MSG_IF="if",Blockly.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",Blockly.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",Blockly.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",Blockly.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",Blockly.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",Blockly.Msg.CONTROLS_REPEAT_INPUT_DO="do",Blockly.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",Blockly.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",Blockly.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",Blockly.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",Blockly.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",Blockly.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",Blockly.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",Blockly.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",Blockly.Msg.DELETE_BLOCK="Delete Block",Blockly.Msg.DELETE_VARIABLE="Delete the '%1' variable",Blockly.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",Blockly.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",Blockly.Msg.DIALOG_CANCEL="Cancel",Blockly.Msg.DIALOG_OK="OK",Blockly.Msg.DISABLE_BLOCK="Disable Block",Blockly.Msg.DUPLICATE_BLOCK="Duplicate",Blockly.Msg.DUPLICATE_COMMENT="Duplicate Comment",Blockly.Msg.ENABLE_BLOCK="Enable Block",Blockly.Msg.EXPAND_ALL="Expand Blocks",Blockly.Msg.EXPAND_BLOCK="Expand Block",Blockly.Msg.EXTERNAL_INPUTS="External Inputs",Blockly.Msg.HELP="Help",Blockly.Msg.INLINE_INPUTS="Inline Inputs",Blockly.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",Blockly.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",Blockly.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",Blockly.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",Blockly.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",Blockly.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",Blockly.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",Blockly.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",Blockly.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",Blockly.Msg.LISTS_GET_INDEX_FIRST="first",Blockly.Msg.LISTS_GET_INDEX_FROM_END="# from end",Blockly.Msg.LISTS_GET_INDEX_FROM_START="#",Blockly.Msg.LISTS_GET_INDEX_GET="get",Blockly.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",Blockly.Msg.LISTS_GET_INDEX_LAST="last",Blockly.Msg.LISTS_GET_INDEX_RANDOM="random",Blockly.Msg.LISTS_GET_INDEX_REMOVE="remove",Blockly.Msg.LISTS_GET_INDEX_TAIL="",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",Blockly.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",Blockly.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",Blockly.Msg.LISTS_GET_SUBLIST_END_LAST="to last",Blockly.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",Blockly.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",Blockly.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",Blockly.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",Blockly.Msg.LISTS_GET_SUBLIST_TAIL="",Blockly.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",Blockly.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",Blockly.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",Blockly.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",Blockly.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",Blockly.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",Blockly.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",Blockly.Msg.LISTS_INLIST="in list",Blockly.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",Blockly.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",Blockly.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",Blockly.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",Blockly.Msg.LISTS_LENGTH_TITLE="length of %1",Blockly.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",Blockly.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",Blockly.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",Blockly.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",Blockly.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",Blockly.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",Blockly.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",Blockly.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",Blockly.Msg.LISTS_SET_INDEX_INPUT_TO="as",Blockly.Msg.LISTS_SET_INDEX_INSERT="insert at",Blockly.Msg.LISTS_SET_INDEX_SET="set",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",Blockly.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",Blockly.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",Blockly.Msg.LISTS_SORT_ORDER_DESCENDING="descending",Blockly.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",Blockly.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",Blockly.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",Blockly.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",Blockly.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",Blockly.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",Blockly.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",Blockly.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",Blockly.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",Blockly.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",Blockly.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",Blockly.Msg.LOGIC_BOOLEAN_FALSE="false",Blockly.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",Blockly.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",Blockly.Msg.LOGIC_BOOLEAN_TRUE="true",Blockly.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",Blockly.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",Blockly.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",Blockly.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",Blockly.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",Blockly.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",Blockly.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",Blockly.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",Blockly.Msg.LOGIC_NEGATE_TITLE="not %1",Blockly.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",Blockly.Msg.LOGIC_NULL="null",Blockly.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",Blockly.Msg.LOGIC_NULL_TOOLTIP="Returns null.",Blockly.Msg.LOGIC_OPERATION_AND="and",Blockly.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",Blockly.Msg.LOGIC_OPERATION_OR="or",Blockly.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",Blockly.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",Blockly.Msg.LOGIC_TERNARY_CONDITION="test",Blockly.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",Blockly.Msg.LOGIC_TERNARY_IF_FALSE="if false",Blockly.Msg.LOGIC_TERNARY_IF_TRUE="if true",Blockly.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",Blockly.Msg.MATH_ADDITION_SYMBOL="+",Blockly.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",Blockly.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",Blockly.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",Blockly.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",Blockly.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",Blockly.Msg.MATH_CHANGE_TITLE="change %1 by %2",Blockly.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",Blockly.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",Blockly.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: \u03c0 (3.141\u2026), e (2.718\u2026), \u03c6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xbd) (0.707\u2026), or \u221e (infinity).",Blockly.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",Blockly.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",Blockly.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",Blockly.Msg.MATH_DIVISION_SYMBOL="\xf7",Blockly.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",Blockly.Msg.MATH_IS_EVEN="is even",Blockly.Msg.MATH_IS_NEGATIVE="is negative",Blockly.Msg.MATH_IS_ODD="is odd",Blockly.Msg.MATH_IS_POSITIVE="is positive",Blockly.Msg.MATH_IS_PRIME="is prime",Blockly.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",Blockly.Msg.MATH_IS_WHOLE="is whole",Blockly.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",Blockly.Msg.MATH_MODULO_TITLE="remainder of %1 \xf7 %2",Blockly.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",Blockly.Msg.MATH_MULTIPLICATION_SYMBOL="\xd7",Blockly.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",Blockly.Msg.MATH_NUMBER_TOOLTIP="A number.",Blockly.Msg.MATH_ONLIST_HELPURL="",Blockly.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",Blockly.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",Blockly.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",Blockly.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",Blockly.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",Blockly.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",Blockly.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",Blockly.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",Blockly.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",Blockly.Msg.MATH_POWER_SYMBOL="^",Blockly.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",Blockly.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",Blockly.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",Blockly.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",Blockly.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",Blockly.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",Blockly.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",Blockly.Msg.MATH_ROUND_OPERATOR_ROUND="round",Blockly.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",Blockly.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",Blockly.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",Blockly.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",Blockly.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",Blockly.Msg.MATH_SINGLE_OP_ROOT="square root",Blockly.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",Blockly.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",Blockly.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",Blockly.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",Blockly.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",Blockly.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",Blockly.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",Blockly.Msg.MATH_SUBTRACTION_SYMBOL="-",Blockly.Msg.MATH_TRIG_ACOS="acos",Blockly.Msg.MATH_TRIG_ASIN="asin",Blockly.Msg.MATH_TRIG_ATAN="atan",Blockly.Msg.MATH_TRIG_COS="cos",Blockly.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",Blockly.Msg.MATH_TRIG_SIN="sin",Blockly.Msg.MATH_TRIG_TAN="tan",Blockly.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",Blockly.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",Blockly.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",Blockly.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",Blockly.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",Blockly.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",Blockly.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",Blockly.Msg.NEW_NUMBER_VARIABLE="Create number variable...",Blockly.Msg.NEW_STRING_VARIABLE="Create string variable...",Blockly.Msg.NEW_VARIABLE="Create variable...",Blockly.Msg.NEW_VARIABLE_TITLE="New variable name:",Blockly.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",Blockly.Msg.ORDINAL_NUMBER_SUFFIX="",Blockly.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",Blockly.Msg.PROCEDURES_BEFORE_PARAMS="with:",Blockly.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",Blockly.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",Blockly.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",Blockly.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",Blockly.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",Blockly.Msg.PROCEDURES_CREATE_DO="Create '%1'",Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",Blockly.Msg.PROCEDURES_DEFNORETURN_DO="",Blockly.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",Blockly.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",Blockly.Msg.PROCEDURES_DEFNORETURN_TITLE="to",Blockly.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",Blockly.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",Blockly.Msg.PROCEDURES_DEFRETURN_RETURN="return",Blockly.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",Blockly.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",Blockly.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",Blockly.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",Blockly.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",Blockly.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",Blockly.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",Blockly.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",Blockly.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",Blockly.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",Blockly.Msg.REDO="Redo",Blockly.Msg.REMOVE_COMMENT="Remove Comment",Blockly.Msg.RENAME_VARIABLE="Rename variable...",Blockly.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",Blockly.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",Blockly.Msg.TEXT_APPEND_TITLE="to %1 append text %2",Blockly.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",Blockly.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",Blockly.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",Blockly.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",Blockly.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",Blockly.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",Blockly.Msg.TEXT_CHARAT_FIRST="get first letter",Blockly.Msg.TEXT_CHARAT_FROM_END="get letter # from end",Blockly.Msg.TEXT_CHARAT_FROM_START="get letter #",Blockly.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",Blockly.Msg.TEXT_CHARAT_LAST="get last letter",Blockly.Msg.TEXT_CHARAT_RANDOM="get random letter",Blockly.Msg.TEXT_CHARAT_TAIL="",Blockly.Msg.TEXT_CHARAT_TITLE="in text %1 %2",Blockly.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",Blockly.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",Blockly.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",Blockly.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",Blockly.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",Blockly.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",Blockly.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",Blockly.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",Blockly.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",Blockly.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",Blockly.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",Blockly.Msg.TEXT_GET_SUBSTRING_TAIL="",Blockly.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",Blockly.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",Blockly.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",Blockly.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",Blockly.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",Blockly.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",Blockly.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",Blockly.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",Blockly.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",Blockly.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",Blockly.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",Blockly.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",Blockly.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",Blockly.Msg.TEXT_LENGTH_TITLE="length of %1",Blockly.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",Blockly.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",Blockly.Msg.TEXT_PRINT_TITLE="print %1",Blockly.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",Blockly.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",Blockly.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",Blockly.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",Blockly.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",Blockly.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",Blockly.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",Blockly.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",Blockly.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",Blockly.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",Blockly.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",Blockly.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",Blockly.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",Blockly.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",Blockly.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",Blockly.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",Blockly.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",Blockly.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",Blockly.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",Blockly.Msg.TODAY="Today",Blockly.Msg.UNDO="Undo",Blockly.Msg.UNNAMED_KEY="unnamed",Blockly.Msg.VARIABLES_DEFAULT_NAME="item",Blockly.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",Blockly.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",Blockly.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",Blockly.Msg.VARIABLES_SET="set %1 to %2",Blockly.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",Blockly.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",Blockly.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",Blockly.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",Blockly.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",Blockly.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",Blockly.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",Blockly.Msg.CONTROLS_FOREACH_INPUT_DO=Blockly.Msg.CONTROLS_REPEAT_INPUT_DO,Blockly.Msg.CONTROLS_FOR_INPUT_DO=Blockly.Msg.CONTROLS_REPEAT_INPUT_DO,Blockly.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=Blockly.Msg.CONTROLS_IF_MSG_ELSEIF,Blockly.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=Blockly.Msg.CONTROLS_IF_MSG_ELSE,Blockly.Msg.CONTROLS_IF_IF_TITLE_IF=Blockly.Msg.CONTROLS_IF_MSG_IF,Blockly.Msg.CONTROLS_IF_MSG_THEN=Blockly.Msg.CONTROLS_REPEAT_INPUT_DO,Blockly.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=Blockly.Msg.CONTROLS_REPEAT_INPUT_DO,Blockly.Msg.LISTS_CREATE_WITH_ITEM_TITLE=Blockly.Msg.VARIABLES_DEFAULT_NAME,Blockly.Msg.LISTS_GET_INDEX_HELPURL=Blockly.Msg.LISTS_INDEX_OF_HELPURL,Blockly.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=Blockly.Msg.LISTS_INLIST,Blockly.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=Blockly.Msg.LISTS_INLIST,Blockly.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=Blockly.Msg.LISTS_INLIST,Blockly.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=Blockly.Msg.LISTS_INLIST,Blockly.Msg.MATH_CHANGE_TITLE_ITEM=Blockly.Msg.VARIABLES_DEFAULT_NAME,Blockly.Msg.PROCEDURES_DEFRETURN_COMMENT=Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT,Blockly.Msg.PROCEDURES_DEFRETURN_DO=Blockly.Msg.PROCEDURES_DEFNORETURN_DO,Blockly.Msg.PROCEDURES_DEFRETURN_PROCEDURE=Blockly.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,Blockly.Msg.PROCEDURES_DEFRETURN_TITLE=Blockly.Msg.PROCEDURES_DEFNORETURN_TITLE,Blockly.Msg.TEXT_APPEND_VARIABLE=Blockly.Msg.VARIABLES_DEFAULT_NAME,Blockly.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=Blockly.Msg.VARIABLES_DEFAULT_NAME,Blockly.Msg.MATH_HUE="230",Blockly.Msg.LOOPS_HUE="120",Blockly.Msg.LISTS_HUE="260",Blockly.Msg.LOGIC_HUE="210",Blockly.Msg.VARIABLES_HUE="330",Blockly.Msg.TEXTS_HUE="160",Blockly.Msg.PROCEDURES_HUE="290",Blockly.Msg.COLOUR_HUE="20",Blockly.Msg.VARIABLES_DYNAMIC_HUE="310",function(){var l=function(){var n=function(){};n.prototype={p:{}};var i=new n;if(!i.__proto__||i.__proto__.p!==n.prototype.p)return!1;try{if(typeof navigator<"u"&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Chrome/")>=0)return!0;if("function"==typeof version&&0==version.length){var s=version();if(/^\d+\.\d+\.\d+\.\d+$/.test(s))return!0}}catch{}return!1}();function _(n){return(n=Object.create(null)).x=0,delete n.x,n}var fo=_(),Ye=_(),P=_(),ht=_(),Vt=_(),je=_(),pn=_(),u=_(),$=_(),cn=_(),tt=_(),yo=_(),Po=_(),ot=_(),g=_(),dn=_(),_n=_(),xn=_(),gn=_(),at=_(),Fo=_(),Tt=_(),pe=_(),mo=_(),an=_();function Bt(){}O(),Bt.t=function(){};var Go=[["","",,u,{"^":"",iK:{"^":"b;a"}}],["","",,$,{"^":"",j:function(n){},bh:function(n,i,s,a){return{i:n,p:i,e:s,x:a}},be:function(n){var i,s,a,p,y;if(null==(i=n[O.dispatchPropertyName])&&null==w.bR&&(u.hT(),i=n[O.dispatchPropertyName]),null!=i){if(!1===(s=i.p))return i.i;if(!0===s)return n;if(s===(a=Object.getPrototypeOf(n)))return i.i;if(i.e===a)throw u.c(new g.cR("Return interceptor for "+u.a(s(n,i))))}return null!=(y=null==(p=n.constructor)?null:p[w.$get$bo()])||null!=(y=u.i2(n))?y:"function"==typeof n?P.y:null==(s=Object.getPrototypeOf(n))||s===Object.prototype?P.m:("function"==typeof p&&Object.defineProperty(p,w.$get$bo(),{value:P.e,enumerable:!1,writable:!0,configurable:!0}),P.e)},d:{"^":"b;",m:function(n,i){return n===i},gp:function(n){return u.Y(n)},i:["cu",function(n){return u.b2(n)}],aS:["ct",function(n,i){throw u.c(g.cl(n,i.gbR(),i.gbW(),i.gbS(),null))}],"%":"CanvasGradient|CanvasPattern|DOMError|FileError|MediaError|MediaKeyError|NavigatorUserMediaError|PositionError|PushMessageData|SQLError|SVGAnimatedLength|SVGAnimatedLengthList|SVGAnimatedNumber|SVGAnimatedNumberList|SVGAnimatedString|WebGLRenderingContext"},ew:{"^":"d;",i:function(n){return String(n)},gp:function(n){return n?519018:218159},$ishH:1},ez:{"^":"d;",m:function(n,i){return null==i},i:function(n){return"null"},gp:function(n){return 0},aS:function(n,i){return this.ct(n,i)}},bp:{"^":"d;",gp:function(n){return 0},i:["cv",function(n){return String(n)}],$iseA:1},eV:{"^":"bp;"},aK:{"^":"bp;"},aC:{"^":"bp;",i:function(n){var i=n[w.$get$aU()];return null==i?this.cv(n):$.a3(i)},$isbn:1,$signature:function(){return{func:1,opt:[,,,,,,,,,,,,,,,,]}}},az:{"^":"d;$ti",bI:function(n,i){if(n.immutable$list)throw u.c(new g.q(i))},aN:function(n,i){if(n.fixed$length)throw u.c(new g.q(i))},v:function(n,i){this.aN(n,"add"),n.push(i)},bD:function(n,i){var s;for(this.aN(n,"addAll"),s=$.aR(i);s.q();)n.push(s.gt())},a1:function(n,i){return new u.b0(n,i,[null,null])},dO:function(n,i){var s,a,p,y;for(s=n.length,(a=new Array(s)).fixed$length=Array,p=0;p<n.length;++p){if(y=u.a(n[p]),p>=s)return u.e(a,p);a[p]=y}return a.join(i)},J:function(n,i){return i<0||i>=n.length?u.e(n,i):n[i]},gdz:function(n){if(n.length>0)return n[0];throw u.c(u.cb())},b1:function(n,i,s,a,p){var y,m,v;if(this.bI(n,"set range"),g.cw(i,s,n.length,null,null,null),0!=(y=s-i)){if(p<0&&u.p(g.Z(p,0,null,"skipCount",null)),p+y>a.length)throw u.c(u.eu());if(p<i)for(m=y-1;m>=0;--m){if((v=p+m)<0||v>=a.length)return u.e(a,v);n[i+m]=a[v]}else for(m=0;m<y;++m){if((v=p+m)<0||v>=a.length)return u.e(a,v);n[i+m]=a[v]}}},i:function(n){return g.aZ(n,"[","]")},gA:function(n){return new $.dS(n,n.length,0,null)},gp:function(n){return u.Y(n)},gk:function(n){return n.length},sk:function(n,i){if(this.aN(n,"set length"),i<0)throw u.c(g.Z(i,0,null,"newLength",null));n.length=i},h:function(n,i){if("number"!=typeof i||Math.floor(i)!==i||i>=n.length||i<0)throw u.c(u.r(n,i));return n[i]},n:function(n,i,s){if(this.bI(n,"indexed set"),"number"!=typeof i||Math.floor(i)!==i||i>=n.length||i<0)throw u.c(u.r(n,i));n[i]=s},$isD:1,$asD:Bt.t,$isi:1,$asi:null,$ish:1,$ash:null},iJ:{"^":"az;$ti"},dS:{"^":"b;a,b,c,d",gt:function(){return this.d},q:function(){var n,i,s;if(this.b!==(i=(n=this.a).length))throw u.c(u.aQ(n));return(s=this.c)>=i?(this.d=null,!1):(this.d=n[s],this.c=s+1,!0)}},aA:{"^":"d;",ap:function(n){if(n>=-2147483648&&n<=2147483647)return 0|n;if(isFinite(n))return(n<0?Math.ceil(n):Math.floor(n))+0;throw u.c(new g.q(n+".toInt()"))},aV:function(n){if(n>0){if(n!==1/0)return Math.round(n)}else if(n>-1/0)return 0-Math.round(0-n);throw u.c(new g.q(n+".round()"))},aY:function(n){return n},i:function(n){return 0===n&&1/n<0?"-0.0":""+n},gp:function(n){return 536870911&n},K:function(n,i){if("number"!=typeof i)throw u.c(u.w(i));return n+i},W:function(n,i){if("number"!=typeof i)throw u.c(u.w(i));return n-i},U:function(n,i){if("number"!=typeof i)throw u.c(u.w(i));return n*i},cd:function(n,i){var s;if("number"!=typeof i)throw u.c(u.w(i));return 0==(s=n%i)?0:s>0?s:i<0?s-i:s+i},at:function(n,i){return(0|n)===n&&i>=1?n/i|0:this.bz(n,i)},Z:function(n,i){return(0|n)===n?n/i|0:this.bz(n,i)},bz:function(n,i){var s=n/i;if(s>=-2147483648&&s<=2147483647)return 0|s;if(s>0){if(s!==1/0)return Math.floor(s)}else if(s>-1/0)return Math.ceil(s);throw u.c(new g.q("Result of truncating division is "+u.a(s)+": "+u.a(n)+" ~/ "+i))},cq:function(n,i){if(i<0)throw u.c(u.w(i));return i>31?0:n<<i>>>0},cr:function(n,i){if(i<0)throw u.c(u.w(i));return n>0?i>31?0:n>>>i:n>>(i>31?31:i)>>>0},N:function(n,i){return n>0?i>31?0:n>>>i:n>>(i>31?31:i)>>>0},cC:function(n,i){if("number"!=typeof i)throw u.c(u.w(i));return(n^i)>>>0},a2:function(n,i){if("number"!=typeof i)throw u.c(u.w(i));return n<i},ar:function(n,i){if("number"!=typeof i)throw u.c(u.w(i));return n>i},$isaP:1},cc:{"^":"aA;",$isaP:1,$isk:1},ex:{"^":"aA;",$isaP:1},aB:{"^":"d;",bJ:function(n,i){if(i>=n.length)throw u.c(u.r(n,i));return n.charCodeAt(i)},K:function(n,i){if("string"!=typeof i)throw u.c(g.bZ(i,null,null));return n+i},a3:function(n,i,s){var a;if(("number"!=typeof i||Math.floor(i)!==i)&&u.p(u.w(i)),null==s&&(s=n.length),("number"!=typeof s||Math.floor(s)!==s)&&u.p(u.w(s)),(a=$.I(i)).a2(i,0)||a.ar(i,s))throw u.c(g.b3(i,null,null));if($.du(s,n.length))throw u.c(g.b3(s,null,null));return n.substring(i,s)},cs:function(n,i){return this.a3(n,i,null)},i:function(n){return n},gp:function(n){var i,s,a;for(i=n.length,s=0,a=0;a<i;++a)s=536870911&(s=536870911&s+n.charCodeAt(a))+((524287&s)<<10),s^=s>>6;return s=536870911&s+((67108863&s)<<3),536870911&(s^=s>>11)+((16383&s)<<15)},gk:function(n){return n.length},h:function(n,i){if("number"!=typeof i||Math.floor(i)!==i||i>=n.length||i<0)throw u.c(u.r(n,i));return n[i]},$isD:1,$asD:Bt.t,$isH:1}}],["","",,u,{"^":"",cb:function(){return new g.b6("No element")},eu:function(){return new g.b6("Too few elements")},h:{"^":"K;$ti",$ash:null},aE:{"^":"h;$ti",gA:function(n){return new u.cd(this,this.gk(this),0,null)},a1:function(n,i){return new u.b0(this,i,[u.x(this,"aE",0),null])},b_:function(n,i){var s,a,p;for(s=u.G([],[u.x(this,"aE",0)]),P.c.sk(s,this.gk(this)),a=0;a<this.gk(this);++a){if(p=this.J(0,a),a>=s.length)return u.e(s,a);s[a]=p}return s},aZ:function(n){return this.b_(n,!0)}},cd:{"^":"b;a,b,c,d",gt:function(){return this.d},q:function(){var n,i,s,a;if(s=(i=$.F(n=this.a)).gk(n),this.b!==s)throw u.c(new g.ah(n));return(a=this.c)>=s?(this.d=null,!1):(this.d=i.J(n,a),++this.c,!0)}},ce:{"^":"K;a,b,$ti",gA:function(n){return new u.eP(null,$.aR(this.a),this.b,this.$ti)},gk:function(n){return $.at(this.a)},$asK:function(n,i){return[i]},l:{b_:function(n,i,s,a){return $.j(n).$ish?new u.c4(n,i,[s,a]):new u.ce(n,i,[s,a])}}},c4:{"^":"ce;a,b,$ti",$ish:1,$ash:function(n,i){return[i]}},eP:{"^":"ev;a,b,c,$ti",q:function(){var n=this.b;return n.q()?(this.a=this.c.$1(n.gt()),!0):(this.a=null,!1)},gt:function(){return this.a}},b0:{"^":"aE;a,b,$ti",gk:function(n){return $.at(this.a)},J:function(n,i){return this.b.$1($.dE(this.a,i))},$asaE:function(n,i){return[i]},$ash:function(n,i){return[i]},$asK:function(n,i){return[i]}},c8:{"^":"b;$ti",sk:function(n,i){throw u.c(new g.q("Cannot change the length of a fixed-length list"))},v:function(n,i){throw u.c(new g.q("Cannot add to a fixed-length list"))}},bx:{"^":"b;d_:a<",m:function(n,i){return null!=i&&i instanceof u.bx&&$.R(this.a,i.a)},gp:function(n){var i,s;return(i=this._hashCode)??("number"!=typeof(s=$.N(this.a))?u.n(s):(this._hashCode=i=536870911&664597*s,i))},i:function(n){return'Symbol("'+u.a(this.a)+'")'}}}],["","",,u,{"^":"",aN:function(n,i){var s=n.a9(i);return O.globalState.d.cy||O.globalState.f.ag(),s},dr:function(n,i){var s,a,p,y,m,v,R,d;if((s={}).a=i,null==i&&(s.a=i=[]),!$.j(a=i).$isi)throw u.c(g.au("Arguments to main must be a List: "+u.a(a)));a=O.globalState=new u.h6(0,0,1,null,null,null,null,null,null,null,null,null,n),p=null==self.window,y=self.Worker,m=p&&!!self.postMessage,a.x=m,y=!(m=!m)||null!=y&&null!=w.$get$c9(),a.y=y,a.r=p&&m,a.f=new u.fC(g.bt(null,u.aM),0),a.z=new u.U(0,null,null,null,null,null,0,[p=g.k,u.bD]),a.ch=new u.U(0,null,null,null,null,null,0,[p,null]),!0===a.x&&(y=new u.h5,a.Q=y,self.onmessage=(R=u.en,d=y,function(T){R(d,T)}),self.dartPrint=self.dartPrint||function(R){return function(d){self.console&&self.console.log?self.console.log(d):self.postMessage(R(d))}}(u.h7)),!0!==O.globalState.x&&(a=O.globalState.a++,y=new u.U(0,null,null,null,null,null,0,[p,u.b4]),p=g.ai(null,null,null,p),m=new u.b4(0,null,!1),v=new u.bD(a,y,p,O.createNewIsolate(),m,new u.a5(u.bi()),new u.a5(u.bi()),!1,!1,[],g.ai(null,null,null,null),null,null,!1,!0,g.ai(null,null,null,null)),p.v(0,0),v.b5(0,m),O.globalState.e=v,O.globalState.d=v,a=u.ap(),u.a1(a,[a]).H(n)?v.a9(new u.i7(s,n)):u.a1(a,[a,a]).H(n)?v.a9(new u.i8(s,n)):v.a9(n),O.globalState.f.ag())},er:function(){var n=O.currentScript;return null!=n?String(n.src):!0===O.globalState.x?u.es():void 0},es:function(){var n,i;if(null==(n=(new Error).stack)&&null==(n=function(){try{throw new Error}catch(s){return s.stack}}()))throw u.c(new g.q("No stack trace"));if(null!=(i=n.match(new RegExp("^ *at [^(]*\\((.*):[0-9]*:[0-9]*\\)$","m")))||null!=(i=n.match(new RegExp("^[^@]*@(.*):[0-9]*$","m"))))return i[1];throw u.c(new g.q('Cannot extract URI from "'+u.a(n)+'"'))},en:[function(n,i){var s,a,p,y,m,v,R,d,T,E,I,M,X;switch(s=new u.b9(!0,[]).P(i.data),(a=$.F(s)).h(s,"command")){case"start":O.globalState.b=a.h(s,"id"),y=null==(p=a.h(s,"functionName"))?O.globalState.cx:O.globalFunctions[p](),m=a.h(s,"args"),v=new u.b9(!0,[]).P(a.h(s,"msg")),R=a.h(s,"isSpawnUri"),d=a.h(s,"startPaused"),T=new u.b9(!0,[]).P(a.h(s,"replyTo")),a=O.globalState.a++,I=new u.U(0,null,null,null,null,null,0,[E=g.k,u.b4]),E=g.ai(null,null,null,E),M=new u.b4(0,null,!1),X=new u.bD(a,I,E,O.createNewIsolate(),M,new u.a5(u.bi()),new u.a5(u.bi()),!1,!1,[],g.ai(null,null,null,null),null,null,!1,!0,g.ai(null,null,null,null)),E.v(0,0),X.b5(0,M),O.globalState.f.a.F(new u.aM(X,new u.eo(y,m,v,R,d,T),"worker-start")),O.globalState.d=X,O.globalState.f.ag();break;case"spawn-worker":break;case"message":null!=a.h(s,"port")&&a.h(s,"port").L(a.h(s,"msg")),O.globalState.f.ag();break;case"close":O.globalState.ch.af(0,w.$get$ca().h(0,n)),n.terminate(),O.globalState.f.ag();break;case"log":u.em(a.h(s,"msg"));break;case"print":!0===O.globalState.x?(a=O.globalState.Q,E=g.V(["command","print","msg",s]),E=new u.aa(!0,g.aj(null,g.k)).B(E),self.postMessage(E)):g.aq(a.h(s,"msg"));break;case"error":throw u.c(a.h(s,"msg"))}},null,null,4,0,null,10,5],em:function(n){var i,a;if(!0===O.globalState.x)a=g.V(["command","log","msg",n]),a=new u.aa(!0,g.aj(null,g.k)).B(a),self.postMessage(a);else try{self.console.log(n)}catch(y){throw u.z(y),i=u.B(y),u.c(g.aW(i))}},ep:function(n,i,s,a,p,y){var m,v,R,d;w.cq=w.cq+"_"+(v=(m=O.globalState.d).a),w.cr=w.cr+"_"+v,d=m.f,y.L(["spawned",new u.bc(v=m.e,R=O.globalState.d.a),d,m.r]),R=new u.eq(n,i,s,a,m),!0===p?(m.bE(d,d),O.globalState.f.a.F(new u.aM(m,R,"start isolate"))):R.$0()},hl:function(n){return new u.b9(!0,[]).P(new u.aa(!1,g.aj(null,g.k)).B(n))},i7:{"^":"f:0;a,b",$0:function(){this.b.$1(this.a.a)}},i8:{"^":"f:0;a,b",$0:function(){this.b.$2(this.a.a,null)}},h6:{"^":"b;a,b,c,d,e,f,r,x,y,z,Q,ch,cx",l:{h7:[function(n){var i=g.V(["command","print","msg",n]);return new u.aa(!0,g.aj(null,g.k)).B(i)},null,null,2,0,null,4]}},bD:{"^":"b;a,b,c,dN:d<,df:e<,f,r,dJ:x?,aP:y<,di:z<,Q,ch,cx,cy,db,dx",bE:function(n,i){!this.f.m(0,n)||(this.Q.v(0,i)&&!this.y&&(this.y=!0),this.aL())},dW:function(n){var i,s,a,p,y,m;if(this.y){if((i=this.Q).af(0,n),0===i.a){for(i=this.z;0!==(s=i.length);){if(0>=s)return u.e(i,-1);if(a=i.pop(),(s=O.globalState.f.a).b=p=((p=s.b)-1&(m=(y=s.a).length)-1)>>>0,p<0||p>=m)return u.e(y,p);y[p]=a,p===s.c&&s.bh(),++s.d}this.y=!1}this.aL()}},d9:function(n,i){var s,a,p;for(null==this.ch&&(this.ch=[]),s=$.j(n),a=0;a<(p=this.ch).length;a+=2)if(s.m(n,p[a]))return(p=a+1)>=(s=this.ch).length?u.e(s,p):void(s[p]=i);p.push(n),this.ch.push(i)},dV:function(n){var i,s,a;if(null!=this.ch)for(i=$.j(n),s=0;s<(a=this.ch).length;s+=2)if(i.m(n,a[s]))return a=s+2,("object"!=typeof(i=this.ch)||null===i||!!i.fixed$length)&&u.p(new g.q("removeRange")),g.cw(s,a,i.length,null,null,null),void i.splice(s,a-s)},cp:function(n,i){!this.r.m(0,n)||(this.db=i)},dD:function(n,i,s){var a=$.j(i);(a=!!a.m(i,0)||a.m(i,1)&&!this.cy)?n.L(s):(null==(a=this.cx)&&(a=g.bt(null,null),this.cx=a),a.F(new u.fX(n,s)))},dC:function(n,i){var s;if(this.r.m(0,n)){if(s=!!(s=$.j(i)).m(i,0)||s.m(i,1)&&!this.cy)return void this.aQ();null==(s=this.cx)&&(s=g.bt(null,null),this.cx=s),s.F(this.gdP())}},dE:function(n,i){var s,a,p;if(0!==(s=this.dx).a)for((a=new Array(2)).fixed$length=Array,a[0]=$.a3(n),a[1]=null==i?null:$.a3(i),(p=new g.cZ(s,s.r,null,null)).c=s.e;p.q();)p.d.L(a);else{if(!0===this.db&&this===O.globalState.e)return;self.console&&self.console.error?self.console.error(n,i):(g.aq(n),null!=i&&g.aq(i))}},a9:function(n){var i,s,a,p,y,v;i=O.globalState.d,O.globalState.d=this,w=this.d,s=null,a=this.cy,this.cy=!0;try{s=n.$0()}catch(R){if(p=v=u.z(R),y=u.B(R),this.dE(p,y),!0===this.db&&(this.aQ(),this===O.globalState.e))throw R}finally{if(this.cy=a,O.globalState.d=i,null!=i&&(w=i.gdN()),null!=this.cx)for(;!(v=this.cx).gw(v);)this.cx.bY().$0()}return s},dA:function(n){var i=$.F(n);switch(i.h(n,0)){case"pause":this.bE(i.h(n,1),i.h(n,2));break;case"resume":this.dW(i.h(n,1));break;case"add-ondone":this.d9(i.h(n,1),i.h(n,2));break;case"remove-ondone":this.dV(i.h(n,1));break;case"set-errors-fatal":this.cp(i.h(n,1),i.h(n,2));break;case"ping":this.dD(i.h(n,1),i.h(n,2),i.h(n,3));break;case"kill":this.dC(i.h(n,1),i.h(n,2));break;case"getErrors":this.dx.v(0,i.h(n,1));break;case"stopErrors":this.dx.af(0,i.h(n,1))}},bQ:function(n){return this.b.h(0,n)},b5:function(n,i){var s=this.b;if(s.am(n))throw u.c(g.aW("Registry: ports must be registered only once."));s.n(0,n,i)},aL:function(){var n=this.b;n.gk(n)-this.c.a>0||this.y||!this.x?O.globalState.z.n(0,this.a,this):this.aQ()},aQ:[function(){var n,i,s,a,p;for((n=this.cx)?.a0(0),i=(i=(n=this.b).gc4(n)).gA(i);i.q();)i.gt().cR();if(n.a0(0),this.c.a0(0),O.globalState.z.af(0,this.a),this.dx.a0(0),null!=this.ch){for(s=0;s<(i=(n=this.ch).length);s+=2){if(a=n[s],(p=s+1)>=i)return u.e(n,p);a.L(n[p])}this.ch=null}},"$0","gdP",0,0,2]},fX:{"^":"f:2;a,b",$0:[function(){this.a.L(this.b)},null,null,0,0,null,"call"]},fC:{"^":"b;a,b",dj:function(){var n=this.a;if(n.b!==n.c)return n.bY()},c1:function(){var n,i,s;return null==(n=this.dj())?((i=!(null==O.globalState.e||!O.globalState.z.am(O.globalState.e.a)||!0!==O.globalState.r)&&(i=O.globalState.e.b).gw(i))&&u.p(g.aW("Program exited with open ReceivePorts.")),(s=!0===(i=O.globalState).x&&((s=i.z).gw(s)&&0===i.f.b))&&(i=i.Q,s=g.V(["command","close"]),s=new u.aa(!0,new g.d_(0,null,null,null,null,null,0,[null,g.k])).B(s),self.postMessage(s)),!1):(n.dU(),!0)},bv:function(){if(null!=self.window)new u.fD(this).$0();else for(;this.c1(););},ag:function(){var n,i,p;if(!0!==O.globalState.x)this.bv();else try{this.bv()}catch(y){n=u.z(y),i=u.B(y),p=g.V(["command","error","msg",u.a(n)+"\n"+u.a(i)]),p=new u.aa(!0,g.aj(null,g.k)).B(p),self.postMessage(p)}}},fD:{"^":"f:2;a",$0:function(){!this.a.c1()||g.fj(P.f,this)}},aM:{"^":"b;a,b,c",dU:function(){var n=this.a;n.gaP()?n.gdi().push(this):n.a9(this.b)}},h5:{"^":"b;"},eo:{"^":"f:0;a,b,c,d,e,f",$0:function(){u.ep(this.a,this.b,this.c,this.d,this.e,this.f)}},eq:{"^":"f:2;a,b,c,d,e",$0:function(){var n,i,s;(n=this.e).sdJ(!0),!0!==this.d?this.a.$1(this.c):(i=this.a,s=u.ap(),u.a1(s,[s,s]).H(i)?i.$2(this.b,this.c):u.a1(s,[s]).H(i)?i.$1(this.b):i.$0()),n.aL()}},cU:{"^":"b;"},bc:{"^":"cU;b,a",L:function(n){var i,s,a;if(null!=(i=O.globalState.z.h(0,this.a))&&!(s=this.b).gbl()){if(a=u.hl(n),i.gdf()===s)return void i.dA(a);O.globalState.f.a.F(new u.aM(i,new u.h9(this,a),"receive"))}},m:function(n,i){return null!=i&&i instanceof u.bc&&$.R(this.b,i.b)},gp:function(n){return this.b.gaG()}},h9:{"^":"f:0;a,b",$0:function(){var n=this.a.b;n.gbl()||n.cL(this.b)}},bE:{"^":"cU;b,c,a",L:function(n){var i,s;i=g.V(["command","message","port",this,"msg",n]),s=new u.aa(!0,g.aj(null,g.k)).B(i),!0===O.globalState.x?self.postMessage(s):O.globalState.ch.h(0,this.b)?.postMessage(s)},m:function(n,i){return null!=i&&i instanceof u.bE&&$.R(this.b,i.b)&&$.R(this.a,i.a)&&$.R(this.c,i.c)},gp:function(n){var i,s,a;return i=$.bT(this.b,16),s=$.bT(this.a,8),"number"!=typeof(a=this.c)?u.n(a):(i^s^a)>>>0}},b4:{"^":"b;aG:a<,b,bl:c<",cR:function(){this.c=!0,this.b=null},cL:function(n){this.c||this.b.$1(n)},$iseZ:1},cD:{"^":"b;a,b,c",al:function(){if(null==self.setTimeout)throw u.c(new g.q("Canceling a timer."));if(this.b)throw u.c(new g.q("Timer in event loop cannot be canceled."));var n=this.c;null!=n&&(--O.globalState.f.b,this.a?self.clearTimeout(n):self.clearInterval(n),this.c=null)},cF:function(n,i){if(null==self.setTimeout)throw u.c(new g.q("Periodic timer."));++O.globalState.f.b,this.c=self.setInterval(u.ad(new u.fg(this,i),0),n)},cE:function(n,i){if(0!==n||null!=self.setTimeout&&!0!==O.globalState.x){if(null==self.setTimeout)throw u.c(new g.q("Timer greater than 0."));++O.globalState.f.b,this.c=self.setTimeout(u.ad(new u.fi(this,i),0),n)}else this.c=1,O.globalState.f.a.F(new u.aM(O.globalState.d,new u.fh(this,i),"timer")),this.b=!0},l:{fe:function(n,i){var s=new u.cD(!0,!1,null);return s.cE(n,i),s},ff:function(n,i){var s=new u.cD(!1,!1,null);return s.cF(n,i),s}}},fh:{"^":"f:2;a,b",$0:function(){this.a.c=null,this.b.$0()}},fi:{"^":"f:2;a,b",$0:[function(){this.a.c=null,--O.globalState.f.b,this.b.$0()},null,null,0,0,null,"call"]},fg:{"^":"f:0;a,b",$0:[function(){this.b.$1(this.a)},null,null,0,0,null,"call"]},a5:{"^":"b;aG:a<",gp:function(n){var i,s,a;return a=(s=$.I(i=this.a)).cr(i,0),"number"!=typeof(s=s.at(i,4294967296))?u.n(s):((i=2057*(((i=5*(((i=(~(i=a^s)>>>0)+(i<<15>>>0)&4294967295)^i>>>12)>>>0)&4294967295)^i>>>4)>>>0)&4294967295)^i>>>16)>>>0},m:function(n,i){var s,a;return null!=i&&(i===this||i instanceof u.a5&&(a=i.a,null==(s=this.a)?null==a:s===a))}},aa:{"^":"b;a,b",B:[function(n){var i,s,a,p,y;return null==n||"string"==typeof n||"number"==typeof n||"boolean"==typeof n?n:null!=(s=(i=this.b).h(0,n))?["ref",s]:(i.n(0,n,i.gk(i)),(i=$.j(n)).$iscg?["buffer",n]:i.$isb1?["typed",n]:i.$isD?this.cl(n):i.$isel?(a=this.gci(),p=n.gbO(),p=u.b_(p,a,u.x(p,"K",0),null),p=g.a7(p,!0,u.x(p,"K",0)),i=i.gc4(n),i=u.b_(i,a,u.x(i,"K",0),null),["map",p,g.a7(i,!0,u.x(i,"K",0))]):i.$iseA?this.cm(n):(i.$isd&&this.c3(n),i.$iseZ&&this.ah(n,"RawReceivePorts can't be transmitted:"),i.$isbc?this.cn(n):i.$isbE?this.co(n):i.$isf?(null==(y=n.$static_name)&&this.ah(n,"Closures can't be transmitted:"),["function",y]):i.$isa5?["capability",n.a]:(n instanceof g.b||this.c3(n),["dart",O.classIdExtractor(n),this.ck(O.classFieldsExtractor(n))])))},"$1","gci",2,0,1,6],ah:function(n,i){throw u.c(new g.q(u.a(i??"Can't transmit:")+" "+u.a(n)))},c3:function(n){return this.ah(n,null)},cl:function(n){var i=this.cj(n);return n.fixed$length?["fixed",i]:n.fixed$length?n.immutable$list?n.constructor===Array?["const",i]:void this.ah(n,"Can't serialize indexable: "):["mutable",i]:["extendable",i]},cj:function(n){var i,s,a;for(P.c.sk(i=[],n.length),s=0;s<n.length;++s){if(a=this.B(n[s]),s>=i.length)return u.e(i,s);i[s]=a}return i},ck:function(n){var i;for(i=0;i<n.length;++i)P.c.n(n,i,this.B(n[i]));return n},cm:function(n){var i,s,a,p;for(!!n.constructor&&n.constructor!==Object&&this.ah(n,"Only plain JS Objects are supported:"),i=Object.keys(n),P.c.sk(s=[],i.length),a=0;a<i.length;++a){if(p=this.B(n[i[a]]),a>=s.length)return u.e(s,a);s[a]=p}return["js-object",i,s]},co:function(n){return this.a?["sendport",n.b,n.a,n.c]:["raw sendport",n]},cn:function(n){return this.a?["sendport",O.globalState.b,n.a,n.b.gaG()]:["raw sendport",n]}},b9:{"^":"b;a,b",P:[function(n){var i,s,a,p,y,m;if(null==n||"string"==typeof n||"number"==typeof n||"boolean"==typeof n)return n;if("object"!=typeof n||null===n||n.constructor!==Array)throw u.c(g.au("Bad serialized message: "+u.a(n)));switch(P.c.gdz(n)){case"ref":return 1>=n.length?u.e(n,1):(s=this.b,(i=n[1])>>>0!==i||i>=s.length?u.e(s,i):s[i]);case"buffer":case"typed":case"raw sendport":return 1>=n.length?u.e(n,1):(this.b.push(a=n[1]),a);case"fixed":case"const":return 1>=n.length?u.e(n,1):(this.b.push(a=n[1]),(s=u.G(this.a8(a),[null])).fixed$length=Array,s);case"extendable":return 1>=n.length?u.e(n,1):(this.b.push(a=n[1]),u.G(this.a8(a),[null]));case"mutable":return 1>=n.length?u.e(n,1):(this.b.push(a=n[1]),this.a8(a));case"map":return this.dm(n);case"sendport":return this.dn(n);case"js-object":return this.dl(n);case"function":return 1>=n.length?u.e(n,1):(a=O.globalFunctions[n[1]](),this.b.push(a),a);case"capability":return 1>=n.length?u.e(n,1):new u.a5(n[1]);case"dart":return 1>=(s=n.length)?u.e(n,1):(p=n[1],2>=s?u.e(n,2):(y=n[2],m=O.instanceFromClassId(p),this.b.push(m),this.a8(y),O.initializeEmptyInstance(p,m,y)));default:throw u.c("couldn't deserialize: "+u.a(n))}},"$1","gdk",2,0,1,6],a8:function(n){var i,s,a;for(i=$.F(n),s=0;;){if("number"!=typeof(a=i.gk(n)))return u.n(a);if(!(s<a))break;i.n(n,s,this.P(i.h(n,s))),++s}return n},dm:function(n){var i,s,a,p,y,m;if(1>=(i=n.length))return u.e(n,1);if(s=n[1],2>=i)return u.e(n,2);for(a=n[2],p=g.eM(),this.b.push(p),s=$.bX(s,this.gdk()).aZ(0),i=$.F(s),y=$.F(a),m=0;m<i.gk(s);++m)p.n(0,i.h(s,m),this.P(y.h(a,m)));return p},dn:function(n){var i,s,a,p,y,m,v;if(1>=(i=n.length))return u.e(n,1);if(s=n[1],2>=i)return u.e(n,2);if(a=n[2],3>=i)return u.e(n,3);if(p=n[3],$.R(s,O.globalState.b)){if(null==(y=O.globalState.z.h(0,a))||null==(m=y.bQ(p)))return;v=new u.bc(m,a)}else v=new u.bE(s,p,a);return this.b.push(v),v},dl:function(n){var i,s,a,p,y,m,v;if(1>=(i=n.length))return u.e(n,1);if(s=n[1],2>=i)return u.e(n,2);for(a=n[2],this.b.push(p={}),i=$.F(s),y=$.F(a),m=0;;){if("number"!=typeof(v=i.gk(s)))return u.n(v);if(!(m<v))break;p[i.h(s,m)]=this.P(y.h(a,m)),++m}return p}}}],["","",,u,{"^":"",e0:function(){throw u.c(new g.q("Cannot modify unmodifiable Map"))},dl:function(n){return O.getTypeFromName(n)},hO:function(n){return O.types[n]},dj:function(n,i){var s;return null!=i&&null!=(s=i.x)?s:!!$.j(n).$isL},a:function(n){var i;if("string"==typeof n)return n;if("number"==typeof n){if(0!==n)return""+n}else{if(!0===n)return"true";if(!1===n)return"false";if(null==n)return"null"}if("string"!=typeof(i=$.a3(n)))throw u.c(u.w(n));return i},Y:function(n){var i=n.$identityHash;return null==i&&(i=1073741823*Math.random()|0,n.$identityHash=i),i},co:function(n,i){throw u.c(new g.ee(n,null,null))},ct:function(n,i,s){var a;return u.hI(n),null==(a=/^\s*[+-]?((0x[a-f0-9]+)|(\d+)|([a-z0-9]+))\s*$/i.exec(n))?u.co(n,s):3>=a.length?u.e(a,3):null!=a[3]?parseInt(n,10):null!=a[2]?parseInt(n,16):u.co(n,s)},cs:function(n){var i,s,a,p,y,m,v,R,d,T;return(null==(p="function"==typeof(s=(i=$.j(n)).constructor)&&"string"==typeof(a=s.name)?a:null)||i===P.q||!!$.j(n).$isaK)&&("Object"===(y=P.j(n))?("function"==typeof(m=n.constructor)&&"string"==typeof(R=null==(v=String(m).match(/^\s*function\s*([\w$]*)\s*\(/))?null:v[1])&&/^\w+$/.test(R)&&(p=R),null==p&&(p=y)):p=y),p.length>1&&36===P.h.bJ(p,0)&&(p=P.h.cs(p,1)),d=p+u.dk(u.bP(n),0,null),T=O.mangledGlobalNames,d.replace(/[^<,> ]+/g,function(E){return T[E]||E})},b2:function(n){return"Instance of '"+u.cs(n)+"'"},A:function(n){var i;if(n<=65535)return String.fromCharCode(n);if(n<=1114111)return i=n-65536,String.fromCharCode((55296|P.a.N(i,10))>>>0,56320|1023&i);throw u.c(g.Z(n,0,1114111,null,null))},y:function(n){return void 0===n.date&&(n.date=new Date(n.a)),n.date},bw:function(n,i){if(null==n||"boolean"==typeof n||"number"==typeof n||"string"==typeof n)throw u.c(u.w(n));return n[i]},cu:function(n,i,s){if(null==n||"boolean"==typeof n||"number"==typeof n||"string"==typeof n)throw u.c(u.w(n));n[i]=s},cp:function(n,i,s){var a,p,y;return(a={}).a=0,p=[],y=[],a.a=i.length,P.c.bD(p,i),a.b="",null!=s&&!s.gw(s)&&s.S(0,new u.eY(a,p,y)),$.dL(n,new u.ey(P.C,"$"+a.a+a.b,0,p,y,null))},eX:function(n,i){var s,a;if(0===(a=(s=i instanceof Array?i:g.a7(i,!0,null)).length)){if(n.$0)return n.$0()}else if(1===a){if(n.$1)return n.$1(s[0])}else if(2===a){if(n.$2)return n.$2(s[0],s[1])}else if(3===a){if(n.$3)return n.$3(s[0],s[1],s[2])}else if(4===a){if(n.$4)return n.$4(s[0],s[1],s[2],s[3])}else if(5===a&&n.$5)return n.$5(s[0],s[1],s[2],s[3],s[4]);return u.eW(n,s)},eW:function(n,i){var s,a,p,y,m,v;if(null==(a=n["$"+(s=i.length)])){if(null==(a=$.j(n)["call*"])||(m=(y=(p=u.cx(a)).d)+p.e,p.f||y>s||m<s))return u.cp(n,i,null);for(i=g.a7(i,!0,null),v=s;v<m;++v)P.c.v(i,O.metadata[p.dh(0,v)])}return a.apply(n,i)},n:function(n){throw u.c(u.w(n))},e:function(n,i){throw null==n&&$.at(n),u.c(u.r(n,i))},r:function(n,i){var s,a;if("number"!=typeof i||Math.floor(i)!==i)return new g.a4(!0,i,"index",null);if(s=$.at(n),i<0)a=!0;else{if("number"!=typeof s)return u.n(s);a=i>=s}return a?g.aY(i,n,"index",null,s):g.b3(i,"index",null)},w:function(n){return new g.a4(!0,n,null,null)},hI:function(n){if("string"!=typeof n)throw u.c(u.w(n));return n},c:function(n){var i;return null==n&&(n=new g.cn),(i=new Error).dartException=n,"defineProperty"in Object?(Object.defineProperty(i,"message",{get:u.dt}),i.name=""):i.toString=u.dt,i},dt:[function(){return $.a3(this.dartException)},null,null,0,0,null],p:function(n){throw u.c(n)},aQ:function(n){throw u.c(new g.ah(n))},z:function(n){var i,s,a,p,y,m,v,R,d,T,E,I,M,X,F;if(i=new u.ia(n),null!=n){if("object"!=typeof n)return n;if("dartException"in n)return i.$1(n.dartException);if(!("message"in n))return n;if(s=n.message,"number"in n&&"number"==typeof n.number&&(p=65535&(a=n.number),10==(8191&P.a.N(a,16))))switch(p){case 438:return i.$1(u.bq(u.a(s)+" (Error "+p+")",null));case 445:case 5007:return y=u.a(s)+" (Error "+p+")",i.$1(new u.cm(y,null))}return n instanceof TypeError?(m=w.$get$cG(),v=w.$get$cH(),R=w.$get$cI(),d=w.$get$cJ(),T=w.$get$cN(),E=w.$get$cO(),I=w.$get$cL(),w.$get$cK(),M=w.$get$cQ(),X=w.$get$cP(),null!=(F=m.D(s))?i.$1(u.bq(s,F)):null!=(F=v.D(s))?(F.method="call",i.$1(u.bq(s,F))):(y=null!=(F=R.D(s))||(null!=(F=d.D(s))||(null!=(F=T.D(s))||(null!=(F=E.D(s))||(null!=(F=I.D(s))||(null!=(F=d.D(s))||(null!=(F=M.D(s))||null!=(F=X.D(s)))))))),i.$1(y?new u.cm(s,null==F?null:F.method):new u.fm("string"==typeof s?s:"")))):n instanceof RangeError?"string"==typeof s&&-1!==s.indexOf("call stack")?new g.cz:(s=function(Qt){try{return String(Qt)}catch{}return null}(n),i.$1(new g.a4(!1,null,null,"string"==typeof s?s.replace(/^RangeError:\s*/,""):s))):"function"==typeof InternalError&&n instanceof InternalError&&"string"==typeof s&&"too much recursion"===s?new g.cz:n}},B:function(n){return null==n?new u.d0(n,null):n.$cachedTrace??(n.$cachedTrace=new u.d0(n,null))},i5:function(n){return null==n||"object"!=typeof n?$.N(n):u.Y(n)},hM:function(n,i){var s,a,p,y;for(s=n.length,a=0;a<s;a=y)y=(p=a+1)+1,i.n(0,n[a],n[p]);return i},hV:[function(n,i,s,a,p,y,m){switch(s){case 0:return u.aN(i,new u.hW(n));case 1:return u.aN(i,new u.hX(n,a));case 2:return u.aN(i,new u.hY(n,a,p));case 3:return u.aN(i,new u.hZ(n,a,p,y));case 4:return u.aN(i,new u.i_(n,a,p,y,m))}throw u.c(g.aW("Unsupported number of arguments for wrapped closure"))},null,null,14,0,null,11,12,13,14,15,16,17],ad:function(n,i){var s,a,p,y,m;if(null!=n)return(s=n.$identity)||(a=n,p=i,y=O.globalState.d,m=u.hV,n.$identity=s=function(v,R,d,T){return m(a,y,p,v,R,d,T)},s)},dX:function(n,i,s,a,p,y){var m,v,R,d,T,E,I,M,X,Qt,ce,_t,Fe,Ge,x;if(v=(m=i[0]).$callName,$.j(s).$isi?(m.$reflectionInfo=s,R=u.cx(m).r):R=s,(d=Object.create(a?(new u.f7).constructor.prototype:new u.bl(null,null,null,null).constructor.prototype)).$initialize=d.constructor,a?T=function(){this.$initialize()}:(w.J=$.Q(E=w.J,1),T=E=new Function("a,b,c,d"+E,"this.$initialize(a,b,c,d"+E+")")),d.constructor=T,T.prototype=d,a?(d.$static_name=y,M=m,I=!1):(M=u.c2(n,m,I=1==p.length&&!0)).$reflectionInfo=s,"number"==typeof R)Ge=u.hO,x=R,X=function(){return Ge(x)};else{if("function"!=typeof R)throw u.c("Error in reflectionInfo.");X=a?R:function(Ge,x){return function(){return Ge.apply({$receiver:x(this)},arguments)}}(R,I?u.c0:u.bm)}for(d.$signature=X,d[v]=M,E=i.length,Qt=1;Qt<E;++Qt)null!=(_t=(ce=i[Qt]).$callName)&&(Fe=a?ce:u.c2(n,ce,I),d[_t]=Fe);return d["call*"]=M,d.$requiredArgCount=m.$requiredArgCount,d.$defaultValues=m.$defaultValues,T},dU:function(n,i,s,a){var y,m,p=u.bm;switch(i?-1:n){case 0:return y=s,m=p,function(){return m(this)[y]()};case 1:return function(y,m){return function(v){return m(this)[y](v)}}(s,p);case 2:return function(y,m){return function(v,R){return m(this)[y](v,R)}}(s,p);case 3:return function(y,m){return function(v,R,d){return m(this)[y](v,R,d)}}(s,p);case 4:return function(y,m){return function(v,R,d,T){return m(this)[y](v,R,d,T)}}(s,p);case 5:return function(y,m){return function(v,R,d,T,E){return m(this)[y](v,R,d,T,E)}}(s,p);default:return function(y,m){return function(){return y.apply(m(this),arguments)}}(a,p)}},c2:function(n,i,s){var a,p,y,m,v,R,d;return s?u.dW(n,i):(p=i.length,y=n[a=i.$stubName],(v=!(m=null==i?null==y:i===y)||p>=27)?u.dU(p,!m,a,i):0===p?(w.J=$.Q(m=w.J,1),m="return function(){var "+(R="self"+u.a(m))+" = this.",null==(v=w.ag)&&(v=u.aT("self"),w.ag=v),new Function(m+u.a(v)+";return "+R+"."+u.a(a)+"();}")()):(d="abcdefghijklmnopqrstuvwxyz".split("").splice(0,p).join(","),w.J=$.Q(m=w.J,1),m="return function("+(d+=u.a(m))+"){return this.",null==(v=w.ag)&&(v=u.aT("self"),w.ag=v),new Function(m+u.a(v)+"."+u.a(a)+"("+d+");}")()))},dV:function(n,i,s,a){var p,y,m,v,R;switch(p=u.bm,y=u.c0,i?-1:n){case 0:throw u.c(new u.f0("Intercepted function with no arguments."));case 1:return m=s,v=p,R=y,function(){return v(this)[m](R(this))};case 2:return function(m,v,R){return function(d){return v(this)[m](R(this),d)}}(s,p,y);case 3:return function(m,v,R){return function(d,T){return v(this)[m](R(this),d,T)}}(s,p,y);case 4:return function(m,v,R){return function(d,T,E){return v(this)[m](R(this),d,T,E)}}(s,p,y);case 5:return function(m,v,R){return function(d,T,E,I){return v(this)[m](R(this),d,T,E,I)}}(s,p,y);case 6:return function(m,v,R){return function(d,T,E,I,M){return v(this)[m](R(this),d,T,E,I,M)}}(s,p,y);default:return function(m,v,R,d){return function(){return d=[R(this)],Array.prototype.push.apply(d,arguments),m.apply(v(this),d)}}(a,p,y)}},dW:function(n,i){var s,a,p,y,m,v,d;return s=u.dT(),null==(a=w.c_)&&(a=u.aT("receiver"),w.c_=a),y=i.length,m=n[p=i.$stubName],!(v=null==i?null==m:i===m)||y>=28?u.dV(y,!v,p,i):1===y?(a="return function(){return this."+u.a(s)+"."+u.a(p)+"(this."+u.a(a)+");",w.J=$.Q(v=w.J,1),new Function(a+u.a(v)+"}")()):(a="return function("+(d="abcdefghijklmnopqrstuvwxyz".split("").splice(0,y-1).join(","))+"){return this."+u.a(s)+"."+u.a(p)+"(this."+u.a(a)+", "+d+");",w.J=$.Q(v=w.J,1),new Function(a+u.a(v)+"}")())},bK:function(n,i,s,a,p,y){return i.fixed$length=Array,$.j(s).$isi&&(s.fixed$length=Array),u.dX(n,i,s,!!a,p,y)},i9:function(n){throw u.c(new g.e4(n))},hL:function(n){var i=$.j(n);return"$signature"in i?i.$signature():null},a1:function(n,i,s){return new u.f1(n,i,s,null)},df:function(n,i){var s=n.builtin$cls;return null==i||0===i.length?new u.f3(s):new u.f2(s,i,null)},ap:function(){return P.n},bi:function(){return(4294967296*Math.random()>>>0)+4294967296*(4294967296*Math.random()>>>0)},bO:function(n){return O.getIsolateTag(n)},G:function(n,i){return n.$ti=i,n},bP:function(n){if(null!=n)return n.$ti},dh:function(n,i){return u.ds(n["$as"+u.a(i)],u.bP(n))},x:function(n,i,s){var a=u.dh(n,i);return null==a?null:a[s]},ae:function(n,i){var s=u.bP(n);return null==s?null:s[i]},af:function(n,i){var s;return null==n?"dynamic":"object"==typeof n&&null!==n&&n.constructor===Array?n[0].builtin$cls+u.dk(n,1,i):"function"==typeof n?n.builtin$cls:"number"==typeof n&&Math.floor(n)===n?u.a(n):typeof n.func<"u"?null!=(s=n.typedef)?u.af(s,i):u.ho(n,i):"unknown-reified-type"},ho:function(n,i){var s,a,p,y,m,v,d,T,E,I;if(s=n.v?"void":u.af(n.ret,i),"args"in n)for(p=(a=n.args).length,y="",m="",v=0;v<p;++v,m=", ")y=y+m+u.af(a[v],i);else y="",m="";if("opt"in n){for(y+=m+"[",p=(d=n.opt).length,m="",v=0;v<p;++v,m=", ")y=y+m+u.af(d[v],i);y+="]"}if("named"in n){for(y+=m+"{",E=(p=u.bM(T=n.named)).length,m="",v=0;v<E;++v,m=", ")y=y+m+u.af(T[I=p[v]],i)+" "+u.a(I);y+="}"}return"("+y+") => "+s},dk:function(n,i,s){var a,p,y,m,v,R;if(null==n)return"";for(a=new g.aI(""),p=i,y=!0,m=!0,v="";p<n.length;++p)y?y=!1:a.j=v+", ",null!=(R=n[p])&&(m=!1),v=a.j+=u.af(R,s);return m?"":"<"+a.i(0)+">"},ds:function(n,i){return null==n?i:null!=(n=n.apply(null,i))?"object"==typeof n&&null!==n&&n.constructor===Array?n:"function"==typeof n?n.apply(null,i):i:void 0},hA:function(n,i){var s,a;if(null==n||null==i)return!0;for(s=n.length,a=0;a<s;++a)if(!u.C(n[a],i[a]))return!1;return!0},dg:function(n,i,s){return n.apply(i,u.dh(i,s))},C:function(n,i){var s,a,p,y,m,v;if(n===i||null==n||null==i||"eU"===n.builtin$cls)return!0;if("func"in i)return u.di(n,i);if("func"in n)return"bn"===i.builtin$cls||"b"===i.builtin$cls;if(a=(s="object"==typeof n&&null!==n&&n.constructor===Array)?n[0]:n,(y=(p="object"==typeof i&&null!==i&&i.constructor===Array)?i[0]:i)!==a){if(!("$is"+(m=u.af(y,null))in a.prototype))return!1;v=a.prototype["$as"+m]}else v=null;return!s&&null==v||!p||(s=s?n.slice(1):null,p=i.slice(1),u.hA(u.ds(v,s),p))},dd:function(n,i,s){var a,p,y,m,v;if((a=null==i)&&null==n)return!0;if(a)return s;if(null==n)return!1;if(p=n.length,y=i.length,s){if(p<y)return!1}else if(p!==y)return!1;for(m=0;m<y;++m)if(!u.C(a=n[m],v=i[m])&&!u.C(v,a))return!1;return!0},hz:function(n,i){var s,a,p,y,m,v;if(null==i)return!0;if(null==n)return!1;for((s=Object.getOwnPropertyNames(i)).fixed$length=Array,s=(a=s).length,p=0;p<s;++p)if(y=a[p],!Object.hasOwnProperty.call(n,y)||!u.C(m=i[y],v=n[y])&&!u.C(v,m))return!1;return!0},di:function(n,i){var s,a,p,y,m,v,R,d,E,I,M,X,F,Qt;if(!("func"in n))return!1;if("v"in n){if(!("v"in i)&&"ret"in i)return!1}else if(!("v"in i)&&!u.C(s=n.ret,a=i.ret)&&!u.C(a,s))return!1;if(m=n.opt,E=null!=(v=i.opt)?v.length:0,(R=null!=(p=n.args)?p.length:0)>(d=null!=(y=i.args)?y.length:0)||R+(null!=m?m.length:0)<d+E)return!1;if(R===d){if(!u.dd(p,y,!1)||!u.dd(m,v,!0))return!1}else{for(I=0;I<R;++I)if(!u.C(M=p[I],X=y[I])&&!u.C(X,M))return!1;for(F=I,Qt=0;F<d;++Qt,++F)if(!u.C(M=m[Qt],X=y[F])&&!u.C(X,M))return!1;for(F=0;F<E;++Qt,++F)if(!u.C(M=m[Qt],X=v[F])&&!u.C(X,M))return!1}return u.hz(n.named,i.named)},jt:function(n){var i=w.bQ;return"Instance of "+(null==i?"<Unknown>":i.$1(n))},jq:function(n){return u.Y(n)},jp:function(n,i,s){Object.defineProperty(n,i,{value:s,enumerable:!1,writable:!0,configurable:!0})},i2:function(n){var i,s,a,p,y,m;if(i=w.bQ.$1(n),null!=(s=w.bd[i]))return Object.defineProperty(n,O.dispatchPropertyName,{value:s,enumerable:!1,writable:!0,configurable:!0}),s.i;if(null!=(a=w.bf[i]))return a;if(null==(p=O.interceptorsByTag[i])&&null!=(i=w.dc.$2(n,i))){if(null!=(s=w.bd[i]))return Object.defineProperty(n,O.dispatchPropertyName,{value:s,enumerable:!1,writable:!0,configurable:!0}),s.i;if(null!=(a=w.bf[i]))return a;p=O.interceptorsByTag[i]}if(null!=p){if(a=p.prototype,"!"===(y=i[0]))return s=u.bS(a),w.bd[i]=s,Object.defineProperty(n,O.dispatchPropertyName,{value:s,enumerable:!1,writable:!0,configurable:!0}),s.i;if("~"===y)return w.bf[i]=a,a;if("-"===y)return m=u.bS(a),Object.defineProperty(Object.getPrototypeOf(n),O.dispatchPropertyName,{value:m,enumerable:!1,writable:!0,configurable:!0}),m.i;if("+"===y)return u.dn(n,a);if("*"===y)throw u.c(new g.cR(i));return!0===O.leafTags[i]?(m=u.bS(a),Object.defineProperty(Object.getPrototypeOf(n),O.dispatchPropertyName,{value:m,enumerable:!1,writable:!0,configurable:!0}),m.i):u.dn(n,a)}},dn:function(n,i){var s=Object.getPrototypeOf(n);return Object.defineProperty(s,O.dispatchPropertyName,{value:$.bh(i,s,null,null),enumerable:!1,writable:!0,configurable:!0}),i},bS:function(n){return $.bh(n,!1,null,!!n.$isL)},i4:function(n,i,s){var a=i.prototype;return!0===O.leafTags[n]?$.bh(a,!1,null,!!a.$isL):$.bh(a,s,null,null)},hT:function(){!0!==w.bR&&(w.bR=!0,u.hU())},hU:function(){var n,i,s,a,p,y,m,v;if(w.bd=Object.create(null),w.bf=Object.create(null),u.hP(),n=O.interceptorsByTag,i=Object.getOwnPropertyNames(n),typeof window<"u")for(s=function(){},a=0;a<i.length;++a)null!=(y=w.dp.$1(p=i[a]))&&null!=(m=u.i4(p,n[p],y))&&(Object.defineProperty(y,O.dispatchPropertyName,{value:m,enumerable:!1,writable:!0,configurable:!0}),s.prototype=y);for(a=0;a<i.length;++a)/^[A-Za-z_]/.test(p=i[a])&&(n["!"+p]=v=n[p],n["~"+p]=v,n["-"+p]=v,n["+"+p]=v,n["*"+p]=v)},hP:function(){var n,i,s,a,y,m;if(n=P.v(),n=u.ac(P.r,u.ac(P.x,u.ac(P.i,u.ac(P.i,u.ac(P.w,u.ac(P.t,u.ac(P.u(P.j),n))))))),typeof dartNativeDispatchHooksTransformer<"u"&&("function"==typeof(i=dartNativeDispatchHooksTransformer)&&(i=[i]),i.constructor==Array))for(s=0;s<i.length;++s)"function"==typeof(a=i[s])&&(n=a(n)||n);y=n.getUnknownTag,m=n.prototypeForTag,w.bQ=new u.hQ(n.getTag),w.dc=new u.hR(y),w.dp=new u.hS(m)},ac:function(n,i){return n(i)||i},e_:{"^":"cS;a,$ti",$ascS:Bt.t,$asW:Bt.t,$isW:1},dZ:{"^":"b;",gw:function(n){return 0===this.gk(this)},i:function(n){return g.cf(this)},n:function(n,i,s){return u.e0()},$isW:1},e1:{"^":"dZ;a,b,c,$ti",gk:function(n){return this.a},am:function(n){return"string"==typeof n&&"__proto__"!==n&&this.b.hasOwnProperty(n)},h:function(n,i){if(this.am(i))return this.bg(i)},bg:function(n){return this.b[n]},S:function(n,i){var s,a,p,y;for(a=(s=this.c).length,p=0;p<a;++p)i.$2(y=s[p],this.bg(y))}},ey:{"^":"b;a,b,c,d,e,f",gbR:function(){return this.a},gbW:function(){var n,i,s,a;if(1===this.c||0==(i=(n=this.d).length-this.e.length))return P.k;for(s=[],a=0;a<i;++a){if(a>=n.length)return u.e(n,a);s.push(n[a])}return s.fixed$length=Array,s.immutable$list=Array,s},gbS:function(){var n,i,s,a,p,y,m,v,R;if(0!==this.c||(a=(s=this.d).length-(i=(n=this.e).length),0===i))return P.l;for(y=new u.U(0,null,null,null,null,null,0,[p=g.aJ,null]),m=0;m<i;++m){if(m>=n.length)return u.e(n,m);if(v=n[m],(R=a+m)<0||R>=s.length)return u.e(s,R);y.n(0,new u.bx(v),s[R])}return new u.e_(y,[p,null])}},f_:{"^":"b;a,b,c,d,e,f,r,x",dh:function(n,i){var s=this.d;return"number"!=typeof i?i.a2():i<s?void 0:this.b[3+i-s]},l:{cx:function(n){var i,s,a;if(null!=(i=n.$reflectionInfo))return i.fixed$length=Array,new u.f_(n,i,1==(1&(s=i[0])),s>>1,(a=i[1])>>1,1==(1&a),i[2],null)}}},eY:{"^":"f:7;a,b,c",$2:function(n,i){var s=this.a;s.b=s.b+"$"+u.a(n),this.c.push(n),this.b.push(i),++s.a}},fl:{"^":"b;a,b,c,d,e,f",D:function(n){var i,s,a;if(null!=(i=new RegExp(this.a).exec(n)))return s=Object.create(null),-1!==(a=this.b)&&(s.arguments=i[a+1]),-1!==(a=this.c)&&(s.argumentsExpr=i[a+1]),-1!==(a=this.d)&&(s.expr=i[a+1]),-1!==(a=this.e)&&(s.method=i[a+1]),-1!==(a=this.f)&&(s.receiver=i[a+1]),s},l:{M:function(n){var i,s,a,p,y,m;return null==(i=(n=n.replace(String({}),"$receiver$").replace(/[[\]{}()*+?.\\^$|]/g,"\\$&")).match(/\\\$[a-zA-Z]+\\\$/g))&&(i=[]),s=i.indexOf("\\$arguments\\$"),a=i.indexOf("\\$argumentsExpr\\$"),p=i.indexOf("\\$expr\\$"),y=i.indexOf("\\$method\\$"),m=i.indexOf("\\$receiver\\$"),new u.fl(n.replace(new RegExp("\\\\\\$arguments\\\\\\$","g"),"((?:x|[^x])*)").replace(new RegExp("\\\\\\$argumentsExpr\\\\\\$","g"),"((?:x|[^x])*)").replace(new RegExp("\\\\\\$expr\\\\\\$","g"),"((?:x|[^x])*)").replace(new RegExp("\\\\\\$method\\\\\\$","g"),"((?:x|[^x])*)").replace(new RegExp("\\\\\\$receiver\\\\\\$","g"),"((?:x|[^x])*)"),s,a,p,y,m)},b7:function(n){return function(i){try{i.$method$("$arguments$")}catch(a){return a.message}}(n)},cM:function(n){}}},cm:{"^":"u;a,b",i:function(n){var i=this.b;return null==i?"NullError: "+u.a(this.a):"NullError: method not found: '"+u.a(i)+"' on null"}},eE:{"^":"u;a,b,c",i:function(n){var i,s;return null==(i=this.b)?"NoSuchMethodError: "+u.a(this.a):null==(s=this.c)?"NoSuchMethodError: method not found: '"+u.a(i)+"' ("+u.a(this.a)+")":"NoSuchMethodError: method not found: '"+u.a(i)+"' on '"+u.a(s)+"' ("+u.a(this.a)+")"},l:{bq:function(n,i){var s;return new u.eE(n,(s=null==i)?null:i.method,s?null:i.receiver)}}},fm:{"^":"u;a",i:function(n){var i=this.a;return 0===i.length?"Error":"Error: "+i}},ia:{"^":"f:1;a",$1:function(n){return $.j(n).$isu&&null==n.$thrownJsError&&(n.$thrownJsError=this.a),n}},d0:{"^":"b;a,b",i:function(n){var i;return null!=(i=this.b)||(this.b=i=(null!==(i=this.a)&&"object"==typeof i?i.stack:null)??""),i}},hW:{"^":"f:0;a",$0:function(){return this.a.$0()}},hX:{"^":"f:0;a,b",$0:function(){return this.a.$1(this.b)}},hY:{"^":"f:0;a,b,c",$0:function(){return this.a.$2(this.b,this.c)}},hZ:{"^":"f:0;a,b,c,d",$0:function(){return this.a.$3(this.b,this.c,this.d)}},i_:{"^":"f:0;a,b,c,d,e",$0:function(){return this.a.$4(this.b,this.c,this.d,this.e)}},f:{"^":"b;",i:function(n){return"Closure '"+u.cs(this)+"'"},gc8:function(){return this},$isbn:1,gc8:function(){return this}},cB:{"^":"f;"},f7:{"^":"cB;",i:function(n){var i=this.$static_name;return null==i?"Closure of unknown static method":"Closure '"+i+"'"}},bl:{"^":"cB;a,b,c,d",m:function(n,i){return null!=i&&(this===i||i instanceof u.bl&&this.a===i.a&&this.b===i.b&&this.c===i.c)},gp:function(n){var i,s;return s=null==(i=this.c)?u.Y(this.a):"object"!=typeof i?$.N(i):u.Y(i),$.dy(s,u.Y(this.b))},i:function(n){var i=this.c;return null==i&&(i=this.a),"Closure '"+u.a(this.d)+"' of "+u.b2(i)},l:{bm:function(n){return n.a},c0:function(n){return n.c},dT:function(){var n=w.ag;return null==n&&(n=u.aT("self"),w.ag=n),n},aT:function(n){var i,s,a,p,y;for(i=new u.bl("self","target","receiver","name"),(s=Object.getOwnPropertyNames(i)).fixed$length=Array,s=(a=s).length,p=0;p<s;++p)if(i[y=a[p]]===n)return y}}},f0:{"^":"u;a",i:function(n){return"RuntimeError: "+u.a(this.a)}},b5:{"^":"b;"},f1:{"^":"b5;a,b,c,d",H:function(n){var i=u.hL(n);return null!=i&&u.di(i,this.G())},G:function(){var n,i,s,a,p,y,m;if(n={func:"dynafunc"},(s=$.j(i=this.a)).$isj7?n.v=!0:s.$isc3||(n.ret=i.G()),null!=(i=this.b)&&0!==i.length&&(n.args=u.cy(i)),null!=(i=this.c)&&0!==i.length&&(n.opt=u.cy(i)),null!=(i=this.d)){for(a=Object.create(null),s=(p=u.bM(i)).length,y=0;y<s;++y)a[m=p[y]]=i[m].G();n.named=a}return n},i:function(n){var i,s,a,p,y,v,R;if(null!=(i=this.b))for(s=i.length,a="(",p=!1,y=0;y<s;++y,p=!0)p&&(a+=", "),a+=u.a(i[y]);else a="(",p=!1;if(null!=(i=this.c)&&0!==i.length){for(a=(p?a+", ":a)+"[",s=i.length,p=!1,y=0;y<s;++y,p=!0)p&&(a+=", "),a+=u.a(i[y]);a+="]"}else if(null!=(i=this.d)){for(a=(p?a+", ":a)+"{",s=(v=u.bM(i)).length,p=!1,y=0;y<s;++y,p=!0)p&&(a+=", "),a+=u.a(i[R=v[y]].G())+" "+R;a+="}"}return a+") -> "+u.a(this.a)},l:{cy:function(n){var i,s,a;for(i=[],s=n.length,a=0;a<s;++a)i.push(n[a].G());return i}}},c3:{"^":"b5;",i:function(n){return"dynamic"},G:function(){}},f3:{"^":"b5;a",G:function(){var n,i;if(null==(i=u.dl(n=this.a)))throw u.c("no type for '"+n+"'");return i},i:function(n){return this.a}},f2:{"^":"b5;a,b,c",G:function(){var n,i,s,a;if(null!=(n=this.c))return n;if(0>=(i=[u.dl(n=this.a)]).length)return u.e(i,0);if(null==i[0])throw u.c("no type for '"+n+"<...>'");for(s=(n=this.b).length,a=0;a<n.length;n.length===s||(0,u.aQ)(n),++a)i.push(n[a].G());return this.c=i,i},i:function(n){var i=this.b;return this.a+"<"+(i&&P.c).dO(i,", ")+">"}},U:{"^":"b;a,b,c,d,e,f,r,$ti",gk:function(n){return this.a},gw:function(n){return 0===this.a},gbO:function(){return new u.eK(this,[u.ae(this,0)])},gc4:function(n){return u.b_(this.gbO(),new u.eD(this),u.ae(this,0),u.ae(this,1))},am:function(n){var i,s;return"string"==typeof n?null!=(i=this.b)&&this.bd(i,n):"number"==typeof n&&(67108863&n)===n?null!=(s=this.c)&&this.bd(s,n):this.dK(n)},dK:function(n){var i=this.d;return null!=i&&this.ad(this.ak(i,this.ac(n)),n)>=0},h:function(n,i){var s,a,p;return"string"==typeof i?null==(s=this.b)?void 0:null==(a=this.a5(s,i))?null:a.gT():"number"==typeof i&&(67108863&i)===i?null==(p=this.c)?void 0:null==(a=this.a5(p,i))?null:a.gT():this.dL(i)},dL:function(n){var i,s,a;if(null!=(i=this.d)&&(s=this.ak(i,this.ac(n)),!((a=this.ad(s,n))<0)))return s[a].gT()},n:function(n,i,s){var a,p,y,m,v,R;"string"==typeof i?(null==(a=this.b)&&(a=this.aI(),this.b=a),this.b4(a,i,s)):"number"==typeof i&&(67108863&i)===i?(null==(p=this.c)&&(p=this.aI(),this.c=p),this.b4(p,i,s)):(null==(y=this.d)&&(y=this.aI(),this.d=y),m=this.ac(i),null==(v=this.ak(y,m))?this.aK(y,m,[this.aJ(i,s)]):(R=this.ad(v,i))>=0?v[R].sT(s):v.push(this.aJ(i,s)))},af:function(n,i){return"string"==typeof i?this.bt(this.b,i):"number"==typeof i&&(67108863&i)===i?this.bt(this.c,i):this.dM(i)},dM:function(n){var i,s,a,p;if(null!=(i=this.d)&&(s=this.ak(i,this.ac(n)),!((a=this.ad(s,n))<0)))return p=s.splice(a,1)[0],this.bB(p),p.gT()},a0:function(n){this.a>0&&(this.f=null,this.e=null,this.d=null,this.c=null,this.b=null,this.a=0,this.r=this.r+1&67108863)},S:function(n,i){var s,a;for(s=this.e,a=this.r;null!=s;){if(i.$2(s.a,s.b),a!==this.r)throw u.c(new g.ah(this));s=s.c}},b4:function(n,i,s){var a=this.a5(n,i);null==a?this.aK(n,i,this.aJ(i,s)):a.sT(s)},bt:function(n,i){var s;if(null!=n&&null!=(s=this.a5(n,i)))return this.bB(s),this.be(n,i),s.gT()},aJ:function(n,i){var s,a;return s=new u.eJ(n,i,null,null),null==this.e?(this.f=s,this.e=s):(s.d=a=this.f,a.c=s,this.f=s),++this.a,this.r=this.r+1&67108863,s},bB:function(n){var i,s;i=n.gd1(),s=n.gd0(),null==i?this.e=s:i.c=s,null==s?this.f=i:s.d=i,--this.a,this.r=this.r+1&67108863},ac:function(n){return 67108863&$.N(n)},ad:function(n,i){var s,a;if(null==n)return-1;for(s=n.length,a=0;a<s;++a)if($.R(n[a].gbN(),i))return a;return-1},i:function(n){return g.cf(this)},a5:function(n,i){return n[i]},ak:function(n,i){return n[i]},aK:function(n,i,s){n[i]=s},be:function(n,i){delete n[i]},bd:function(n,i){return null!=this.a5(n,i)},aI:function(){var n=Object.create(null);return this.aK(n,"<non-identifier-key>",n),this.be(n,"<non-identifier-key>"),n},$isel:1,$isW:1},eD:{"^":"f:1;a",$1:[function(n){return this.a.h(0,n)},null,null,2,0,null,18,"call"]},eJ:{"^":"b;bN:a<,T:b@,d0:c<,d1:d<"},eK:{"^":"h;a,$ti",gk:function(n){return this.a.a},gA:function(n){var i,s;return(s=new u.eL(i=this.a,i.r,null,null)).c=i.e,s}},eL:{"^":"b;a,b,c,d",gt:function(){return this.d},q:function(){var n=this.a;if(this.b!==n.r)throw u.c(new g.ah(n));return null==(n=this.c)?(this.d=null,!1):(this.d=n.a,this.c=n.c,!0)}},hQ:{"^":"f:1;a",$1:function(n){return this.a(n)}},hR:{"^":"f:8;a",$2:function(n,i){return this.a(n,i)}},hS:{"^":"f:9;a",$1:function(n){return this.a(n)}}}],["","",,u,{"^":"",bM:function(n){var i=u.G(n?Object.keys(n):[],[null]);return i.fixed$length=Array,i}}],["","",,u,{"^":"",i6:function(n){if("function"!=typeof dartPrint){if("object"==typeof console&&typeof console.log<"u")console.log(n);else if("object"!=typeof window){if("function"==typeof print)return void print(n);throw"Unable to print message: "+String(n)}}else dartPrint(n)}}],["","",,u,{"^":"",cg:{"^":"d;",$iscg:1,"%":"ArrayBuffer"},b1:{"^":"d;",$isb1:1,$isE:1,"%":";ArrayBufferView;bu|ch|cj|bv|ci|ck|X"},iN:{"^":"b1;",$isE:1,"%":"DataView"},bu:{"^":"b1;",gk:function(n){return n.length},$isL:1,$asL:Bt.t,$isD:1,$asD:Bt.t},bv:{"^":"cj;",h:function(n,i){return(i>>>0!==i||i>=n.length)&&u.p(u.r(n,i)),n[i]},n:function(n,i,s){(i>>>0!==i||i>=n.length)&&u.p(u.r(n,i)),n[i]=s}},ch:{"^":"bu+aF;",$asL:Bt.t,$asD:Bt.t,$asi:function(){return[g.a2]},$ash:function(){return[g.a2]},$isi:1,$ish:1},cj:{"^":"ch+c8;",$asL:Bt.t,$asD:Bt.t,$asi:function(){return[g.a2]},$ash:function(){return[g.a2]}},X:{"^":"ck;",n:function(n,i,s){(i>>>0!==i||i>=n.length)&&u.p(u.r(n,i)),n[i]=s},$isi:1,$asi:function(){return[g.k]},$ish:1,$ash:function(){return[g.k]}},ci:{"^":"bu+aF;",$asL:Bt.t,$asD:Bt.t,$asi:function(){return[g.k]},$ash:function(){return[g.k]},$isi:1,$ish:1},ck:{"^":"ci+c8;",$asL:Bt.t,$asD:Bt.t,$asi:function(){return[g.k]},$ash:function(){return[g.k]}},iO:{"^":"bv;",$isE:1,$isi:1,$asi:function(){return[g.a2]},$ish:1,$ash:function(){return[g.a2]},"%":"Float32Array"},iP:{"^":"bv;",$isE:1,$isi:1,$asi:function(){return[g.a2]},$ish:1,$ash:function(){return[g.a2]},"%":"Float64Array"},iQ:{"^":"X;",h:function(n,i){return(i>>>0!==i||i>=n.length)&&u.p(u.r(n,i)),n[i]},$isE:1,$isi:1,$asi:function(){return[g.k]},$ish:1,$ash:function(){return[g.k]},"%":"Int16Array"},iR:{"^":"X;",h:function(n,i){return(i>>>0!==i||i>=n.length)&&u.p(u.r(n,i)),n[i]},$isE:1,$isi:1,$asi:function(){return[g.k]},$ish:1,$ash:function(){return[g.k]},"%":"Int32Array"},iS:{"^":"X;",h:function(n,i){return(i>>>0!==i||i>=n.length)&&u.p(u.r(n,i)),n[i]},$isE:1,$isi:1,$asi:function(){return[g.k]},$ish:1,$ash:function(){return[g.k]},"%":"Int8Array"},iT:{"^":"X;",h:function(n,i){return(i>>>0!==i||i>=n.length)&&u.p(u.r(n,i)),n[i]},$isE:1,$isi:1,$asi:function(){return[g.k]},$ish:1,$ash:function(){return[g.k]},"%":"Uint16Array"},iU:{"^":"X;",h:function(n,i){return(i>>>0!==i||i>=n.length)&&u.p(u.r(n,i)),n[i]},$isE:1,$isi:1,$asi:function(){return[g.k]},$ish:1,$ash:function(){return[g.k]},"%":"Uint32Array"},iV:{"^":"X;",gk:function(n){return n.length},h:function(n,i){return(i>>>0!==i||i>=n.length)&&u.p(u.r(n,i)),n[i]},$isE:1,$isi:1,$asi:function(){return[g.k]},$ish:1,$ash:function(){return[g.k]},"%":"CanvasPixelArray|Uint8ClampedArray"},iW:{"^":"X;",gk:function(n){return n.length},h:function(n,i){return(i>>>0!==i||i>=n.length)&&u.p(u.r(n,i)),n[i]},$isE:1,$isi:1,$asi:function(){return[g.k]},$ish:1,$ash:function(){return[g.k]},"%":";Uint8Array"}}],["","",,g,{"^":"",fs:function(){var n,i,s;return n={},null!=self.scheduleImmediate?g.hB():null!=self.MutationObserver&&null!=self.document?(i=self.document.createElement("div"),s=self.document.createElement("span"),n.a=null,new self.MutationObserver(u.ad(new g.fu(n),1)).observe(i,{childList:!0}),new g.ft(n,i,s)):null!=self.setImmediate?g.hC():g.hD()},j8:[function(n){++O.globalState.f.b,self.scheduleImmediate(u.ad(new g.fv(n),0))},"$1","hB",2,0,3],j9:[function(n){++O.globalState.f.b,self.setImmediate(u.ad(new g.fw(n),0))},"$1","hC",2,0,3],ja:[function(n){g.by(P.f,n)},"$1","hD",2,0,3],hp:function(n,i,s){var a=u.ap();return u.a1(a,[a,a]).H(n)?n.$2(i,s):n.$1(i)},d6:function(n,i){var s=u.ap();return u.a1(s,[s,s]).H(n),n},hr:function(){for(var n,i;null!=(n=w.ab);)w.al=null,w.ab=i=n.b,null==i&&(w.ak=null),n.a.$0()},jo:[function(){w.bI=!0;try{g.hr()}finally{w.al=null,w.bI=!1,null!=w.ab&&w.$get$bA().$1(g.de())}},"$0","de",0,0,2],da:function(n){var i=new g.cT(n,null);null==w.ab?(w.ak=i,w.ab=i,w.bI||w.$get$bA().$1(g.de())):(w.ak.b=i,w.ak=i)},hu:function(n){var i,s,a;if(null==(i=w.ab))return g.da(n),void(w.al=w.ak);s=new g.cT(n,null),null==(a=w.al)?(s.b=i,w.al=s,w.ab=s):(s.b=a.b,a.b=s,w.al=s,null==s.b&&(w.ak=s))},dq:function(n){var i=w.l;P.b!==i?g.an(null,null,i,i.aM(n,!0)):g.an(null,null,P.b,n)},jm:[function(n){},"$1","hE",2,0,15,7],hs:[function(n,i){g.am(null,null,w.l,n,i)},function(n){return g.hs(n,null)},"$2","$1","hG",2,2,4,2,0,1],jn:[function(){},"$0","hF",0,0,2],d1:function(n,i,s){n.a4(i,s)},fj:function(n,i){var s=w.l;return g.by(n,s===P.b?i:s.aM(i,!0))},fk:function(n,i){var s,a;return(s=w.l)===P.b?g.cE(n,i):(a=s.bF(i,!0),g.cE(n,a))},by:function(n,i){var s=P.a.Z(n.a,1e3);return u.fe(s<0?0:s,i)},cE:function(n,i){var s=P.a.Z(n.a,1e3);return u.ff(s<0?0:s,i)},fr:function(){return w.l},am:function(n,i,s,a,p){var y={};y.a=a,g.hu(new g.ht(y,p))},d7:function(n,i,s,a){var p,y;if((y=w.l)===s)return a.$0();w.l=s,p=y;try{return y=a.$0()}finally{w.l=p}},d9:function(n,i,s,a,p){var y,m;if((m=w.l)===s)return a.$1(p);w.l=s,y=m;try{return m=a.$1(p)}finally{w.l=y}},d8:function(n,i,s,a,p,y){var m,v;if((v=w.l)===s)return a.$2(p,y);w.l=s,m=v;try{return v=a.$2(p,y)}finally{w.l=m}},an:function(n,i,s,a){var p=P.b!==s;p&&(a=s.aM(a,!!p)),g.da(a)},fu:{"^":"f:1;a",$1:[function(n){var i,s;--O.globalState.f.b,s=(i=this.a).a,i.a=null,s.$0()},null,null,2,0,null,3,"call"]},ft:{"^":"f:10;a,b,c",$1:function(n){var i,s;++O.globalState.f.b,this.a.a=n,s=this.c,(i=this.b).firstChild?i.removeChild(s):i.appendChild(s)}},fv:{"^":"f:0;a",$0:[function(){--O.globalState.f.b,this.a.$0()},null,null,0,0,null,"call"]},fw:{"^":"f:0;a",$0:[function(){--O.globalState.f.b,this.a.$0()},null,null,0,0,null,"call"]},a6:{"^":"b;$ti"},cX:{"^":"b;I:a@,u:b>,c,d,e",ga_:function(){return this.b.b},gbM:function(){return 0!=(1&this.c)},gdH:function(){return 0!=(2&this.c)},gbL:function(){return 8===this.c},gdI:function(){return null!=this.e},dF:function(n){return this.b.b.aW(this.d,n)},dQ:function(n){return 6!==this.c||this.b.b.aW(this.d,$.as(n))},bK:function(n){var i,s,a,p;return i=this.e,s=u.ap(),a=$.o(n),p=this.b.b,u.a1(s,[s,s]).H(i)?p.dZ(i,a.gR(n),n.gV()):p.aW(i,a.gR(n))},dG:function(){return this.b.b.c_(this.d)}},a8:{"^":"b;O:a<,a_:b<,Y:c<,$ti",gcY:function(){return 2===this.a},gaH:function(){return this.a>=4},gcX:function(){return 8===this.a},d5:function(n){this.a=2,this.c=n},c2:function(n,i){var s,a;return(s=w.l)!==P.b&&null!=i&&(i=g.d6(i,s)),a=new g.a8(0,w.l,null,[null]),this.au(new g.cX(null,a,null==i?1:3,n,i)),a},e0:function(n){return this.c2(n,null)},c5:function(n){var s;return s=new g.a8(0,w.l,null,this.$ti),this.au(new g.cX(null,s,8,n,null)),s},d7:function(){this.a=1},cQ:function(){this.a=0},gM:function(){return this.c},gcP:function(){return this.c},d8:function(n){this.a=4,this.c=n},d6:function(n){this.a=8,this.c=n},b6:function(n){this.a=n.gO(),this.c=n.gY()},au:function(n){var i,s;if((i=this.a)<=1)n.a=this.c,this.c=n;else{if(2===i){if(!(s=this.c).gaH())return void s.au(n);this.a=s.gO(),this.c=s.gY()}g.an(null,null,i=this.b,new g.fJ(this,n))}},bs:function(n){var i,s,a,p,y;if((i={}).a=n,null!=n)if((s=this.a)<=1){if(a=this.c,this.c=n,null!=a){for(p=n;null!=p.gI();)p=p.gI();p.sI(a)}}else{if(2===s){if(!(y=this.c).gaH())return void y.bs(n);this.a=y.gO(),this.c=y.gY()}i.a=this.bu(n),g.an(null,null,s=this.b,new g.fQ(i,this))}},X:function(){var n=this.c;return this.c=null,this.bu(n)},bu:function(n){var i,s,a;for(i=n,s=null;null!=i;s=i,i=a)a=i.gI(),i.sI(s);return s},aB:function(n){var i;$.j(n).$isa6?g.bb(n,this):(i=this.X(),this.a=4,this.c=n,g.a9(this,i))},aC:[function(n,i){var s=this.X();this.a=8,this.c=new g.aS(n,i),g.a9(this,s)},function(n){return this.aC(n,null)},"e8","$2","$1","gbc",2,2,4,2,0,1],cO:function(n){$.j(n).$isa6?8===n.a?(this.a=1,g.an(null,null,this.b,new g.fK(this,n))):g.bb(n,this):(this.a=1,g.an(null,null,this.b,new g.fL(this,n)))},cK:function(n,i){this.cO(n)},$isa6:1,l:{fM:function(n,i){var s,a;i.d7();try{n.c2(new g.fN(i),new g.fO(i))}catch(m){s=u.z(m),a=u.B(m),g.dq(new g.fP(i,s,a))}},bb:function(n,i){for(var s;n.gcY();)n=n.gcP();n.gaH()?(s=i.X(),i.b6(n),g.a9(i,s)):(s=i.gY(),i.d5(n),n.bs(s))},a9:function(n,i){var s,a,p,y,m,v,R,d,T,E,I;for((s={}).a=n,a=n;;){if(p={},y=a.gcX(),null==i)return void(y&&(m=s.a.gM(),a=s.a.ga_(),p=$.as(m),v=m.gV(),g.am(null,null,a,p,v)));for(;null!=i.gI();i=R)R=i.gI(),i.sI(null),g.a9(s.a,i);if(d=s.a.gY(),p.a=y,p.b=d,!(a=!y)||i.gbM()||i.gbL()){if(T=i.ga_(),y?((v=null==(v=s.a.ga_())?null==T:v===T)&&(v=!0),v=!v):v=!1,v)return m=s.a.gM(),a=s.a.ga_(),p=$.as(m),v=m.gV(),void g.am(null,null,a,p,v);if((null==(E=w.l)?null!=T:E!==T)?w.l=T:E=null,i.gbL()?new g.fT(s,p,y,i).$0():a?i.gbM()&&new g.fS(p,i,d).$0():i.gdH()&&new g.fR(s,p,i).$0(),null!=E&&(w.l=E),(v=$.j(a=p.b)).$isa6){if(I=$.bV(i),v.$isa8){if(a.a>=4){i=I.X(),I.b6(a),s.a=a;continue}g.bb(a,I)}else g.fM(a,I);return}}i=(I=$.bV(i)).X(),a=p.a,p=p.b,a?I.d6(p):I.d8(p),s.a=I,a=I}}}},fJ:{"^":"f:0;a,b",$0:function(){g.a9(this.a,this.b)}},fQ:{"^":"f:0;a,b",$0:function(){g.a9(this.b,this.a.a)}},fN:{"^":"f:1;a",$1:[function(n){var i=this.a;i.cQ(),i.aB(n)},null,null,2,0,null,7,"call"]},fO:{"^":"f:11;a",$2:[function(n,i){this.a.aC(n,i)},function(n){return this.$2(n,null)},"$1",null,null,null,2,2,null,2,0,1,"call"]},fP:{"^":"f:0;a,b,c",$0:[function(){this.a.aC(this.b,this.c)},null,null,0,0,null,"call"]},fK:{"^":"f:0;a,b",$0:function(){g.bb(this.b,this.a)}},fL:{"^":"f:0;a,b",$0:function(){var n,i;i=(n=this.a).X(),n.a=4,n.c=this.b,g.a9(n,i)}},fT:{"^":"f:2;a,b,c,d",$0:function(){var n,i,s,p,y;n=null;try{n=this.d.dG()}catch(v){return i=p=u.z(v),s=u.B(v),this.c?(y=i,p=y=null==(p=$.as(this.a.a.gM()))?null==y:p===y):p=!1,(y=this.b).b=p?this.a.a.gM():new g.aS(i,s),void(y.a=!0)}if($.j(n).$isa6){if(n instanceof g.a8&&n.gO()>=4)return void(8===n.gO()&&(p=this.b,p.b=n.gY(),p.a=!0));(p=this.b).b=n.e0(new g.fU(this.a.a)),p.a=!1}}},fU:{"^":"f:1;a",$1:[function(n){return this.a},null,null,2,0,null,3,"call"]},fS:{"^":"f:2;a,b,c",$0:function(){var n,i,a;try{this.a.b=this.b.dF(this.c)}catch(p){n=a=u.z(p),i=u.B(p),(a=this.a).b=new g.aS(n,i),a.a=!0}}},fR:{"^":"f:2;a,b,c",$0:function(){var n,i,s,a,p,m,v;try{n=this.a.a.gM(),!0===(a=this.c).dQ(n)&&a.gdI()&&((p=this.b).b=a.bK(n),p.a=!1)}catch(R){i=a=u.z(R),s=u.B(R),p=$.as((a=this.a).a.gM()),m=i,(v=this.b).b=(null==p?null==m:p===m)?a.a.gM():new g.aS(i,s),v.a=!0}}},cT:{"^":"b;a,b"},a_:{"^":"b;$ti",a1:function(n,i){return new g.h8(i,this,[u.x(this,"a_",0),null])},dB:function(n,i){return new g.fV(n,i,this,[u.x(this,"a_",0)])},bK:function(n){return this.dB(n,null)},gk:function(n){var i,s;return i={},s=new g.a8(0,w.l,null,[g.k]),i.a=0,this.ae(new g.f9(i),!0,new g.fa(i,s),s.gbc()),s},aZ:function(n){var i,s,a;return i=u.x(this,"a_",0),s=u.G([],[i]),a=new g.a8(0,w.l,null,[[g.i,i]]),this.ae(new g.fb(this,s),!0,new g.fc(s,a),a.gbc()),a}},f9:{"^":"f:1;a",$1:[function(n){++this.a.a},null,null,2,0,null,3,"call"]},fa:{"^":"f:0;a,b",$0:[function(){this.b.aB(this.a.a)},null,null,0,0,null,"call"]},fb:{"^":"f;a,b",$1:[function(n){this.b.push(n)},null,null,2,0,null,8,"call"],$signature:function(){return u.dg(function(n){return{func:1,args:[n]}},this.a,"a_")}},fc:{"^":"f:0;a,b",$0:[function(){this.b.aB(this.a)},null,null,0,0,null,"call"]},f8:{"^":"b;"},je:{"^":"b;"},b8:{"^":"b;a_:d<,O:e<,$ti",aT:function(n,i){var s=this.e;0==(8&s)&&(this.e=(s+128|4)>>>0,s<128&&null!=this.r&&this.r.bH(),0==(4&s)&&0==(32&this.e)&&this.bi(this.gbo()))},bV:function(n){return this.aT(n,null)},bZ:function(){var n=this.e;0==(8&n)&&n>=128&&(this.e=n-=128,n<128&&((n=0!=(64&n)&&!(n=this.r).gw(n))?this.r.as(this):(this.e=n=(4294967291&this.e)>>>0,0==(32&n)&&this.bi(this.gbq()))))},al:function(){var n=(4294967279&this.e)>>>0;return this.e=n,0==(8&n)&&this.ax(),(n=this.f)??w.$get$aX()},gaP:function(){return this.e>=128},ax:function(){var n=(8|this.e)>>>0;this.e=n,0!=(64&n)&&this.r.bH(),0==(32&this.e)&&(this.r=null),this.f=this.bn()},aw:["cA",function(n){var i=this.e;0==(8&i)&&(i<32?this.bw(n):this.av(new g.fz(n,null,[u.x(this,"b8",0)])))}],a4:["cB",function(n,i){var s=this.e;0==(8&s)&&(s<32?this.by(n,i):this.av(new g.fB(n,i,null)))}],cN:function(){var n=this.e;0==(8&n)&&(this.e=n=(2|n)>>>0,n<32?this.bx():this.av(P.o))},bp:[function(){},"$0","gbo",0,0,2],br:[function(){},"$0","gbq",0,0,2],bn:function(){},av:function(n){var i,s;null==(i=this.r)&&(i=new g.hg(null,null,0,[u.x(this,"b8",0)]),this.r=i),i.v(0,n),0==(64&(s=this.e))&&(this.e=s=(64|s)>>>0,s<128&&this.r.as(this))},bw:function(n){var i=this.e;this.e=(32|i)>>>0,this.d.aX(this.a,n),this.e=(4294967263&this.e)>>>0,this.az(0!=(4&i))},by:function(n,i){var s,a,p;s=this.e,a=new g.fy(this,n,i),0!=(1&s)?(this.e=(16|s)>>>0,this.ax(),$.j(s=this.f).$isa6?(p=w.$get$aX(),p=null==s?null!=p:s!==p):p=!1,p?s.c5(a):a.$0()):(a.$0(),this.az(0!=(4&s)))},bx:function(){var n,i,s;n=new g.fx(this),this.ax(),this.e=(16|this.e)>>>0,$.j(i=this.f).$isa6?(s=w.$get$aX(),s=null==i?null!=s:i!==s):s=!1,s?i.c5(n):n.$0()},bi:function(n){var i=this.e;this.e=(32|i)>>>0,n.$0(),this.e=(4294967263&this.e)>>>0,this.az(0!=(4&i))},az:function(n){var i,s;for((i=0!=(64&this.e)&&(i=this.r).gw(i))&&(this.e=i=(4294967231&this.e)>>>0,(i=0!=(4&i)&&i<128&&(null==(i=this.r)||i.gw(i)))&&(this.e=(4294967291&this.e)>>>0));;n=s){if(0!=(8&(i=this.e)))return void(this.r=null);if(n===(s=0!=(4&i)))break;this.e=(32^i)>>>0,s?this.bp():this.br(),this.e=(4294967263&this.e)>>>0}0!=(64&(i=this.e))&&i<128&&this.r.as(this)},cH:function(n,i,s,a,p){var y,m;y=n??g.hE(),m=this.d,this.a=y,this.b=g.d6(i??g.hG(),m),this.c=s??g.hF()}},fy:{"^":"f:2;a,b,c",$0:[function(){var n,i,s,a,p,y;(0==(8&(i=(n=this.a).e))||0!=(16&i))&&(n.e=(32|i)>>>0,i=n.b,s=u.a1(u.ap(),[u.df(g.b),u.df(g.aH)]).H(i),a=n.d,p=this.b,y=n.b,s?a.e_(y,p,this.c):a.aX(y,p),n.e=(4294967263&n.e)>>>0)},null,null,0,0,null,"call"]},fx:{"^":"f:2;a",$0:[function(){var n,i;0!=(16&(i=(n=this.a).e))&&(n.e=(42|i)>>>0,n.d.c0(n.c),n.e=(4294967263&n.e)>>>0)},null,null,0,0,null,"call"]},cV:{"^":"b;ao:a@"},fz:{"^":"cV;b,a,$ti",aU:function(n){n.bw(this.b)}},fB:{"^":"cV;R:b>,V:c<,a",aU:function(n){n.by(this.b,this.c)}},fA:{"^":"b;",aU:function(n){n.bx()},gao:function(){},sao:function(n){throw u.c(new g.b6("No events after a done."))}},ha:{"^":"b;O:a<",as:function(n){var i=this.a;if(1!==i){if(i>=1)return void(this.a=1);g.dq(new g.hb(this,n)),this.a=1}},bH:function(){1===this.a&&(this.a=3)}},hb:{"^":"f:0;a,b",$0:[function(){var n,i,s,a;i=(n=this.a).a,n.a=0,3!==i&&(a=(s=n.b).gao(),n.b=a,null==a&&(n.c=null),s.aU(this.b))},null,null,0,0,null,"call"]},hg:{"^":"ha;b,c,a,$ti",gw:function(n){return null==this.c},v:function(n,i){var s=this.c;null==s?(this.c=i,this.b=i):(s.sao(i),this.c=i)}},aL:{"^":"a_;$ti",ae:function(n,i,s,a){return this.cT(n,a,s,!0===i)},bP:function(n,i,s){return this.ae(n,null,i,s)},cT:function(n,i,s,a){return g.fI(this,n,i,s,a,u.x(this,"aL",0),u.x(this,"aL",1))},bj:function(n,i){i.aw(n)},bk:function(n,i,s){s.a4(n,i)},$asa_:function(n,i){return[i]}},cW:{"^":"b8;x,y,a,b,c,d,e,f,r,$ti",aw:function(n){0==(2&this.e)&&this.cA(n)},a4:function(n,i){0==(2&this.e)&&this.cB(n,i)},bp:[function(){this.y?.bV(0)},"$0","gbo",0,0,2],br:[function(){this.y?.bZ()},"$0","gbq",0,0,2],bn:function(){var n=this.y;if(null!=n)return this.y=null,n.al()},e9:[function(n){this.x.bj(n,this)},"$1","gcU",2,0,function(){return u.dg(function(n,i){return{func:1,v:!0,args:[n]}},this.$receiver,"cW")},8],eb:[function(n,i){this.x.bk(n,i,this)},"$2","gcW",4,0,12,0,1],ea:[function(){this.cN()},"$0","gcV",0,0,2],cJ:function(n,i,s,a,p,y,m){this.y=this.x.a.bP(this.gcU(),this.gcV(),this.gcW())},$asb8:function(n,i){return[i]},l:{fI:function(n,i,s,a,p,y,m){var R;return(R=new g.cW(n,null,null,null,null,w.l,R=p?1:0,null,null,[y,m])).cH(i,s,a,p,m),R.cJ(n,i,s,a,p,y,m),R}}},h8:{"^":"aL;b,a,$ti",bj:function(n,i){var s,a,p;s=null;try{s=this.b.$1(n)}catch(v){return a=u.z(v),p=u.B(v),void g.d1(i,a,p)}i.aw(s)}},fV:{"^":"aL;b,c,a,$ti",bk:function(n,i,s){var p,y,v;try{g.hp(this.b,n,i)}catch(R){return p=u.z(R),y=u.B(R),void((null==(v=p)?null==n:v===n)?s.a4(n,i):g.d1(s,p,y))}},$asaL:function(n){return[n,n]},$asa_:null},cC:{"^":"b;"},aS:{"^":"b;R:a>,V:b<",i:function(n){return u.a(this.a)},$isu:1},hj:{"^":"b;"},ht:{"^":"f:0;a,b",$0:function(){var n,i,s;throw null==(i=(n=this.a).a)?(s=new g.cn,n.a=s,n=s):n=i,null==(i=this.b)?u.c(n):((s=u.c(n)).stack=$.a3(i),s)}},hc:{"^":"hj;",c0:function(n){var i,s;try{return P.b===w.l?n.$0():g.d7(null,null,this,n)}catch(y){return i=u.z(y),s=u.B(y),g.am(null,null,this,i,s)}},aX:function(n,i){var s,a;try{return P.b===w.l?n.$1(i):g.d9(null,null,this,n,i)}catch(m){return s=u.z(m),a=u.B(m),g.am(null,null,this,s,a)}},e_:function(n,i,s){var a,p;try{return P.b===w.l?n.$2(i,s):g.d8(null,null,this,n,i,s)}catch(v){return a=u.z(v),p=u.B(v),g.am(null,null,this,a,p)}},aM:function(n,i){return i?new g.hd(this,n):new g.he(this,n)},bF:function(n,i){return new g.hf(this,n)},h:function(n,i){},c_:function(n){return w.l===P.b?n.$0():g.d7(null,null,this,n)},aW:function(n,i){return w.l===P.b?n.$1(i):g.d9(null,null,this,n,i)},dZ:function(n,i,s){return w.l===P.b?n.$2(i,s):g.d8(null,null,this,n,i,s)}},hd:{"^":"f:0;a,b",$0:function(){return this.a.c0(this.b)}},he:{"^":"f:0;a,b",$0:function(){return this.a.c_(this.b)}},hf:{"^":"f:1;a,b",$1:[function(n){return this.a.aX(this.b,n)},null,null,2,0,null,19,"call"]}}],["","",,g,{"^":"",eM:function(){return new u.U(0,null,null,null,null,null,0,[null,null])},V:function(n){return u.hM(n,new u.U(0,null,null,null,null,null,0,[null,null]))},et:function(n,i,s){var a,p;if(g.bJ(n))return"("===i&&")"===s?"(...)":i+"..."+s;a=[],(p=w.$get$ao()).push(n);try{g.hq(n,a)}finally{if(0>=p.length)return u.e(p,-1);p.pop()}return(p=g.cA(i,a,", ")+s).charCodeAt(0),p},aZ:function(n,i,s){var a,p,y;if(g.bJ(n))return i+"..."+s;a=new g.aI(i),(p=w.$get$ao()).push(n);try{(y=a).sj(g.cA(y.gj(),n,", "))}finally{if(0>=p.length)return u.e(p,-1);p.pop()}return(p=a).sj(p.gj()+s),(p=a.gj()).charCodeAt(0),p},bJ:function(n){var i,s;for(i=0;i<(s=w.$get$ao()).length;++i)if(n===s[i])return!0;return!1},hq:function(n,i){var s,a,p,y,m,v,R,d,T,E;for(s=n.gA(n),a=0,p=0;a<80||p<3;){if(!s.q())return;y=u.a(s.gt()),i.push(y),a+=y.length+2,++p}if(s.q())if(R=s.gt(),++p,s.q()){for(d=s.gt(),++p;s.q();R=d,d=T)if(T=s.gt(),++p>100){for(;a>75&&p>3;){if(0>=i.length)return u.e(i,-1);a-=i.pop().length+2,--p}return void i.push("...")}v=u.a(R),a+=(m=u.a(d)).length+v.length+4}else{if(p<=4)return void i.push(u.a(R));if(m=u.a(R),0>=i.length)return u.e(i,-1);v=i.pop(),a+=m.length+2}else{if(p<=5)return;if(0>=i.length||(m=i.pop(),0>=i.length))return u.e(i,-1);v=i.pop()}for(p>i.length+2?(a+=5,E="..."):E=null;a>80&&i.length>3;){if(0>=i.length)return u.e(i,-1);a-=i.pop().length+2,null==E&&(a+=5,E="...")}null!=E&&i.push(E),i.push(v),i.push(m)},ai:function(n,i,s,a){return new g.h1(0,null,null,null,null,null,0,[a])},cf:function(n){var i,s,a;if(i={},g.bJ(n))return"{...}";s=new g.aI("");try{w.$get$ao().push(n),(a=s).sj(a.gj()+"{"),i.a=!0,n.S(0,new g.eQ(i,s)),(i=s).sj(i.gj()+"}")}finally{if(0>=(i=w.$get$ao()).length)return u.e(i,-1);i.pop()}return(i=s.gj()).charCodeAt(0),i},d_:{"^":"U;a,b,c,d,e,f,r,$ti",ac:function(n){return 67108863&u.i5(n)},ad:function(n,i){var s,a,p;if(null==n)return-1;for(s=n.length,a=0;a<s;++a)if(null==(p=n[a].gbN())?null==i:p===i)return a;return-1},l:{aj:function(n,i){return new g.d_(0,null,null,null,null,null,0,[n,i])}}},h1:{"^":"fW;a,b,c,d,e,f,r,$ti",gA:function(n){var i=new g.cZ(this,this.r,null,null);return i.c=this.e,i},gk:function(n){return this.a},dd:function(n,i){var s,a;return"string"==typeof i&&"__proto__"!==i?null!=(s=this.b)&&null!=s[i]:"number"==typeof i&&(67108863&i)===i?null!=(a=this.c)&&null!=a[i]:this.cS(i)},cS:function(n){var i=this.d;return null!=i&&this.aj(i[this.ai(n)],n)>=0},bQ:function(n){return"string"==typeof n&&"__proto__"!==n||"number"==typeof n&&(67108863&n)===n?this.dd(0,n)?n:null:this.cZ(n)},cZ:function(n){var i,s,a;if(null!=(i=this.d)&&(s=i[this.ai(n)],!((a=this.aj(s,n))<0)))return $.bU(s,a).gaD()},v:function(n,i){var s,a,p;return"string"==typeof i&&"__proto__"!==i?(null==(s=this.b)&&((a=Object.create(null))["<non-identifier-key>"]=a,delete a["<non-identifier-key>"],this.b=a,s=a),this.b7(s,i)):"number"==typeof i&&(67108863&i)===i?(null==(p=this.c)&&((a=Object.create(null))["<non-identifier-key>"]=a,delete a["<non-identifier-key>"],this.c=a,p=a),this.b7(p,i)):this.F(i)},F:function(n){var i,s,a;if(null==(i=this.d)&&(i=g.h3(),this.d=i),null==(a=i[s=this.ai(n)]))i[s]=[this.aA(n)];else{if(this.aj(a,n)>=0)return!1;a.push(this.aA(n))}return!0},af:function(n,i){return"string"==typeof i&&"__proto__"!==i?this.ba(this.b,i):"number"==typeof i&&(67108863&i)===i?this.ba(this.c,i):this.d2(i)},d2:function(n){var i,s,a;return!(null==(i=this.d)||(s=i[this.ai(n)],a=this.aj(s,n),a<0)||(this.bb(s.splice(a,1)[0]),0))},a0:function(n){this.a>0&&(this.f=null,this.e=null,this.d=null,this.c=null,this.b=null,this.a=0,this.r=this.r+1&67108863)},b7:function(n,i){return null==n[i]&&(n[i]=this.aA(i),!0)},ba:function(n,i){var s;return null!=n&&null!=(s=n[i])&&(this.bb(s),delete n[i],!0)},aA:function(n){var i,s;return i=new g.h2(n,null,null),null==this.e?(this.f=i,this.e=i):(i.c=s=this.f,s.b=i,this.f=i),++this.a,this.r=this.r+1&67108863,i},bb:function(n){var i,s;i=n.gb9(),s=n.gb8(),null==i?this.e=s:i.b=s,null==s?this.f=i:s.sb9(i),--this.a,this.r=this.r+1&67108863},ai:function(n){return 67108863&$.N(n)},aj:function(n,i){var s,a;if(null==n)return-1;for(s=n.length,a=0;a<s;++a)if($.R(n[a].gaD(),i))return a;return-1},$ish:1,$ash:null,l:{h3:function(){var n=Object.create(null);return n["<non-identifier-key>"]=n,delete n["<non-identifier-key>"],n}}},h2:{"^":"b;aD:a<,b8:b<,b9:c@"},cZ:{"^":"b;a,b,c,d",gt:function(){return this.d},q:function(){var n=this.a;if(this.b!==n.r)throw u.c(new g.ah(n));return null==(n=this.c)?(this.d=null,!1):(this.d=n.gaD(),this.c=this.c.gb8(),!0)}},fW:{"^":"f5;$ti"},aF:{"^":"b;$ti",gA:function(n){return new u.cd(n,this.gk(n),0,null)},J:function(n,i){return this.h(n,i)},a1:function(n,i){return new u.b0(n,i,[u.x(n,"aF",0),null])},v:function(n,i){var s=this.gk(n);this.sk(n,s+1),this.n(n,s,i)},i:function(n){return g.aZ(n,"[","]")},$isi:1,$asi:null,$ish:1,$ash:null},hi:{"^":"b;",n:function(n,i,s){throw u.c(new g.q("Cannot modify unmodifiable map"))},$isW:1},eO:{"^":"b;",h:function(n,i){return this.a.h(0,i)},n:function(n,i,s){this.a.n(0,i,s)},S:function(n,i){this.a.S(0,i)},gw:function(n){var i=this.a;return i.gw(i)},gk:function(n){var i=this.a;return i.gk(i)},i:function(n){return this.a.i(0)},$isW:1},cS:{"^":"eO+hi;$ti",$asW:null,$isW:1},eQ:{"^":"f:5;a,b",$2:function(n,i){var s,a;(s=this.a).a||(this.b.j+=", "),s.a=!1,a=(s=this.b).j+=u.a(n),s.j=a+": ",s.j+=u.a(i)}},eN:{"^":"aE;a,b,c,d,$ti",gA:function(n){return new g.h4(this,this.c,this.d,this.b,null)},gw:function(n){return this.b===this.c},gk:function(n){return(this.c-this.b&this.a.length-1)>>>0},J:function(n,i){var s,a,p,y;return s=(this.c-this.b&this.a.length-1)>>>0,(0>i||i>=s)&&u.p(g.aY(i,this,"index",null,s)),(y=(this.b+i&(p=(a=this.a).length)-1)>>>0)<0||y>=p?u.e(a,y):a[y]},v:function(n,i){this.F(i)},a0:function(n){var i,s,a,p,y;if((i=this.b)!==(s=this.c)){for(y=(p=(a=this.a).length)-1;i!==s;i=(i+1&y)>>>0){if(i<0||i>=p)return u.e(a,i);a[i]=null}this.c=0,this.b=0,++this.d}},i:function(n){return g.aZ(this,"{","}")},bY:function(){var n,i,s,a;if((n=this.b)===this.c)throw u.c(u.cb());return++this.d,n>=(s=(i=this.a).length)?u.e(i,n):(a=i[n],i[n]=null,this.b=(n+1&s-1)>>>0,a)},F:function(n){var i,s,a;if(a=(i=this.a).length,(s=this.c)<0||s>=a)return u.e(i,s);i[s]=n,this.c=a=(s+1&a-1)>>>0,this.b===a&&this.bh(),++this.d},bh:function(){var n,i,s,a;(n=new Array(2*this.a.length)).fixed$length=Array,i=u.G(n,this.$ti),P.c.b1(i,0,a=(n=this.a).length-(s=this.b),n,s),P.c.b1(i,a,a+this.b,this.a,0),this.b=0,this.c=this.a.length,this.a=i},cD:function(n,i){var s=new Array(8);s.fixed$length=Array,this.a=u.G(s,[i])},$ash:null,l:{bt:function(n,i){var s=new g.eN(null,0,0,0,[i]);return s.cD(n,i),s}}},h4:{"^":"b;a,b,c,d,e",gt:function(){return this.e},q:function(){var n,i,s;return this.c!==(n=this.a).d&&u.p(new g.ah(n)),(i=this.d)===this.b?(this.e=null,!1):i>=(s=(n=n.a).length)?u.e(n,i):(this.e=n[i],this.d=(i+1&s-1)>>>0,!0)}},f6:{"^":"b;$ti",a1:function(n,i){return new u.c4(this,i,[u.ae(this,0),null])},i:function(n){return g.aZ(this,"{","}")},$ish:1,$ash:null},f5:{"^":"f6;$ti"}}],["","",,g,{"^":"",jl:[function(n){return n.ee()},"$1","hK",2,0,1,4],dY:{"^":"b;"},e2:{"^":"b;"},br:{"^":"u;a,b",i:function(n){return null!=this.b?"Converting object to an encodable object failed.":"Converting object did not return an encodable object."}},eH:{"^":"br;a,b",i:function(n){return"Cyclic error in JSON stringify"}},eG:{"^":"dY;a,b",du:function(n,i){var s=this.gdv();return g.fZ(n,s.b,s.a)},dt:function(n){return this.du(n,null)},gdv:function(){return P.A}},eI:{"^":"e2;a,b"},h_:{"^":"b;",c7:function(n){var i,s,a,p,y,m,v;if("number"!=typeof(s=(i=$.F(n)).gk(n)))return u.n(s);for(a=this.c,p=0,y=0;y<s;++y)if(!((m=i.bJ(n,y))>92))if(m<32)switch(y>p&&(a.j+=i.a3(n,p,y)),p=y+1,a.j+=u.A(92),m){case 8:a.j+=u.A(98);break;case 9:a.j+=u.A(116);break;case 10:a.j+=u.A(110);break;case 12:a.j+=u.A(102);break;case 13:a.j+=u.A(114);break;default:a.j+=u.A(117),a.j+=u.A(48),a.j+=u.A(48),a.j+=u.A((v=m>>>4&15)<10?48+v:87+v),a.j+=u.A((v=15&m)<10?48+v:87+v)}else(34===m||92===m)&&(y>p&&(a.j+=i.a3(n,p,y)),p=y+1,a.j+=u.A(92),a.j+=u.A(m));0===p?a.j+=u.a(n):p<s&&(a.j+=i.a3(n,p,s))},ay:function(n){var i,s,a,p;for(s=(i=this.a).length,a=0;a<s;++a)if(p=i[a],null==n?null==p:n===p)throw u.c(new g.eH(n,null));i.push(n)},aq:function(n){var i,a;if(!this.c6(n)){this.ay(n);try{if(i=this.b.$1(n),!this.c6(i))throw u.c(new g.br(n,null));if(0>=(a=this.a).length)return u.e(a,-1);a.pop()}catch(y){throw a=u.z(y),u.c(new g.br(n,a))}}},c6:function(n){var i,s;return"number"==typeof n?!!isFinite(n)&&(this.c.j+=P.d.i(n),!0):!0===n?(this.c.j+="true",!0):!1===n?(this.c.j+="false",!0):null==n?(this.c.j+="null",!0):"string"==typeof n?((i=this.c).j+='"',this.c7(n),i.j+='"',!0):(i=$.j(n)).$isi?(this.ay(n),this.e6(n),0>=(i=this.a).length?u.e(i,-1):(i.pop(),!0)):!!i.$isW&&(this.ay(n),s=this.e7(n),0>=(i=this.a).length?u.e(i,-1):(i.pop(),s))},e6:function(n){var i,s,a;if((i=this.c).j+="[",(s=$.F(n)).gk(n)>0)for(this.aq(s.h(n,0)),a=1;a<s.gk(n);++a)i.j+=",",this.aq(s.h(n,a));i.j+="]"},e7:function(n){var i,s,a,p,y,m;if(i={},n.gw(n))return this.c.j+="{}",!0;if(s=2*n.gk(n),a=new Array(s),i.a=0,i.b=!0,n.S(0,new g.h0(i,a)),!i.b)return!1;for((i=this.c).j+="{",p='"',y=0;y<s;y+=2,p=',"'){if(i.j+=p,this.c7(a[y]),i.j+='":',(m=y+1)>=s)return u.e(a,m);this.aq(a[m])}return i.j+="}",!0}},h0:{"^":"f:5;a,b",$2:function(n,i){var s,a,p,y,m;return"string"!=typeof n&&(this.a.b=!1),s=this.b,(a=this.a).a=y=(p=a.a)+1,p>=(m=s.length)?u.e(s,p):(s[p]=n,a.a=y+1,y>=m?u.e(s,y):void(s[y]=i))}},fY:{"^":"h_;c,a,b",l:{fZ:function(n,i,s){var a,p;return a=new g.aI(""),p=g.hK(),new g.fY(a,[],p).aq(n),(p=a.j).charCodeAt(0),p}}}}],["","",,g,{"^":"",aw:function(n){return"number"==typeof n||"boolean"==typeof n||null==n?$.a3(n):"string"==typeof n?JSON.stringify(n):g.eb(n)},eb:function(n){var i=$.j(n);return i.$isf?i.i(n):u.b2(n)},aW:function(n){return new g.fH(n)},a7:function(n,i,s){var a,p;for(a=u.G([],[s]),p=$.aR(n);p.q();)a.push(p.gt());return a},aq:function(n){var i=u.a(n);u.i6(i)},eT:{"^":"f:13;a,b",$2:function(n,i){var s,a,p;(s=this.b).j+=(a=this.a).a,p=s.j+=u.a(n.gd_()),s.j=p+": ",s.j+=u.a(g.aw(i)),a.a=", "}},hH:{"^":"b;"},"+bool":0,aV:{"^":"b;a,b",m:function(n,i){return null!=i&&i instanceof g.aV&&this.a===i.a&&this.b===i.b},gp:function(n){var i=this.a;return 1073741823&(i^P.d.N(i,30))},i:function(n){var i,s,a,p,y,m,v,R;return s=g.e6((i=this.b)?u.y(this).getUTCFullYear()+0:u.y(this).getFullYear()+0),a=g.av(i?u.y(this).getUTCMonth()+1:u.y(this).getMonth()+1),p=g.av(i?u.y(this).getUTCDate()+0:u.y(this).getDate()+0),y=g.av(i?u.y(this).getUTCHours()+0:u.y(this).getHours()+0),m=g.av(i?u.y(this).getUTCMinutes()+0:u.y(this).getMinutes()+0),v=g.av(i?u.y(this).getUTCSeconds()+0:u.y(this).getSeconds()+0),R=g.e7(i?u.y(this).getUTCMilliseconds()+0:u.y(this).getMilliseconds()+0),i?s+"-"+a+"-"+p+" "+y+":"+m+":"+v+"."+R+"Z":s+"-"+a+"-"+p+" "+y+":"+m+":"+v+"."+R},v:function(n,i){return g.e5(P.d.K(this.a,i.ged()),this.b)},gdR:function(){return this.a},b3:function(n,i){var s=Math.abs(this.a);if(s=s>864e13)throw u.c(g.au(this.gdR()))},l:{e5:function(n,i){var s=new g.aV(n,i);return s.b3(n,i),s},e6:function(n){var i,s;return s=n<0?"-":"",(i=Math.abs(n))>=1e3?""+n:i>=100?s+"0"+u.a(i):i>=10?s+"00"+u.a(i):s+"000"+u.a(i)},e7:function(n){return n>=100?""+n:n>=10?"0"+n:"00"+n},av:function(n){return n>=10?""+n:"0"+n}}},a2:{"^":"aP;"},"+double":0,T:{"^":"b;a",K:function(n,i){return new g.T(P.a.K(this.a,i.gbf()))},W:function(n,i){return new g.T(P.a.W(this.a,i.gbf()))},U:function(n,i){return"number"!=typeof i?u.n(i):new g.T(P.d.aV(this.a*i))},at:function(n,i){if(0===i)throw u.c(new g.eh);return new g.T(P.a.at(this.a,i))},a2:function(n,i){return P.a.a2(this.a,i.gbf())},m:function(n,i){return null!=i&&i instanceof g.T&&this.a===i.a},gp:function(n){return 536870911&this.a},i:function(n){var i,s,a,p,y;return i=new g.ea,(s=this.a)<0?"-"+new g.T(-s).i(0):(a=i.$1(P.a.Z(s,6e7)%60),p=i.$1(P.a.Z(s,1e6)%60),y=(new g.e9).$1(s%1e6),P.a.Z(s,36e8)+":"+u.a(a)+":"+u.a(p)+"."+u.a(y))}},e9:{"^":"f:6;",$1:function(n){return n>=1e5?""+n:n>=1e4?"0"+n:n>=1e3?"00"+n:n>=100?"000"+n:n>=10?"0000"+n:"00000"+n}},ea:{"^":"f:6;",$1:function(n){return n>=10?""+n:"0"+n}},u:{"^":"b;",gV:function(){return u.B(this.$thrownJsError)}},cn:{"^":"u;",i:function(n){return"Throw of null."}},a4:{"^":"u;a,b,c,d",gaF:function(){return"Invalid argument"+(this.a?"":"(s)")},gaE:function(){return""},i:function(n){var i,s,a,p,y,m;return s=null!=(i=this.c)?" ("+u.a(i)+")":"",a=null==(i=this.d)?"":": "+u.a(i),p=this.gaF()+s+a,this.a?(y=this.gaE(),m=g.aw(this.b),p+y+": "+u.a(m)):p},l:{au:function(n){return new g.a4(!1,null,null,n)},bZ:function(n,i,s){return new g.a4(!0,n,i,s)}}},cv:{"^":"a4;e,f,a,b,c,d",gaF:function(){return"RangeError"},gaE:function(){var n,i,s;if(null==(n=this.e))i=null!=(n=this.f)?": Not less than or equal to "+u.a(n):"";else if(null==(s=this.f))i=": Not greater than or equal to "+u.a(n);else{if("number"!=typeof s)return s.ar();if("number"!=typeof n)return u.n(n);i=s>n?": Not in range "+n+".."+s+", inclusive":s<n?": Valid value range is empty":": Only valid value is "+n}return i},l:{b3:function(n,i,s){return new g.cv(null,null,!0,n,i,"Value not in range")},Z:function(n,i,s,a,p){return new g.cv(i,s,!0,n,a,"Invalid value")},cw:function(n,i,s,a,p,y){if(0>n||n>s)throw u.c(g.Z(n,0,s,"start",y));if(n>i||i>s)throw u.c(g.Z(i,n,s,"end",y));return i}}},eg:{"^":"a4;e,k:f>,a,b,c,d",gaF:function(){return"RangeError"},gaE:function(){if($.dv(this.b,0))return": index must not be negative";var n=this.f;return 0===n?": no indices are valid":": index should be less than "+u.a(n)},l:{aY:function(n,i,s,a,p){var y=p??$.at(i);return new g.eg(i,y,!0,n,s,"Index out of range")}}},eS:{"^":"u;a,b,c,d,e",i:function(n){var i,s,a,p,y,m,v,R;for(i={},s=new g.aI(""),i.a="",p=(a=this.c).length,y=0;y<p;++y)m=a[y],s.j+=i.a,s.j+=u.a(g.aw(m)),i.a=", ";return this.d.S(0,new g.eT(i,s)),v=g.aw(this.a),R=s.i(0),"NoSuchMethodError: method not found: '"+u.a(this.b.a)+"'\nReceiver: "+u.a(v)+"\nArguments: ["+R+"]"},l:{cl:function(n,i,s,a,p){return new g.eS(n,i,s,a,p)}}},q:{"^":"u;a",i:function(n){return"Unsupported operation: "+this.a}},cR:{"^":"u;a",i:function(n){var i=this.a;return null!=i?"UnimplementedError: "+u.a(i):"UnimplementedError"}},b6:{"^":"u;a",i:function(n){return"Bad state: "+this.a}},ah:{"^":"u;a",i:function(n){var i=this.a;return null==i?"Concurrent modification during iteration.":"Concurrent modification during iteration: "+u.a(g.aw(i))+"."}},cz:{"^":"b;",i:function(n){return"Stack Overflow"},gV:function(){},$isu:1},e4:{"^":"u;a",i:function(n){var i=this.a;return null==i?"Reading static variable during its initialization":"Reading static variable '"+u.a(i)+"' during its initialization"}},fH:{"^":"b;a",i:function(n){var i=this.a;return null==i?"Exception":"Exception: "+u.a(i)}},ee:{"^":"b;a,b,c",i:function(n){var i,s,a;return s=null!=(i=this.a)&&""!==i?"FormatException: "+u.a(i):"FormatException","string"!=typeof(a=this.b)?s:(a.length>78&&(a=$.dQ(a,0,75)+"..."),s+"\n"+u.a(a))}},eh:{"^":"b;",i:function(n){return"IntegerDivisionByZeroException"}},ec:{"^":"b;a,bm",i:function(n){return"Expando:"+u.a(this.a)},h:function(n,i){var s,a;return"string"!=typeof(s=this.bm)?((null==i||"boolean"==typeof i||"number"==typeof i||"string"==typeof i)&&u.p(g.bZ(i,"Expandos are not allowed on strings, numbers, booleans or null",null)),s.get(i)):null==(a=u.bw(i,"expando$values"))?null:u.bw(a,s)},n:function(n,i,s){var a,p;"string"!=typeof(a=this.bm)?a.set(i,s):(null==(p=u.bw(i,"expando$values"))&&(p=new g.b,u.cu(i,"expando$values",p)),u.cu(p,a,s))}},k:{"^":"aP;"},"+int":0,K:{"^":"b;$ti",a1:function(n,i){return u.b_(this,i,u.x(this,"K",0),null)},b_:function(n,i){return g.a7(this,!0,u.x(this,"K",0))},aZ:function(n){return this.b_(n,!0)},gk:function(n){var i,s;for(i=this.gA(this),s=0;i.q();)++s;return s},J:function(n,i){var s,a,p;for(i<0&&u.p(g.Z(i,0,null,"index",null)),s=this.gA(this),a=0;s.q();){if(p=s.gt(),i===a)return p;++a}throw u.c(g.aY(i,this,"index",null,a))},i:function(n){return g.et(this,"(",")")}},ev:{"^":"b;"},i:{"^":"b;$ti",$asi:null,$ish:1,$ash:null},"+List":0,eU:{"^":"b;",gp:function(n){return g.b.prototype.gp.call(this,this)},i:function(n){return"null"}},"+Null":0,aP:{"^":"b;"},"+num":0,b:{"^":";",m:function(n,i){return this===i},gp:function(n){return u.Y(this)},i:["cz",function(n){return u.b2(this)}],aS:function(n,i){throw u.c(g.cl(this,i.gbR(),i.gbW(),i.gbS(),null))},toString:function(){return this.i(this)}},aH:{"^":"b;"},H:{"^":"b;"},"+String":0,aI:{"^":"b;j@",gk:function(n){return this.j.length},i:function(n){var i=this.j;return i.charCodeAt(0),i},l:{cA:function(n,i,s){var a=$.aR(i);if(!a.q())return n;if(0===s.length)do{n+=u.a(a.gt())}while(a.q());else for(n+=u.a(a.gt());a.q();)n=n+s+u.a(a.gt());return n}}},aJ:{"^":"b;"}}],["","",,Tt,{"^":"",a0:function(n,i){return(n=536870911&(n=536870911&n+i)+((524287&n)<<10))^n>>>6},cY:function(n){return n=536870911&n+((67108863&n)<<3),536870911&(n^=n>>>11)+((16383&n)<<15)},hy:function(n){var i=w.l;return i===P.b?n:i.bF(n,!0)},P:{"^":"c5;","%":"HTMLAppletElement|HTMLBRElement|HTMLBaseElement|HTMLButtonElement|HTMLContentElement|HTMLDListElement|HTMLDataListElement|HTMLDetailsElement|HTMLDialogElement|HTMLDirectoryElement|HTMLDivElement|HTMLEmbedElement|HTMLFieldSetElement|HTMLFontElement|HTMLFrameElement|HTMLHRElement|HTMLHeadElement|HTMLHeadingElement|HTMLHtmlElement|HTMLIFrameElement|HTMLImageElement|HTMLKeygenElement|HTMLLIElement|HTMLLabelElement|HTMLLegendElement|HTMLLinkElement|HTMLMapElement|HTMLMarqueeElement|HTMLMenuElement|HTMLMenuItemElement|HTMLMetaElement|HTMLMeterElement|HTMLModElement|HTMLOListElement|HTMLObjectElement|HTMLOptGroupElement|HTMLOptionElement|HTMLOutputElement|HTMLParagraphElement|HTMLParamElement|HTMLPictureElement|HTMLPreElement|HTMLProgressElement|HTMLQuoteElement|HTMLScriptElement|HTMLShadowElement|HTMLSourceElement|HTMLSpanElement|HTMLStyleElement|HTMLTableCaptionElement|HTMLTableCellElement|HTMLTableColElement|HTMLTableDataCellElement|HTMLTableElement|HTMLTableHeaderCellElement|HTMLTableRowElement|HTMLTableSectionElement|HTMLTemplateElement|HTMLTextAreaElement|HTMLTitleElement|HTMLTrackElement|HTMLUListElement|HTMLUnknownElement|PluginPlaceholderElement;HTMLElement"},ic:{"^":"P;",i:function(n){return String(n)},$isd:1,"%":"HTMLAnchorElement"},ie:{"^":"P;",i:function(n){return String(n)},$isd:1,"%":"HTMLAreaElement"},bk:{"^":"d;",$isbk:1,"%":"Blob|File"},ig:{"^":"P;",$isd:1,"%":"HTMLBodyElement"},ih:{"^":"P;",ca:function(n,i,s){return n.getContext(i)},c9:function(n,i){return this.ca(n,i,null)},"%":"HTMLCanvasElement"},ii:{"^":"d;ab:fillStyle}",a7:function(n){return n.beginPath()},cb:function(n,i,s,a,p){return g.hJ(n.getImageData(i,s,a,p))},dX:function(n){return n.restore()},ce:function(n){return n.save()},cf:function(n,i,s){return n.scale(i,s)},e3:function(n,i,s){return n.translate(i,s)},dc:function(n){return n.closePath()},dS:function(n,i,s){return n.moveTo(i,s)},a6:function(n,i,s,a,p,y,m){n.arc(i,s,a,p,y,!0)},ds:function(n,i,s,a){return n.drawImage(i,s,a)},dw:function(n,i){},aa:function(n){return this.dw(n,"nonzero")},"%":"CanvasRenderingContext2D"},ij:{"^":"v;k:length=",$isd:1,"%":"CDATASection|CharacterData|Comment|ProcessingInstruction|Text"},ik:{"^":"ei;k:length=","%":"CSS2Properties|CSSStyleDeclaration|MSStyleCSSProperties"},ei:{"^":"d+e3;"},e3:{"^":"b;"},il:{"^":"v;",$isd:1,"%":"DocumentFragment|ShadowRoot"},im:{"^":"d;",i:function(n){return String(n)},"%":"DOMException"},e8:{"^":"d;",i:function(n){return"Rectangle ("+u.a(n.left)+", "+u.a(n.top)+") "+u.a(this.gE(n))+" x "+u.a(this.gC(n))},m:function(n,i){var s;return!(null==i||(s=$.j(i),!s.$isaG))&&n.left===s.gaR(i)&&n.top===s.gb0(i)&&this.gE(n)===s.gE(i)&&this.gC(n)===s.gC(i)},gp:function(n){var i,s,a,p;return i=n.left,s=n.top,a=this.gE(n),p=this.gC(n),Tt.cY(Tt.a0(Tt.a0(Tt.a0(Tt.a0(0,536870911&i),536870911&s),536870911&a),536870911&p))},gC:function(n){return n.height},gaR:function(n){return n.left},gb0:function(n){return n.top},gE:function(n){return n.width},$isaG:1,$asaG:Bt.t,"%":";DOMRectReadOnly"},c5:{"^":"v;",i:function(n){return n.localName},gbT:function(n){return new Tt.ba(n,"pause",!1,[Tt.O])},gbU:function(n){return new Tt.ba(n,"play",!1,[Tt.O])},$isd:1,"%":";Element"},io:{"^":"O;R:error=","%":"ErrorEvent"},O:{"^":"d;",$isO:1,"%":"AnimationEvent|AnimationPlayerEvent|ApplicationCacheErrorEvent|AudioProcessingEvent|AutocompleteErrorEvent|BeforeInstallPromptEvent|BeforeUnloadEvent|ClipboardEvent|CloseEvent|CompositionEvent|CrossOriginConnectEvent|CustomEvent|DefaultSessionStartEvent|DeviceLightEvent|DeviceMotionEvent|DeviceOrientationEvent|DragEvent|ExtendableEvent|FetchEvent|FocusEvent|FontFaceSetLoadEvent|GamepadEvent|GeofencingEvent|HashChangeEvent|IDBVersionChangeEvent|KeyboardEvent|MIDIConnectionEvent|MIDIMessageEvent|MediaEncryptedEvent|MediaKeyEvent|MediaKeyMessageEvent|MediaQueryListEvent|MediaStreamEvent|MediaStreamTrackEvent|MessageEvent|MouseEvent|NotificationEvent|OfflineAudioCompletionEvent|PageTransitionEvent|PeriodicSyncEvent|PointerEvent|PopStateEvent|ProgressEvent|PromiseRejectionEvent|PushEvent|RTCDTMFToneChangeEvent|RTCDataChannelEvent|RTCIceCandidateEvent|RTCPeerConnectionIceEvent|RelatedEvent|ResourceProgressEvent|SVGZoomEvent|SecurityPolicyViolationEvent|ServicePortConnectEvent|ServiceWorkerMessageEvent|SpeechRecognitionEvent|SpeechSynthesisEvent|StorageEvent|SyncEvent|TextEvent|TouchEvent|TrackEvent|TransitionEvent|UIEvent|WebGLContextEvent|WebKitTransitionEvent|WheelEvent|XMLHttpRequestProgressEvent;Event|InputEvent"},c6:{"^":"d;",cM:function(n,i,s,a){return n.addEventListener(i,u.ad(s,1),!1)},d3:function(n,i,s,a){return n.removeEventListener(i,u.ad(s,1),!1)},"%":"CrossOriginServiceWorkerClient|MediaStream;EventTarget"},iG:{"^":"P;k:length=","%":"HTMLFormElement"},ay:{"^":"d;aO:data=,C:height=,E:width=",$isay:1,"%":"ImageData"},iI:{"^":"P;",$isd:1,$isv:1,"%":"HTMLInputElement"},eR:{"^":"P;da:autoplay},R:error=","%":"HTMLAudioElement;HTMLMediaElement"},iX:{"^":"d;",$isd:1,"%":"Navigator"},v:{"^":"c6;",i:function(n){return n.nodeValue??this.cu(n)},$isv:1,$isb:1,"%":"Attr|Document|HTMLDocument|XMLDocument;Node"},j_:{"^":"P;k:length=","%":"HTMLSelectElement"},j0:{"^":"O;R:error=","%":"SpeechRecognitionError"},j5:{"^":"eR;e4:videoHeight=,e5:videoWidth=","%":"HTMLVideoElement"},bz:{"^":"c6;",$isbz:1,$isd:1,"%":"DOMWindow|Window"},jb:{"^":"d;C:height=,aR:left=,b0:top=,E:width=",i:function(n){return"Rectangle ("+u.a(n.left)+", "+u.a(n.top)+") "+u.a(n.width)+" x "+u.a(n.height)},m:function(n,i){var s,a,p;return!(null==i||(s=$.j(i),!s.$isaG))&&(a=n.left,p=s.gaR(i),(null==a?null==p:a===p)?(a=n.top,p=s.gb0(i),(null==a?null==p:a===p)?(a=n.width,p=s.gE(i),(null==a?null==p:a===p)?(a=n.height,s=s.gC(i),s=null==a?null==s:a===s):s=!1):s=!1):s=!1,s)},gp:function(n){var i,s,a,p;return i=$.N(n.left),s=$.N(n.top),a=$.N(n.width),p=$.N(n.height),Tt.cY(Tt.a0(Tt.a0(Tt.a0(Tt.a0(0,i),s),a),p))},$isaG:1,$asaG:Bt.t,"%":"ClientRect"},jc:{"^":"v;",$isd:1,"%":"DocumentType"},jd:{"^":"e8;",gC:function(n){return n.height},gE:function(n){return n.width},"%":"DOMRect"},jg:{"^":"P;",$isd:1,"%":"HTMLFrameSetElement"},jh:{"^":"ek;",gk:function(n){return n.length},h:function(n,i){if(i>>>0!==i||i>=n.length)throw u.c(g.aY(i,n,null,null,null));return n[i]},n:function(n,i,s){throw u.c(new g.q("Cannot assign element of immutable List."))},sk:function(n,i){throw u.c(new g.q("Cannot resize immutable List."))},J:function(n,i){return i<0||i>=n.length?u.e(n,i):n[i]},$isi:1,$asi:function(){return[Tt.v]},$ish:1,$ash:function(){return[Tt.v]},$isL:1,$asL:function(){return[Tt.v]},$isD:1,$asD:function(){return[Tt.v]},"%":"MozNamedAttrMap|NamedNodeMap"},ej:{"^":"d+aF;",$asi:function(){return[Tt.v]},$ash:function(){return[Tt.v]},$isi:1,$ish:1},ek:{"^":"ej+ef;",$asi:function(){return[Tt.v]},$ash:function(){return[Tt.v]},$isi:1,$ish:1},fE:{"^":"a_;$ti",ae:function(n,i,s,a){return Tt.bC(this.a,this.b,n,!1,u.ae(this,0))},bP:function(n,i,s){return this.ae(n,null,i,s)}},ba:{"^":"fE;a,b,c,$ti"},fF:{"^":"f8;a,b,c,d,e,$ti",al:function(){null!=this.b&&(this.bC(),this.b=null,this.d=null)},aT:function(n,i){null!=this.b&&(++this.a,this.bC())},bV:function(n){return this.aT(n,null)},gaP:function(){return this.a>0},bZ:function(){null==this.b||this.a<=0||(--this.a,this.bA())},bA:function(){var n,i;(i=null!=(n=this.d))&&this.a<=0&&(i&&$.dA(this.b,this.c,n,!1))},bC:function(){var n,i;(i=null!=(n=this.d))&&(i&&$.dB(this.b,this.c,n,!1))},cI:function(n,i,s,a,p){this.bA()},l:{bC:function(n,i,s,a,p){var y=null==s?null:Tt.hy(new Tt.fG(s));return(y=new Tt.fF(0,n,i,y,!1,[p])).cI(n,i,s,!1,p),y}}},fG:{"^":"f:1;a",$1:[function(n){return this.a.$1(n)},null,null,2,0,null,5,"call"]},ef:{"^":"b;$ti",gA:function(n){return new Tt.ed(n,n.length,-1,null)},v:function(n,i){throw u.c(new g.q("Cannot add to immutable List."))},$isi:1,$asi:null,$ish:1,$ash:null},ed:{"^":"b;a,b,c,d",q:function(){var n,i;return(n=this.c+1)<(i=this.b)?(i=this.a,n<0||n>=i.length?u.e(i,n):(this.d=i[n],this.c=n,!0)):(this.d=null,this.c=i,!1)},gt:function(){return this.d}}}],["","",,g,{"^":"",hJ:function(n){var i,s;return(i=$.j(n)).$isay?((s=i.gaO(n)).constructor===Array&&typeof CanvasPixelArray<"u"&&(s.constructor=CanvasPixelArray,s.BYTES_PER_ELEMENT=1),n):new g.hh(n.data,n.height,n.width)},hh:{"^":"b;aO:a>,C:b>,E:c>",$isay:1,$isd:1}}],["","",,g,{"^":"",bs:{"^":"d;",$isbs:1,"%":"IDBKeyRange"}}],["","",,g,{"^":"",hk:[function(n,i,s,a){var p,y;return!0===i&&(P.c.bD(p=[s],a),a=p),y=g.a7($.bX(a,g.i0()),!0,null),g.d3(u.eX(n,y))},null,null,8,0,null,20,21,22,23],bG:function(n,i,s){try{if(Object.isExtensible(n)&&!Object.prototype.hasOwnProperty.call(n,i))return Object.defineProperty(n,i,{value:s}),!0}catch(p){u.z(p)}return!1},d5:function(n,i){if(Object.prototype.hasOwnProperty.call(n,i))return n[i]},d3:[function(n){var i;return null==n||"string"==typeof n||"number"==typeof n||"boolean"==typeof n?n:(i=$.j(n)).$isaD?n.a:i.$isbk||i.$isO||i.$isbs||i.$isay||i.$isv||i.$isE||i.$isbz?n:i.$isaV?u.y(n):i.$isbn?g.d4(n,"$dart_jsFunction",new g.hm):g.d4(n,"_$dart_jsObject",new g.hn(w.$get$bF()))},"$1","i1",2,0,1,9],d4:function(n,i,s){var a=g.d5(n,i);return null==a&&(a=s.$1(n),g.bG(n,i,a)),a},d2:[function(n){var i,s;return null==n||"string"==typeof n||"number"==typeof n||"boolean"==typeof n?n:(i=n instanceof Object&&!!((i=$.j(n)).$isbk||i.$isO||i.$isbs||i.$isay||i.$isv||i.$isE||i.$isbz))?n:n instanceof Date?(s=n.getTime(),(i=new g.aV(s,!1)).b3(s,!1),i):n.constructor===w.$get$bF()?n.o:g.db(n)},"$1","i0",2,0,16,9],db:function(n){return"function"==typeof n?g.bH(n,w.$get$aU(),new g.hv):g.bH(n,w.$get$bB(),n instanceof Array?new g.hw:new g.hx)},bH:function(n,i,s){var a=g.d5(n,i);return(null==a||!(n instanceof Object))&&(a=s.$1(n),g.bG(n,i,a)),a},aD:{"^":"b;a",h:["cw",function(n,i){if("string"!=typeof i&&"number"!=typeof i)throw u.c(g.au("property is not a String or num"));return g.d2(this.a[i])}],n:["b2",function(n,i,s){if("string"!=typeof i&&"number"!=typeof i)throw u.c(g.au("property is not a String or num"));this.a[i]=g.d3(s)}],gp:function(n){return 0},m:function(n,i){return null!=i&&i instanceof g.aD&&this.a===i.a},i:function(n){try{return String(this.a)}catch(a){return u.z(a),this.cz(this)}},bG:function(n,i){var s,a;return s=this.a,a=null==i?null:g.a7(new u.b0(i,g.i1(),[null,null]),!0,null),g.d2(s[n].apply(s,a))}},eC:{"^":"aD;a"},eB:{"^":"eF;a,$ti",h:function(n,i){return"number"==typeof i&&i===P.a.ap(i)&&"number"==typeof i&&Math.floor(i)===i&&(i<0||i>=this.gk(this))&&u.p(g.Z(i,0,this.gk(this),null,null)),this.cw(0,i)},n:function(n,i,s){"number"==typeof i&&i===P.d.ap(i)&&"number"==typeof i&&Math.floor(i)===i&&(i<0||i>=this.gk(this))&&u.p(g.Z(i,0,this.gk(this),null,null)),this.b2(0,i,s)},gk:function(n){var i=this.a.length;if("number"==typeof i&&i>>>0===i)return i;throw u.c(new g.b6("Bad JsArray length"))},sk:function(n,i){this.b2(0,"length",i)},v:function(n,i){this.bG("push",[i])}},eF:{"^":"aD+aF;",$asi:null,$ash:null,$isi:1,$ish:1},hm:{"^":"f:1;",$1:function(n){var s,a,i=(s=g.hk,a=n,function(){return s(a,!1,this,Array.prototype.slice.apply(arguments))});return g.bG(i,w.$get$aU(),n),i}},hn:{"^":"f:1;a",$1:function(n){return new this.a(n)}},hv:{"^":"f:1;",$1:function(n){return new g.eC(n)}},hw:{"^":"f:1;",$1:function(n){return new g.eB(n,[null])}},hx:{"^":"f:1;",$1:function(n){return new g.aD(n)}}}],["","",,g,{"^":"",ib:{"^":"ax;",$isd:1,"%":"SVGAElement"},id:{"^":"m;",$isd:1,"%":"SVGAnimateElement|SVGAnimateMotionElement|SVGAnimateTransformElement|SVGAnimationElement|SVGSetElement"},ip:{"^":"m;u:result=",$isd:1,"%":"SVGFEBlendElement"},iq:{"^":"m;u:result=",$isd:1,"%":"SVGFEColorMatrixElement"},ir:{"^":"m;u:result=",$isd:1,"%":"SVGFEComponentTransferElement"},is:{"^":"m;u:result=",$isd:1,"%":"SVGFECompositeElement"},it:{"^":"m;u:result=",$isd:1,"%":"SVGFEConvolveMatrixElement"},iu:{"^":"m;u:result=",$isd:1,"%":"SVGFEDiffuseLightingElement"},iv:{"^":"m;u:result=",$isd:1,"%":"SVGFEDisplacementMapElement"},iw:{"^":"m;u:result=",$isd:1,"%":"SVGFEFloodElement"},ix:{"^":"m;u:result=",$isd:1,"%":"SVGFEGaussianBlurElement"},iy:{"^":"m;u:result=",$isd:1,"%":"SVGFEImageElement"},iz:{"^":"m;u:result=",$isd:1,"%":"SVGFEMergeElement"},iA:{"^":"m;u:result=",$isd:1,"%":"SVGFEMorphologyElement"},iB:{"^":"m;u:result=",$isd:1,"%":"SVGFEOffsetElement"},iC:{"^":"m;u:result=",$isd:1,"%":"SVGFESpecularLightingElement"},iD:{"^":"m;u:result=",$isd:1,"%":"SVGFETileElement"},iE:{"^":"m;u:result=",$isd:1,"%":"SVGFETurbulenceElement"},iF:{"^":"m;",$isd:1,"%":"SVGFilterElement"},ax:{"^":"m;",$isd:1,"%":"SVGCircleElement|SVGClipPathElement|SVGDefsElement|SVGEllipseElement|SVGForeignObjectElement|SVGGElement|SVGGeometryElement|SVGLineElement|SVGPathElement|SVGPolygonElement|SVGPolylineElement|SVGRectElement|SVGSwitchElement;SVGGraphicsElement"},iH:{"^":"ax;",$isd:1,"%":"SVGImageElement"},iL:{"^":"m;",$isd:1,"%":"SVGMarkerElement"},iM:{"^":"m;",$isd:1,"%":"SVGMaskElement"},iY:{"^":"m;",$isd:1,"%":"SVGPatternElement"},iZ:{"^":"m;",$isd:1,"%":"SVGScriptElement"},m:{"^":"c5;",gbT:function(n){return new Tt.ba(n,"pause",!1,[Tt.O])},gbU:function(n){return new Tt.ba(n,"play",!1,[Tt.O])},$isd:1,"%":"SVGComponentTransferFunctionElement|SVGDescElement|SVGDiscardElement|SVGFEDistantLightElement|SVGFEFuncAElement|SVGFEFuncBElement|SVGFEFuncGElement|SVGFEFuncRElement|SVGFEMergeNodeElement|SVGFEPointLightElement|SVGFESpotLightElement|SVGMetadataElement|SVGStopElement|SVGStyleElement|SVGTitleElement;SVGElement"},j1:{"^":"ax;",$isd:1,"%":"SVGSVGElement"},j2:{"^":"m;",$isd:1,"%":"SVGSymbolElement"},fd:{"^":"ax;","%":"SVGTSpanElement|SVGTextElement|SVGTextPositioningElement;SVGTextContentElement"},j3:{"^":"fd;",$isd:1,"%":"SVGTextPathElement"},j4:{"^":"ax;",$isd:1,"%":"SVGUseElement"},j6:{"^":"m;",$isd:1,"%":"SVGViewElement"},jf:{"^":"m;",$isd:1,"%":"SVGGradientElement|SVGLinearGradientElement|SVGRadialGradientElement"},ji:{"^":"m;",$isd:1,"%":"SVGCursorElement"},jj:{"^":"m;",$isd:1,"%":"SVGFEDropShadowElement"},jk:{"^":"m;",$isd:1,"%":"SVGMPathElement"}}],["","",,g,{"^":""}],["","",,g,{"^":""}],["","",,g,{"^":""}],["","",,pe,{"^":"",jr:[function(n){pe.fo(n)},"$1","i3",2,0,17,24],js:[function(){$.dz(w.$get$bL(),"topcodes_initVideoScanner",pe.i3())},"$0","dm",0,0,2],f4:{"^":"b;a,b,c",cg:function(n,i){var s,a,p,y,m,v,R,d;for(this.a=n,this.b=$.dI(n),this.c=$.dF(this.a),s=this.e1(),a=u.G([],[pe.cF]),p=s.length,y=0;y<s.length;s.length===p||(0,u.aQ)(s),++y)if(!this.dT(a,(m=s[y]).a,m.b)&&((v=new pe.cF(-1,9,0,0,0,[0,0,0,0,0,0,0,0])).dg(this,m.a,m.b),v.a>0)){if((R=v.d)>(d=8*v.b/2)){if("number"!=typeof(d=$.ar(this.b,d)))return u.n(d);if(R<d)if((R=v.e)>(d=8*v.b/2)){if("number"!=typeof(d=$.ar(this.c,d)))return u.n(d);R=d=R<d}else R=!1;else R=!1}else R=!1;R&&a.push(v)}return a},dT:function(n,i,s){var a,p,y,m;for(a=n.length,p=$.I(i),y=$.I(s),m=0;m<n.length;n.length===a||(0,u.aQ)(n),++m)if(n[m].de(0,p.aY(i),y.aY(s)))return!0;return!1},e1:function(){var n,i,s,p,m,v,R,d,T,E,I,M,X,F,Qt,ce,_t;for(n=u.G([],[pe.c1]),i=null,s=null,p=null,m=128,v=null,R=0;;){if("number"!=typeof(d=this.c))return u.n(d);if(!(R<d))break;if(T=(d=R%2==0)?0:$.ar(this.b,1),"number"!=typeof(E=this.b))return u.n(E);for(T=$.Q(T,R*E),I=0,M=0,X=0,F=0,Qt=0;;){if("number"!=typeof(E=this.b))return u.n(E);if(!(Qt<E))break;if(E=$.S(this.a),(_t=(ce=$.bN(T)).U(T,4))>>>0!==_t||_t>=E.length)return u.e(E,_t);if(i=E[_t],_t=$.S(this.a),(E=$.Q(ce.U(T,4),1))>>>0!==E||E>=_t.length)return u.e(_t,E);if(s=_t[E],E=$.S(this.a),(_t=$.Q(ce.U(T,4),2))>>>0!==_t||_t>=E.length||(m+=(p=i+s+E[_t])-P.a.N(m,3),i&=254,p=p<.975*P.a.N(m,3)?0:1,E=$.S(this.a),(_t=ce.U(T,4))>>>0!==_t||_t>=E.length))return u.e(E,_t);switch(E[_t]=i+p,F){case 0:0===p&&(I=1,M=0,X=0,F=1);break;case 1:0===p?++I:(M=1,F=2);break;case 2:0===p?(X=1,F=3):++M;break;case 3:0===p?++X:((E=I>=4&&X>=4&&M>=6&&((_t=(E=I+X)-M)<=E&&_t<=M&&X-I<=I&&I-X<=X))&&(v=1+X+(M>>>1),v=d?ce.W(T,v):ce.K(T,v),n.push(new pe.c1($.dw(v,this.b),R))),I=X,M=1,X=0,F=2)}T=ce.K(T,d?1:-1),++Qt}++R}return n},cc:function(n,i){var s,a,p,y,m,R,d,T;if(n>=1){if("number"!=typeof(s=$.ar(this.b,2)))return u.n(s);if(n>s)s=!0;else if(i>=1){if("number"!=typeof(s=$.ar(this.c,2)))return u.n(s);s=i>s}else s=!0}else s=!0;if(s)return 0;for(a=i-1,s=i+1,p=n-1,y=n+1,m=0;a<=s;++a)for(R=p;R<=y;++R){if(d=$.S(this.a),"number"!=typeof(T=this.b))return u.n(T);if((T=4*(a*T+R))>>>0!==T||T>=d.length)return u.e(d,T);m+=255*(1&d[T])}return P.a.Z(m,9)},an:function(n,i,s,a){var p,y,m,v,R,d;if(p=$.dx(i,this.b),"number"!=typeof n)return u.n(n);if(y=p+n,p=$.S(this.a),(m=4*y)>>>0!==m||m>=p.length)return u.e(p,m);for(v=1&p[m],R=0,d=!1;;){if("number"!=typeof(p=this.b))return u.n(p);if(++R,(y+=s+a*p)<=0)p=!0;else{if("number"!=typeof(m=this.c))return u.n(m);p=m=y>=p*m}if(p)return R;if(p=$.S(this.a),(m=4*y)>>>0!==m||m>=p.length)return u.e(p,m);if((1&p[m])!==v){if(d)return R;if(m>=(p=$.S(this.a)).length)return u.e(p,m);v=1&p[m],d=!0}}}},c1:{"^":"b;a,b"},cF:{"^":"b;a,b,c,d,e,f",e2:function(){return g.V(["code",this.a,"x",this.d,"y",this.e,"radius",8*this.b/2,"angle",this.c])},de:function(n,i,s){var a,p,y;return(a=this.d-i)*a+(p=this.e-s)*p<=(y=4*this.b)*y},dg:function(n,i,s){var a,p,y,m,v,R,d,T,E,I,M;if(a=n.an(i,s,0,-1),p=n.an(i,s,0,1),y=n.an(i,s,-1,0),m=n.an(i,s,1,0),this.d=$.bY(i),v=$.bY(s),this.e=v,R=this.d,"number"!=typeof m)return m.W();if("number"!=typeof y)return u.n(y);if(this.d=R+(m-y)/2,"number"!=typeof p)return p.W();if("number"!=typeof a)return u.n(a);for(this.e=v+(p-a)/2,this.b=(m+y+a+p)/8,this.a=-1,d=0,T=0,E=0;E<5;++E)(M=this.bX(n,this.b,I=.483321946706122*E/5))>d&&(T=I,d=M);return d>0&&(this.bX(n,this.b,T),this.a=this.dY(this.a,T)),this.a},bX:function(n,i,s){var a,p,y,m,v,R,d,T,E,I,M,X,F,Ge,x;for(this.a=-1,a=this.f,p=null,y=0,m=null,v=null,R=0,d=0,T=0;T<13;++T){for(E=.483321946706122*T+s,I=Math.cos(E),M=Math.sin(E),X=0;X<8;++X)m=P.a.ap(P.d.aV(this.d+I*(p=(X-3.5)*i))),v=P.a.ap(P.d.aV(this.e+M*p)),a[X]=n.cc(m,v);if((E=a[1])<=128||a[3]<=128||a[4]<=128||a[6]<=128||(F=a[2])>128||a[5]>128)return 0;Ge=a[7],y=y+(E+a[3]+a[4]+a[6]+(255-F)+(255-a[5]))+Math.abs(2*Ge-255),d+=x=Ge>128?1:0,R=(R<<1>>>0)+x}return 5===d?(this.a=R,y):0},dY:function(n,i){var s,a;for(this.c=0,s=n,a=1;a<=13;++a)(n=(n<<1&8191|P.a.N(n,12))>>>0)<s&&(this.c=.483321946706122*a,s=n);return this.c+=i-.241660973353061,s},dr:function(n,i){var s,a,p,y,m,v,R;for(s=this.a,p=8*(a=this.b*i)*.5,y=this.c,(m=$.o(n)).sab(n,"white"),m.a7(n),m.a6(n,this.d,this.e,p,0,6.283185307179586,!0),m.aa(n),v=0;v<13;++v)R=-.483321946706122*v+y,m.sab(n,(1&s)>0?"white":"black"),m.a7(n),m.dS(n,this.d,this.e),m.a6(n,this.d,this.e,p,R,R-.483321946706122,!0),m.dc(n),m.aa(n),s=P.a.N(s,1);m.sab(n,"white"),m.a7(n),m.a6(n,this.d,this.e,p-a,0,6.283185307179586,!0),m.aa(n),m.sab(n,"black"),m.a7(n),m.a6(n,this.d,this.e,p-2*a,0,6.283185307179586,!0),m.aa(n),m.sab(n,"white"),m.a7(n),m.a6(n,this.d,this.e,p-3*a,0,6.283185307179586,!0),m.aa(n)},dq:function(n){return this.dr(n,1)}},fn:{"^":"b;a,b,c,d,e,f,r",ec:[function(n){var i,s,a,p,y,m,v;for($.dN(this.b),$.dR(this.b,$.bj(this.c),0),$.dO(this.b,-1,1),$.dD(this.b,this.c,0,0),$.dM(this.b),i=$.dK(this.b,0,0,$.bj(this.c),$.bW(this.c)),s=this.e.cg(i,this.b),p=g.V(["canvasId",a=this.a,"topcodes",[]]),y=s.length,m=0;m<s.length;s.length===y||(0,u.aQ)(s),++m)(v=s[m]).dq(this.b),$.dC(p.h(0,"topcodes"),v.e2());$.bU(w.$get$bL(),"TopCodes").bG("_relayFrameData",[a,P.z.dt(p)])},"$1","gd4",2,0,14],cG:function(n){var i,s,a,p;this.e=new pe.f4(null,null,null),s="#"+u.a(i=this.a),p=(a=document).querySelector(s),this.b=$.dJ(p,"2d"),(s=a.createElement("video")).id=u.a(i)+"-video",this.c=s,$.dP(s,!0),(i=(s=this.c).style).display="none",a.body.appendChild(s),this.f=u.ct(p.getAttribute("width"),null,null),this.r=u.ct(p.getAttribute("height"),null,null),i=$.dH(this.c),Tt.bC(i.a,i.b,new pe.fp(this),!1,u.ae(i,0)),i=$.dG(this.c),Tt.bC(i.a,i.b,new pe.fq(this),!1,u.ae(i,0))},l:{fo:function(n){var i=new pe.fn(n,null,null,null,null,null,null);return i.cG(n),i}}},fp:{"^":"f:1;a",$1:function(n){var i=this.a;g.aq("video width: "+u.a($.bj(i.c))),g.aq("video height: "+u.a($.bW(i.c))),i.d=g.fk(P.p,i.gd4())}},fq:{"^":"f:1;a",$1:function(n){var i;g.aq("pause"),(i=this.a).d?.al(),i.d=null}}},1]];(function Me(n,i){"use strict";function s(Y,V,rt){var ft,lt=Y.split("-"),N=lt[0],et=N.length,q=N.charCodeAt(et-1);if(ft=lt.length>1,q=q>=60&&q<=64?q-59:q>=123&&q<=126?q-117:q>=37&&q<=43?q-27:0){var $t=3&q,yt=q>>2,dt=N=N.substring(0,et-1),ie=N.indexOf(":");if(ie>0&&(dt=N.substring(0,ie),N=N.substring(ie+1)),$t){var D=rt+".prototype.g"+dt+"=",te="function("+(2&$t?"r":"")+"){return "+(1&$t?"this":"r")+"."+N+"}";V.push(ft?D+"$reflectable("+te+");\n":D+te+";\n")}yt&&(D=rt+".prototype.s"+dt+"=",te="function("+(2&yt?"r,v":"v")+"){"+(1&yt?"this":"r")+"."+N+"=v}",V.push(ft?D+"$reflectable("+te+");\n":D+te+";\n"))}return N}function a(Y,V){for(var rt=[],lt="function "+Y+"(",N="",et="",q=0;q<V.length;q++){0!=q&&(lt+=", ");var ft=s(V[q],rt,Y);et+="'"+ft+"',";var $t="p_"+ft;lt+=$t,N+="this."+ft+" = "+$t+";\n"}return l&&(N+="this.$deferredAction();"),lt+=") {\n"+N+"}\n",lt+=Y+'.builtin$cls="'+Y+'";\n',lt+="$desc=$collectedClasses."+Y+"[1];\n",lt+=Y+".prototype = $desc;\n","string"!=typeof a.name&&(lt+=Y+'.name="'+Y+'";\n'),(lt+=Y+".$__fields__=["+et+"];\n")+rt.join("")}O.createNewIsolate=function(){return new Bt},O.classIdExtractor=function(Y){return Y.constructor.name},O.classFieldsExtractor=function(Y){var V=Y.constructor.$__fields__;if(!V)return[];var rt=[];rt.length=V.length;for(var lt=0;lt<V.length;lt++)rt[lt]=Y[V[lt]];return rt},O.instanceFromClassId=function(Y){return new O.allClasses[Y]},O.initializeEmptyInstance=function(Y,V,rt){return O.allClasses[Y].apply(V,rt),V};var p=l?function(Y,V){var rt=Y.prototype;return rt.__proto__=V.prototype,rt.constructor=Y,rt["$is"+Y.name]=Y,Mt(rt)}:function(){function Y(){}return function(V,rt){Y.prototype=rt.prototype;var lt=new Y;wn(lt);for(var N=V.prototype,et=Object.keys(N),q=0;q<et.length;q++){var ft=et[q];lt[ft]=N[ft]}return lt["$is"+V.name]=V,lt.constructor=V,V.prototype=lt,lt}}();function m(){for(var Y=this;!Y.hasOwnProperty("$deferredAction");)Y=Y.__proto__;delete Y.$deferredAction;for(var V=Object.keys(Y),rt=0;rt<V.length;rt++){var et,lt=V[rt],N=lt.charCodeAt(0);"^"!==lt&&"$reflectable"!==lt&&43!==N&&42!==N&&null!=(et=Y[lt])&&et.constructor===Array&&"<>"!==lt&&T(Y,et,lt,!1,[])}Mt(Y),(Y=Y.__proto__).$deferredAction()}function R(Y,V,rt){V=wn(V);for(var lt,N=Object.keys(V),et=!1,q=l&&"b"!=Y,ft=0;ft<N.length;ft++){var $t=N[ft],yt=$t.charCodeAt(0);if("l"===$t)d(O.statics[Y]=V.l,rt),delete V.l;else if(43===yt){F[lt]=$t.substring(1);var dt=V[$t];dt>0&&(V[lt].$reflectable=dt)}else if(42===yt){V[lt].$defaultValues=V[$t];var ie=V.$methodsWithOptionalArguments;ie||(V.$methodsWithOptionalArguments=ie={}),ie[$t]=lt}else{var jt=V[$t];"^"!==$t&&null!=jt&&jt.constructor===Array&&"<>"!==$t?q?et=!0:T(V,jt,$t,!1,[]):lt=$t}}et&&(V.$deferredAction=m);var Ot,D,Kt,te=V["^"],Ue=te.split(";");if(te=Ue[1]?Ue[1].split(","):[],2==(Ot=(D=Ue[0]).split(":")).length){D=Ot[0];var Uo=Ot[1];Uo&&(V.$signature=(Kt=Uo,function(){return O.types[Kt]}))}D&&(rt.pending[Y]=D),rt.combinedConstructorFunction+=a(Y,te),rt.constructorsList.push(Y),rt.collected[Y]=[un,V],On.push(Y)}function d(Y,V){for(var rt=Object.keys(Y),lt=0;lt<rt.length;lt++){var N=rt[lt];if("^"!==N){var ft,et=Y[N],q=N.charCodeAt(0);if(43===q){Qt[ft]=N.substring(1);var $t=Y[N];$t>0&&(Y[ft].$reflectable=$t),et&&et.length&&(O.typeInformation[ft]=et)}else if(42===q){un[ft].$defaultValues=et;var yt=Y.$methodsWithOptionalArguments;yt||(Y.$methodsWithOptionalArguments=yt={}),yt[N]=ft}else"function"==typeof et?(un[ft=N]=et,Eo.push(N),O.globalFunctions[N]=et):et.constructor===Array?T(un,et,N,!0,Eo):(ft=N,R(N,et,V))}}}function T(Y,V,rt,lt,N){var ft,et=0,q=V[et];"string"==typeof q?ft=V[++et]:(ft=q,q=rt);var $t=[Y[rt]=Y[q]=ft];for(ft.$stubName=rt,N.push(rt),et++;et<V.length&&"function"==typeof(ft=V[et]);et++)lt||(ft.$stubName=V[++et]),$t.push(ft),ft.$stubName&&(Y[ft.$stubName]=ft,N.push(ft.$stubName));for(var yt=0;yt<$t.length;et++,yt++)$t[yt].$callName=V[et];var dt=V[et],ie=(V=V.slice(++et))[0],jt=ie>>1,Ot=3===ie,D=1===ie,Ue=V[1]>>1,Kt=jt+Ue!=$t[0].length,Ho=V[2];"number"==typeof Ho&&(V[2]=Ho+i);var vo=2*Ue+jt+3;if(dt&&(ft=function I(Y,V,rt,lt,N){var et;return rt?function(){return void 0===et&&(et=u.bK(this,Y,V,!0,[],lt).prototype),et}:function E(Y,V,rt,lt){return lt?new Function("funcs","reflectionInfo","name","H","c","return function tearOff_"+rt+M+++"(x) {if (c === null) c = H.bK(this, funcs, reflectionInfo, false, [x], name);return new c(this, funcs[0], x, name);}")(Y,V,rt,u,null):new Function("funcs","reflectionInfo","name","H","c","return function tearOff_"+rt+M+++"() {if (c === null) c = H.bK(this, funcs, reflectionInfo, false, [], name);return new c(this, funcs[0], null, name);}")(Y,V,rt,u,null)}(Y,V,lt,N)}($t,V,lt,rt,Kt),Y[rt].$getter=ft,ft.$getterStub=!0,lt&&(O.globalFunctions[rt]=ft,N.push(dt)),Y[dt]=ft,$t.push(ft),ft.$stubName=dt,ft.$callName=null),V.length>vo){for($t[0].$reflectable=1,$t[0].$reflectionInfo=V,yt=1;yt<$t.length;yt++)$t[yt].$reflectable=2,$t[yt].$reflectionInfo=V;var ve=lt?O.mangledGlobalNames:O.mangledNames,re=V[vo],de=re;dt&&(ve[dt]=de),Ot?de+="=":D||(de+=":"+(jt+Ue)),ve[rt]=de,$t[0].$reflectionName=de,$t[0].$metadataIndex=vo+1,Ue&&(Y[re+"*"]=$t[0])}}var M=0;O.libraries||(O.libraries=[]),O.mangledNames||(O.mangledNames=_()),O.mangledGlobalNames||(O.mangledGlobalNames=_()),O.statics||(O.statics=_()),O.typeInformation||(O.typeInformation=_()),O.globalFunctions||(O.globalFunctions=_());var X=O.libraries,F=O.mangledNames,Qt=O.mangledGlobalNames,ce=Object.prototype.hasOwnProperty,_t=n.length,Fe=_();Fe.collected=_(),Fe.pending=_(),Fe.constructorsList=[],Fe.combinedConstructorFunction="function $reflectable(fn){fn.$reflectable=1;return fn};\nvar $desc;\n";for(var Ge=0;Ge<_t;Ge++){var x=n[Ge],To=x[0],Mn=x[1],bi=x[2],un=x[3],f=x[4],ti=!!x[5],ko=f&&f["^"];ko instanceof Array&&(ko=ko[0]);var On=[],Eo=[];d(f,Fe),X.push([To,Mn,On,Eo,bi,ko,ti,un])}!function y(Y){var V=O.allClasses;Y.combinedConstructorFunction+="return [\n"+Y.constructorsList.join(",\n  ")+"\n]";var rt=new Function("$collectedClasses",Y.combinedConstructorFunction)(Y.collected);Y.combinedConstructorFunction=null;for(var lt=0;lt<rt.length;lt++){var N=rt[lt],et=N.name,q=Y.collected[et],ft=q[0];q=q[1],V[et]=N,ft[et]=N}rt=null;var $t=O.finishedClasses;function yt(ie){if(!$t[ie]){$t[ie]=!0;var jt=Y.pending[ie];if(jt&&jt.indexOf("+")>0){var B=jt.split("+");jt=B[0];var Ot=B[1];yt(Ot);for(var te=V[Ot].prototype,Ue=V[ie].prototype,Uo=Object.keys(te),Kt=0;Kt<Uo.length;Kt++){var Ho=Uo[Kt];ce.call(Ue,Ho)||(Ue[Ho]=te[Ho])}}if(!jt||"string"!=typeof jt)return(ve=(io=V[ie]).prototype).constructor=io,ve.$isb=io,void(ve.$deferredAction=function(){});yt(jt);var vo=V[jt];vo||(vo=existingIsolateProperties[jt]);var io,ve=p(io=V[ie],vo);if(te&&(ve.$deferredAction=function v(Y,V){var rt;return V.hasOwnProperty("$deferredAction")&&(rt=V.$deferredAction),function(){if(l){for(var N=this;!N.hasOwnProperty("$deferredAction");)N=N.__proto__;rt?N.$deferredAction=rt:(delete N.$deferredAction,Mt(N)),Y.$deferredAction(),N.$deferredAction()}}}(te,ve)),Object.prototype.hasOwnProperty.call(ve,"%")){var re=ve["%"].split(";");if(re[0]){var de=re[0].split("|");for(Kt=0;Kt<de.length;Kt++)O.interceptorsByTag[de[Kt]]=io,O.leafTags[de[Kt]]=!0}if(re[1]){if(de=re[1].split("|"),re[2]){var Hn=re[2].split("|");for(Kt=0;Kt<Hn.length;Kt++)V[Hn[Kt]].$nativeSuperclassTag=de[0]}for(Kt=0;Kt<de.length;Kt++)O.interceptorsByTag[de[Kt]]=io,O.leafTags[de[Kt]]=!1}ve.$deferredAction()}ve.$isd&&ve.$deferredAction()}}var dt=Object.keys(Y.pending);for(lt=0;lt<dt.length;lt++)yt(dt[lt])}(Fe)})(Go,0),$.j=function(n){return"number"==typeof n?Math.floor(n)==n?$.cc.prototype:$.ex.prototype:"string"==typeof n?$.aB.prototype:null==n?$.ez.prototype:"boolean"==typeof n?$.ew.prototype:n.constructor==Array?$.az.prototype:"object"!=typeof n?"function"==typeof n?$.aC.prototype:n:n instanceof g.b?n:$.be(n)},$.F=function(n){return"string"==typeof n?$.aB.prototype:null==n?n:n.constructor==Array?$.az.prototype:"object"!=typeof n?"function"==typeof n?$.aC.prototype:n:n instanceof g.b?n:$.be(n)},$.aO=function(n){return null==n?n:n.constructor==Array?$.az.prototype:"object"!=typeof n?"function"==typeof n?$.aC.prototype:n:n instanceof g.b?n:$.be(n)},$.I=function(n){return"number"==typeof n?$.aA.prototype:null==n||n instanceof g.b?n:$.aK.prototype},$.bN=function(n){return"number"==typeof n?$.aA.prototype:"string"==typeof n?$.aB.prototype:null==n||n instanceof g.b?n:$.aK.prototype},$.hN=function(n){return"string"==typeof n?$.aB.prototype:null==n||n instanceof g.b?n:$.aK.prototype},$.o=function(n){return null==n?n:"object"!=typeof n?"function"==typeof n?$.aC.prototype:n:n instanceof g.b?n:$.be(n)},$.Q=function(n,i){return"number"==typeof n&&"number"==typeof i?n+i:$.bN(n).K(n,i)},$.R=function(n,i){return null==n?null==i:"object"!=typeof n?null!=i&&n===i:$.j(n).m(n,i)},$.du=function(n,i){return"number"==typeof n&&"number"==typeof i?n>i:$.I(n).ar(n,i)},$.dv=function(n,i){return"number"==typeof n&&"number"==typeof i?n<i:$.I(n).a2(n,i)},$.dw=function(n,i){return $.I(n).cd(n,i)},$.dx=function(n,i){return"number"==typeof n&&"number"==typeof i?n*i:$.bN(n).U(n,i)},$.bT=function(n,i){return $.I(n).cq(n,i)},$.ar=function(n,i){return"number"==typeof n&&"number"==typeof i?n-i:$.I(n).W(n,i)},$.dy=function(n,i){return"number"==typeof n&&"number"==typeof i?(n^i)>>>0:$.I(n).cC(n,i)},$.bU=function(n,i){return"number"==typeof i&&(n.constructor==Array||"string"==typeof n||u.dj(n,n[O.dispatchPropertyName]))&&i>>>0===i&&i<n.length?n[i]:$.F(n).h(n,i)},$.dz=function(n,i,s){return"number"==typeof i&&(n.constructor==Array||u.dj(n,n[O.dispatchPropertyName]))&&!n.immutable$list&&i>>>0===i&&i<n.length?n[i]=s:$.aO(n).n(n,i,s)},$.dA=function(n,i,s,a){return $.o(n).cM(n,i,s,a)},$.dB=function(n,i,s,a){return $.o(n).d3(n,i,s,a)},$.dC=function(n,i){return $.aO(n).v(n,i)},$.dD=function(n,i,s,a){return $.o(n).ds(n,i,s,a)},$.dE=function(n,i){return $.aO(n).J(n,i)},$.S=function(n){return $.o(n).gaO(n)},$.as=function(n){return $.o(n).gR(n)},$.N=function(n){return $.j(n).gp(n)},$.dF=function(n){return $.o(n).gC(n)},$.aR=function(n){return $.aO(n).gA(n)},$.at=function(n){return $.F(n).gk(n)},$.dG=function(n){return $.o(n).gbT(n)},$.dH=function(n){return $.o(n).gbU(n)},$.bV=function(n){return $.o(n).gu(n)},$.bW=function(n){return $.o(n).ge4(n)},$.bj=function(n){return $.o(n).ge5(n)},$.dI=function(n){return $.o(n).gE(n)},$.dJ=function(n,i){return $.o(n).c9(n,i)},$.dK=function(n,i,s,a,p){return $.o(n).cb(n,i,s,a,p)},$.bX=function(n,i){return $.aO(n).a1(n,i)},$.dL=function(n,i){return $.j(n).aS(n,i)},$.dM=function(n){return $.o(n).dX(n)},$.dN=function(n){return $.o(n).ce(n)},$.dO=function(n,i,s){return $.o(n).cf(n,i,s)},$.dP=function(n,i){return $.o(n).sda(n,i)},$.dQ=function(n,i,s){return $.hN(n).a3(n,i,s)},$.bY=function(n){return $.I(n).aY(n)},$.a3=function(n){return $.j(n).i(n)},$.dR=function(n,i,s){return $.o(n).e3(n,i,s)},Bt.bg=function(n){return n.immutable$list=Array,n.fixed$length=Array,n};var w=Bt.p;function Mt(n){function i(){}return i.prototype=n,new i,n}function wn(n){return n.__MAGIC_SLOW_PROPERTY=1,delete n.__MAGIC_SLOW_PROPERTY,n}function O(){Bt.p=Object.create(null),O.allClasses=_(),O.getTypeFromName=function(n){return O.allClasses[n]},O.interceptorsByTag=_(),O.leafTags=_(),O.finishedClasses=_(),Bt.$lazy=function(n,i,s,a,p){O.lazies||(O.lazies=Object.create(null)),O.lazies[n]=i;var y={},m={};(p=p||Bt.p)[n]=y,p[i]=function(){var v=this[n];v==m&&u.i9(a||n);try{if(v===y){this[n]=m;try{v=this[n]=s()}finally{v===y&&(this[n]=null)}}return v}finally{this[i]=function(){return this[n]}}}},Bt.$finishIsolateConstructor=function(n){var i=n.p;function s(){for(var a=Object.keys(i),p=0;p<a.length;p++){var y=a[p];this[y]=i[y]}var m=O.lazies,v=m?Object.keys(m):[];for(p=0;p<v.length;p++)this[m[v[p]]]=null;function R(){}for(R.prototype=this,new R,p=0;p<v.length;p++){var d=m[v[p]];this[d]=i[d]}}return(s.prototype=n.prototype).constructor=s,s.p=i,s.bg=n.bg,s.t=n.t,s}}P.q=$.d.prototype,P.c=$.az.prototype,P.a=$.cc.prototype,P.d=$.aA.prototype,P.h=$.aB.prototype,P.y=$.aC.prototype,P.m=$.eV.prototype,P.e=$.aK.prototype,P.n=new u.c3,P.o=new g.fA,P.b=new g.hc,P.f=new g.T(0),P.p=new g.T(6e4),P.r=function(n){if("function"!=typeof dartExperimentalFixupGetTag)return n;n.getTag=dartExperimentalFixupGetTag(n.getTag)},P.t=function(n){if(-1==("object"==typeof navigator?navigator.userAgent:"").indexOf("Firefox"))return n;var s=n.getTag,a={BeforeUnloadEvent:"Event",DataTransfer:"Clipboard",GeoGeolocation:"Geolocation",Location:"!Location",WorkerMessageEvent:"MessageEvent",XMLDocument:"!Document"};n.getTag=function p(y){var m=s(y);return a[m]||m}},P.i=function(n){return n},P.u=function(n){return function(i){if("object"!=typeof navigator)return i;var s=navigator.userAgent;if(s.indexOf("DumpRenderTree")>=0)return i;if(s.indexOf("Chrome")>=0){let p=function(y){return"object"==typeof window&&window[y]&&window[y].name==y};if(p("Window")&&p("HTMLElement"))return i}i.getTag=n}},P.v=function(){var n=Object.prototype.toString;function s(v,R){if(/^HTML[A-Z].*Element$/.test(R))return"[object Object]"==n.call(v)?null:"HTMLElement"}return{getTag:function i(v){var R=n.call(v);return R.substring(8,R.length-1)},getUnknownTag:"object"==typeof navigator?function a(v,R){return self.HTMLElement&&v instanceof HTMLElement?"HTMLElement":s(v,R)}:s,prototypeForTag:function p(v){if(typeof window>"u"||typeof window[v]>"u")return null;var R=window[v];return"function"!=typeof R?null:R.prototype},discriminator:function y(v){return null}}},P.w=function(n){if(-1==("object"==typeof navigator?navigator.userAgent:"").indexOf("Trident/"))return n;var s=n.getTag,a={BeforeUnloadEvent:"Event",DataTransfer:"Clipboard",HTMLDDElement:"HTMLElement",HTMLDTElement:"HTMLElement",HTMLPhraseElement:"HTMLElement",Position:"Geoposition"};n.getTag=function p(m){var v=s(m);return a[v]||("Object"==v&&window.DataView&&m instanceof window.DataView?"DataView":v)},n.prototypeForTag=function y(m){var v=window[m];return null==v?null:v.prototype}},P.x=function(n){var i=n.getTag,s=n.prototypeForTag;n.getTag=function a(y){var m=i(y);return"Document"==m?y.xmlVersion?"!Document":"!HTMLDocument":m},n.prototypeForTag=function p(y){return"Document"==y?null:s(y)}},P.j=function(i){var s=Object.prototype.toString.call(i);return s.substring(8,s.length-1)},P.z=new g.eG(null,null),P.A=new g.eI(null,null),P.k=Bt.bg([]),P.B=u.G(Bt.bg([]),[g.aJ]),P.l=new u.e1(0,{},P.B,[g.aJ,null]),P.C=new u.bx("call"),w.cq="$cachedFunction",w.cr="$cachedInvocation",w.J=0,w.ag=null,w.c_=null,w.bQ=null,w.dc=null,w.dp=null,w.bd=null,w.bf=null,w.bR=null,w.ab=null,w.ak=null,w.al=null,w.bI=!1,w.l=P.b,w.c7=0,w=null,O.isHunkLoaded=function(n){return!!$dart_deferred_initializers$[n]},O.deferredInitialized=new Object(null),O.isHunkInitialized=function(n){return O.deferredInitialized[n]},O.initializeLoadedHunk=function(n){$dart_deferred_initializers$[n]($globals$,w),O.deferredInitialized[n]=!0},O.deferredLibraryUris={},O.deferredLibraryHashes={},function(n){for(var i=0;i<n.length;){var s=n[i++],a=n[i++],p=n[i++];Bt.$lazy(s,a,p)}}(["aU","$get$aU",function(){return u.bO("_$dart_dartClosure")},"bo","$get$bo",function(){return u.bO("_$dart_js")},"c9","$get$c9",function(){return u.er()},"ca","$get$ca",function(){if("function"==typeof WeakMap)var n=new WeakMap;else w.c7=(n=w.c7)+1,n="expando$key$"+n;return new g.ec(null,n)},"cG","$get$cG",function(){return u.M(u.b7({toString:function(){return"$receiver$"}}))},"cH","$get$cH",function(){return u.M(u.b7({$method$:null,toString:function(){return"$receiver$"}}))},"cI","$get$cI",function(){return u.M(u.b7(null))},"cJ","$get$cJ",function(){return u.M(function(){try{null.$method$("$arguments$")}catch(i){return i.message}}())},"cN","$get$cN",function(){return u.M(u.b7(void 0))},"cO","$get$cO",function(){return u.M(function(){try{(void 0).$method$("$arguments$")}catch(i){return i.message}}())},"cL","$get$cL",function(){return u.M(u.cM(null))},"cK","$get$cK",function(){return u.M(function(){try{null.$method$}catch(n){return n.message}}())},"cQ","$get$cQ",function(){return u.M(u.cM(void 0))},"cP","$get$cP",function(){return u.M(function(){try{(void 0).$method$}catch(n){return n.message}}())},"bA","$get$bA",function(){return g.fs()},"aX","$get$aX",function(){var n=new g.a8(0,g.fr(),null,[null]);return n.cK(null,null),n},"ao","$get$ao",function(){return[]},"bL","$get$bL",function(){return g.db(self)},"bB","$get$bB",function(){return u.bO("_$dart_dartObject")},"bF","$get$bF",function(){return function(i){this.o=i}}]),Bt=Bt.$finishIsolateConstructor(Bt),w=new Bt,O.metadata=["error","stackTrace",null,"_","object","e","x","value","data","o","sender","closure","isolate","numberOfArguments","arg1","arg2","arg3","arg4","each","arg","callback","captureThis","self","arguments","canvasId"],O.types=[{func:1},{func:1,args:[,]},{func:1,v:!0},{func:1,v:!0,args:[{func:1,v:!0}]},{func:1,v:!0,args:[,],opt:[g.aH]},{func:1,args:[,,]},{func:1,ret:g.H,args:[g.k]},{func:1,args:[g.H,,]},{func:1,args:[,g.H]},{func:1,args:[g.H]},{func:1,args:[{func:1,v:!0}]},{func:1,args:[,],opt:[,]},{func:1,v:!0,args:[,g.aH]},{func:1,args:[g.aJ,,]},{func:1,v:!0,args:[g.cC]},{func:1,v:!0,args:[,]},{func:1,ret:g.b,args:[,]},{func:1,v:!0,args:[g.H]}],fo=Mt(fo),Ye=Mt(Ye),P=Mt(P),ht=Mt(ht),Vt=Mt(Vt),je=Mt(je),pn=Mt(pn),u=Mt(u),$=Mt($),cn=Mt(cn),tt=Mt(tt),yo=Mt(yo),Po=Mt(Po),ot=Mt(ot),g=Mt(g),dn=Mt(dn),_n=Mt(_n),xn=Mt(xn),gn=Mt(gn),at=Mt(at),Fo=Mt(Fo),Tt=Mt(Tt),pe=Mt(pe),mo=Mt(mo),an=Mt(an),function(){var n=function(m){var v={};return v[m]=1,Object.keys(Mt(v))[0]};O.getIsolateTag=function(m){return n("___dart_"+m+O.isolateTag)};for(var i="___dart_isolate_tags_",s=Object[i]||(Object[i]=Object.create(null)),p=0;;p++){var y=n("_ZxYxX_"+p+"_");if(!(y in s)){s[y]=1,O.isolateTag=y;break}}O.dispatchPropertyName=O.getIsolateTag("dispatch_record")}(),function(n){if(typeof document>"u")n(null);else if(typeof document.currentScript<"u")n(document.currentScript);else for(var i=document.scripts,a=0;a<i.length;++a)i[a].addEventListener("load",s,!1);function s(p){for(var y=0;y<i.length;++y)i[y].removeEventListener("load",s,!1);n(p.target)}}(function(n){O.currentScript=n,"function"==typeof dartMainRunner?dartMainRunner(function(i){u.dr(pe.dm(),i)},[]):u.dr(pe.dm(),[])})}();var TopCodes={startStopVideoScan:function(l){TopCodes._mediaStreams[l]?TopCodes.stopVideoScan(l):TopCodes.startVideoScan(l)},startVideoScan:function(l){l in TopCodes._mediaStreams||topcodes_initVideoScanner(l);var _=document.querySelector("#"+l),fo=document.querySelector("#"+l+"-video");if(_&&fo){var Ye=parseInt(_.getAttribute("width")),P=parseInt(_.getAttribute("height")),ht={audio:!1,video:{mandatory:{minWidth:Ye,maxWidth:Ye,minHeight:P,maxHeight:P}}};_.getContext("2d").setTransform(-1,0,0,1,Ye,0),navigator.mediaDevices.getUserMedia(ht).then(function(je){fo.srcObject=je,TopCodes._mediaStreams[l]=je}).catch(function(je){console.log(je)})}},stopVideoScan:function(l){var _=document.querySelector("#"+l+"-video"),fo=TopCodes._mediaStreams[l];_&&fo&&(fo.getTracks().forEach(function(Ye){Ye.stop()}),TopCodes._mediaStreams[l]=null,_.pause())},setVideoFrameCallback:function(l,_){TopCodes._callbacks[l]=_},_relayFrameData:function(l,_){l in TopCodes._callbacks&&TopCodes._callbacks[l](_)},_mediaStreams:{},_callbacks:{}};
//# sourceMappingURL=scripts.f37c300cd35e6e71.js.map